; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	C:\Users\faelhs\mu-1.1\eMu - GameServer Sapphire S0\GameServer\EDSProtocol.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?gGuildListTotal@@3HA				; gGuildListTotal
PUBLIC	?gGuildListCount@@3HA				; gGuildListCount
PUBLIC	?GuildListhSts@@3PAUHWND__@@A			; GuildListhSts
PUBLIC	?GuildListhPrs@@3PAUHWND__@@A			; GuildListhPrs
PUBLIC	?GuildListhDlg@@3PAUHWND__@@A			; GuildListhDlg
_BSS	SEGMENT
?gGuildListTotal@@3HA DD 01H DUP (?)			; gGuildListTotal
?gGuildListCount@@3HA DD 01H DUP (?)			; gGuildListCount
?GuildListhSts@@3PAUHWND__@@A DD 01H DUP (?)		; GuildListhSts
?GuildListhPrs@@3PAUHWND__@@A DD 01H DUP (?)		; GuildListhPrs
?GuildListhDlg@@3PAUHWND__@@A DD 01H DUP (?)		; GuildListhDlg
_BSS	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?ExDataServerLogin@@YAXXZ			; ExDataServerLogin
EXTRN	?DataSend@wsJoinServerCli@@QAEHPADH@Z:PROC	; wsJoinServerCli::DataSend
EXTRN	?wsExDbCli@@3VwsJoinServerCli@@A:BYTE		; wsExDbCli
EXTRN	?szServerName@@3PADA:BYTE			; szServerName
EXTRN	?gGameServerCode@@3FA:WORD			; gGameServerCode
EXTRN	?GameServerPort@@3GA:WORD			; GameServerPort
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
;	COMDAT ?ExDataServerLogin@@YAXXZ
_TEXT	SEGMENT
_pInfo$ = -64						; size = 58
__$ArrayPad$ = -4					; size = 4
?ExDataServerLogin@@YAXXZ PROC				; ExDataServerLogin, COMDAT

; 196  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 197  : 	SDHP_SERVERINFO pInfo;
; 198  : 
; 199  : 	pInfo.h.c = 0xC1;
; 200  : 	pInfo.h.size = sizeof(SDHP_SERVERINFO);
; 201  : 	pInfo.h.headcode = 0x00;
; 202  : 	pInfo.Port = GameServerPort;

  00010	66 a1 00 00 00
	00		 mov	 ax, WORD PTR ?GameServerPort@@3GA ; GameServerPort

; 203  : 	pInfo.Type = 0x01;
; 204  : 	pInfo.ServerCode = gGameServerCode;

  00016	66 8b 0d 00 00
	00 00		 mov	 cx, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  0001d	66 89 45 c4	 mov	 WORD PTR _pInfo$[ebp+4], ax
  00021	c7 45 c0 c1 3a
	00 01		 mov	 DWORD PTR _pInfo$[ebp], 16792257 ; 01003ac1H
  00028	66 89 4d f8	 mov	 WORD PTR _pInfo$[ebp+56], cx

; 205  : 	strcpy(pInfo.ServerName, szServerName);

  0002c	33 c0		 xor	 eax, eax
  0002e	8b ff		 npad	 2
$LL3@ExDataServ:
  00030	8a 88 00 00 00
	00		 mov	 cl, BYTE PTR ?szServerName@@3PADA[eax]
  00036	88 4c 05 c6	 mov	 BYTE PTR _pInfo$[ebp+eax+6], cl
  0003a	40		 inc	 eax
  0003b	84 c9		 test	 cl, cl
  0003d	75 f1		 jne	 SHORT $LL3@ExDataServ

; 206  : 
; 207  : 	wsExDbCli.DataSend((char*)&pInfo, pInfo.h.size);

  0003f	0f b6 55 c1	 movzx	 edx, BYTE PTR _pInfo$[ebp+1]
  00043	52		 push	 edx
  00044	8d 45 c0	 lea	 eax, DWORD PTR _pInfo$[ebp]
  00047	50		 push	 eax
  00048	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  0004d	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 208  : }

  00052	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00055	33 cd		 xor	 ecx, ebp
  00057	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0005c	8b e5		 mov	 esp, ebp
  0005e	5d		 pop	 ebp
  0005f	c3		 ret	 0
?ExDataServerLogin@@YAXXZ ENDP				; ExDataServerLogin
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDCharClose@@YAXHPAD0@Z			; GDCharClose
; Function compile flags: /Ogtp
;	COMDAT ?GDCharClose@@YAXHPAD0@Z
_TEXT	SEGMENT
_pMsg$ = -28						; size = 22
__$ArrayPad$ = -4					; size = 4
_type$ = 8						; size = 4
_GuildName$ = 12					; size = 4
_Name$ = 16						; size = 4
?GDCharClose@@YAXHPAD0@Z PROC				; GDCharClose, COMDAT

; 213  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 1c	 sub	 esp, 28			; 0000001cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 45 10	 mov	 eax, DWORD PTR _Name$[ebp]
  00013	8b 4d 0c	 mov	 ecx, DWORD PTR _GuildName$[ebp]
  00016	53		 push	 ebx

; 214  : 	SDHP_USERCLOSE pMsg;
; 215  : 
; 216  : 	pMsg.h.c = 0xC1;
; 217  : 	pMsg.h.size = sizeof(pMsg);
; 218  : 	pMsg.h.headcode = 0x02;
; 219  : 	pMsg.Type = type;

  00017	8a 5d 08	 mov	 bl, BYTE PTR _type$[ebp]
  0001a	56		 push	 esi

; 220  : 	memcpy(pMsg.CharName, Name, sizeof(pMsg.CharName));

  0001b	8b 30		 mov	 esi, DWORD PTR [eax]
  0001d	89 75 e7	 mov	 DWORD PTR _pMsg$[ebp+3], esi
  00020	8b 70 04	 mov	 esi, DWORD PTR [eax+4]
  00023	66 8b 40 08	 mov	 ax, WORD PTR [eax+8]
  00027	89 75 eb	 mov	 DWORD PTR _pMsg$[ebp+7], esi
  0002a	66 89 45 ef	 mov	 WORD PTR _pMsg$[ebp+11], ax

; 221  : 	memset(pMsg.GuildName, 0, sizeof(pMsg.GuildName));

  0002e	33 c0		 xor	 eax, eax
  00030	5e		 pop	 esi
  00031	88 5d f9	 mov	 BYTE PTR _pMsg$[ebp+21], bl
  00034	b2 16		 mov	 dl, 22			; 00000016H
  00036	66 c7 45 e4 c1
	16		 mov	 WORD PTR _pMsg$[ebp], 5825 ; 000016c1H
  0003c	c6 45 e6 02	 mov	 BYTE PTR _pMsg$[ebp+2], 2
  00040	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+13], eax
  00043	89 45 f5	 mov	 DWORD PTR _pMsg$[ebp+17], eax
  00046	5b		 pop	 ebx

; 222  : 
; 223  : 	if ( GuildName != NULL )

  00047	85 c9		 test	 ecx, ecx
  00049	74 0b		 je	 SHORT $LN1@GDCharClos

; 224  : 	{
; 225  : 		memcpy(pMsg.GuildName, GuildName, sizeof(pMsg.GuildName));

  0004b	8b 01		 mov	 eax, DWORD PTR [ecx]
  0004d	8b 49 04	 mov	 ecx, DWORD PTR [ecx+4]
  00050	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+13], eax
  00053	89 4d f5	 mov	 DWORD PTR _pMsg$[ebp+17], ecx
$LN1@GDCharClos:

; 226  : 	}
; 227  : 
; 228  : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  00056	0f b6 d2	 movzx	 edx, dl
  00059	52		 push	 edx
  0005a	8d 45 e4	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0005d	50		 push	 eax
  0005e	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00063	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 229  : }

  00068	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0006b	33 cd		 xor	 ecx, ebp
  0006d	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00072	8b e5		 mov	 esp, ebp
  00074	5d		 pop	 ebp
  00075	c3		 ret	 0
?GDCharClose@@YAXHPAD0@Z ENDP				; GDCharClose
_TEXT	ENDS
PUBLIC	??_C@_0BL@MLPIPIDH@ExDB?5Server?5Login?5Fail?3?5?$CFd?$AA@ ; `string'
PUBLIC	?ExDataServerLoginResult@@YAXPAUSDHP_RESULT@@@Z	; ExDataServerLoginResult
EXTRN	?gObjIsConnectedGP@@YAHH@Z:PROC			; gObjIsConnectedGP
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:BYTE			; gObj
EXTRN	?LogAdd@@YAXW4eLogColor@@PADZZ:PROC		; LogAdd
;	COMDAT ??_C@_0BL@MLPIPIDH@ExDB?5Server?5Login?5Fail?3?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BL@MLPIPIDH@ExDB?5Server?5Login?5Fail?3?5?$CFd?$AA@ DB 'ExDB Serve'
	DB	'r Login Fail: %d', 00H			; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?ExDataServerLoginResult@@YAXPAUSDHP_RESULT@@@Z
_TEXT	SEGMENT
_lpMsg$ = 8						; size = 4
?ExDataServerLoginResult@@YAXPAUSDHP_RESULT@@@Z PROC	; ExDataServerLoginResult, COMDAT

; 235  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 236  : 	if ( lpMsg->Result == false )

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  00006	80 78 03 00	 cmp	 BYTE PTR [eax+3], 0
  0000a	75 13		 jne	 SHORT $LN6@ExDataServ@2

; 237  : 	{
; 238  : 		LogAdd(LOG_BLACK, "ExDB Server Login Fail: %d", lpMsg->Result);

  0000c	6a 00		 push	 0
  0000e	68 00 00 00 00	 push	 OFFSET ??_C@_0BL@MLPIPIDH@ExDB?5Server?5Login?5Fail?3?5?$CFd?$AA@
  00013	6a 00		 push	 0
  00015	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0001a	83 c4 0c	 add	 esp, 12			; 0000000cH

; 250  : 			}
; 251  : 		}
; 252  : 	}
; 253  : 	
; 254  : }

  0001d	5d		 pop	 ebp
  0001e	c3		 ret	 0
$LN6@ExDataServ@2:
  0001f	56		 push	 esi
  00020	57		 push	 edi

; 239  : 
; 240  : 		return;
; 241  : 	}
; 242  : 
; 243  : 	for (int i=0;i<OBJMAX;i++)

  00021	33 ff		 xor	 edi, edi
  00023	be d0 01 00 00	 mov	 esi, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+464
$LL5@ExDataServ@2:

; 244  : 	{
; 245  : 		if ( gObjIsConnectedGP(i) == TRUE )

  00028	57		 push	 edi
  00029	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHH@Z ; gObjIsConnectedGP
  0002e	83 c4 04	 add	 esp, 4
  00031	83 f8 01	 cmp	 eax, 1
  00034	75 07		 jne	 SHORT $LN4@ExDataServ@2

; 246  : 		{
; 247  : 			if ( gObj[i].m_FriendServerOnline == FRIEND_SERVER_STATE_OFFLINE )

  00036	38 06		 cmp	 BYTE PTR [esi], al
  00038	75 03		 jne	 SHORT $LN4@ExDataServ@2

; 248  : 			{
; 249  : 				gObj[i].m_FriendServerOnline = FALSE;

  0003a	c6 06 00	 mov	 BYTE PTR [esi], 0
$LN4@ExDataServ@2:

; 239  : 
; 240  : 		return;
; 241  : 	}
; 242  : 
; 243  : 	for (int i=0;i<OBJMAX;i++)

  0003d	81 c6 64 15 00
	00		 add	 esi, 5476		; 00001564H
  00043	47		 inc	 edi
  00044	81 fe 70 54 6a
	02		 cmp	 esi, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+40522864
  0004a	7c dc		 jl	 SHORT $LL5@ExDataServ@2
  0004c	5f		 pop	 edi
  0004d	5e		 pop	 esi

; 250  : 			}
; 251  : 		}
; 252  : 	}
; 253  : 	
; 254  : }

  0004e	5d		 pop	 ebp
  0004f	c3		 ret	 0
?ExDataServerLoginResult@@YAXPAUSDHP_RESULT@@@Z ENDP	; ExDataServerLoginResult
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDCharCloseRecv@@YAXPAUSDHP_USERCLOSE@@@Z	; GDCharCloseRecv
EXTRN	?CloseMember@CGuildClass@@QAEHPAD0@Z:PROC	; CGuildClass::CloseMember
EXTRN	?Guild@@3VCGuildClass@@A:BYTE			; Guild
; Function compile flags: /Ogtp
;	COMDAT ?GDCharCloseRecv@@YAXPAUSDHP_USERCLOSE@@@Z
_TEXT	SEGMENT
_szGuildName$ = -28					; size = 9
_szName$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?GDCharCloseRecv@@YAXPAUSDHP_USERCLOSE@@@Z PROC		; GDCharCloseRecv, COMDAT

; 257  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 1c	 sub	 esp, 28			; 0000001cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]

; 258  : 	char szName[MAX_ACCOUNT_LEN+1];
; 259  : 	char szGuildName[MAX_GUILD_LEN+1];
; 260  : 
; 261  : 	memset(szName, 0, sizeof(szName));
; 262  : 	memset(szGuildName, 0, sizeof(szGuildName));
; 263  : 	memcpy(szName, lpMsg->CharName, sizeof(lpMsg->CharName));

  00013	8b 50 07	 mov	 edx, DWORD PTR [eax+7]
  00016	33 c9		 xor	 ecx, ecx
  00018	89 4d f0	 mov	 DWORD PTR _szName$[ebp], ecx
  0001b	89 4d f4	 mov	 DWORD PTR _szName$[ebp+4], ecx
  0001e	66 89 4d f8	 mov	 WORD PTR _szName$[ebp+8], cx
  00022	89 4d e4	 mov	 DWORD PTR _szGuildName$[ebp], ecx
  00025	89 4d e8	 mov	 DWORD PTR _szGuildName$[ebp+4], ecx
  00028	88 4d fa	 mov	 BYTE PTR _szName$[ebp+10], cl
  0002b	88 4d ec	 mov	 BYTE PTR _szGuildName$[ebp+8], cl
  0002e	8b 48 03	 mov	 ecx, DWORD PTR [eax+3]
  00031	89 4d f0	 mov	 DWORD PTR _szName$[ebp], ecx
  00034	66 8b 48 0b	 mov	 cx, WORD PTR [eax+11]
  00038	89 55 f4	 mov	 DWORD PTR _szName$[ebp+4], edx

; 264  : 	memcpy(szGuildName, lpMsg->GuildName, sizeof(lpMsg->GuildName));

  0003b	8b 50 0d	 mov	 edx, DWORD PTR [eax+13]
  0003e	8b 40 11	 mov	 eax, DWORD PTR [eax+17]
  00041	66 89 4d f8	 mov	 WORD PTR _szName$[ebp+8], cx

; 265  : 
; 266  : 	Guild.CloseMember(szGuildName, szName);

  00045	8d 4d f0	 lea	 ecx, DWORD PTR _szName$[ebp]
  00048	89 55 e4	 mov	 DWORD PTR _szGuildName$[ebp], edx
  0004b	51		 push	 ecx
  0004c	8d 55 e4	 lea	 edx, DWORD PTR _szGuildName$[ebp]
  0004f	52		 push	 edx
  00050	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00055	89 45 e8	 mov	 DWORD PTR _szGuildName$[ebp+4], eax
  00058	e8 00 00 00 00	 call	 ?CloseMember@CGuildClass@@QAEHPAD0@Z ; CGuildClass::CloseMember

; 267  : }

  0005d	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00060	33 cd		 xor	 ecx, ebp
  00062	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00067	8b e5		 mov	 esp, ebp
  00069	5d		 pop	 ebp
  0006a	c3		 ret	 0
?GDCharCloseRecv@@YAXPAUSDHP_USERCLOSE@@@Z ENDP		; GDCharCloseRecv
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDGuildCreateSend@@YAXHPAD0PAEH@Z		; GDGuildCreateSend
; Function compile flags: /Ogtp
;	COMDAT ?GDGuildCreateSend@@YAXHPAD0PAEH@Z
_TEXT	SEGMENT
_pMsg$ = -64						; size = 58
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_Name$ = 12						; size = 4
_Master$ = 16						; size = 4
_Mark$ = 20						; size = 4
_iGuildType$ = 24					; size = 4
?GDGuildCreateSend@@YAXHPAD0PAEH@Z PROC			; GDGuildCreateSend, COMDAT

; 284  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 45 10	 mov	 eax, DWORD PTR _Master$[ebp]
  00013	8b 55 0c	 mov	 edx, DWORD PTR _Name$[ebp]
  00016	56		 push	 esi
  00017	8b 75 14	 mov	 esi, DWORD PTR _Mark$[ebp]
  0001a	57		 push	 edi

; 285  : 	SDHP_GUILDCREATE pMsg;
; 286  : 
; 287  : 	pMsg.h.c = 0xC1;

  0001b	c6 45 c0 c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H

; 288  : 	pMsg.h.headcode = 0x30;

  0001f	66 c7 45 c1 3a
	30		 mov	 WORD PTR _pMsg$[ebp+1], 12346 ; 0000303aH

; 289  : 	pMsg.h.size = sizeof(pMsg);
; 290  : 
; 291  : 	memcpy(pMsg.Mark, Mark, sizeof(pMsg.Mark));

  00025	b9 08 00 00 00	 mov	 ecx, 8
  0002a	8d 7d d7	 lea	 edi, DWORD PTR _pMsg$[ebp+23]
  0002d	f3 a5		 rep movsd

; 292  : 	pMsg.Master[MAX_ACCOUNT_LEN] = 0;

  0002f	32 c9		 xor	 cl, cl
  00031	88 4d d6	 mov	 BYTE PTR _pMsg$[ebp+22], cl

; 293  : 	pMsg.GuildName[MAX_GUILD_LEN] = 0;

  00034	88 4d cb	 mov	 BYTE PTR _pMsg$[ebp+11], cl

; 294  : 	memcpy(pMsg.Master, Master, MAX_ACCOUNT_LEN);

  00037	8b 08		 mov	 ecx, DWORD PTR [eax]
  00039	89 4d cc	 mov	 DWORD PTR _pMsg$[ebp+12], ecx
  0003c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0003f	66 8b 40 08	 mov	 ax, WORD PTR [eax+8]
  00043	89 4d d0	 mov	 DWORD PTR _pMsg$[ebp+16], ecx

; 295  : 	memcpy(pMsg.GuildName, Name, MAX_GUILD_LEN);

  00046	8b 0a		 mov	 ecx, DWORD PTR [edx]
  00048	8b 52 04	 mov	 edx, DWORD PTR [edx+4]
  0004b	66 89 45 d4	 mov	 WORD PTR _pMsg$[ebp+20], ax

; 296  : 	pMsg.NumberH = SET_NUMBERH(aIndex);

  0004f	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00052	89 4d c3	 mov	 DWORD PTR _pMsg$[ebp+3], ecx
  00055	8b c8		 mov	 ecx, eax
  00057	c1 e9 08	 shr	 ecx, 8

; 297  : 	pMsg.NumberL = SET_NUMBERL(aIndex);

  0005a	88 45 f8	 mov	 BYTE PTR _pMsg$[ebp+56], al
  0005d	89 55 c7	 mov	 DWORD PTR _pMsg$[ebp+7], edx

; 298  : 	pMsg.btGuildType = iGuildType;

  00060	8a 55 18	 mov	 dl, BYTE PTR _iGuildType$[ebp]

; 299  : 
; 300  : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  00063	6a 3a		 push	 58			; 0000003aH
  00065	8d 45 c0	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00068	88 4d f7	 mov	 BYTE PTR _pMsg$[ebp+55], cl
  0006b	50		 push	 eax
  0006c	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00071	88 55 f9	 mov	 BYTE PTR _pMsg$[ebp+57], dl
  00074	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 301  : }

  00079	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0007c	5f		 pop	 edi
  0007d	33 cd		 xor	 ecx, ebp
  0007f	5e		 pop	 esi
  00080	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00085	8b e5		 mov	 esp, ebp
  00087	5d		 pop	 ebp
  00088	c3		 ret	 0
?GDGuildCreateSend@@YAXHPAD0PAEH@Z ENDP			; GDGuildCreateSend
_TEXT	ENDS
PUBLIC	??_C@_0DE@PMHJKKOP@?$FLU?4System?$FN?5Guild?5is?5Created?5?9?5Gu@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?GDGuildCreateRecv@@YAXPAUSDHP_GUILDCREATE_RESULT@@@Z ; GDGuildCreateRecv
EXTRN	?GCGuildViewportNowPaint@@YAXHPADPAEH@Z:PROC	; GCGuildViewportNowPaint
EXTRN	?Get@CMsg@@QAEPADH@Z:PROC			; CMsg::Get
EXTRN	?lMsg@@3VCMsg@@A:BYTE				; lMsg
EXTRN	?AddGuild@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@HPADPAE0H@Z:PROC ; CGuildClass::AddGuild
EXTRN	?gObjIsConnected@@YAHH@Z:PROC			; gObjIsConnected
EXTRN	?DataSend@@YAHHPAEK@Z:PROC			; DataSend
EXTRN	?PHeadSetB@@YAXPAEEH@Z:PROC			; PHeadSetB
;	COMDAT ??_C@_0DE@PMHJKKOP@?$FLU?4System?$FN?5Guild?5is?5Created?5?9?5Gu@
CONST	SEGMENT
??_C@_0DE@PMHJKKOP@?$FLU?4System?$FN?5Guild?5is?5Created?5?9?5Gu@ DB '[U.'
	DB	'System] Guild is Created - Guild : %s / [%s][%s]', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?GDGuildCreateRecv@@YAXPAUSDHP_GUILDCREATE_RESULT@@@Z
_TEXT	SEGMENT
_pMsg$ = -44						; size = 5
tv334 = -36						; size = 4
_pResult$157011 = -36					; size = 5
_szMaster$ = -28					; size = 11
_szGuildName$ = -16					; size = 9
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?GDGuildCreateRecv@@YAXPAUSDHP_GUILDCREATE_RESULT@@@Z PROC ; GDGuildCreateRecv, COMDAT

; 308  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 2c	 sub	 esp, 44			; 0000002cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 309  : 	int aIndex = -1;
; 310  : 	PMSG_GUILDCREATED_RESULT pMsg;
; 311  : 	_GUILD_INFO_STRUCT * lpNode;
; 312  : 	char szMaster[MAX_ACCOUNT_LEN+1];
; 313  : 	char szGuildName[MAX_GUILD_LEN+1];
; 314  : 
; 315  : 	szMaster[MAX_ACCOUNT_LEN] = 0;
; 316  : 	szGuildName[MAX_GUILD_LEN] = 0;
; 317  : 	memcpy(szMaster, lpMsg->Master, MAX_ACCOUNT_LEN);

  00015	8b 46 0e	 mov	 eax, DWORD PTR [esi+14]
  00018	8b 4e 12	 mov	 ecx, DWORD PTR [esi+18]
  0001b	66 8b 56 16	 mov	 dx, WORD PTR [esi+22]
  0001f	89 45 e4	 mov	 DWORD PTR _szMaster$[ebp], eax

; 318  : 	memcpy(szGuildName, lpMsg->GuildName, MAX_GUILD_LEN);

  00022	8b 46 19	 mov	 eax, DWORD PTR [esi+25]
  00025	89 4d e8	 mov	 DWORD PTR _szMaster$[ebp+4], ecx
  00028	8b 4e 1d	 mov	 ecx, DWORD PTR [esi+29]
  0002b	83 cb ff	 or	 ebx, -1

; 319  : 
; 320  : 	if (lpMsg->Result == 0 )

  0002e	80 7e 03 00	 cmp	 BYTE PTR [esi+3], 0
  00032	57		 push	 edi
  00033	c6 45 ee 00	 mov	 BYTE PTR _szMaster$[ebp+10], 0
  00037	c6 45 f8 00	 mov	 BYTE PTR _szGuildName$[ebp+8], 0
  0003b	66 89 55 ec	 mov	 WORD PTR _szMaster$[ebp+8], dx
  0003f	89 45 f0	 mov	 DWORD PTR _szGuildName$[ebp], eax
  00042	89 4d f4	 mov	 DWORD PTR _szGuildName$[ebp+4], ecx
  00045	75 7c		 jne	 SHORT $LN8@GDGuildCre

; 321  : 	{
; 322  : 		aIndex = MAKE_NUMBERW(lpMsg->NumberH, lpMsg->NumberL);

  00047	0f b6 56 0c	 movzx	 edx, BYTE PTR [esi+12]
  0004b	0f b6 46 0d	 movzx	 eax, BYTE PTR [esi+13]
  0004f	66 c1 e2 08	 shl	 dx, 8

; 323  : 
; 324  : 		PMSG_GUILDCREATED_RESULT pResult;
; 325  : 
; 326  : 		PHeadSetB((LPBYTE)&pResult, 0x56, sizeof(pResult));

  00053	6a 05		 push	 5
  00055	0f b7 fa	 movzx	 edi, dx
  00058	8d 4d dc	 lea	 ecx, DWORD PTR _pResult$157011[ebp]
  0005b	6a 56		 push	 86			; 00000056H
  0005d	51		 push	 ecx
  0005e	0b f8		 or	 edi, eax
  00060	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB

; 327  : 		pResult.Result = 0;
; 328  : 		pResult.btGuildType = lpMsg->btGuildType;
; 329  : 
; 330  : 		DataSend(aIndex, (LPBYTE)&pResult, pResult.h.size);

  00065	0f b6 45 dd	 movzx	 eax, BYTE PTR _pResult$157011[ebp+1]
  00069	8a 56 42	 mov	 dl, BYTE PTR [esi+66]
  0006c	50		 push	 eax
  0006d	8d 4d dc	 lea	 ecx, DWORD PTR _pResult$157011[ebp]
  00070	51		 push	 ecx
  00071	57		 push	 edi
  00072	c6 45 df 00	 mov	 BYTE PTR _pResult$157011[ebp+3], 0
  00076	88 55 e0	 mov	 BYTE PTR _pResult$157011[ebp+4], dl
  00079	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 331  : 
; 332  : 		if ( gObj[aIndex].m_IfState.use != 0 && gObj[aIndex].m_IfState.type == 5 )

  0007e	69 ff 64 15 00
	00		 imul	 edi, 5476		; 00001564H
  00084	8b 87 84 0c 00
	00		 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[edi+3204]
  0008a	83 c4 18	 add	 esp, 24			; 00000018H
  0008d	a8 03		 test	 al, 3
  0008f	0f 84 95 01 00
	00		 je	 $LN1@GDGuildCre
  00095	8b d0		 mov	 edx, eax
  00097	81 e2 c0 ff 00
	00		 and	 edx, 65472		; 0000ffc0H
  0009d	81 fa 40 01 00
	00		 cmp	 edx, 320		; 00000140H
  000a3	0f 85 81 01 00
	00		 jne	 $LN1@GDGuildCre

; 333  : 		{
; 334  : 			gObj[aIndex].m_IfState.use = 0;

  000a9	83 e0 fc	 and	 eax, -4			; fffffffcH
  000ac	89 87 84 0c 00
	00		 mov	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[edi+3204], eax
  000b2	5f		 pop	 edi
  000b3	5e		 pop	 esi
  000b4	5b		 pop	 ebx

; 381  : 		}
; 382  : 	}
; 383  : }

  000b5	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000b8	33 cd		 xor	 ecx, ebp
  000ba	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000bf	8b e5		 mov	 esp, ebp
  000c1	5d		 pop	 ebp
  000c2	c3		 ret	 0
$LN8@GDGuildCre:

; 335  : 		}
; 336  : 
; 337  : 		return;
; 338  : 	}
; 339  : 
; 340  : 	if ( lpMsg->Flag == 1 )

  000c3	80 7e 04 01	 cmp	 BYTE PTR [esi+4], 1
  000c7	0f 85 89 00 00
	00		 jne	 $LN15@GDGuildCre

; 341  : 	{
; 342  : 		aIndex = MAKE_NUMBERW(lpMsg->NumberH, lpMsg->NumberL);

  000cd	0f b6 46 0c	 movzx	 eax, BYTE PTR [esi+12]
  000d1	0f b6 4e 0d	 movzx	 ecx, BYTE PTR [esi+13]
  000d5	66 c1 e0 08	 shl	 ax, 8
  000d9	0f b7 d8	 movzx	 ebx, ax
  000dc	0b d9		 or	 ebx, ecx

; 343  : 
; 344  : 		if ( gObjIsConnected(aIndex) == TRUE )

  000de	53		 push	 ebx
  000df	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  000e4	83 c4 04	 add	 esp, 4
  000e7	83 f8 01	 cmp	 eax, 1
  000ea	75 6a		 jne	 SHORT $LN15@GDGuildCre

; 345  : 		{
; 346  : 			if ( szMaster[0] == gObj[aIndex].Name[0] )

  000ec	8a 45 e4	 mov	 al, BYTE PTR _szMaster$[ebp]
  000ef	8b d3		 mov	 edx, ebx
  000f1	69 d2 64 15 00
	00		 imul	 edx, 5476		; 00001564H
  000f7	3a 82 6f 00 00
	00		 cmp	 al, BYTE PTR ?gObj@@3PAUOBJECTSTRUCT@@A[edx+111]
  000fd	8d 8a 6f 00 00
	00		 lea	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[edx+111]
  00103	75 51		 jne	 SHORT $LN15@GDGuildCre

; 347  : 			{
; 348  : 				if ( strcmp(szMaster, gObj[aIndex].Name) == 0 )

  00105	8d 45 e4	 lea	 eax, DWORD PTR _szMaster$[ebp]
$LL11@GDGuildCre:
  00108	8a 10		 mov	 dl, BYTE PTR [eax]
  0010a	3a 11		 cmp	 dl, BYTE PTR [ecx]
  0010c	75 1a		 jne	 SHORT $LN12@GDGuildCre
  0010e	84 d2		 test	 dl, dl
  00110	74 12		 je	 SHORT $LN13@GDGuildCre
  00112	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  00115	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  00118	75 0e		 jne	 SHORT $LN12@GDGuildCre
  0011a	83 c0 02	 add	 eax, 2
  0011d	83 c1 02	 add	 ecx, 2
  00120	84 d2		 test	 dl, dl
  00122	75 e4		 jne	 SHORT $LL11@GDGuildCre
$LN13@GDGuildCre:
  00124	33 c0		 xor	 eax, eax
  00126	eb 05		 jmp	 SHORT $LN14@GDGuildCre
$LN12@GDGuildCre:
  00128	1b c0		 sbb	 eax, eax
  0012a	83 d8 ff	 sbb	 eax, -1
$LN14@GDGuildCre:
  0012d	85 c0		 test	 eax, eax
  0012f	75 25		 jne	 SHORT $LN15@GDGuildCre

; 349  : 				{
; 350  : 					pMsg.h.c = 0xC1;
; 351  : 					pMsg.h.headcode = 0x56;
; 352  : 					pMsg.h.size = sizeof(pMsg);
; 353  : 					pMsg.Result = lpMsg->Result;

  00131	8a 4e 03	 mov	 cl, BYTE PTR [esi+3]

; 354  : 					pMsg.btGuildType = lpMsg->btGuildType;

  00134	8a 56 42	 mov	 dl, BYTE PTR [esi+66]

; 355  : 
; 356  : 					DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  00137	6a 05		 push	 5
  00139	8d 45 d4	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0013c	50		 push	 eax
  0013d	53		 push	 ebx
  0013e	c6 45 d4 c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H
  00142	66 c7 45 d5 05
	56		 mov	 WORD PTR _pMsg$[ebp+1], 22021 ; 00005605H
  00148	88 4d d7	 mov	 BYTE PTR _pMsg$[ebp+3], cl
  0014b	88 55 d8	 mov	 BYTE PTR _pMsg$[ebp+4], dl
  0014e	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00153	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN15@GDGuildCre:

; 357  : 				}
; 358  : 			}
; 359  : 		}
; 360  : 	}
; 361  : 
; 362  : 	if ( lpMsg->Result == 1 )

  00156	80 7e 03 01	 cmp	 BYTE PTR [esi+3], 1
  0015a	0f 85 ca 00 00
	00		 jne	 $LN1@GDGuildCre

; 363  : 	{
; 364  : 		lpNode = Guild.AddGuild(lpMsg->GuildNumber, szGuildName, lpMsg->Mark, szMaster, 0);

  00160	6a 00		 push	 0
  00162	8d 4d e4	 lea	 ecx, DWORD PTR _szMaster$[ebp]
  00165	51		 push	 ecx
  00166	8d 46 22	 lea	 eax, DWORD PTR [esi+34]
  00169	50		 push	 eax
  0016a	8d 55 f0	 lea	 edx, DWORD PTR _szGuildName$[ebp]
  0016d	89 45 dc	 mov	 DWORD PTR tv334[ebp], eax
  00170	8b 46 08	 mov	 eax, DWORD PTR [esi+8]
  00173	52		 push	 edx
  00174	50		 push	 eax
  00175	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  0017a	e8 00 00 00 00	 call	 ?AddGuild@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@HPADPAE0H@Z ; CGuildClass::AddGuild

; 365  : 
; 366  : 		if ( aIndex >= 0 && lpNode != NULL )

  0017f	33 c9		 xor	 ecx, ecx
  00181	8b f8		 mov	 edi, eax
  00183	3b d9		 cmp	 ebx, ecx
  00185	0f 8c 9f 00 00
	00		 jl	 $LN1@GDGuildCre
  0018b	3b f9		 cmp	 edi, ecx
  0018d	0f 84 97 00 00
	00		 je	 $LN1@GDGuildCre

; 367  : 		{
; 368  : 			gObj[aIndex].lpGuild = lpNode;

  00193	8b c3		 mov	 eax, ebx
  00195	69 c0 64 15 00
	00		 imul	 eax, 5476		; 00001564H
  0019b	89 b8 b4 02 00
	00		 mov	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+692], edi

; 369  : 			gObj[aIndex].GuildNumber = lpMsg->GuildNumber;

  001a1	8b 56 08	 mov	 edx, DWORD PTR [esi+8]
  001a4	89 90 b0 02 00
	00		 mov	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+688], edx

; 370  : 			gObj[aIndex].GuildStatus = 0x80;

  001aa	c7 80 c4 02 00
	00 80 00 00 00	 mov	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+708], 128 ; 00000080H

; 371  : 			lpNode->iGuildRival = 0;
; 372  : 			lpNode->iGuildUnion = 0;
; 373  : 			lpNode->iTimeStamp = 0;
; 374  : 			gObj[aIndex].iGuildUnionTimeStamp = 0;
; 375  : 
; 376  : 			LogAdd(LOG_BLACK, "[U.System] Guild is Created - Guild : %s / [%s][%s]",
; 377  : 				szGuildName, gObj[aIndex].AccountID, gObj[aIndex].Name);

  001b4	8d 90 6f 00 00
	00		 lea	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+111]
  001ba	52		 push	 edx
  001bb	89 8f 20 07 00
	00		 mov	 DWORD PTR [edi+1824], ecx
  001c1	89 8f 1c 07 00
	00		 mov	 DWORD PTR [edi+1820], ecx
  001c7	89 8f 24 07 00
	00		 mov	 DWORD PTR [edi+1828], ecx
  001cd	89 88 c8 02 00
	00		 mov	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+712], ecx
  001d3	8d 80 64 00 00
	00		 lea	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+100]
  001d9	50		 push	 eax
  001da	8d 55 f0	 lea	 edx, DWORD PTR _szGuildName$[ebp]
  001dd	52		 push	 edx
  001de	68 00 00 00 00	 push	 OFFSET ??_C@_0DE@PMHJKKOP@?$FLU?4System?$FN?5Guild?5is?5Created?5?9?5Gu@
  001e3	51		 push	 ecx
  001e4	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 378  : 
; 379  : 			LogAdd(LOG_BLACK, lMsg.Get(MSGGET(1, 177)), lpNode->WarState, lpNode->WarDeclareState, szGuildName);

  001e9	0f b6 8f 90 05
	00 00		 movzx	 ecx, BYTE PTR [edi+1424]
  001f0	0f b6 97 91 05
	00 00		 movzx	 edx, BYTE PTR [edi+1425]
  001f7	83 c4 14	 add	 esp, 20			; 00000014H
  001fa	8d 45 f0	 lea	 eax, DWORD PTR _szGuildName$[ebp]
  001fd	50		 push	 eax
  001fe	51		 push	 ecx
  001ff	52		 push	 edx
  00200	68 b1 01 00 00	 push	 433			; 000001b1H
  00205	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0020a	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0020f	50		 push	 eax
  00210	6a 00		 push	 0
  00212	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 380  : 			::GCGuildViewportNowPaint(aIndex, szGuildName, lpMsg->Mark, TRUE);

  00217	8b 45 dc	 mov	 eax, DWORD PTR tv334[ebp]
  0021a	6a 01		 push	 1
  0021c	50		 push	 eax
  0021d	8d 4d f0	 lea	 ecx, DWORD PTR _szGuildName$[ebp]
  00220	51		 push	 ecx
  00221	53		 push	 ebx
  00222	e8 00 00 00 00	 call	 ?GCGuildViewportNowPaint@@YAXHPADPAEH@Z ; GCGuildViewportNowPaint
  00227	83 c4 24	 add	 esp, 36			; 00000024H
$LN1@GDGuildCre:

; 381  : 		}
; 382  : 	}
; 383  : }

  0022a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0022d	5f		 pop	 edi
  0022e	5e		 pop	 esi
  0022f	33 cd		 xor	 ecx, ebp
  00231	5b		 pop	 ebx
  00232	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00237	8b e5		 mov	 esp, ebp
  00239	5d		 pop	 ebp
  0023a	c3		 ret	 0
?GDGuildCreateRecv@@YAXPAUSDHP_GUILDCREATE_RESULT@@@Z ENDP ; GDGuildCreateRecv
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDGuildDestroySend@@YAXHPAD0@Z			; GDGuildDestroySend
; Function compile flags: /Ogtp
;	COMDAT ?GDGuildDestroySend@@YAXHPAD0@Z
_TEXT	SEGMENT
_pMsg$ = -28						; size = 23
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_Name$ = 12						; size = 4
_Master$ = 16						; size = 4
?GDGuildDestroySend@@YAXHPAD0@Z PROC			; GDGuildDestroySend, COMDAT

; 398  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 1c	 sub	 esp, 28			; 0000001cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 45 10	 mov	 eax, DWORD PTR _Master$[ebp]

; 399  : 	SDHP_GUILDDESTROY pMsg;
; 400  : 
; 401  : 	pMsg.h.c = 0xC1;
; 402  : 	pMsg.h.headcode = 0x31;
; 403  : 	pMsg.h.size = sizeof(pMsg);
; 404  : 	pMsg.NumberH = SET_NUMBERH(aIndex);

  00013	8b 55 08	 mov	 edx, DWORD PTR _aIndex$[ebp]
  00016	8b 4d 0c	 mov	 ecx, DWORD PTR _Name$[ebp]
  00019	53		 push	 ebx
  0001a	8b da		 mov	 ebx, edx

; 405  : 	pMsg.NumberL = SET_NUMBERL(aIndex);

  0001c	88 55 e8	 mov	 BYTE PTR _pMsg$[ebp+4], dl

; 406  : 	memcpy(pMsg.Master, Master, sizeof(pMsg.Master));

  0001f	8b 10		 mov	 edx, DWORD PTR [eax]
  00021	89 55 f1	 mov	 DWORD PTR _pMsg$[ebp+13], edx
  00024	8b 50 04	 mov	 edx, DWORD PTR [eax+4]
  00027	66 8b 40 08	 mov	 ax, WORD PTR [eax+8]
  0002b	89 55 f5	 mov	 DWORD PTR _pMsg$[ebp+17], edx

; 407  : 	memcpy(pMsg.GuildName, Name, sizeof(pMsg.GuildName));

  0002e	8b 11		 mov	 edx, DWORD PTR [ecx]
  00030	66 89 45 f9	 mov	 WORD PTR _pMsg$[ebp+21], ax
  00034	8b 41 04	 mov	 eax, DWORD PTR [ecx+4]

; 408  : 
; 409  : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  00037	6a 17		 push	 23			; 00000017H
  00039	8d 4d e4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0003c	51		 push	 ecx
  0003d	c1 eb 08	 shr	 ebx, 8
  00040	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00045	c6 45 e4 c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H
  00049	66 c7 45 e5 17
	31		 mov	 WORD PTR _pMsg$[ebp+1], 12567 ; 00003117H
  0004f	88 5d e7	 mov	 BYTE PTR _pMsg$[ebp+3], bl
  00052	89 55 e9	 mov	 DWORD PTR _pMsg$[ebp+5], edx
  00055	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  00058	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 410  : }

  0005d	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00060	33 cd		 xor	 ecx, ebp
  00062	5b		 pop	 ebx
  00063	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00068	8b e5		 mov	 esp, ebp
  0006a	5d		 pop	 ebp
  0006b	c3		 ret	 0
?GDGuildDestroySend@@YAXHPAD0@Z ENDP			; GDGuildDestroySend
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDGuildDestroyRecv@@YAXPAUSDHP_GUILDDESTROY_RESULT@@@Z ; GDGuildDestroyRecv
EXTRN	?DeleteGuild@CGuildClass@@QAEHPAD0@Z:PROC	; CGuildClass::DeleteGuild
EXTRN	?DelUnion@TUnion@@QAEHH@Z:PROC			; TUnion::DelUnion
EXTRN	?UnionManager@@3VTUnion@@A:BYTE			; UnionManager
EXTRN	?gObjNotifyUpdateUnionV2@@YAXPAUOBJECTSTRUCT@@@Z:PROC ; gObjNotifyUpdateUnionV2
EXTRN	?gObjNotifyUpdateUnionV1@@YAXPAUOBJECTSTRUCT@@@Z:PROC ; gObjNotifyUpdateUnionV1
EXTRN	?SearchGuild_Number@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@H@Z:PROC ; CGuildClass::SearchGuild_Number
EXTRN	?SearchGuild@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@PAD@Z:PROC ; CGuildClass::SearchGuild
EXTRN	?GCGuildViewportDelNow@@YAXHH@Z:PROC		; GCGuildViewportDelNow
EXTRN	?GCResultSend@@YAXHEE@Z:PROC			; GCResultSend
; Function compile flags: /Ogtp
;	COMDAT ?GDGuildDestroyRecv@@YAXPAUSDHP_GUILDDESTROY_RESULT@@@Z
_TEXT	SEGMENT
_lpGuild$157067 = -36					; size = 4
tv406 = -32						; size = 4
_szGuildName$ = -28					; size = 9
_szMaster$ = -16					; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?GDGuildDestroyRecv@@YAXPAUSDHP_GUILDDESTROY_RESULT@@@Z PROC ; GDGuildDestroyRecv, COMDAT

; 416  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 24	 sub	 esp, 36			; 00000024H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 417  : 	int aIndex = -1;
; 418  : 	char szMaster[MAX_ACCOUNT_LEN+1];
; 419  : 	char szGuildName[MAX_GUILD_LEN+1];
; 420  : 	szMaster[MAX_ACCOUNT_LEN] = 0;
; 421  : 	szGuildName[MAX_GUILD_LEN] = 0;
; 422  : 
; 423  : 	memcpy(szMaster, lpMsg->Master, MAX_ACCOUNT_LEN);
; 424  : 	memcpy(szGuildName, lpMsg->GuildName, MAX_GUILD_LEN);
; 425  : 
; 426  : 	if ( lpMsg->Flag == 1 )

  00014	80 7e 04 01	 cmp	 BYTE PTR [esi+4], 1
  00018	8b 46 10	 mov	 eax, DWORD PTR [esi+16]
  0001b	8b 4e 14	 mov	 ecx, DWORD PTR [esi+20]
  0001e	66 8b 56 18	 mov	 dx, WORD PTR [esi+24]
  00022	89 45 f0	 mov	 DWORD PTR _szMaster$[ebp], eax
  00025	8b 46 07	 mov	 eax, DWORD PTR [esi+7]
  00028	89 4d f4	 mov	 DWORD PTR _szMaster$[ebp+4], ecx
  0002b	8b 4e 0b	 mov	 ecx, DWORD PTR [esi+11]
  0002e	57		 push	 edi
  0002f	c6 45 fa 00	 mov	 BYTE PTR _szMaster$[ebp+10], 0
  00033	c6 45 ec 00	 mov	 BYTE PTR _szGuildName$[ebp+8], 0
  00037	66 89 55 f8	 mov	 WORD PTR _szMaster$[ebp+8], dx
  0003b	89 45 e4	 mov	 DWORD PTR _szGuildName$[ebp], eax
  0003e	89 4d e8	 mov	 DWORD PTR _szGuildName$[ebp+4], ecx
  00041	0f 85 8a 00 00
	00		 jne	 $LN25@GDGuildDes

; 427  : 	{
; 428  : 		aIndex = MAKE_NUMBERW(lpMsg->NumberH, lpMsg->NumberL);

  00047	0f b6 56 05	 movzx	 edx, BYTE PTR [esi+5]
  0004b	0f b6 46 06	 movzx	 eax, BYTE PTR [esi+6]
  0004f	66 c1 e2 08	 shl	 dx, 8
  00053	0f b7 fa	 movzx	 edi, dx
  00056	0b f8		 or	 edi, eax

; 429  : 
; 430  : 		if ( gObjIsConnected(aIndex) == TRUE )

  00058	57		 push	 edi
  00059	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0005e	83 c4 04	 add	 esp, 4
  00061	83 f8 01	 cmp	 eax, 1
  00064	75 6b		 jne	 SHORT $LN25@GDGuildDes

; 431  : 		{
; 432  : 			if ( szMaster[0] == gObj[aIndex].Name[0] )

  00066	8a 55 f0	 mov	 dl, BYTE PTR _szMaster$[ebp]
  00069	8b cf		 mov	 ecx, edi
  0006b	69 c9 64 15 00
	00		 imul	 ecx, 5476		; 00001564H
  00071	3a 91 6f 00 00
	00		 cmp	 dl, BYTE PTR ?gObj@@3PAUOBJECTSTRUCT@@A[ecx+111]
  00077	8d 89 6f 00 00
	00		 lea	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[ecx+111]
  0007d	75 52		 jne	 SHORT $LN25@GDGuildDes

; 433  : 			{
; 434  : 				if ( strcmp(szMaster, gObj[aIndex].Name) == 0 )

  0007f	8d 45 f0	 lea	 eax, DWORD PTR _szMaster$[ebp]
$LL21@GDGuildDes:
  00082	8a 10		 mov	 dl, BYTE PTR [eax]
  00084	3a 11		 cmp	 dl, BYTE PTR [ecx]
  00086	75 1a		 jne	 SHORT $LN22@GDGuildDes
  00088	84 d2		 test	 dl, dl
  0008a	74 12		 je	 SHORT $LN23@GDGuildDes
  0008c	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  0008f	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  00092	75 0e		 jne	 SHORT $LN22@GDGuildDes
  00094	83 c0 02	 add	 eax, 2
  00097	83 c1 02	 add	 ecx, 2
  0009a	84 d2		 test	 dl, dl
  0009c	75 e4		 jne	 SHORT $LL21@GDGuildDes
$LN23@GDGuildDes:
  0009e	33 c0		 xor	 eax, eax
  000a0	eb 05		 jmp	 SHORT $LN24@GDGuildDes
$LN22@GDGuildDes:
  000a2	1b c0		 sbb	 eax, eax
  000a4	83 d8 ff	 sbb	 eax, -1
$LN24@GDGuildDes:
  000a7	85 c0		 test	 eax, eax
  000a9	75 26		 jne	 SHORT $LN25@GDGuildDes

; 435  : 				{
; 436  : 					GCResultSend(aIndex, 0x53, lpMsg->Result);

  000ab	0f b6 46 03	 movzx	 eax, BYTE PTR [esi+3]
  000af	50		 push	 eax
  000b0	6a 53		 push	 83			; 00000053H
  000b2	57		 push	 edi
  000b3	e8 00 00 00 00	 call	 ?GCResultSend@@YAXHEE@Z	; GCResultSend

; 437  : 
; 438  : 					if ( lpMsg->Result == 1 || lpMsg->Result == 4 )

  000b8	8a 46 03	 mov	 al, BYTE PTR [esi+3]
  000bb	83 c4 0c	 add	 esp, 12			; 0000000cH
  000be	3c 01		 cmp	 al, 1
  000c0	74 04		 je	 SHORT $LN11@GDGuildDes
  000c2	3c 04		 cmp	 al, 4
  000c4	75 0b		 jne	 SHORT $LN25@GDGuildDes
$LN11@GDGuildDes:

; 439  : 					{
; 440  : 						GCGuildViewportDelNow(aIndex, TRUE);

  000c6	6a 01		 push	 1
  000c8	57		 push	 edi
  000c9	e8 00 00 00 00	 call	 ?GCGuildViewportDelNow@@YAXHH@Z ; GCGuildViewportDelNow
  000ce	83 c4 08	 add	 esp, 8
$LN25@GDGuildDes:

; 441  : 					}
; 442  : 				}
; 443  : 			}
; 444  : 		}
; 445  : 	}
; 446  : 
; 447  : 	if ( lpMsg->Result == 1 || lpMsg->Result == 4)

  000d1	8a 46 03	 mov	 al, BYTE PTR [esi+3]
  000d4	3c 01		 cmp	 al, 1
  000d6	74 08		 je	 SHORT $LN9@GDGuildDes
  000d8	3c 04		 cmp	 al, 4
  000da	0f 85 4e 01 00
	00		 jne	 $LN10@GDGuildDes
$LN9@GDGuildDes:

; 448  : 	{
; 449  : 		_GUILD_INFO_STRUCT * lpGuild = Guild.SearchGuild(szGuildName);

  000e0	8d 4d e4	 lea	 ecx, DWORD PTR _szGuildName$[ebp]
  000e3	51		 push	 ecx
  000e4	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  000e9	e8 00 00 00 00	 call	 ?SearchGuild@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@PAD@Z ; CGuildClass::SearchGuild
  000ee	8b f0		 mov	 esi, eax

; 450  : 
; 451  : 		if ( lpGuild == NULL )

  000f0	33 ff		 xor	 edi, edi
  000f2	89 75 dc	 mov	 DWORD PTR _lpGuild$157067[ebp], esi
  000f5	3b f7		 cmp	 esi, edi
  000f7	0f 84 31 01 00
	00		 je	 $LN10@GDGuildDes

; 452  : 		{
; 453  : 			return;
; 454  : 		}
; 455  : 
; 456  : 		_GUILD_INFO_STRUCT * lpRival = Guild.SearchGuild_Number(lpGuild->iGuildRival);

  000fd	8b 96 20 07 00
	00		 mov	 edx, DWORD PTR [esi+1824]
  00103	52		 push	 edx
  00104	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00109	e8 00 00 00 00	 call	 ?SearchGuild_Number@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@H@Z ; CGuildClass::SearchGuild_Number

; 457  : 
; 458  : 		if ( lpRival != NULL )

  0010e	3b c7		 cmp	 eax, edi
  00110	74 0d		 je	 SHORT $LN7@GDGuildDes

; 459  : 		{
; 460  : 			lpRival->iGuildRival = 0;

  00112	89 b8 20 07 00
	00		 mov	 DWORD PTR [eax+1824], edi

; 461  : 			lpRival->szGuildRivalName[0] = 0;

  00118	c6 80 28 07 00
	00 00		 mov	 BYTE PTR [eax+1832], 0
$LN7@GDGuildDes:

; 462  : 		}
; 463  : 
; 464  : 		lpGuild->iGuildUnion = 0;

  0011f	8d 86 a0 03 00
	00		 lea	 eax, DWORD PTR [esi+928]
  00125	53		 push	 ebx
  00126	89 be 1c 07 00
	00		 mov	 DWORD PTR [esi+1820], edi

; 465  : 		lpGuild->iGuildRival = 0;

  0012c	89 be 20 07 00
	00		 mov	 DWORD PTR [esi+1824], edi
  00132	bb 6f 00 00 00	 mov	 ebx, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+111
  00137	89 45 e0	 mov	 DWORD PTR tv406[ebp], eax
  0013a	8d 9b 00 00 00
	00		 npad	 6
$LL6@GDGuildDes:

; 468  : 		{
; 469  : 			int iGuildMemberIndex = lpGuild->Index[n];
; 470  : 
; 471  : 			if ( lpGuild->Use[n] > 0 && iGuildMemberIndex != -1 )

  00140	80 bc 3e 40 04
	00 00 00	 cmp	 BYTE PTR [esi+edi+1088], 0
  00148	8b 4d e0	 mov	 ecx, DWORD PTR tv406[ebp]
  0014b	0f bf 01	 movsx	 eax, WORD PTR [ecx]
  0014e	0f 86 81 00 00
	00		 jbe	 $LN5@GDGuildDes
  00154	83 f8 ff	 cmp	 eax, -1
  00157	74 7c		 je	 SHORT $LN5@GDGuildDes

; 472  : 			{
; 473  : 				LPOBJ lpObj = &gObj[iGuildMemberIndex];

  00159	8b f0		 mov	 esi, eax
  0015b	69 f6 64 15 00
	00		 imul	 esi, 5476		; 00001564H
  00161	81 c6 00 00 00
	00		 add	 esi, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 474  : 				
; 475  : 				if ( lpObj == NULL )

  00167	74 69		 je	 SHORT $LN27@GDGuildDes

; 476  : 				{
; 477  : 					continue;
; 478  : 				}
; 479  : 
; 480  : 				if ( gObjIsConnected(iGuildMemberIndex) == FALSE )

  00169	50		 push	 eax
  0016a	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0016f	83 c4 04	 add	 esp, 4
  00172	85 c0		 test	 eax, eax
  00174	74 5c		 je	 SHORT $LN27@GDGuildDes

; 481  : 				{
; 482  : 					continue;
; 483  : 				}
; 484  : 
; 485  : 				gObjNotifyUpdateUnionV1(lpObj);

  00176	56		 push	 esi
  00177	e8 00 00 00 00	 call	 ?gObjNotifyUpdateUnionV1@@YAXPAUOBJECTSTRUCT@@@Z ; gObjNotifyUpdateUnionV1

; 486  : 				gObjNotifyUpdateUnionV2(lpObj);

  0017c	56		 push	 esi
  0017d	e8 00 00 00 00	 call	 ?gObjNotifyUpdateUnionV2@@YAXPAUOBJECTSTRUCT@@@Z ; gObjNotifyUpdateUnionV2

; 487  : 				lpObj->lpGuild = NULL;
; 488  : 				lpObj->GuildNumber = 0;
; 489  : 				lpObj->GuildStatus = -1;
; 490  : 				lpObj->iGuildUnionTimeStamp = 0;
; 491  : 
; 492  : 				GCResultSend(n,0x53, 1);

  00182	6a 01		 push	 1
  00184	33 c0		 xor	 eax, eax
  00186	6a 53		 push	 83			; 00000053H
  00188	57		 push	 edi
  00189	89 86 b4 02 00
	00		 mov	 DWORD PTR [esi+692], eax
  0018f	89 86 b0 02 00
	00		 mov	 DWORD PTR [esi+688], eax
  00195	c7 86 c4 02 00
	00 ff ff ff ff	 mov	 DWORD PTR [esi+708], -1
  0019f	89 86 c8 02 00
	00		 mov	 DWORD PTR [esi+712], eax
  001a5	e8 00 00 00 00	 call	 ?GCResultSend@@YAXHEE@Z	; GCResultSend

; 493  : 				GCGuildViewportDelNow(lpObj->m_Index, FALSE);

  001aa	8b 16		 mov	 edx, DWORD PTR [esi]
  001ac	6a 00		 push	 0
  001ae	52		 push	 edx
  001af	e8 00 00 00 00	 call	 ?GCGuildViewportDelNow@@YAXHH@Z ; GCGuildViewportDelNow
  001b4	83 c4 1c	 add	 esp, 28			; 0000001cH

; 494  : 
; 495  : 				LogAdd(LOG_BLACK, lMsg.Get(MSGGET(1, 178)), gObj[n].Name);

  001b7	53		 push	 ebx
  001b8	68 b2 01 00 00	 push	 434			; 000001b2H
  001bd	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  001c2	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  001c7	50		 push	 eax
  001c8	6a 00		 push	 0
  001ca	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  001cf	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN27@GDGuildDes:
  001d2	8b 75 dc	 mov	 esi, DWORD PTR _lpGuild$157067[ebp]
$LN5@GDGuildDes:

; 466  : 
; 467  : 		for ( int n=0;n<MAX_USER_GUILD;n++)

  001d5	83 45 e0 02	 add	 DWORD PTR tv406[ebp], 2
  001d9	81 c3 64 15 00
	00		 add	 ebx, 5476		; 00001564H
  001df	47		 inc	 edi
  001e0	81 fb af af 06
	00		 cmp	 ebx, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+438191
  001e6	0f 8c 54 ff ff
	ff		 jl	 $LL6@GDGuildDes

; 496  : 			}
; 497  : 		}
; 498  : 
; 499  : 		UnionManager.DelUnion(lpGuild->Number);

  001ec	8b 06		 mov	 eax, DWORD PTR [esi]
  001ee	50		 push	 eax
  001ef	b9 00 00 00 00	 mov	 ecx, OFFSET ?UnionManager@@3VTUnion@@A ; UnionManager
  001f4	e8 00 00 00 00	 call	 ?DelUnion@TUnion@@QAEHH@Z ; TUnion::DelUnion

; 500  : 		Guild.DeleteGuild(szGuildName, szMaster);

  001f9	8d 4d f0	 lea	 ecx, DWORD PTR _szMaster$[ebp]
  001fc	51		 push	 ecx
  001fd	8d 55 e4	 lea	 edx, DWORD PTR _szGuildName$[ebp]
  00200	52		 push	 edx
  00201	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00206	e8 00 00 00 00	 call	 ?DeleteGuild@CGuildClass@@QAEHPAD0@Z ; CGuildClass::DeleteGuild

; 501  : 
; 502  : 		LogAdd(LOG_BLACK, lMsg.Get(MSGGET(1, 179)), szGuildName, szMaster);

  0020b	8d 45 f0	 lea	 eax, DWORD PTR _szMaster$[ebp]
  0020e	50		 push	 eax
  0020f	8d 4d e4	 lea	 ecx, DWORD PTR _szGuildName$[ebp]
  00212	51		 push	 ecx
  00213	68 b3 01 00 00	 push	 435			; 000001b3H
  00218	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0021d	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  00222	50		 push	 eax
  00223	6a 00		 push	 0
  00225	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0022a	83 c4 10	 add	 esp, 16			; 00000010H
  0022d	5b		 pop	 ebx
$LN10@GDGuildDes:

; 503  : 	}
; 504  : }

  0022e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00231	5f		 pop	 edi
  00232	33 cd		 xor	 ecx, ebp
  00234	5e		 pop	 esi
  00235	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0023a	8b e5		 mov	 esp, ebp
  0023c	5d		 pop	 ebp
  0023d	c3		 ret	 0
?GDGuildDestroyRecv@@YAXPAUSDHP_GUILDDESTROY_RESULT@@@Z ENDP ; GDGuildDestroyRecv
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDGuildMemberAdd@@YAXHPAD0@Z			; GDGuildMemberAdd
; Function compile flags: /Ogtp
;	COMDAT ?GDGuildMemberAdd@@YAXHPAD0@Z
_TEXT	SEGMENT
_pMsg$ = -32						; size = 25
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_Name$ = 12						; size = 4
_MemberId$ = 16						; size = 4
?GDGuildMemberAdd@@YAXHPAD0@Z PROC			; GDGuildMemberAdd, COMDAT

; 520  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 20	 sub	 esp, 32			; 00000020H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 45 10	 mov	 eax, DWORD PTR _MemberId$[ebp]

; 521  : 	SDHP_GUILDMEMBERADD pMsg;
; 522  : 
; 523  : 	pMsg.h.c = 0xC1;
; 524  : 	pMsg.h.headcode = 0x32;
; 525  : 	pMsg.h.size = sizeof(pMsg);
; 526  : 	pMsg.NumberH = SET_NUMBERH(aIndex);

  00013	8b 55 08	 mov	 edx, DWORD PTR _aIndex$[ebp]
  00016	8b 4d 0c	 mov	 ecx, DWORD PTR _Name$[ebp]
  00019	53		 push	 ebx
  0001a	8b da		 mov	 ebx, edx

; 527  : 	pMsg.NumberL = SET_NUMBERL(aIndex);

  0001c	88 55 f8	 mov	 BYTE PTR _pMsg$[ebp+24], dl

; 528  : 	pMsg.MemberID[MAX_GUILD_LEN] = 0;	// #error should be MAX_ACCOUNT_LEN
; 529  : 	pMsg.GuildName[MAX_ACCOUNT_LEN] = 0;	// #error should be MAX_GUILD_LEN
; 530  : 	memcpy(pMsg.MemberID, MemberId, MAX_ACCOUNT_LEN);

  0001f	8b 10		 mov	 edx, DWORD PTR [eax]
  00021	89 55 ec	 mov	 DWORD PTR _pMsg$[ebp+12], edx
  00024	8b 50 04	 mov	 edx, DWORD PTR [eax+4]
  00027	66 8b 40 08	 mov	 ax, WORD PTR [eax+8]
  0002b	89 55 f0	 mov	 DWORD PTR _pMsg$[ebp+16], edx

; 531  : 	memcpy(pMsg.GuildName, Name, MAX_GUILD_LEN);

  0002e	8b 11		 mov	 edx, DWORD PTR [ecx]
  00030	66 89 45 f4	 mov	 WORD PTR _pMsg$[ebp+20], ax
  00034	8b 41 04	 mov	 eax, DWORD PTR [ecx+4]

; 532  : 
; 533  : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  00037	6a 19		 push	 25			; 00000019H
  00039	8d 4d e0	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0003c	51		 push	 ecx
  0003d	c1 eb 08	 shr	 ebx, 8
  00040	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00045	c6 45 e0 c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H
  00049	66 c7 45 e1 19
	32		 mov	 WORD PTR _pMsg$[ebp+1], 12825 ; 00003219H
  0004f	88 5d f7	 mov	 BYTE PTR _pMsg$[ebp+23], bl
  00052	89 55 e3	 mov	 DWORD PTR _pMsg$[ebp+3], edx
  00055	89 45 e7	 mov	 DWORD PTR _pMsg$[ebp+7], eax
  00058	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 534  : }

  0005d	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00060	33 cd		 xor	 ecx, ebp
  00062	5b		 pop	 ebx
  00063	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00068	8b e5		 mov	 esp, ebp
  0006a	5d		 pop	 ebp
  0006b	c3		 ret	 0
?GDGuildMemberAdd@@YAXHPAD0@Z ENDP			; GDGuildMemberAdd
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDGuildMemberAddResult@@YAXPAUSDHP_GUILDMEMBERADD_RESULT@@@Z ; GDGuildMemberAddResult
EXTRN	?AddMember@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@PAD0HHHH@Z:PROC ; CGuildClass::AddMember
; Function compile flags: /Ogtp
;	COMDAT ?GDGuildMemberAddResult@@YAXPAUSDHP_GUILDMEMBERADD_RESULT@@@Z
_TEXT	SEGMENT
_HereUserIndex$ = -32					; size = 4
_szMember$ = -28					; size = 11
_szGuildName$ = -16					; size = 9
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?GDGuildMemberAddResult@@YAXPAUSDHP_GUILDMEMBERADD_RESULT@@@Z PROC ; GDGuildMemberAddResult, COMDAT

; 541  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 20	 sub	 esp, 32			; 00000020H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 542  : 	_GUILD_INFO_STRUCT * lpNode;
; 543  : 	int aIndex = -1;
; 544  : 	int HereUserIndex=-1;
; 545  : 	char szMember[MAX_ACCOUNT_LEN+1];
; 546  : 	char szGuildName[MAX_GUILD_LEN+1];
; 547  : 	szMember[MAX_ACCOUNT_LEN] = 0;
; 548  : 	szGuildName[MAX_GUILD_LEN] = 0;
; 549  : 
; 550  : 	memcpy(szMember, lpMsg->MemberID, MAX_ACCOUNT_LEN);

  00015	8b 46 10	 mov	 eax, DWORD PTR [esi+16]
  00018	8b 4e 14	 mov	 ecx, DWORD PTR [esi+20]
  0001b	66 8b 56 18	 mov	 dx, WORD PTR [esi+24]
  0001f	33 db		 xor	 ebx, ebx
  00021	57		 push	 edi
  00022	83 cf ff	 or	 edi, -1

; 551  : 	memcpy(szGuildName, lpMsg->GuildName, MAX_GUILD_LEN);
; 552  : 
; 553  : 	if ( lpMsg->Flag == 1 )

  00025	80 7e 04 01	 cmp	 BYTE PTR [esi+4], 1
  00029	89 45 e4	 mov	 DWORD PTR _szMember$[ebp], eax
  0002c	8b 46 07	 mov	 eax, DWORD PTR [esi+7]
  0002f	89 4d e8	 mov	 DWORD PTR _szMember$[ebp+4], ecx
  00032	8b 4e 0b	 mov	 ecx, DWORD PTR [esi+11]
  00035	89 7d e0	 mov	 DWORD PTR _HereUserIndex$[ebp], edi
  00038	88 5d ee	 mov	 BYTE PTR _szMember$[ebp+10], bl
  0003b	88 5d f8	 mov	 BYTE PTR _szGuildName$[ebp+8], bl
  0003e	66 89 55 ec	 mov	 WORD PTR _szMember$[ebp+8], dx
  00042	89 45 f0	 mov	 DWORD PTR _szGuildName$[ebp], eax
  00045	89 4d f4	 mov	 DWORD PTR _szGuildName$[ebp+4], ecx
  00048	75 72		 jne	 SHORT $LN12@GDGuildMem

; 554  : 	{
; 555  : 		aIndex = MAKE_NUMBERW(lpMsg->NumberH, lpMsg->NumberL);

  0004a	0f b6 56 05	 movzx	 edx, BYTE PTR [esi+5]
  0004e	0f b6 46 06	 movzx	 eax, BYTE PTR [esi+6]
  00052	66 c1 e2 08	 shl	 dx, 8
  00056	0f b7 fa	 movzx	 edi, dx
  00059	0b f8		 or	 edi, eax

; 556  : 
; 557  : 		if ( gObjIsConnected(aIndex) == TRUE )

  0005b	57		 push	 edi
  0005c	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  00061	83 c4 04	 add	 esp, 4
  00064	83 f8 01	 cmp	 eax, 1
  00067	75 53		 jne	 SHORT $LN12@GDGuildMem

; 558  : 		{
; 559  : 			//if ( szMember[0] == gObj[aIndex].Name[0] )
; 560  : 			//{
; 561  : 				if ( strcmp(szMember, gObj[aIndex].Name) == 0 )

  00069	8b c7		 mov	 eax, edi
  0006b	69 c0 64 15 00
	00		 imul	 eax, 5476		; 00001564H
  00071	05 6f 00 00 00	 add	 eax, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+111
  00076	8d 4d e4	 lea	 ecx, DWORD PTR _szMember$[ebp]
  00079	8d a4 24 00 00
	00 00		 npad	 7
$LL8@GDGuildMem:
  00080	8a 11		 mov	 dl, BYTE PTR [ecx]
  00082	3a 10		 cmp	 dl, BYTE PTR [eax]
  00084	75 1a		 jne	 SHORT $LN9@GDGuildMem
  00086	3a d3		 cmp	 dl, bl
  00088	74 12		 je	 SHORT $LN10@GDGuildMem
  0008a	8a 51 01	 mov	 dl, BYTE PTR [ecx+1]
  0008d	3a 50 01	 cmp	 dl, BYTE PTR [eax+1]
  00090	75 0e		 jne	 SHORT $LN9@GDGuildMem
  00092	83 c1 02	 add	 ecx, 2
  00095	83 c0 02	 add	 eax, 2
  00098	3a d3		 cmp	 dl, bl
  0009a	75 e4		 jne	 SHORT $LL8@GDGuildMem
$LN10@GDGuildMem:
  0009c	33 c0		 xor	 eax, eax
  0009e	eb 05		 jmp	 SHORT $LN11@GDGuildMem
$LN9@GDGuildMem:
  000a0	1b c0		 sbb	 eax, eax
  000a2	83 d8 ff	 sbb	 eax, -1
$LN11@GDGuildMem:
  000a5	3b c3		 cmp	 eax, ebx
  000a7	75 13		 jne	 SHORT $LN12@GDGuildMem

; 562  : 				{
; 563  : 					GCResultSend(aIndex, 0x51, lpMsg->Result);

  000a9	0f b6 4e 03	 movzx	 ecx, BYTE PTR [esi+3]
  000ad	51		 push	 ecx
  000ae	6a 51		 push	 81			; 00000051H
  000b0	57		 push	 edi
  000b1	e8 00 00 00 00	 call	 ?GCResultSend@@YAXHEE@Z	; GCResultSend
  000b6	83 c4 0c	 add	 esp, 12			; 0000000cH

; 564  : 					HereUserIndex = aIndex;

  000b9	89 7d e0	 mov	 DWORD PTR _HereUserIndex$[ebp], edi
$LN12@GDGuildMem:

; 565  : 				}
; 566  : 			//}
; 567  : 		}
; 568  : 	}
; 569  : 
; 570  : 	if ( lpMsg->Result == 1 )

  000bc	80 7e 03 01	 cmp	 BYTE PTR [esi+3], 1
  000c0	75 5a		 jne	 SHORT $LN1@GDGuildMem

; 571  : 	{
; 572  : 		lpNode = Guild.AddMember(szGuildName, szMember, HereUserIndex, -1, 0, lpMsg->pServer);

  000c2	0f bf 56 1c	 movsx	 edx, WORD PTR [esi+28]
  000c6	8b 45 e0	 mov	 eax, DWORD PTR _HereUserIndex$[ebp]
  000c9	52		 push	 edx
  000ca	53		 push	 ebx
  000cb	6a ff		 push	 -1
  000cd	50		 push	 eax
  000ce	8d 4d e4	 lea	 ecx, DWORD PTR _szMember$[ebp]
  000d1	51		 push	 ecx
  000d2	8d 55 f0	 lea	 edx, DWORD PTR _szGuildName$[ebp]
  000d5	52		 push	 edx
  000d6	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  000db	e8 00 00 00 00	 call	 ?AddMember@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@PAD0HHHH@Z ; CGuildClass::AddMember

; 573  : 
; 574  : 		if ( aIndex >= 0 && lpNode != NULL )

  000e0	3b fb		 cmp	 edi, ebx
  000e2	7c 38		 jl	 SHORT $LN1@GDGuildMem
  000e4	3b c3		 cmp	 eax, ebx
  000e6	74 34		 je	 SHORT $LN1@GDGuildMem

; 575  : 		{
; 576  : 			gObj[aIndex].lpGuild = lpNode;

  000e8	8b cf		 mov	 ecx, edi
  000ea	69 c9 64 15 00
	00		 imul	 ecx, 5476		; 00001564H
  000f0	89 81 b4 02 00
	00		 mov	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[ecx+692], eax

; 577  : 			gObj[aIndex].GuildStatus = 0;

  000f6	89 99 c4 02 00
	00		 mov	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[ecx+708], ebx

; 578  : 			gObj[aIndex].GuildNumber = lpNode->Number;

  000fc	8b 10		 mov	 edx, DWORD PTR [eax]

; 579  : 			gObj[aIndex].iGuildUnionTimeStamp = 0;
; 580  : 			GCGuildViewportNowPaint(aIndex, szGuildName, gObj[aIndex].lpGuild->Mark, FALSE);

  000fe	53		 push	 ebx
  000ff	83 c0 0d	 add	 eax, 13			; 0000000dH
  00102	50		 push	 eax
  00103	8d 45 f0	 lea	 eax, DWORD PTR _szGuildName$[ebp]
  00106	50		 push	 eax
  00107	57		 push	 edi
  00108	89 91 b0 02 00
	00		 mov	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[ecx+688], edx
  0010e	89 99 c8 02 00
	00		 mov	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[ecx+712], ebx
  00114	e8 00 00 00 00	 call	 ?GCGuildViewportNowPaint@@YAXHPADPAEH@Z ; GCGuildViewportNowPaint
  00119	83 c4 10	 add	 esp, 16			; 00000010H
$LN1@GDGuildMem:

; 581  : 		}
; 582  : 	}
; 583  : }

  0011c	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0011f	5f		 pop	 edi
  00120	5e		 pop	 esi
  00121	33 cd		 xor	 ecx, ebp
  00123	5b		 pop	 ebx
  00124	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00129	8b e5		 mov	 esp, ebp
  0012b	5d		 pop	 ebp
  0012c	c3		 ret	 0
?GDGuildMemberAddResult@@YAXPAUSDHP_GUILDMEMBERADD_RESULT@@@Z ENDP ; GDGuildMemberAddResult
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDGuildMemberDel@@YAXHPAD0@Z			; GDGuildMemberDel
; Function compile flags: /Ogtp
;	COMDAT ?GDGuildMemberDel@@YAXHPAD0@Z
_TEXT	SEGMENT
_pMsg$ = -28						; size = 23
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_Name$ = 12						; size = 4
_MemberId$ = 16						; size = 4
?GDGuildMemberDel@@YAXHPAD0@Z PROC			; GDGuildMemberDel, COMDAT

; 599  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 1c	 sub	 esp, 28			; 0000001cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 45 10	 mov	 eax, DWORD PTR _MemberId$[ebp]

; 600  : 	SDHP_GUILDMEMBERDEL pMsg;
; 601  : 
; 602  : 	pMsg.h.c = 0xC1;
; 603  : 	pMsg.h.headcode = 0x33;
; 604  : 	pMsg.h.size = sizeof(pMsg);
; 605  : 	pMsg.NumberH = SET_NUMBERH(aIndex);

  00013	8b 55 08	 mov	 edx, DWORD PTR _aIndex$[ebp]
  00016	8b 4d 0c	 mov	 ecx, DWORD PTR _Name$[ebp]
  00019	53		 push	 ebx
  0001a	8b da		 mov	 ebx, edx

; 606  : 	pMsg.NumberL = SET_NUMBERL(aIndex);

  0001c	88 55 e8	 mov	 BYTE PTR _pMsg$[ebp+4], dl

; 607  : 	memcpy(pMsg.MemberID, MemberId, MAX_ACCOUNT_LEN);

  0001f	8b 10		 mov	 edx, DWORD PTR [eax]
  00021	89 55 f1	 mov	 DWORD PTR _pMsg$[ebp+13], edx
  00024	8b 50 04	 mov	 edx, DWORD PTR [eax+4]
  00027	66 8b 40 08	 mov	 ax, WORD PTR [eax+8]
  0002b	89 55 f5	 mov	 DWORD PTR _pMsg$[ebp+17], edx

; 608  : 	memcpy(pMsg.GuildName, Name, MAX_GUILD_LEN);

  0002e	8b 11		 mov	 edx, DWORD PTR [ecx]
  00030	66 89 45 f9	 mov	 WORD PTR _pMsg$[ebp+21], ax
  00034	8b 41 04	 mov	 eax, DWORD PTR [ecx+4]

; 609  : 
; 610  : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  00037	6a 17		 push	 23			; 00000017H
  00039	8d 4d e4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0003c	51		 push	 ecx
  0003d	c1 eb 08	 shr	 ebx, 8
  00040	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00045	c6 45 e4 c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H
  00049	66 c7 45 e5 17
	33		 mov	 WORD PTR _pMsg$[ebp+1], 13079 ; 00003317H
  0004f	88 5d e7	 mov	 BYTE PTR _pMsg$[ebp+3], bl
  00052	89 55 e9	 mov	 DWORD PTR _pMsg$[ebp+5], edx
  00055	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  00058	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 611  : }

  0005d	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00060	33 cd		 xor	 ecx, ebp
  00062	5b		 pop	 ebx
  00063	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00068	8b e5		 mov	 esp, ebp
  0006a	5d		 pop	 ebp
  0006b	c3		 ret	 0
?GDGuildMemberDel@@YAXHPAD0@Z ENDP			; GDGuildMemberDel
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDGuildMemberDelResult@@YAXPAUSDHP_GUILDMEMBERDEL_RESULT@@@Z ; GDGuildMemberDelResult
EXTRN	?DelMember@CGuildClass@@QAEHPAD0@Z:PROC		; CGuildClass::DelMember
; Function compile flags: /Ogtp
;	COMDAT ?GDGuildMemberDelResult@@YAXPAUSDHP_GUILDMEMBERDEL_RESULT@@@Z
_TEXT	SEGMENT
_aIndex$ = -32						; size = 4
_szGuildName$ = -28					; size = 9
_szMember$ = -16					; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?GDGuildMemberDelResult@@YAXPAUSDHP_GUILDMEMBERDEL_RESULT@@@Z PROC ; GDGuildMemberDelResult, COMDAT

; 617  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 20	 sub	 esp, 32			; 00000020H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 618  : 	int aIndex = -1;
; 619  : 	char szMember[MAX_ACCOUNT_LEN+1];
; 620  : 	char szGuildName[MAX_GUILD_LEN+1];
; 621  : 	szMember[MAX_ACCOUNT_LEN] = 0;
; 622  : 	szGuildName[MAX_GUILD_LEN] = 0;
; 623  : 
; 624  : 	memcpy(szMember, lpMsg->MemberID, MAX_ACCOUNT_LEN);

  00015	8b 46 10	 mov	 eax, DWORD PTR [esi+16]
  00018	8b 4e 14	 mov	 ecx, DWORD PTR [esi+20]
  0001b	66 8b 56 18	 mov	 dx, WORD PTR [esi+24]
  0001f	33 db		 xor	 ebx, ebx

; 625  : 	memcpy(szGuildName, lpMsg->GuildName, MAX_GUILD_LEN);
; 626  : 
; 627  : 	if ( lpMsg->Flag == 1 )

  00021	80 7e 04 01	 cmp	 BYTE PTR [esi+4], 1
  00025	89 45 f0	 mov	 DWORD PTR _szMember$[ebp], eax
  00028	8b 46 07	 mov	 eax, DWORD PTR [esi+7]
  0002b	89 4d f4	 mov	 DWORD PTR _szMember$[ebp+4], ecx
  0002e	8b 4e 0b	 mov	 ecx, DWORD PTR [esi+11]
  00031	57		 push	 edi
  00032	c7 45 e0 ff ff
	ff ff		 mov	 DWORD PTR _aIndex$[ebp], -1
  00039	88 5d fa	 mov	 BYTE PTR _szMember$[ebp+10], bl
  0003c	88 5d ec	 mov	 BYTE PTR _szGuildName$[ebp+8], bl
  0003f	66 89 55 f8	 mov	 WORD PTR _szMember$[ebp+8], dx
  00043	89 45 e4	 mov	 DWORD PTR _szGuildName$[ebp], eax
  00046	89 4d e8	 mov	 DWORD PTR _szGuildName$[ebp+4], ecx
  00049	0f 85 a6 00 00
	00		 jne	 $LN28@GDGuildMem@2

; 628  : 	{
; 629  : 		aIndex = MAKE_NUMBERW(lpMsg->NumberH, lpMsg->NumberL);

  0004f	0f b6 56 05	 movzx	 edx, BYTE PTR [esi+5]
  00053	0f b6 46 06	 movzx	 eax, BYTE PTR [esi+6]
  00057	66 c1 e2 08	 shl	 dx, 8
  0005b	0f b7 fa	 movzx	 edi, dx
  0005e	0b f8		 or	 edi, eax

; 630  : 
; 631  : 		if ( gObjIsConnected(aIndex) == TRUE )

  00060	57		 push	 edi
  00061	89 7d e0	 mov	 DWORD PTR _aIndex$[ebp], edi
  00064	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected

; 632  : 		{
; 633  : 			//if ( szMember[0] == gObj[aIndex].Name[0] )
; 634  : 			//{
; 635  : 				if ( strcmp(szMember, gObj[aIndex].Name) == 0 )

  00069	69 ff 64 15 00
	00		 imul	 edi, 5476		; 00001564H
  0006f	83 c4 04	 add	 esp, 4
  00072	83 f8 01	 cmp	 eax, 1
  00075	75 5e		 jne	 SHORT $LN14@GDGuildMem@2
  00077	8d bf 6f 00 00
	00		 lea	 edi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[edi+111]
  0007d	8b cf		 mov	 ecx, edi
  0007f	8d 45 f0	 lea	 eax, DWORD PTR _szMember$[ebp]
$LL20@GDGuildMem@2:
  00082	8a 10		 mov	 dl, BYTE PTR [eax]
  00084	3a 11		 cmp	 dl, BYTE PTR [ecx]
  00086	75 1a		 jne	 SHORT $LN21@GDGuildMem@2
  00088	3a d3		 cmp	 dl, bl
  0008a	74 12		 je	 SHORT $LN22@GDGuildMem@2
  0008c	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  0008f	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  00092	75 0e		 jne	 SHORT $LN21@GDGuildMem@2
  00094	83 c0 02	 add	 eax, 2
  00097	83 c1 02	 add	 ecx, 2
  0009a	3a d3		 cmp	 dl, bl
  0009c	75 e4		 jne	 SHORT $LL20@GDGuildMem@2
$LN22@GDGuildMem@2:
  0009e	33 c0		 xor	 eax, eax
  000a0	eb 05		 jmp	 SHORT $LN23@GDGuildMem@2
$LN21@GDGuildMem@2:
  000a2	1b c0		 sbb	 eax, eax
  000a4	83 d8 ff	 sbb	 eax, -1
$LN23@GDGuildMem@2:
  000a7	3b c3		 cmp	 eax, ebx
  000a9	75 1b		 jne	 SHORT $LN13@GDGuildMem@2

; 636  : 				{
; 637  : 					GCResultSend(aIndex, 0x53, lpMsg->Result);

  000ab	0f b6 4e 03	 movzx	 ecx, BYTE PTR [esi+3]
  000af	8b 55 e0	 mov	 edx, DWORD PTR _aIndex$[ebp]
  000b2	51		 push	 ecx
  000b3	6a 53		 push	 83			; 00000053H
  000b5	52		 push	 edx
  000b6	e8 00 00 00 00	 call	 ?GCResultSend@@YAXHEE@Z	; GCResultSend
  000bb	83 c4 0c	 add	 esp, 12			; 0000000cH

; 638  : 					LogAdd(LOG_BLACK, lMsg.Get(MSGGET(1, 180)), gObj[aIndex].Name);

  000be	57		 push	 edi
  000bf	68 b4 01 00 00	 push	 436			; 000001b4H

; 639  : 				}
; 640  : 				else

  000c4	eb 1b		 jmp	 SHORT $LN29@GDGuildMem@2
$LN13@GDGuildMem@2:

; 641  : 				{
; 642  : 					GCResultSend(aIndex, 0x53, 5);

  000c6	8b 45 e0	 mov	 eax, DWORD PTR _aIndex$[ebp]
  000c9	6a 05		 push	 5
  000cb	6a 53		 push	 83			; 00000053H
  000cd	50		 push	 eax
  000ce	e8 00 00 00 00	 call	 ?GCResultSend@@YAXHEE@Z	; GCResultSend

; 643  : 				}
; 644  : 			//}
; 645  : 		}
; 646  : 		else

  000d3	eb 1d		 jmp	 SHORT $LN30@GDGuildMem@2
$LN14@GDGuildMem@2:

; 647  : 		{
; 648  : 			LogAdd(LOG_BLACK, lMsg.Get(MSGGET(1, 181)), gObj[aIndex].Name);

  000d5	81 c7 6f 00 00
	00		 add	 edi, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+111
  000db	57		 push	 edi
  000dc	68 b5 01 00 00	 push	 437			; 000001b5H
$LN29@GDGuildMem@2:
  000e1	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  000e6	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  000eb	50		 push	 eax
  000ec	53		 push	 ebx
  000ed	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
$LN30@GDGuildMem@2:
  000f2	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN28@GDGuildMem@2:

; 649  : 		}
; 650  : 	}
; 651  : 
; 652  : 	if ( lpMsg->Result == 1 )

  000f5	8a 46 03	 mov	 al, BYTE PTR [esi+3]
  000f8	3c 01		 cmp	 al, 1
  000fa	0f 85 e6 00 00
	00		 jne	 $LN10@GDGuildMem@2

; 653  : 	{
; 654  : 		int iMember = 0;

  00100	33 f6		 xor	 esi, esi
  00102	bf b0 02 00 00	 mov	 edi, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+688
$LL9@GDGuildMem@2:

; 655  : 
; 656  : 		while ( true )
; 657  : 		{
; 658  : 			if ( gObj[iMember].Connected > PLAYER_LOGGED)

  00107	80 bf 54 fd ff
	ff 02		 cmp	 BYTE PTR [edi-684], 2
  0010e	76 4c		 jbe	 SHORT $LN4@GDGuildMem@2

; 659  : 			{
; 660  : 				if ( gObj[iMember].GuildNumber > 0 )

  00110	39 1f		 cmp	 DWORD PTR [edi], ebx
  00112	7e 48		 jle	 SHORT $LN4@GDGuildMem@2

; 661  : 				{
; 662  : 					if ( gObj[iMember].Name[0] == szMember[0] && gObj[iMember].Name[1] == szMember[1] )

  00114	8a 4d f0	 mov	 cl, BYTE PTR _szMember$[ebp]
  00117	38 8f bf fd ff
	ff		 cmp	 BYTE PTR [edi-577], cl
  0011d	8d 87 bf fd ff
	ff		 lea	 eax, DWORD PTR [edi-577]
  00123	75 37		 jne	 SHORT $LN4@GDGuildMem@2
  00125	8a 55 f1	 mov	 dl, BYTE PTR _szMember$[ebp+1]
  00128	38 97 c0 fd ff
	ff		 cmp	 BYTE PTR [edi-576], dl
  0012e	75 2c		 jne	 SHORT $LN4@GDGuildMem@2

; 663  : 					{
; 664  : 						if ( strcmp(gObj[iMember].Name, szMember) == 0 )

  00130	8d 4d f0	 lea	 ecx, DWORD PTR _szMember$[ebp]
$LL24@GDGuildMem@2:
  00133	8a 10		 mov	 dl, BYTE PTR [eax]
  00135	3a 11		 cmp	 dl, BYTE PTR [ecx]
  00137	75 1a		 jne	 SHORT $LN25@GDGuildMem@2
  00139	3a d3		 cmp	 dl, bl
  0013b	74 12		 je	 SHORT $LN26@GDGuildMem@2
  0013d	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  00140	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  00143	75 0e		 jne	 SHORT $LN25@GDGuildMem@2
  00145	83 c0 02	 add	 eax, 2
  00148	83 c1 02	 add	 ecx, 2
  0014b	3a d3		 cmp	 dl, bl
  0014d	75 e4		 jne	 SHORT $LL24@GDGuildMem@2
$LN26@GDGuildMem@2:
  0014f	33 c0		 xor	 eax, eax
  00151	eb 05		 jmp	 SHORT $LN27@GDGuildMem@2
$LN25@GDGuildMem@2:
  00153	1b c0		 sbb	 eax, eax
  00155	83 d8 ff	 sbb	 eax, -1
$LN27@GDGuildMem@2:
  00158	3b c3		 cmp	 eax, ebx
  0015a	74 11		 je	 SHORT $LN19@GDGuildMem@2
$LN4@GDGuildMem@2:

; 674  : 							break;
; 675  : 						}
; 676  : 					}
; 677  : 				}
; 678  : 			}
; 679  : 
; 680  : 			if ( iMember < OBJMAX-1 )

  0015c	81 ff ec 3f 6a
	02		 cmp	 edi, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+40517612
  00162	7d 5f		 jge	 SHORT $LN3@GDGuildMem@2

; 681  : 			{
; 682  : 				iMember++;

  00164	46		 inc	 esi
  00165	81 c7 64 15 00
	00		 add	 edi, 5476		; 00001564H

; 683  : 			}
; 684  : 			else
; 685  : 			{
; 686  : 				break;
; 687  : 			}
; 688  : 		}

  0016b	eb 9a		 jmp	 SHORT $LL9@GDGuildMem@2
$LN19@GDGuildMem@2:

; 665  : 						{
; 666  : 							GCGuildViewportDelNow(iMember, FALSE);

  0016d	53		 push	 ebx
  0016e	56		 push	 esi
  0016f	e8 00 00 00 00	 call	 ?GCGuildViewportDelNow@@YAXHH@Z ; GCGuildViewportDelNow

; 667  : 							gObj[iMember].lpGuild = NULL;

  00174	69 f6 64 15 00
	00		 imul	 esi, 5476		; 00001564H

; 668  : 							gObj[iMember].GuildNumber = 0;
; 669  : 							gObj[iMember].GuildStatus = -1;
; 670  : 							gObjNotifyUpdateUnionV1(&gObj[iMember]);

  0017a	8d 86 00 00 00
	00		 lea	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi]
  00180	50		 push	 eax
  00181	89 9e b4 02 00
	00		 mov	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+692], ebx
  00187	89 9e b0 02 00
	00		 mov	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+688], ebx
  0018d	c7 86 c4 02 00
	00 ff ff ff ff	 mov	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+708], -1
  00197	e8 00 00 00 00	 call	 ?gObjNotifyUpdateUnionV1@@YAXPAUOBJECTSTRUCT@@@Z ; gObjNotifyUpdateUnionV1

; 671  : 
; 672  : 							// User is ejected from guild %d %s
; 673  : 							LogAdd(LOG_BLACK, lMsg.Get(MSGGET(1, 182)), aIndex, gObj[iMember].Name);

  0019c	8b 55 e0	 mov	 edx, DWORD PTR _aIndex$[ebp]
  0019f	83 c4 0c	 add	 esp, 12			; 0000000cH
  001a2	8d 8e 6f 00 00
	00		 lea	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+111]
  001a8	51		 push	 ecx
  001a9	52		 push	 edx
  001aa	68 b6 01 00 00	 push	 438			; 000001b6H
  001af	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  001b4	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  001b9	50		 push	 eax
  001ba	53		 push	 ebx
  001bb	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  001c0	83 c4 10	 add	 esp, 16			; 00000010H
$LN3@GDGuildMem@2:

; 689  : 
; 690  : 		Guild.DelMember(szGuildName, szMember);

  001c3	8d 45 f0	 lea	 eax, DWORD PTR _szMember$[ebp]
  001c6	50		 push	 eax
  001c7	8d 4d e4	 lea	 ecx, DWORD PTR _szGuildName$[ebp]
  001ca	51		 push	 ecx
  001cb	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  001d0	e8 00 00 00 00	 call	 ?DelMember@CGuildClass@@QAEHPAD0@Z ; CGuildClass::DelMember
  001d5	5f		 pop	 edi
  001d6	5e		 pop	 esi
  001d7	5b		 pop	 ebx

; 695  : 	}
; 696  : }

  001d8	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001db	33 cd		 xor	 ecx, ebp
  001dd	e8 00 00 00 00	 call	 @__security_check_cookie@4
  001e2	8b e5		 mov	 esp, ebp
  001e4	5d		 pop	 ebp
  001e5	c3		 ret	 0
$LN10@GDGuildMem@2:

; 691  : 	}
; 692  : 	else
; 693  : 	{
; 694  : 		LogAdd(LOG_BLACK, lMsg.Get(MSGGET(1, 183)), szGuildName, lpMsg->Result);

  001e6	0f b6 d0	 movzx	 edx, al
  001e9	52		 push	 edx
  001ea	8d 45 e4	 lea	 eax, DWORD PTR _szGuildName$[ebp]
  001ed	50		 push	 eax
  001ee	68 b7 01 00 00	 push	 439			; 000001b7H
  001f3	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  001f8	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  001fd	50		 push	 eax
  001fe	53		 push	 ebx
  001ff	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 695  : 	}
; 696  : }

  00204	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00207	83 c4 10	 add	 esp, 16			; 00000010H
  0020a	5f		 pop	 edi
  0020b	5e		 pop	 esi
  0020c	33 cd		 xor	 ecx, ebp
  0020e	5b		 pop	 ebx
  0020f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00214	8b e5		 mov	 esp, ebp
  00216	5d		 pop	 ebp
  00217	c3		 ret	 0
?GDGuildMemberDelResult@@YAXPAUSDHP_GUILDMEMBERDEL_RESULT@@@Z ENDP ; GDGuildMemberDelResult
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDGuildUpdate@@YAXPAD0PAEHE@Z			; GDGuildUpdate
; Function compile flags: /Ogtp
;	COMDAT ?GDGuildUpdate@@YAXPAD0PAEHE@Z
_TEXT	SEGMENT
_pMsg$ = -68						; size = 64
__$ArrayPad$ = -4					; size = 4
_Name$ = 8						; size = 4
_Master$ = 12						; size = 4
_Mark$ = 16						; size = 4
_score$ = 20						; size = 4
_count$ = 24						; size = 1
?GDGuildUpdate@@YAXPAD0PAEHE@Z PROC			; GDGuildUpdate, COMDAT

; 702  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 4d 08	 mov	 ecx, DWORD PTR _Name$[ebp]

; 703  : 	SDHP_GUILDUPDATE pMsg;
; 704  : 
; 705  : 	pMsg.h.c = 0xC1;
; 706  : 	pMsg.h.headcode = 0x34;
; 707  : 	pMsg.h.size = sizeof(pMsg);
; 708  : 	memcpy(pMsg.GuildName, Name, MAX_GUILD_LEN);

  00013	8b 11		 mov	 edx, DWORD PTR [ecx]
  00015	8b 49 04	 mov	 ecx, DWORD PTR [ecx+4]
  00018	8b 45 0c	 mov	 eax, DWORD PTR _Master$[ebp]
  0001b	56		 push	 esi
  0001c	8b 75 10	 mov	 esi, DWORD PTR _Mark$[ebp]
  0001f	89 4d c3	 mov	 DWORD PTR _pMsg$[ebp+7], ecx
  00022	57		 push	 edi
  00023	89 55 bf	 mov	 DWORD PTR _pMsg$[ebp+3], edx

; 709  : 	memcpy(pMsg.Mark, Mark, sizeof(pMsg.Mark));
; 710  : 	memcpy(pMsg.Master, Master, MAX_ACCOUNT_LEN);

  00026	8b 10		 mov	 edx, DWORD PTR [eax]
  00028	c6 45 bc c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H
  0002c	66 c7 45 bd 40
	34		 mov	 WORD PTR _pMsg$[ebp+1], 13376 ; 00003440H
  00032	b9 08 00 00 00	 mov	 ecx, 8
  00037	8d 7d d3	 lea	 edi, DWORD PTR _pMsg$[ebp+23]
  0003a	f3 a5		 rep movsd
  0003c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0003f	89 55 c8	 mov	 DWORD PTR _pMsg$[ebp+12], edx
  00042	66 8b 50 08	 mov	 dx, WORD PTR [eax+8]

; 711  : 	pMsg.Score = score;

  00046	8b 45 14	 mov	 eax, DWORD PTR _score$[ebp]
  00049	89 4d cc	 mov	 DWORD PTR _pMsg$[ebp+16], ecx

; 712  : 	pMsg.Count = count;

  0004c	8a 4d 18	 mov	 cl, BYTE PTR _count$[ebp]
  0004f	66 89 55 d0	 mov	 WORD PTR _pMsg$[ebp+20], dx

; 713  : 
; 714  : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  00053	6a 40		 push	 64			; 00000040H
  00055	8d 55 bc	 lea	 edx, DWORD PTR _pMsg$[ebp]
  00058	88 4d f8	 mov	 BYTE PTR _pMsg$[ebp+60], cl
  0005b	52		 push	 edx
  0005c	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00061	89 45 f4	 mov	 DWORD PTR _pMsg$[ebp+56], eax
  00064	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 715  : }

  00069	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0006c	5f		 pop	 edi
  0006d	33 cd		 xor	 ecx, ebp
  0006f	5e		 pop	 esi
  00070	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00075	8b e5		 mov	 esp, ebp
  00077	5d		 pop	 ebp
  00078	c3		 ret	 0
?GDGuildUpdate@@YAXPAD0PAEHE@Z ENDP			; GDGuildUpdate
_TEXT	ENDS
PUBLIC	?DGGuildUpdateRecv@@YAXPAUSDHP_GUILDUPDATE@@@Z	; DGGuildUpdateRecv
; Function compile flags: /Ogtp
;	COMDAT ?DGGuildUpdateRecv@@YAXPAUSDHP_GUILDUPDATE@@@Z
_TEXT	SEGMENT
_lpMsg$ = 8						; size = 4
?DGGuildUpdateRecv@@YAXPAUSDHP_GUILDUPDATE@@@Z PROC	; DGGuildUpdateRecv, COMDAT

; 720  : 	return;	// NO MAcro
; 721  : }

  00000	c3		 ret	 0
?DGGuildUpdateRecv@@YAXPAUSDHP_GUILDUPDATE@@@Z ENDP	; DGGuildUpdateRecv
_TEXT	ENDS
PUBLIC	??_C@_0DK@MKLBBGMP@?$FLU?4System?$FN?$FLGuild?5Status?$FN?$FLInfo?$FN?5G@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?DGGuildMemberInfo@@YAXPAUSDHP_GUILDMEMBER_INFO@@@Z ; DGGuildMemberInfo
EXTRN	?GCGuildWarDeclare@@YAXHPAD@Z:PROC		; GCGuildWarDeclare
EXTRN	?GCGuildWarScore@@YAXH@Z:PROC			; GCGuildWarScore
EXTRN	?GCServerMsgStringSend@@YAXPADHE@Z:PROC		; GCServerMsgStringSend
EXTRN	?ConnectUser@CGuildClass@@QAEHPAU_GUILD_INFO_STRUCT@@PAD1HH@Z:PROC ; CGuildClass::ConnectUser
EXTRN	?SetServer@CGuildClass@@QAEHPAD0H@Z:PROC	; CGuildClass::SetServer
EXTRN	_memset:PROC
;	COMDAT ??_C@_0DK@MKLBBGMP@?$FLU?4System?$FN?$FLGuild?5Status?$FN?$FLInfo?$FN?5G@
CONST	SEGMENT
??_C@_0DK@MKLBBGMP@?$FLU?4System?$FN?$FLGuild?5Status?$FN?$FLInfo?$FN?5G@ DB '['
	DB	'U.System][Guild Status][Info] Guild : %s / [%s][%s] / %d', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?DGGuildMemberInfo@@YAXPAUSDHP_GUILDMEMBER_INFO@@@Z
_TEXT	SEGMENT
_pMsg$ = -308						; size = 12
tv384 = -296						; size = 4
tv198 = -296						; size = 4
_pGVCount$157236 = -296					; size = 5
_n$157216 = -288					; size = 4
_GuildInfoBuf$ = -284					; size = 256
_szName$ = -28						; size = 11
_szGuildName$ = -16					; size = 9
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?DGGuildMemberInfo@@YAXPAUSDHP_GUILDMEMBER_INFO@@@Z PROC ; DGGuildMemberInfo, COMDAT

; 754  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 34 01 00
	00		 sub	 esp, 308		; 00000134H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi
  00016	8b 7d 08	 mov	 edi, DWORD PTR _lpMsg$[ebp]

; 755  : 	BYTE GuildUserBuf[256] = {0};
; 756  : 	BYTE GuildInfoBuf[256] = {0};

  00019	68 ff 00 00 00	 push	 255			; 000000ffH
  0001e	8d 85 e5 fe ff
	ff		 lea	 eax, DWORD PTR _GuildInfoBuf$[ebp+1]
  00024	6a 00		 push	 0
  00026	50		 push	 eax
  00027	c6 85 e4 fe ff
	ff 00		 mov	 BYTE PTR _GuildInfoBuf$[ebp], 0
  0002e	e8 00 00 00 00	 call	 _memset

; 757  : 	PMSG_SIMPLE_GUILDVIEWPORT pMsg;
; 758  : 	char szGuildName[MAX_GUILD_LEN+1];
; 759  : 	char szName[MAX_ACCOUNT_LEN+1];
; 760  : 	
; 761  : 	szGuildName[MAX_GUILD_LEN] = 0;
; 762  : 	szName[MAX_ACCOUNT_LEN] = 0;
; 763  : 	memcpy(szGuildName, lpMsg->GuildName, MAX_GUILD_LEN);

  00033	8b 4f 03	 mov	 ecx, DWORD PTR [edi+3]
  00036	8b 57 07	 mov	 edx, DWORD PTR [edi+7]
  00039	8d 47 03	 lea	 eax, DWORD PTR [edi+3]
  0003c	89 85 d8 fe ff
	ff		 mov	 DWORD PTR tv384[ebp], eax

; 764  : 	memcpy(szName, lpMsg->MemberID, MAX_ACCOUNT_LEN);

  00042	8b 47 0c	 mov	 eax, DWORD PTR [edi+12]
  00045	89 4d f0	 mov	 DWORD PTR _szGuildName$[ebp], ecx
  00048	8b 4f 10	 mov	 ecx, DWORD PTR [edi+16]
  0004b	89 55 f4	 mov	 DWORD PTR _szGuildName$[ebp+4], edx
  0004e	66 8b 57 14	 mov	 dx, WORD PTR [edi+20]
  00052	83 c4 0c	 add	 esp, 12			; 0000000cH
  00055	c6 45 f8 00	 mov	 BYTE PTR _szGuildName$[ebp+8], 0
  00059	c6 45 ee 00	 mov	 BYTE PTR _szName$[ebp+10], 0
  0005d	89 45 e4	 mov	 DWORD PTR _szName$[ebp], eax
  00060	89 4d e8	 mov	 DWORD PTR _szName$[ebp+4], ecx
  00063	66 89 55 ec	 mov	 WORD PTR _szName$[ebp+8], dx

; 765  : 
; 766  : 	int GuildInfoOfs = sizeof(PMSG_SIMPLE_GUILDVIEWPORT_COUNT);
; 767  : 	int GuildUserOfs = sizeof(PMSG_SIMPLE_GUILDVIEWPORT_COUNT);
; 768  : 
; 769  : 	for ( int n=OBJ_STARTUSERINDEX;n<OBJMAX;n++)

  00067	c7 85 e0 fe ff
	ff 00 19 00 00	 mov	 DWORD PTR _n$157216[ebp], 6400 ; 00001900H

; 770  : 	{
; 771  : 		if ( gObj[n].Connected > PLAYER_LOGGED )

  00071	bb 6f c4 16 02	 mov	 ebx, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+35046511
$LL13@DGGuildMem:
  00076	80 7b 95 02	 cmp	 BYTE PTR [ebx-107], 2
  0007a	76 35		 jbe	 SHORT $LN12@DGGuildMem

; 772  : 		{
; 773  : 			if ( gObj[n].Name[0] == lpMsg->MemberID[0] )

  0007c	8a 03		 mov	 al, BYTE PTR [ebx]
  0007e	3a 47 0c	 cmp	 al, BYTE PTR [edi+12]
  00081	75 2e		 jne	 SHORT $LN12@DGGuildMem

; 774  : 			{
; 775  : 				if ( strcmp(lpMsg->MemberID, gObj[n].Name ) == 0 )

  00083	8b cb		 mov	 ecx, ebx
  00085	8d 47 0c	 lea	 eax, DWORD PTR [edi+12]
$LL21@DGGuildMem:
  00088	8a 10		 mov	 dl, BYTE PTR [eax]
  0008a	3a 11		 cmp	 dl, BYTE PTR [ecx]
  0008c	75 1a		 jne	 SHORT $LN22@DGGuildMem
  0008e	84 d2		 test	 dl, dl
  00090	74 12		 je	 SHORT $LN23@DGGuildMem
  00092	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  00095	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  00098	75 0e		 jne	 SHORT $LN22@DGGuildMem
  0009a	83 c0 02	 add	 eax, 2
  0009d	83 c1 02	 add	 ecx, 2
  000a0	84 d2		 test	 dl, dl
  000a2	75 e4		 jne	 SHORT $LL21@DGGuildMem
$LN23@DGGuildMem:
  000a4	33 c0		 xor	 eax, eax
  000a6	eb 05		 jmp	 SHORT $LN24@DGGuildMem
$LN22@DGGuildMem:
  000a8	1b c0		 sbb	 eax, eax
  000aa	83 d8 ff	 sbb	 eax, -1
$LN24@DGGuildMem:
  000ad	85 c0		 test	 eax, eax
  000af	74 3c		 je	 SHORT $LN19@DGGuildMem
$LN12@DGGuildMem:

; 765  : 
; 766  : 	int GuildInfoOfs = sizeof(PMSG_SIMPLE_GUILDVIEWPORT_COUNT);
; 767  : 	int GuildUserOfs = sizeof(PMSG_SIMPLE_GUILDVIEWPORT_COUNT);
; 768  : 
; 769  : 	for ( int n=OBJ_STARTUSERINDEX;n<OBJMAX;n++)

  000b1	ff 85 e0 fe ff
	ff		 inc	 DWORD PTR _n$157216[ebp]
  000b7	81 c3 64 15 00
	00		 add	 ebx, 5476		; 00001564H
  000bd	81 fb 0f 53 6a
	02		 cmp	 ebx, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+40522511
  000c3	7c b1		 jl	 SHORT $LL13@DGGuildMem

; 853  : 					}
; 854  : 
; 855  : 					return;
; 856  : 				}
; 857  : 			}
; 858  : 		}
; 859  : 	}
; 860  : 
; 861  : 	Guild.SetServer(szGuildName, szName, lpMsg->pServer);

  000c5	0f bf 47 1a	 movsx	 eax, WORD PTR [edi+26]
  000c9	50		 push	 eax
  000ca	8d 4d e4	 lea	 ecx, DWORD PTR _szName$[ebp]
  000cd	51		 push	 ecx
  000ce	8d 55 f0	 lea	 edx, DWORD PTR _szGuildName$[ebp]
  000d1	52		 push	 edx
  000d2	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  000d7	e8 00 00 00 00	 call	 ?SetServer@CGuildClass@@QAEHPAD0H@Z ; CGuildClass::SetServer
$LN14@DGGuildMem:
  000dc	5f		 pop	 edi
  000dd	5e		 pop	 esi
  000de	5b		 pop	 ebx

; 862  : }

  000df	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000e2	33 cd		 xor	 ecx, ebp
  000e4	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000e9	8b e5		 mov	 esp, ebp
  000eb	5d		 pop	 ebp
  000ec	c3		 ret	 0
$LN19@DGGuildMem:

; 776  : 				{
; 777  : #if GS_CASTLE == 1
; 778  : 					gObj[n].m_ViewSkillState &= ~0xC0000;
; 779  : 					gObj[n].m_ViewSkillState &= ~0x400000;
; 780  : 					gObj[n].m_ViewSkillState &= ~0x800000;
; 781  : 					szGuildName[MAX_GUILD_LEN] = 0;
; 782  : 					g_CastleSiege.GetCsJoinSide(szGuildName, &gObj[n].m_btCsJoinSide, &gObj[n].m_bCsGuildInvolved);
; 783  : 					g_CastleSiege.NotifySelfCsJoinSide(n);
; 784  : #endif
; 785  : 					strcpy(gObj[n].GuildName, szGuildName);

  000ed	8b b5 e0 fe ff
	ff		 mov	 esi, DWORD PTR _n$157216[ebp]
  000f3	69 f6 64 15 00
	00		 imul	 esi, 5476		; 00001564H
  000f9	8d 45 f0	 lea	 eax, DWORD PTR _szGuildName$[ebp]
  000fc	8d 9e b8 02 00
	00		 lea	 ebx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+696]
  00102	8b d3		 mov	 edx, ebx
  00104	8b c8		 mov	 ecx, eax
  00106	2b d1		 sub	 edx, ecx
$LL16@DGGuildMem:
  00108	8a 08		 mov	 cl, BYTE PTR [eax]
  0010a	88 0c 02	 mov	 BYTE PTR [edx+eax], cl
  0010d	40		 inc	 eax
  0010e	84 c9		 test	 cl, cl
  00110	75 f6		 jne	 SHORT $LL16@DGGuildMem

; 786  : 					gObj[n].lpGuild = Guild.SearchGuild(gObj[n].GuildName);

  00112	53		 push	 ebx
  00113	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00118	e8 00 00 00 00	 call	 ?SearchGuild@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@PAD@Z ; CGuildClass::SearchGuild
  0011d	89 86 b4 02 00
	00		 mov	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+692], eax

; 787  : 
; 788  : 					if ( gObj[n].lpGuild != NULL )

  00123	85 c0		 test	 eax, eax
  00125	0f 84 c4 01 00
	00		 je	 $LN7@DGGuildMem

; 789  : 					{
; 790  : 						gObj[n].GuildStatus = lpMsg->btGuildStatus;

  0012b	0f b6 57 17	 movzx	 edx, BYTE PTR [edi+23]
  0012f	89 96 c4 02 00
	00		 mov	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+708], edx

; 791  : 						gObj[n].GuildNumber = gObj[n].lpGuild->Number;

  00135	8b 08		 mov	 ecx, DWORD PTR [eax]
  00137	89 8e b0 02 00
	00		 mov	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+688], ecx

; 792  : 						Guild.ConnectUser(gObj[n].lpGuild, lpMsg->GuildName, gObj[n].Name, n,  lpMsg->pServer);

  0013d	0f bf 57 1a	 movsx	 edx, WORD PTR [edi+26]
  00141	8b 8d e0 fe ff
	ff		 mov	 ecx, DWORD PTR _n$157216[ebp]
  00147	52		 push	 edx
  00148	8b 95 d8 fe ff
	ff		 mov	 edx, DWORD PTR tv384[ebp]
  0014e	51		 push	 ecx
  0014f	8d 9e 6f 00 00
	00		 lea	 ebx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+111]
  00155	53		 push	 ebx
  00156	52		 push	 edx
  00157	50		 push	 eax
  00158	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  0015d	e8 00 00 00 00	 call	 ?ConnectUser@CGuildClass@@QAEHPAU_GUILD_INFO_STRUCT@@PAD1HH@Z ; CGuildClass::ConnectUser

; 793  : 						/*gObj[n].lpGuild->Notice[MAX_GUILD_NOTICE_LEN-1] = 0;
; 794  : 						gObj[n].lpGuild->Notice[MAX_GUILD_NOTICE_LEN] = 0;*/
; 795  : 	
; 796  : 						if ( strlen(gObj[n].lpGuild->Notice) > 0 )

  00162	8b be b4 02 00
	00		 mov	 edi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+692]
  00168	81 c7 9c 05 00
	00		 add	 edi, 1436		; 0000059cH
  0016e	8b c7		 mov	 eax, edi
  00170	8d 50 01	 lea	 edx, DWORD PTR [eax+1]
$LL25@DGGuildMem:
  00173	8a 08		 mov	 cl, BYTE PTR [eax]
  00175	40		 inc	 eax
  00176	84 c9		 test	 cl, cl
  00178	75 f9		 jne	 SHORT $LL25@DGGuildMem
  0017a	2b c2		 sub	 eax, edx
  0017c	74 12		 je	 SHORT $LN6@DGGuildMem

; 797  : 						{
; 798  : 							GCServerMsgStringSend(gObj[n].lpGuild->Notice, n, 2);

  0017e	8b 85 e0 fe ff
	ff		 mov	 eax, DWORD PTR _n$157216[ebp]
  00184	6a 02		 push	 2
  00186	50		 push	 eax
  00187	57		 push	 edi
  00188	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend
  0018d	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN6@DGGuildMem:

; 799  : 						}
; 800  : 
; 801  : 						LogAdd(LOG_BLACK, "[U.System][Guild Status][Info] Guild : %s / [%s][%s] / %d",
; 802  : 							szGuildName, gObj[n].AccountID, szName, gObj[n].GuildStatus);

  00190	8b 8e c4 02 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+708]
  00196	51		 push	 ecx
  00197	8d 55 e4	 lea	 edx, DWORD PTR _szName$[ebp]
  0019a	52		 push	 edx
  0019b	8d be 64 00 00
	00		 lea	 edi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+100]
  001a1	57		 push	 edi
  001a2	8d 45 f0	 lea	 eax, DWORD PTR _szGuildName$[ebp]
  001a5	50		 push	 eax
  001a6	68 00 00 00 00	 push	 OFFSET ??_C@_0DK@MKLBBGMP@?$FLU?4System?$FN?$FLGuild?5Status?$FN?$FLInfo?$FN?5G@
  001ab	6a 00		 push	 0
  001ad	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  001b2	83 c4 18	 add	 esp, 24			; 00000018H

; 803  : 
; 804  : 						LogAdd(LOG_BLACK, lMsg.Get(MSGGET(1, 184)), gObj[n].AccountID, szName, szGuildName);

  001b5	8d 4d f0	 lea	 ecx, DWORD PTR _szGuildName$[ebp]
  001b8	51		 push	 ecx
  001b9	8d 55 e4	 lea	 edx, DWORD PTR _szName$[ebp]
  001bc	52		 push	 edx
  001bd	57		 push	 edi
  001be	68 b8 01 00 00	 push	 440			; 000001b8H
  001c3	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  001c8	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  001cd	50		 push	 eax
  001ce	6a 00		 push	 0
  001d0	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 805  : 
; 806  : 						pMsg.GuildNumber = gObj[n].GuildNumber;
; 807  : 						pMsg.NumberH = SET_NUMBERH(n) & 0x7F;

  001d5	8b 95 e0 fe ff
	ff		 mov	 edx, DWORD PTR _n$157216[ebp]

; 808  : 						pMsg.NumberL = SET_NUMBERL(n);
; 809  : 
; 810  : 						if ( strcmp(gObj[n].lpGuild->Names[0], gObj[n].Name) == 0 ) // Case Guild Master

  001db	8b be b4 02 00
	00		 mov	 edi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+692]
  001e1	8b c2		 mov	 eax, edx
  001e3	c1 e8 08	 shr	 eax, 8
  001e6	83 c4 14	 add	 esp, 20			; 00000014H
  001e9	24 7f		 and	 al, 127			; 0000007fH
  001eb	88 85 d3 fe ff
	ff		 mov	 BYTE PTR _pMsg$[ebp+7], al
  001f1	88 95 d4 fe ff
	ff		 mov	 BYTE PTR _pMsg$[ebp+8], dl
  001f7	8b cb		 mov	 ecx, ebx
  001f9	8d 47 2f	 lea	 eax, DWORD PTR [edi+47]
  001fc	8d 64 24 00	 npad	 4
$LL26@DGGuildMem:
  00200	8a 18		 mov	 bl, BYTE PTR [eax]
  00202	3a 19		 cmp	 bl, BYTE PTR [ecx]
  00204	75 1a		 jne	 SHORT $LN27@DGGuildMem
  00206	84 db		 test	 bl, bl
  00208	74 12		 je	 SHORT $LN28@DGGuildMem
  0020a	8a 58 01	 mov	 bl, BYTE PTR [eax+1]
  0020d	3a 59 01	 cmp	 bl, BYTE PTR [ecx+1]
  00210	75 0e		 jne	 SHORT $LN27@DGGuildMem
  00212	83 c0 02	 add	 eax, 2
  00215	83 c1 02	 add	 ecx, 2
  00218	84 db		 test	 bl, bl
  0021a	75 e4		 jne	 SHORT $LL26@DGGuildMem
$LN28@DGGuildMem:
  0021c	33 c0		 xor	 eax, eax
  0021e	eb 05		 jmp	 SHORT $LN29@DGGuildMem
$LN27@DGGuildMem:
  00220	1b c0		 sbb	 eax, eax
  00222	83 d8 ff	 sbb	 eax, -1
$LN29@DGGuildMem:
  00225	85 c0		 test	 eax, eax
  00227	75 07		 jne	 SHORT $LN5@DGGuildMem

; 811  : 						{
; 812  : 							pMsg.NumberH |= 0x80;

  00229	80 8d d3 fe ff
	ff 80		 or	 BYTE PTR _pMsg$[ebp+7], 128 ; 00000080H
$LN5@DGGuildMem:

; 813  : 						}
; 814  : 
; 815  : 						pMsg.btGuildStatus = gObj[n].GuildStatus;

  00230	8a 8e c4 02 00
	00		 mov	 cl, BYTE PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+708]
  00236	88 8d d0 fe ff
	ff		 mov	 BYTE PTR _pMsg$[ebp+4], cl

; 816  : 
; 817  : 						if ( gObj[n].lpGuild != NULL )

  0023c	85 ff		 test	 edi, edi
  0023e	74 0e		 je	 SHORT $LN4@DGGuildMem

; 818  : 						{
; 819  : 							pMsg.btGuildType = gObj[n].lpGuild->btGuildType;

  00240	8a 87 18 07 00
	00		 mov	 al, BYTE PTR [edi+1816]
  00246	88 85 d1 fe ff
	ff		 mov	 BYTE PTR _pMsg$[ebp+5], al

; 820  : 						}
; 821  : 						else

  0024c	eb 07		 jmp	 SHORT $LN3@DGGuildMem
$LN4@DGGuildMem:

; 822  : 						{
; 823  : 							pMsg.btGuildType = -1;

  0024e	c6 85 d1 fe ff
	ff ff		 mov	 BYTE PTR _pMsg$[ebp+5], 255 ; 000000ffH
$LN3@DGGuildMem:

; 824  : 						}
; 825  : 
; 826  : 						memcpy(&GuildInfoBuf[GuildInfoOfs], &pMsg, sizeof(PMSG_SIMPLE_GUILDVIEWPORT));

  00255	8b 86 b0 02 00
	00		 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+688]
  0025b	8b 8d d0 fe ff
	ff		 mov	 ecx, DWORD PTR _pMsg$[ebp+4]
  00261	89 85 e9 fe ff
	ff		 mov	 DWORD PTR _GuildInfoBuf$[ebp+5], eax
  00267	8b 85 d4 fe ff
	ff		 mov	 eax, DWORD PTR _pMsg$[ebp+8]
  0026d	89 85 f1 fe ff
	ff		 mov	 DWORD PTR _GuildInfoBuf$[ebp+13], eax

; 827  : 						GuildInfoOfs += sizeof(PMSG_SIMPLE_GUILDVIEWPORT);
; 828  : 
; 829  : 						PMSG_SIMPLE_GUILDVIEWPORT_COUNT pGVCount;
; 830  : 						
; 831  : 						pGVCount.h.c = 0xC2;
; 832  : 						pGVCount.h.headcode = 0x65;
; 833  : 						pGVCount.h.sizeH = SET_NUMBERH(GuildInfoOfs);
; 834  : 						pGVCount.h.sizeL = SET_NUMBERL(GuildInfoOfs);
; 835  : 						pGVCount.Count = 0x01;

  00273	b0 01		 mov	 al, 1

; 836  : 						memcpy(GuildInfoBuf, &pGVCount, sizeof(PMSG_SIMPLE_GUILDVIEWPORT_COUNT));

  00275	88 85 e8 fe ff
	ff		 mov	 BYTE PTR _GuildInfoBuf$[ebp+4], al

; 837  : 
; 838  : 						DataSend(n, (LPBYTE)GuildInfoBuf, GuildInfoOfs);

  0027b	6a 11		 push	 17			; 00000011H
  0027d	8d 85 e4 fe ff
	ff		 lea	 eax, DWORD PTR _GuildInfoBuf$[ebp]
  00283	89 8d ed fe ff
	ff		 mov	 DWORD PTR _GuildInfoBuf$[ebp+9], ecx
  00289	50		 push	 eax
  0028a	c7 85 d8 fe ff
	ff c2 00 11 65	 mov	 DWORD PTR _pGVCount$157236[ebp], 1695613122 ; 651100c2H
  00294	8b 8d d8 fe ff
	ff		 mov	 ecx, DWORD PTR _pGVCount$157236[ebp]
  0029a	52		 push	 edx
  0029b	89 8d e4 fe ff
	ff		 mov	 DWORD PTR _GuildInfoBuf$[ebp], ecx
  002a1	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 839  : 
; 840  : 						if ( gObj[n].lpGuild->WarState != 0 )

  002a6	8b 8e b4 02 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+692]
  002ac	83 c4 0c	 add	 esp, 12			; 0000000cH
  002af	80 b9 91 05 00
	00 00		 cmp	 BYTE PTR [ecx+1425], 0
  002b6	0f 84 20 fe ff
	ff		 je	 $LN14@DGGuildMem

; 841  : 						{
; 842  : 							GCGuildWarScore(n);

  002bc	8b bd e0 fe ff
	ff		 mov	 edi, DWORD PTR _n$157216[ebp]
  002c2	57		 push	 edi
  002c3	e8 00 00 00 00	 call	 ?GCGuildWarScore@@YAXH@Z ; GCGuildWarScore

; 843  : 							GCGuildWarDeclare(n, gObj[n].lpGuild->TargetGuildName);

  002c8	8b 96 b4 02 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+692]
  002ce	81 c2 e0 04 00
	00		 add	 edx, 1248		; 000004e0H
  002d4	52		 push	 edx
  002d5	57		 push	 edi
  002d6	e8 00 00 00 00	 call	 ?GCGuildWarDeclare@@YAXHPAD@Z ; GCGuildWarDeclare
  002db	83 c4 0c	 add	 esp, 12			; 0000000cH
  002de	5f		 pop	 edi
  002df	5e		 pop	 esi
  002e0	5b		 pop	 ebx

; 862  : }

  002e1	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  002e4	33 cd		 xor	 ecx, ebp
  002e6	e8 00 00 00 00	 call	 @__security_check_cookie@4
  002eb	8b e5		 mov	 esp, ebp
  002ed	5d		 pop	 ebp
  002ee	c3		 ret	 0
$LN7@DGGuildMem:

; 844  : 						}
; 845  : 					}
; 846  : 					else
; 847  : 					{
; 848  : #if GS_CASTLE == 1
; 849  : 						gObj[n].m_btCsJoinSide = 0;
; 850  : 						gObj[n].m_bCsGuildInvolved = 0;
; 851  : #endif
; 852  : 						LogAdd(LOG_BLACK, lMsg.Get(MSGGET(1, 185)));

  002ef	68 b9 01 00 00	 push	 441			; 000001b9H
  002f4	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  002f9	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  002fe	50		 push	 eax
  002ff	6a 00		 push	 0
  00301	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 862  : }

  00306	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00309	83 c4 08	 add	 esp, 8
  0030c	5f		 pop	 edi
  0030d	5e		 pop	 esi
  0030e	33 cd		 xor	 ecx, ebp
  00310	5b		 pop	 ebx
  00311	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00316	8b e5		 mov	 esp, ebp
  00318	5d		 pop	 ebp
  00319	c3		 ret	 0
?DGGuildMemberInfo@@YAXPAUSDHP_GUILDMEMBER_INFO@@@Z ENDP ; DGGuildMemberInfo
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?DGGuildMasterListRecv@@YAXPAE@Z		; DGGuildMasterListRecv
EXTRN	?SetGuildType@CGuildClass@@QAEHPADH@Z:PROC	; CGuildClass::SetGuildType
; Function compile flags: /Ogtp
;	COMDAT ?DGGuildMasterListRecv@@YAXPAE@Z
_TEXT	SEGMENT
_szGuildName$ = -28					; size = 9
_szMasterName$ = -16					; size = 11
__$ArrayPad$ = -4					; size = 4
_lpData$ = 8						; size = 4
?DGGuildMasterListRecv@@YAXPAE@Z PROC			; DGGuildMasterListRecv, COMDAT

; 893  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 1c	 sub	 esp, 28			; 0000001cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 894  : 	SDHP_GUILDALL_COUNT * lpCount;
; 895  : 	SDHP_GUILDALL * lpList;
; 896  : 	int lOfs = sizeof(SDHP_GUILDALL_COUNT);
; 897  : 	char szGuildName[MAX_GUILD_LEN+1];
; 898  : 	char szMasterName[MAX_ACCOUNT_LEN+1];
; 899  : 
; 900  : 	memset(szMasterName, 0, sizeof(szMasterName));

  00010	33 c0		 xor	 eax, eax
  00012	89 45 f0	 mov	 DWORD PTR _szMasterName$[ebp], eax
  00015	89 45 f4	 mov	 DWORD PTR _szMasterName$[ebp+4], eax
  00018	66 89 45 f8	 mov	 WORD PTR _szMasterName$[ebp+8], ax

; 901  : 	memset(szGuildName, 0, sizeof(szGuildName));

  0001c	89 45 e4	 mov	 DWORD PTR _szGuildName$[ebp], eax
  0001f	89 45 e8	 mov	 DWORD PTR _szGuildName$[ebp+4], eax
  00022	56		 push	 esi
  00023	8b 75 08	 mov	 esi, DWORD PTR _lpData$[ebp]

; 902  : 	lpCount = (SDHP_GUILDALL_COUNT *)lpData;
; 903  : 	memcpy(szGuildName, lpCount->GuildName, sizeof(lpCount->GuildName)-1);

  00026	8b 4e 0c	 mov	 ecx, DWORD PTR [esi+12]

; 904  : 	memcpy(szMasterName, lpCount->Master, sizeof(lpCount->Master)-1);

  00029	8b 56 11	 mov	 edx, DWORD PTR [esi+17]
  0002c	88 45 fa	 mov	 BYTE PTR _szMasterName$[ebp+10], al
  0002f	88 45 ec	 mov	 BYTE PTR _szGuildName$[ebp+8], al
  00032	8b 46 08	 mov	 eax, DWORD PTR [esi+8]
  00035	89 45 e4	 mov	 DWORD PTR _szGuildName$[ebp], eax
  00038	8b 46 15	 mov	 eax, DWORD PTR [esi+21]
  0003b	89 4d e8	 mov	 DWORD PTR _szGuildName$[ebp+4], ecx
  0003e	66 8b 4e 19	 mov	 cx, WORD PTR [esi+25]
  00042	89 45 f4	 mov	 DWORD PTR _szMasterName$[ebp+4], eax

; 905  : 
; 906  : 	if ( strlen(szGuildName) < 1 )

  00045	8d 45 e4	 lea	 eax, DWORD PTR _szGuildName$[ebp]
  00048	89 55 f0	 mov	 DWORD PTR _szMasterName$[ebp], edx
  0004b	66 89 4d f8	 mov	 WORD PTR _szMasterName$[ebp+8], cx
  0004f	8d 50 01	 lea	 edx, DWORD PTR [eax+1]
$LL13@DGGuildMas:
  00052	8a 08		 mov	 cl, BYTE PTR [eax]
  00054	40		 inc	 eax
  00055	84 c9		 test	 cl, cl
  00057	75 f9		 jne	 SHORT $LL13@DGGuildMas
  00059	2b c2		 sub	 eax, edx
  0005b	83 f8 01	 cmp	 eax, 1
  0005e	0f 82 c4 00 00
	00		 jb	 $LN11@DGGuildMas

; 907  : 	{
; 908  : 		return;
; 909  : 	}
; 910  : 
; 911  : 	if ( lpCount->Count < 1 )

  00064	80 7e 55 01	 cmp	 BYTE PTR [esi+85], 1
  00068	0f 82 ba 00 00
	00		 jb	 $LN11@DGGuildMas

; 912  : 	{
; 913  : 		return;
; 914  : 	}
; 915  : 
; 916  : 	Guild.AddGuild(lpCount->Number, szGuildName, lpCount->Mark, szMasterName, lpCount->score);

  0006e	8b 56 3c	 mov	 edx, DWORD PTR [esi+60]
  00071	52		 push	 edx
  00072	8d 45 f0	 lea	 eax, DWORD PTR _szMasterName$[ebp]
  00075	50		 push	 eax
  00076	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  00079	8d 4e 1c	 lea	 ecx, DWORD PTR [esi+28]
  0007c	51		 push	 ecx
  0007d	8d 55 e4	 lea	 edx, DWORD PTR _szGuildName$[ebp]
  00080	52		 push	 edx
  00081	50		 push	 eax
  00082	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00087	e8 00 00 00 00	 call	 ?AddGuild@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@HPADPAE0H@Z ; CGuildClass::AddGuild

; 917  : 	Guild.SetGuildType(szGuildName, lpCount->btGuildType);

  0008c	0f b6 4e 40	 movzx	 ecx, BYTE PTR [esi+64]
  00090	51		 push	 ecx
  00091	8d 55 e4	 lea	 edx, DWORD PTR _szGuildName$[ebp]
  00094	52		 push	 edx
  00095	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  0009a	e8 00 00 00 00	 call	 ?SetGuildType@CGuildClass@@QAEHPADH@Z ; CGuildClass::SetGuildType

; 918  : 
; 919  : 	_GUILD_INFO_STRUCT * lpGuild = Guild.SearchGuild_Number(lpCount->Number);

  0009f	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  000a2	50		 push	 eax
  000a3	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  000a8	e8 00 00 00 00	 call	 ?SearchGuild_Number@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@H@Z ; CGuildClass::SearchGuild_Number

; 920  : 
; 921  : 	if ( lpGuild != NULL )

  000ad	85 c0		 test	 eax, eax
  000af	74 24		 je	 SHORT $LN5@DGGuildMas

; 922  : 	{
; 923  : 		lpGuild->iGuildUnion = lpCount->iGuildUnion;

  000b1	8b 4e 44	 mov	 ecx, DWORD PTR [esi+68]
  000b4	89 88 1c 07 00
	00		 mov	 DWORD PTR [eax+1820], ecx

; 924  : 		lpGuild->iGuildRival = lpCount->iGuildRival;

  000ba	8b 56 48	 mov	 edx, DWORD PTR [esi+72]
  000bd	89 90 20 07 00
	00		 mov	 DWORD PTR [eax+1824], edx

; 925  : 		memcpy(lpGuild->szGuildRivalName, lpCount->szGuildRivalName, sizeof(lpCount->szGuildRivalName)-1);

  000c3	8b 4e 4c	 mov	 ecx, DWORD PTR [esi+76]
  000c6	89 88 28 07 00
	00		 mov	 DWORD PTR [eax+1832], ecx
  000cc	8b 56 50	 mov	 edx, DWORD PTR [esi+80]
  000cf	89 90 2c 07 00
	00		 mov	 DWORD PTR [eax+1836], edx
$LN5@DGGuildMas:

; 926  : 	}
; 927  : 
; 928  : 	for ( int n=0;n<lpCount->Count;n++)

  000d5	0f b6 46 55	 movzx	 eax, BYTE PTR [esi+85]
  000d9	53		 push	 ebx
  000da	33 db		 xor	 ebx, ebx
  000dc	85 c0		 test	 eax, eax
  000de	7e 47		 jle	 SHORT $LN14@DGGuildMas
  000e0	57		 push	 edi
  000e1	8d 7e 63	 lea	 edi, DWORD PTR [esi+99]
$LL4@DGGuildMas:

; 929  : 	{
; 930  : 		lpList = (SDHP_GUILDALL *)&lpData[lOfs];
; 931  : 
; 932  : 		memcpy(szMasterName, lpList->MemberID, sizeof(lpList->MemberID)-1);

  000e4	8b 4f f5	 mov	 ecx, DWORD PTR [edi-11]
  000e7	89 4d f0	 mov	 DWORD PTR _szMasterName$[ebp], ecx
  000ea	8b 57 f9	 mov	 edx, DWORD PTR [edi-7]
  000ed	89 55 f4	 mov	 DWORD PTR _szMasterName$[ebp+4], edx
  000f0	66 8b 4f fd	 mov	 cx, WORD PTR [edi-3]
  000f4	66 89 4d f8	 mov	 WORD PTR _szMasterName$[ebp+8], cx

; 933  : 		
; 934  : 		if ( Guild.AddMember(szGuildName, szMasterName, -1, lpCount->Count,lpList->btGuildStatus, lpList->pServer) == FALSE )

  000f8	0f bf 57 01	 movsx	 edx, WORD PTR [edi+1]
  000fc	0f b6 0f	 movzx	 ecx, BYTE PTR [edi]
  000ff	52		 push	 edx
  00100	51		 push	 ecx
  00101	50		 push	 eax
  00102	6a ff		 push	 -1
  00104	8d 55 f0	 lea	 edx, DWORD PTR _szMasterName$[ebp]
  00107	52		 push	 edx
  00108	8d 45 e4	 lea	 eax, DWORD PTR _szGuildName$[ebp]
  0010b	50		 push	 eax
  0010c	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00111	e8 00 00 00 00	 call	 ?AddMember@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@PAD0HHHH@Z ; CGuildClass::AddMember
  00116	85 c0		 test	 eax, eax
  00118	74 0c		 je	 SHORT $LN15@DGGuildMas

; 926  : 	}
; 927  : 
; 928  : 	for ( int n=0;n<lpCount->Count;n++)

  0011a	0f b6 46 55	 movzx	 eax, BYTE PTR [esi+85]
  0011e	43		 inc	 ebx

; 935  : 		{
; 936  : 			break;
; 937  : 		}
; 938  : 
; 939  : 		lOfs += sizeof(SDHP_GUILDALL);

  0011f	83 c7 0e	 add	 edi, 14			; 0000000eH
  00122	3b d8		 cmp	 ebx, eax
  00124	7c be		 jl	 SHORT $LL4@DGGuildMas
$LN15@DGGuildMas:
  00126	5f		 pop	 edi
$LN14@DGGuildMas:
  00127	5b		 pop	 ebx
$LN11@DGGuildMas:

; 940  : 	}
; 941  : }

  00128	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0012b	33 cd		 xor	 ecx, ebp
  0012d	5e		 pop	 esi
  0012e	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00133	8b e5		 mov	 esp, ebp
  00135	5d		 pop	 ebp
  00136	c3		 ret	 0
?DGGuildMasterListRecv@@YAXPAE@Z ENDP			; DGGuildMasterListRecv
_TEXT	ENDS
PUBLIC	?GDGuildScoreUpdateRecv@@YAXPAUSDHP_GUILDSCOREUPDATE@@@Z ; GDGuildScoreUpdateRecv
; Function compile flags: /Ogtp
;	COMDAT ?GDGuildScoreUpdateRecv@@YAXPAUSDHP_GUILDSCOREUPDATE@@@Z
_TEXT	SEGMENT
_lpMsg$ = 8						; size = 4
?GDGuildScoreUpdateRecv@@YAXPAUSDHP_GUILDSCOREUPDATE@@@Z PROC ; GDGuildScoreUpdateRecv, COMDAT

; 963  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi

; 964  : 	_GUILD_INFO_STRUCT * lpNode = Guild.SearchGuild(lpMsg->GuildName);

  00004	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]
  00007	57		 push	 edi
  00008	8d 7e 03	 lea	 edi, DWORD PTR [esi+3]
  0000b	57		 push	 edi
  0000c	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00011	e8 00 00 00 00	 call	 ?SearchGuild@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@PAD@Z ; CGuildClass::SearchGuild

; 965  : 
; 966  : 	if ( lpNode == NULL )

  00016	85 c0		 test	 eax, eax
  00018	74 28		 je	 SHORT $LN2@GDGuildSco

; 967  : 	{
; 968  : 		return;
; 969  : 	}
; 970  : 
; 971  : 	lpNode->TotalScore = lpMsg->Score;

  0001a	8b 4e 0c	 mov	 ecx, DWORD PTR [esi+12]
  0001d	89 88 98 05 00
	00		 mov	 DWORD PTR [eax+1432], ecx

; 972  : 	LogAdd(LOG_BLACK, lMsg.Get(MSGGET(1, 187)), lpMsg->GuildName, lpMsg->Score);

  00023	8b 56 0c	 mov	 edx, DWORD PTR [esi+12]
  00026	52		 push	 edx
  00027	57		 push	 edi
  00028	68 bb 01 00 00	 push	 443			; 000001bbH
  0002d	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00032	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  00037	50		 push	 eax
  00038	6a 00		 push	 0
  0003a	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0003f	83 c4 10	 add	 esp, 16			; 00000010H
$LN2@GDGuildSco:
  00042	5f		 pop	 edi
  00043	5e		 pop	 esi

; 973  : }

  00044	5d		 pop	 ebp
  00045	c3		 ret	 0
?GDGuildScoreUpdateRecv@@YAXPAUSDHP_GUILDSCOREUPDATE@@@Z ENDP ; GDGuildScoreUpdateRecv
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDGuildNoticeSave@@YAXPAD0@Z			; GDGuildNoticeSave
; Function compile flags: /Ogtp
;	COMDAT ?GDGuildNoticeSave@@YAXPAD0@Z
_TEXT	SEGMENT
_pMsg$ = -76						; size = 72
__$ArrayPad$ = -4					; size = 4
_guild_name$ = 8					; size = 4
_guild_notice$ = 12					; size = 4
?GDGuildNoticeSave@@YAXPAD0@Z PROC			; GDGuildNoticeSave, COMDAT

; 979  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 980  : 	SDHP_GUILDNOTICE pMsg;
; 981  : 
; 982  : 	int len = strlen((char*)guild_notice);

  00010	8b 45 0c	 mov	 eax, DWORD PTR _guild_notice$[ebp]
  00013	8b c8		 mov	 ecx, eax
  00015	56		 push	 esi
  00016	8d 71 01	 lea	 esi, DWORD PTR [ecx+1]
  00019	8d a4 24 00 00
	00 00		 npad	 7
$LL9@GDGuildNot:
  00020	8a 11		 mov	 dl, BYTE PTR [ecx]
  00022	41		 inc	 ecx
  00023	84 d2		 test	 dl, dl
  00025	75 f9		 jne	 SHORT $LL9@GDGuildNot
  00027	2b ce		 sub	 ecx, esi

; 983  : 
; 984  : 	if ( len < 1 )

  00029	49		 dec	 ecx
  0002a	83 f9 39	 cmp	 ecx, 57			; 00000039H
  0002d	77 3e		 ja	 SHORT $LN3@GDGuildNot

; 985  : 	{
; 986  : 		return;
; 987  : 	}
; 988  : 
; 989  : 	if ( len > MAX_CHAT_LEN-2 )
; 990  : 	{
; 991  : 		return;
; 992  : 	}
; 993  : 
; 994  : 	pMsg.h.c = 0xC1;
; 995  : 	pMsg.h.headcode = 0x38;
; 996  : 	pMsg.h.size = sizeof(SDHP_GUILDNOTICE);
; 997  : 	strcpy(pMsg.GuildName, guild_name);

  0002f	8b 4d 08	 mov	 ecx, DWORD PTR _guild_name$[ebp]
  00032	8d 75 b7	 lea	 esi, DWORD PTR _pMsg$[ebp+3]
  00035	c6 45 b4 c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H
  00039	66 c7 45 b5 48
	38		 mov	 WORD PTR _pMsg$[ebp+1], 14408 ; 00003848H
  0003f	2b f1		 sub	 esi, ecx
$LL5@GDGuildNot:
  00041	8a 11		 mov	 dl, BYTE PTR [ecx]
  00043	88 14 0e	 mov	 BYTE PTR [esi+ecx], dl
  00046	41		 inc	 ecx
  00047	84 d2		 test	 dl, dl
  00049	75 f6		 jne	 SHORT $LL5@GDGuildNot

; 998  : 	strcpy(pMsg.szGuildNotice, guild_notice);

  0004b	8d 55 c0	 lea	 edx, DWORD PTR _pMsg$[ebp+12]
  0004e	2b d0		 sub	 edx, eax
$LL6@GDGuildNot:
  00050	8a 08		 mov	 cl, BYTE PTR [eax]
  00052	88 0c 02	 mov	 BYTE PTR [edx+eax], cl
  00055	40		 inc	 eax
  00056	84 c9		 test	 cl, cl
  00058	75 f6		 jne	 SHORT $LL6@GDGuildNot

; 999  : 
; 1000 : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  0005a	0f b6 45 b5	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  0005e	50		 push	 eax
  0005f	8d 4d b4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00062	51		 push	 ecx
  00063	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00068	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend
$LN3@GDGuildNot:

; 1001 : }

  0006d	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00070	33 cd		 xor	 ecx, ebp
  00072	5e		 pop	 esi
  00073	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00078	8b e5		 mov	 esp, ebp
  0007a	5d		 pop	 ebp
  0007b	c3		 ret	 0
?GDGuildNoticeSave@@YAXPAD0@Z ENDP			; GDGuildNoticeSave
_TEXT	ENDS
PUBLIC	?DGGuildNoticeRecv@@YAXPAUSDHP_GUILDNOTICE@@@Z	; DGGuildNoticeRecv
; Function compile flags: /Ogtp
;	COMDAT ?DGGuildNoticeRecv@@YAXPAUSDHP_GUILDNOTICE@@@Z
_TEXT	SEGMENT
_lpNode$ = 8						; size = 4
_lpMsg$ = 8						; size = 4
?DGGuildNoticeRecv@@YAXPAUSDHP_GUILDNOTICE@@@Z PROC	; DGGuildNoticeRecv, COMDAT

; 1007 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx

; 1008 : 	_GUILD_INFO_STRUCT * lpNode = Guild.SearchGuild(lpMsg->GuildName);

  00004	8b 5d 08	 mov	 ebx, DWORD PTR _lpMsg$[ebp]
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	8d 73 03	 lea	 esi, DWORD PTR [ebx+3]
  0000c	56		 push	 esi
  0000d	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00012	e8 00 00 00 00	 call	 ?SearchGuild@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@PAD@Z ; CGuildClass::SearchGuild
  00017	8b f8		 mov	 edi, eax
  00019	89 7d 08	 mov	 DWORD PTR _lpNode$[ebp], edi

; 1009 : 
; 1010 : 	if ( lpNode == NULL )

  0001c	85 ff		 test	 edi, edi
  0001e	74 6d		 je	 SHORT $LN2@DGGuildNot@2

; 1011 : 	{
; 1012 : 		return;
; 1013 : 	}
; 1014 : 
; 1015 : 	strcpy(lpNode->Notice, lpMsg->szGuildNotice);

  00020	83 c3 0c	 add	 ebx, 12			; 0000000cH
  00023	8d 97 9c 05 00
	00		 lea	 edx, DWORD PTR [edi+1436]
  00029	8b c3		 mov	 eax, ebx
  0002b	2b d3		 sub	 edx, ebx
  0002d	8d 49 00	 npad	 3
$LL8@DGGuildNot@2:
  00030	8a 08		 mov	 cl, BYTE PTR [eax]
  00032	88 0c 02	 mov	 BYTE PTR [edx+eax], cl
  00035	40		 inc	 eax
  00036	84 c9		 test	 cl, cl
  00038	75 f6		 jne	 SHORT $LL8@DGGuildNot@2

; 1016 : 	LogAdd(LOG_BLACK, lMsg.Get(MSGGET(1, 188)), lpMsg->GuildName, lpMsg->szGuildNotice);

  0003a	53		 push	 ebx
  0003b	56		 push	 esi
  0003c	68 bc 01 00 00	 push	 444			; 000001bcH
  00041	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00046	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0004b	50		 push	 eax
  0004c	6a 00		 push	 0
  0004e	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00053	83 c4 10	 add	 esp, 16			; 00000010H

; 1017 : 
; 1018 : 	for ( int n=0;n<MAX_USER_GUILD;n++)

  00056	33 f6		 xor	 esi, esi
  00058	81 c7 a0 03 00
	00		 add	 edi, 928		; 000003a0H
  0005e	8b ff		 npad	 2
$LL4@DGGuildNot@2:

; 1019 : 	{
; 1020 : 		if ( lpNode->Use[n] > 0 && lpNode->Index[n] >= 0 )

  00060	8b 45 08	 mov	 eax, DWORD PTR _lpNode$[ebp]
  00063	80 bc 30 40 04
	00 00 00	 cmp	 BYTE PTR [eax+esi+1088], 0
  0006b	76 17		 jbe	 SHORT $LN3@DGGuildNot@2
  0006d	0f b7 07	 movzx	 eax, WORD PTR [edi]
  00070	66 85 c0	 test	 ax, ax
  00073	78 0f		 js	 SHORT $LN3@DGGuildNot@2

; 1021 : 		{
; 1022 : 			GCServerMsgStringSend(lpMsg->szGuildNotice, lpNode->Index[n], 2);

  00075	0f bf c8	 movsx	 ecx, ax
  00078	6a 02		 push	 2
  0007a	51		 push	 ecx
  0007b	53		 push	 ebx
  0007c	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend
  00081	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN3@DGGuildNot@2:

; 1017 : 
; 1018 : 	for ( int n=0;n<MAX_USER_GUILD;n++)

  00084	46		 inc	 esi
  00085	83 c7 02	 add	 edi, 2
  00088	83 fe 50	 cmp	 esi, 80			; 00000050H
  0008b	7c d3		 jl	 SHORT $LL4@DGGuildNot@2
$LN2@DGGuildNot@2:
  0008d	5f		 pop	 edi
  0008e	5e		 pop	 esi
  0008f	5b		 pop	 ebx

; 1023 : 		}
; 1024 : 	}
; 1025 : }

  00090	5d		 pop	 ebp
  00091	c3		 ret	 0
?DGGuildNoticeRecv@@YAXPAUSDHP_GUILDNOTICE@@@Z ENDP	; DGGuildNoticeRecv
_TEXT	ENDS
PUBLIC	??_C@_0O@BNCDNIJM@?$CF8s?5?$FL?$CFd?5?1?5?$CFd?$FN?$AA@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?DGGuildList@@YAXPAUSDHP_GUILDCREATED@@@Z	; DGGuildList
EXTRN	__imp__SetDlgItemTextA@12:PROC
EXTRN	__imp__wsprintfA:PROC
EXTRN	__imp__SendMessageA@16:PROC
;	COMDAT ??_C@_0O@BNCDNIJM@?$CF8s?5?$FL?$CFd?5?1?5?$CFd?$FN?$AA@
CONST	SEGMENT
??_C@_0O@BNCDNIJM@?$CF8s?5?$FL?$CFd?5?1?5?$CFd?$FN?$AA@ DB '%8s [%d / %d]'
	DB	00H						; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?DGGuildList@@YAXPAUSDHP_GUILDCREATED@@@Z
_TEXT	SEGMENT
_szTemp$ = -260						; size = 256
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?DGGuildList@@YAXPAUSDHP_GUILDCREATED@@@Z PROC		; DGGuildList, COMDAT

; 1053 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 04 01 00
	00		 sub	 esp, 260		; 00000104H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]

; 1054 : 	char szTemp[256];
; 1055 : 
; 1056 : 	Guild.AddGuild(lpMsg->Number, lpMsg->GuildName, lpMsg->Mark, lpMsg->Master, lpMsg->score);

  00016	8b 48 3c	 mov	 ecx, DWORD PTR [eax+60]
  00019	56		 push	 esi
  0001a	51		 push	 ecx
  0001b	8d 50 0f	 lea	 edx, DWORD PTR [eax+15]
  0001e	52		 push	 edx
  0001f	0f b7 50 04	 movzx	 edx, WORD PTR [eax+4]
  00023	8d 48 1a	 lea	 ecx, DWORD PTR [eax+26]
  00026	51		 push	 ecx
  00027	8d 70 06	 lea	 esi, DWORD PTR [eax+6]
  0002a	56		 push	 esi
  0002b	52		 push	 edx
  0002c	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00031	e8 00 00 00 00	 call	 ?AddGuild@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@HPADPAE0H@Z ; CGuildClass::AddGuild

; 1057 : 
; 1058 : 	if ( GuildListhDlg != NULL )

  00036	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?GuildListhDlg@@3PAUHWND__@@A, 0 ; GuildListhDlg
  0003d	74 5c		 je	 SHORT $LN1@DGGuildLis

; 1059 : 	{
; 1060 : 		SendMessage(::GuildListhPrs, 0x402, gGuildListCount, 0);

  0003f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gGuildListCount@@3HA ; gGuildListCount
  00044	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GuildListhPrs@@3PAUHWND__@@A ; GuildListhPrs
  0004a	6a 00		 push	 0
  0004c	50		 push	 eax
  0004d	68 02 04 00 00	 push	 1026			; 00000402H
  00052	51		 push	 ecx
  00053	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__SendMessageA@16

; 1061 : 		gGuildListCount++;

  00059	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gGuildListCount@@3HA ; gGuildListCount

; 1062 : 		wsprintf(szTemp, "%8s [%d / %d]", lpMsg->GuildName, gGuildListCount, gGuildListTotal);

  0005e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gGuildListTotal@@3HA ; gGuildListTotal
  00064	52		 push	 edx
  00065	40		 inc	 eax
  00066	50		 push	 eax
  00067	56		 push	 esi
  00068	a3 00 00 00 00	 mov	 DWORD PTR ?gGuildListCount@@3HA, eax ; gGuildListCount
  0006d	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _szTemp$[ebp]
  00073	68 00 00 00 00	 push	 OFFSET ??_C@_0O@BNCDNIJM@?$CF8s?5?$FL?$CFd?5?1?5?$CFd?$FN?$AA@
  00078	50		 push	 eax
  00079	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA

; 1063 : 		SetDlgItemText(GuildListhDlg, IDS_CURRENT_GUILD_NAME, szTemp);

  0007f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?GuildListhDlg@@3PAUHWND__@@A ; GuildListhDlg
  00085	83 c4 14	 add	 esp, 20			; 00000014H
  00088	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _szTemp$[ebp]
  0008e	51		 push	 ecx
  0008f	68 e9 03 00 00	 push	 1001			; 000003e9H
  00094	52		 push	 edx
  00095	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__SetDlgItemTextA@12
$LN1@DGGuildLis:

; 1064 : 	}
; 1065 : }

  0009b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0009e	33 cd		 xor	 ecx, ebp
  000a0	5e		 pop	 esi
  000a1	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000a6	8b e5		 mov	 esp, ebp
  000a8	5d		 pop	 ebp
  000a9	c3		 ret	 0
?DGGuildList@@YAXPAUSDHP_GUILDCREATED@@@Z ENDP		; DGGuildList
_TEXT	ENDS
PUBLIC	?GuildListDlgProc@@YGHPAUHWND__@@IIJ@Z		; GuildListDlgProc
EXTRN	__imp__EndDialog@8:PROC
; Function compile flags: /Ogtp
;	COMDAT ?GuildListDlgProc@@YGHPAUHWND__@@IIJ@Z
_TEXT	SEGMENT
_hDlg$ = 8						; size = 4
_iMsg$ = 12						; size = 4
_wParam$ = 16						; size = 4
_lParam$ = 20						; size = 4
?GuildListDlgProc@@YGHPAUHWND__@@IIJ@Z PROC		; GuildListDlgProc, COMDAT

; 1072 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1073 : 	switch (iMsg)

  00003	81 7d 0c 11 01
	00 00		 cmp	 DWORD PTR _iMsg$[ebp], 273 ; 00000111H
  0000a	75 1f		 jne	 SHORT $LN10@GuildListD

; 1074 : 	{
; 1075 : 		case 273:
; 1076 : 
; 1077 : 			switch ( wParam )

  0000c	8b 45 10	 mov	 eax, DWORD PTR _wParam$[ebp]
  0000f	83 e8 02	 sub	 eax, 2
  00012	75 17		 jne	 SHORT $LN10@GuildListD

; 1078 : 			{
; 1079 : 				case 2:
; 1080 : 					EndDialog(GuildListhDlg, 0);

  00014	50		 push	 eax
  00015	a1 00 00 00 00	 mov	 eax, DWORD PTR ?GuildListhDlg@@3PAUHWND__@@A ; GuildListhDlg
  0001a	50		 push	 eax
  0001b	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__EndDialog@8

; 1081 : 					GuildListhDlg = NULL;

  00021	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?GuildListhDlg@@3PAUHWND__@@A, 0 ; GuildListhDlg
$LN10@GuildListD:

; 1082 : 					break;
; 1083 : 			}
; 1084 : 			break;
; 1085 : 	}
; 1086 : 
; 1087 : 	return 0;

  0002b	33 c0		 xor	 eax, eax

; 1088 : }

  0002d	5d		 pop	 ebp
  0002e	c2 10 00	 ret	 16			; 00000010H
?GuildListDlgProc@@YGHPAUHWND__@@IIJ@Z ENDP		; GuildListDlgProc
_TEXT	ENDS
PUBLIC	?DGGuildListState@@YAXPAUSDHP_GUILDLISTSTATE@@@Z ; DGGuildListState
EXTRN	?GameServerInfoSendStop@@YAXXZ:PROC		; GameServerInfoSendStop
EXTRN	__imp__GetDlgItem@8:PROC
EXTRN	__imp__ShowWindow@8:PROC
EXTRN	__imp__CreateDialogParamA@20:PROC
EXTRN	?ghWnd@@3PAUHWND__@@A:DWORD			; ghWnd
EXTRN	?GameServerInfoSendStart@@YAXXZ:PROC		; GameServerInfoSendStart
EXTRN	__imp__IsWindow@4:PROC
; Function compile flags: /Ogtp
;	COMDAT ?DGGuildListState@@YAXPAUSDHP_GUILDLISTSTATE@@@Z
_TEXT	SEGMENT
_lpMsg$ = 8						; size = 4
?DGGuildListState@@YAXPAUSDHP_GUILDLISTSTATE@@@Z PROC	; DGGuildListState, COMDAT

; 1095 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi

; 1096 : 	switch ( lpMsg->State )

  00004	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]
  00007	0f b6 46 03	 movzx	 eax, BYTE PTR [esi+3]
  0000b	83 e8 00	 sub	 eax, 0
  0000e	74 34		 je	 SHORT $LN4@DGGuildLis@2
  00010	48		 dec	 eax
  00011	75 2e		 jne	 SHORT $LN3@DGGuildLis@2

; 1109 : 			}
; 1110 : 			break;
; 1111 : 
; 1112 : 		case 1:
; 1113 : 			if ( IsWindow(GuildListhDlg) != FALSE )

  00013	a1 00 00 00 00	 mov	 eax, DWORD PTR ?GuildListhDlg@@3PAUHWND__@@A ; GuildListhDlg
  00018	50		 push	 eax
  00019	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__IsWindow@4
  0001f	85 c0		 test	 eax, eax
  00021	74 1e		 je	 SHORT $LN3@DGGuildLis@2

; 1114 : 			{
; 1115 : 				EndDialog(GuildListhDlg, 0);

  00023	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GuildListhDlg@@3PAUHWND__@@A ; GuildListhDlg
  00029	6a 00		 push	 0
  0002b	51		 push	 ecx
  0002c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__EndDialog@8

; 1116 : 				GameServerInfoSendStart();

  00032	e8 00 00 00 00	 call	 ?GameServerInfoSendStart@@YAXXZ ; GameServerInfoSendStart

; 1117 : 				GuildListhDlg = NULL;

  00037	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?GuildListhDlg@@3PAUHWND__@@A, 0 ; GuildListhDlg
$LN3@DGGuildLis@2:
  00041	5e		 pop	 esi

; 1118 : 			}
; 1119 : 			break;
; 1120 : 	}
; 1121 : 
; 1122 : }

  00042	5d		 pop	 ebp
  00043	c3		 ret	 0
$LN4@DGGuildLis@2:

; 1097 : 	{
; 1098 : 		case 0:
; 1099 : 			if ( IsWindow(GuildListhDlg) == FALSE )

  00044	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?GuildListhDlg@@3PAUHWND__@@A ; GuildListhDlg
  0004a	52		 push	 edx
  0004b	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__IsWindow@4
  00051	85 c0		 test	 eax, eax
  00053	75 ec		 jne	 SHORT $LN3@DGGuildLis@2

; 1100 : 			{
; 1101 : 				GuildListhDlg = CreateDialogParam(NULL, (LPCTSTR)IDD_GUILD_LIST_STATE, ghWnd, (DLGPROC)GuildListDlgProc, 0);

  00055	57		 push	 edi
  00056	50		 push	 eax
  00057	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ghWnd@@3PAUHWND__@@A ; ghWnd
  0005c	68 00 00 00 00	 push	 OFFSET ?GuildListDlgProc@@YGHPAUHWND__@@IIJ@Z ; GuildListDlgProc
  00061	50		 push	 eax
  00062	68 8d 00 00 00	 push	 141			; 0000008dH
  00067	6a 00		 push	 0
  00069	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__CreateDialogParamA@20

; 1102 : 				ShowWindow(GuildListhDlg, SW_SHOW);

  0006f	6a 05		 push	 5
  00071	50		 push	 eax
  00072	a3 00 00 00 00	 mov	 DWORD PTR ?GuildListhDlg@@3PAUHWND__@@A, eax ; GuildListhDlg
  00077	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__ShowWindow@8

; 1103 : 				GuildListhPrs = GetDlgItem(GuildListhDlg, IDP_PROGRESS_BAR);

  0007d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GuildListhDlg@@3PAUHWND__@@A ; GuildListhDlg
  00083	68 e8 03 00 00	 push	 1000			; 000003e8H
  00088	51		 push	 ecx
  00089	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetDlgItem@8

; 1104 : 				SendMessage(GuildListhPrs, 0x401, 0, (((lpMsg->Count & 0xFFFF)&0xFFFF)<<16));

  0008f	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__SendMessageA@16
  00095	a3 00 00 00 00	 mov	 DWORD PTR ?GuildListhPrs@@3PAUHWND__@@A, eax ; GuildListhPrs
  0009a	8b 56 04	 mov	 edx, DWORD PTR [esi+4]
  0009d	c1 e2 10	 shl	 edx, 16			; 00000010H
  000a0	52		 push	 edx
  000a1	6a 00		 push	 0
  000a3	68 01 04 00 00	 push	 1025			; 00000401H
  000a8	50		 push	 eax
  000a9	ff d7		 call	 edi

; 1105 : 				gGuildListTotal = lpMsg->Count;
; 1106 : 				SendMessage(GuildListhPrs, 0x404, 1, 0);

  000ab	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GuildListhPrs@@3PAUHWND__@@A ; GuildListhPrs
  000b1	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  000b4	6a 00		 push	 0
  000b6	6a 01		 push	 1
  000b8	68 04 04 00 00	 push	 1028			; 00000404H
  000bd	51		 push	 ecx
  000be	a3 00 00 00 00	 mov	 DWORD PTR ?gGuildListTotal@@3HA, eax ; gGuildListTotal
  000c3	ff d7		 call	 edi
  000c5	5f		 pop	 edi

; 1107 : 				gGuildListCount = 0;

  000c6	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?gGuildListCount@@3HA, 0 ; gGuildListCount
  000d0	5e		 pop	 esi

; 1118 : 			}
; 1119 : 			break;
; 1120 : 	}
; 1121 : 
; 1122 : }

  000d1	5d		 pop	 ebp

; 1108 : 				GameServerInfoSendStop();

  000d2	e9 00 00 00 00	 jmp	 ?GameServerInfoSendStop@@YAXXZ ; GameServerInfoSendStop
?DGGuildListState@@YAXPAUSDHP_GUILDLISTSTATE@@@Z ENDP	; DGGuildListState
_TEXT	ENDS
PUBLIC	?DGRelationShipListRecv@@YAXPAUEXSDHP_UNION_RELATIONSHIP_LIST@@@Z ; DGRelationShipListRecv
EXTRN	?SetGuildRivalMemberList@TUnion@@QAEHHHPBH@Z:PROC ; TUnion::SetGuildRivalMemberList
EXTRN	?SetGuildUnionMemberList@TUnion@@QAEHHHPBH@Z:PROC ; TUnion::SetGuildUnionMemberList
EXTRN	?AddUnion@TUnion@@QAEHHPAD@Z:PROC		; TUnion::AddUnion
; Function compile flags: /Ogtp
;	COMDAT ?DGRelationShipListRecv@@YAXPAUEXSDHP_UNION_RELATIONSHIP_LIST@@@Z
_TEXT	SEGMENT
_lpMsg$ = 8						; size = 4
?DGRelationShipListRecv@@YAXPAUEXSDHP_UNION_RELATIONSHIP_LIST@@@Z PROC ; DGRelationShipListRecv, COMDAT

; 1889 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi

; 1890 : 	if ( lpMsg->btRelationShipType == G_RELATIONSHIP_UNION )

  00004	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]
  00007	8a 46 05	 mov	 al, BYTE PTR [esi+5]
  0000a	3c 01		 cmp	 al, 1
  0000c	75 2c		 jne	 SHORT $LN3@DGRelation

; 1891 : 	{
; 1892 : 		UnionManager.AddUnion(lpMsg->iUnionMasterGuildNumber, lpMsg->szUnionMasterGuildName);

  0000e	8b 4e 10	 mov	 ecx, DWORD PTR [esi+16]
  00011	8d 46 07	 lea	 eax, DWORD PTR [esi+7]
  00014	50		 push	 eax
  00015	51		 push	 ecx
  00016	b9 00 00 00 00	 mov	 ecx, OFFSET ?UnionManager@@3VTUnion@@A ; UnionManager
  0001b	e8 00 00 00 00	 call	 ?AddUnion@TUnion@@QAEHHPAD@Z ; TUnion::AddUnion

; 1893 : 		UnionManager.SetGuildUnionMemberList(lpMsg->iUnionMasterGuildNumber, lpMsg->btRelationShipMemberCount, lpMsg->iRelationShipMember);

  00020	0f b6 46 06	 movzx	 eax, BYTE PTR [esi+6]
  00024	8b 4e 10	 mov	 ecx, DWORD PTR [esi+16]
  00027	8d 56 14	 lea	 edx, DWORD PTR [esi+20]
  0002a	52		 push	 edx
  0002b	50		 push	 eax
  0002c	51		 push	 ecx
  0002d	b9 00 00 00 00	 mov	 ecx, OFFSET ?UnionManager@@3VTUnion@@A ; UnionManager
  00032	e8 00 00 00 00	 call	 ?SetGuildUnionMemberList@TUnion@@QAEHHHPBH@Z ; TUnion::SetGuildUnionMemberList
  00037	5e		 pop	 esi

; 1899 : 	}
; 1900 : }

  00038	5d		 pop	 ebp
  00039	c3		 ret	 0
$LN3@DGRelation:

; 1894 : 	}
; 1895 : 	else if ( lpMsg->btRelationShipType == G_RELATIONSHIP_RIVAL )

  0003a	3c 02		 cmp	 al, 2
  0003c	75 29		 jne	 SHORT $LN1@DGRelation

; 1896 : 	{
; 1897 : 		UnionManager.AddUnion(lpMsg->iUnionMasterGuildNumber, lpMsg->szUnionMasterGuildName);

  0003e	8b 46 10	 mov	 eax, DWORD PTR [esi+16]
  00041	8d 56 07	 lea	 edx, DWORD PTR [esi+7]
  00044	52		 push	 edx
  00045	50		 push	 eax
  00046	b9 00 00 00 00	 mov	 ecx, OFFSET ?UnionManager@@3VTUnion@@A ; UnionManager
  0004b	e8 00 00 00 00	 call	 ?AddUnion@TUnion@@QAEHHPAD@Z ; TUnion::AddUnion

; 1898 : 		UnionManager.SetGuildRivalMemberList(lpMsg->iUnionMasterGuildNumber, lpMsg->btRelationShipMemberCount, lpMsg->iRelationShipMember);

  00050	0f b6 56 06	 movzx	 edx, BYTE PTR [esi+6]
  00054	8b 46 10	 mov	 eax, DWORD PTR [esi+16]
  00057	8d 4e 14	 lea	 ecx, DWORD PTR [esi+20]
  0005a	51		 push	 ecx
  0005b	52		 push	 edx
  0005c	50		 push	 eax
  0005d	b9 00 00 00 00	 mov	 ecx, OFFSET ?UnionManager@@3VTUnion@@A ; UnionManager
  00062	e8 00 00 00 00	 call	 ?SetGuildRivalMemberList@TUnion@@QAEHHHPBH@Z ; TUnion::SetGuildRivalMemberList
$LN1@DGRelation:
  00067	5e		 pop	 esi

; 1899 : 	}
; 1900 : }

  00068	5d		 pop	 ebp
  00069	c3		 ret	 0
?DGRelationShipListRecv@@YAXPAUEXSDHP_UNION_RELATIONSHIP_LIST@@@Z ENDP ; DGRelationShipListRecv
_TEXT	ENDS
PUBLIC	_aRecv$GSCopy$
PUBLIC	__$ArrayPad$
PUBLIC	?DGUnionListRecv@@YAXPAE@Z			; DGUnionListRecv
EXTRN	?PHeadSetW@@YAXPAEEH@Z:PROC			; PHeadSetW
EXTRN	__chkstk:PROC
; Function compile flags: /Ogtp
;	COMDAT ?DGUnionListRecv@@YAXPAE@Z
_TEXT	SEGMENT
tv544 = -6016						; size = 4
_aRecv$GSCopy$ = -6012					; size = 4
tv536 = -6008						; size = 4
_cBUFFER_V1$ = -6004					; size = 6000
__$ArrayPad$ = -4					; size = 4
_aRecv$ = 8						; size = 4
?DGUnionListRecv@@YAXPAE@Z PROC				; DGUnionListRecv, COMDAT

; 1965 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	b8 80 17 00 00	 mov	 eax, 6016		; 00001780H
  00008	e8 00 00 00 00	 call	 __chkstk
  0000d	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00012	33 c5		 xor	 eax, ebp
  00014	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00017	56		 push	 esi
  00018	8b 75 08	 mov	 esi, DWORD PTR _aRecv$[ebp]
  0001b	57		 push	 edi

; 1966 : 	EXSDHP_UNION_LIST_COUNT * lpRecvMsg = (EXSDHP_UNION_LIST_COUNT *)aRecv;
; 1967 : 	EXSDHP_UNION_LIST * lpRecvMsgBody = (EXSDHP_UNION_LIST *)((DWORD)aRecv + 0x10 ) ;	// #error it 0x10 ???
; 1968 : 	char cBUFFER_V1[6000];
; 1969 : 	memset(cBUFFER_V1, 0, sizeof(cBUFFER_V1));

  0001c	68 70 17 00 00	 push	 6000			; 00001770H
  00021	8d 85 8c e8 ff
	ff		 lea	 eax, DWORD PTR _cBUFFER_V1$[ebp]
  00027	6a 00		 push	 0
  00029	50		 push	 eax

; 1990 : 	{
; 1991 : 		lpMsgBody[i].btMemberNum = lpRecvMsgBody[i].btMemberNum;

  0002a	89 b5 84 e8 ff
	ff		 mov	 DWORD PTR _aRecv$GSCopy$[ebp], esi
  00030	8d 7e 10	 lea	 edi, DWORD PTR [esi+16]
  00033	e8 00 00 00 00	 call	 _memset
  00038	0f b6 4e 01	 movzx	 ecx, BYTE PTR [esi+1]
  0003c	0f b6 56 02	 movzx	 edx, BYTE PTR [esi+2]
  00040	66 c1 e1 08	 shl	 cx, 8
  00044	0f b7 c1	 movzx	 eax, cx
  00047	0b c2		 or	 eax, edx
  00049	83 e8 10	 sub	 eax, 16			; 00000010H
  0004c	83 c4 0c	 add	 esp, 12			; 0000000cH
  0004f	3d 70 17 00 00	 cmp	 eax, 6000		; 00001770H
  00054	0f 87 f0 00 00
	00		 ja	 $LN4@DGUnionLis

; 1970 : 	int iSize = MAKE_NUMBERW(lpRecvMsg->h.sizeH, lpRecvMsg->h.sizeL);
; 1971 : 	int iBodySize = iSize - 0x10;	// #error
; 1972 : 
; 1973 : 	if ( iBodySize < 0 )
; 1974 : 		return;
; 1975 : 
; 1976 : 	if ( iBodySize > 6000 )
; 1977 : 		return;
; 1978 : 
; 1979 : 	if ( lpRecvMsg->btCount < 0 || lpRecvMsg->btCount > 100 )

  0005a	8a 4e 04	 mov	 cl, BYTE PTR [esi+4]
  0005d	80 f9 64	 cmp	 cl, 100			; 00000064H
  00060	0f 87 e4 00 00
	00		 ja	 $LN4@DGUnionLis

; 1980 : 		return;
; 1981 : 
; 1982 : 	PMSG_UNIONLIST_COUNT * lpMsg = (PMSG_UNIONLIST_COUNT *)cBUFFER_V1;
; 1983 : 	PMSG_UNIONLIST * lpMsgBody = (PMSG_UNIONLIST *)((DWORD)cBUFFER_V1+sizeof(PMSG_UNIONLIST_COUNT));
; 1984 : 	lpMsg->btResult = lpRecvMsg->btResult;

  00066	0f b6 46 05	 movzx	 eax, BYTE PTR [esi+5]

; 1985 : 	lpMsg->btCount = lpRecvMsg->btCount;
; 1986 : 	lpMsg->btRivalMemberNum = lpRecvMsg->btRivalMemberNum;

  0006a	8a 56 0c	 mov	 dl, BYTE PTR [esi+12]
  0006d	88 85 91 e8 ff
	ff		 mov	 BYTE PTR _cBUFFER_V1$[ebp+5], al

; 1987 : 	lpMsg->btUnionMemberNum = lpRecvMsg->btUnionMemberNum;

  00073	0f b6 46 0d	 movzx	 eax, BYTE PTR [esi+13]
  00077	53		 push	 ebx

; 1988 : 
; 1989 : 	for (int i=0;i<lpMsg->btCount;i++)

  00078	33 db		 xor	 ebx, ebx
  0007a	88 8d 90 e8 ff
	ff		 mov	 BYTE PTR _cBUFFER_V1$[ebp+4], cl
  00080	88 95 92 e8 ff
	ff		 mov	 BYTE PTR _cBUFFER_V1$[ebp+6], dl
  00086	88 85 93 e8 ff
	ff		 mov	 BYTE PTR _cBUFFER_V1$[ebp+7], al
  0008c	84 c9		 test	 cl, cl
  0008e	74 72		 je	 SHORT $LN1@DGUnionLis
  00090	8d 8d 94 e8 ff
	ff		 lea	 ecx, DWORD PTR _cBUFFER_V1$[ebp+8]
  00096	2b cf		 sub	 ecx, edi
  00098	89 8d 88 e8 ff
	ff		 mov	 DWORD PTR tv536[ebp], ecx
  0009e	8d 95 b4 e8 ff
	ff		 lea	 edx, DWORD PTR _cBUFFER_V1$[ebp+40]
  000a4	8d 8d 93 e8 ff
	ff		 lea	 ecx, DWORD PTR _cBUFFER_V1$[ebp+7]
  000aa	2b d7		 sub	 edx, edi
  000ac	2b cf		 sub	 ecx, edi
  000ae	8d 47 01	 lea	 eax, DWORD PTR [edi+1]
  000b1	89 8d 80 e8 ff
	ff		 mov	 DWORD PTR tv544[ebp], ecx
  000b7	eb 07 8d a4 24
	00 00 00 00	 npad	 9
$LL3@DGUnionLis:

; 1990 : 	{
; 1991 : 		lpMsgBody[i].btMemberNum = lpRecvMsgBody[i].btMemberNum;

  000c0	0f b6 48 ff	 movzx	 ecx, BYTE PTR [eax-1]
  000c4	8b b5 80 e8 ff
	ff		 mov	 esi, DWORD PTR tv544[ebp]

; 1992 : 		memcpy(lpMsgBody[i].szGuildName, lpRecvMsgBody[i].szGuildName, sizeof(lpMsgBody->szGuildName));
; 1993 : 		memcpy(lpMsgBody[i].Mark, lpRecvMsgBody[i].Mark, sizeof(lpMsgBody->Mark));

  000ca	8b bd 88 e8 ff
	ff		 mov	 edi, DWORD PTR tv536[ebp]
  000d0	88 0c 06	 mov	 BYTE PTR [esi+eax], cl
  000d3	8b 48 20	 mov	 ecx, DWORD PTR [eax+32]
  000d6	89 0c 02	 mov	 DWORD PTR [edx+eax], ecx
  000d9	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  000dc	89 4c 02 04	 mov	 DWORD PTR [edx+eax+4], ecx
  000e0	03 f8		 add	 edi, eax
  000e2	8b f0		 mov	 esi, eax
  000e4	b9 08 00 00 00	 mov	 ecx, 8
  000e9	f3 a5		 rep movsd
  000eb	8a 8d 90 e8 ff
	ff		 mov	 cl, BYTE PTR _cBUFFER_V1$[ebp+4]
  000f1	0f b6 f1	 movzx	 esi, cl
  000f4	43		 inc	 ebx
  000f5	83 c0 29	 add	 eax, 41			; 00000029H
  000f8	3b de		 cmp	 ebx, esi
  000fa	7c c4		 jl	 SHORT $LL3@DGUnionLis

; 1988 : 
; 1989 : 	for (int i=0;i<lpMsg->btCount;i++)

  000fc	8b b5 84 e8 ff
	ff		 mov	 esi, DWORD PTR _aRecv$GSCopy$[ebp]
$LN1@DGUnionLis:

; 1994 : 	}
; 1995 : 
; 1996 : 	PHeadSetW((LPBYTE)lpMsg, 0xE9, lpMsg->btCount * sizeof(PMSG_UNIONLIST) + 0x10);	// #warning Check plus operation ( why 0x10 ??? )

  00102	0f b6 d1	 movzx	 edx, cl
  00105	6b d2 29	 imul	 edx, 41			; 00000029H
  00108	83 c2 10	 add	 edx, 16			; 00000010H
  0010b	52		 push	 edx
  0010c	8d 85 8c e8 ff
	ff		 lea	 eax, DWORD PTR _cBUFFER_V1$[ebp]
  00112	68 e9 00 00 00	 push	 233			; 000000e9H
  00117	50		 push	 eax
  00118	e8 00 00 00 00	 call	 ?PHeadSetW@@YAXPAEEH@Z	; PHeadSetW

; 1997 : 	DataSend(lpRecvMsg->wRequestUserIndex, (LPBYTE)lpMsg, MAKE_NUMBERW(lpMsg->h.sizeH, lpMsg->h.sizeL));

  0011d	0f b6 8d 8d e8
	ff ff		 movzx	 ecx, BYTE PTR _cBUFFER_V1$[ebp+1]
  00124	0f b6 85 8e e8
	ff ff		 movzx	 eax, BYTE PTR _cBUFFER_V1$[ebp+2]
  0012b	66 c1 e1 08	 shl	 cx, 8
  0012f	0f b7 d1	 movzx	 edx, cx
  00132	0b d0		 or	 edx, eax
  00134	52		 push	 edx
  00135	0f b7 56 06	 movzx	 edx, WORD PTR [esi+6]
  00139	8d 8d 8c e8 ff
	ff		 lea	 ecx, DWORD PTR _cBUFFER_V1$[ebp]
  0013f	51		 push	 ecx
  00140	52		 push	 edx
  00141	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00146	83 c4 18	 add	 esp, 24			; 00000018H
  00149	5b		 pop	 ebx
$LN4@DGUnionLis:

; 1998 : }

  0014a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0014d	5f		 pop	 edi
  0014e	33 cd		 xor	 ecx, ebp
  00150	5e		 pop	 esi
  00151	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00156	8b e5		 mov	 esp, ebp
  00158	5d		 pop	 ebp
  00159	c3		 ret	 0
?DGUnionListRecv@@YAXPAE@Z ENDP				; DGUnionListRecv
_TEXT	ENDS
PUBLIC	??_C@_0DF@HMMPGHMB@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$CI?$CFs?$CJ?5Pay?5Money?$CIIn?5Inven@ ; `string'
PUBLIC	?WithdrawUserMoney@@YAHPADPAUOBJECTSTRUCT@@H@Z	; WithdrawUserMoney
EXTRN	?GCMoneySend@@YAXHK@Z:PROC			; GCMoneySend
;	COMDAT ??_C@_0DF@HMMPGHMB@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$CI?$CFs?$CJ?5Pay?5Money?$CIIn?5Inven@
CONST	SEGMENT
??_C@_0DF@HMMPGHMB@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$CI?$CFs?$CJ?5Pay?5Money?$CIIn?5Inven@ DB '['
	DB	'%s][%s] (%s) Pay Money(In Inventory) : %d - %d = %d', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?WithdrawUserMoney@@YAHPADPAUOBJECTSTRUCT@@H@Z
_TEXT	SEGMENT
_Type$ = 8						; size = 4
_lpObj$ = 12						; size = 4
_Withdraw_Money$ = 16					; size = 4
?WithdrawUserMoney@@YAHPADPAUOBJECTSTRUCT@@H@Z PROC	; WithdrawUserMoney, COMDAT

; 2746 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx

; 2747 : 	int oldmoney;
; 2748 : 
; 2749 : 	if ( (lpObj->Money - Withdraw_Money) >= 0 )

  00004	8b 5d 10	 mov	 ebx, DWORD PTR _Withdraw_Money$[ebp]
  00007	56		 push	 esi
  00008	8b 75 0c	 mov	 esi, DWORD PTR _lpObj$[ebp]
  0000b	57		 push	 edi
  0000c	8b be b0 00 00
	00		 mov	 edi, DWORD PTR [esi+176]
  00012	8b c7		 mov	 eax, edi
  00014	2b c3		 sub	 eax, ebx
  00016	78 3d		 js	 SHORT $LN1@WithdrawUs

; 2750 : 	{
; 2751 : 		oldmoney = lpObj->Money;
; 2752 : 		lpObj->Money -= Withdraw_Money;
; 2753 : 
; 2754 : 		GCMoneySend(lpObj->m_Index, lpObj->Money);

  00018	50		 push	 eax
  00019	89 86 b0 00 00
	00		 mov	 DWORD PTR [esi+176], eax
  0001f	8b 06		 mov	 eax, DWORD PTR [esi]
  00021	50		 push	 eax
  00022	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend

; 2755 : 		
; 2756 : 		LogAdd(LOG_BLACK, "[%s][%s] (%s) Pay Money(In Inventory) : %d - %d = %d",
; 2757 : 			lpObj->AccountID, lpObj->Name, Type, oldmoney, Withdraw_Money, lpObj->Money);

  00027	8b 8e b0 00 00
	00		 mov	 ecx, DWORD PTR [esi+176]
  0002d	8b 55 08	 mov	 edx, DWORD PTR _Type$[ebp]
  00030	51		 push	 ecx
  00031	53		 push	 ebx
  00032	57		 push	 edi
  00033	52		 push	 edx
  00034	8d 46 6f	 lea	 eax, DWORD PTR [esi+111]
  00037	50		 push	 eax
  00038	83 c6 64	 add	 esi, 100		; 00000064H
  0003b	56		 push	 esi
  0003c	68 00 00 00 00	 push	 OFFSET ??_C@_0DF@HMMPGHMB@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$CI?$CFs?$CJ?5Pay?5Money?$CIIn?5Inven@
  00041	6a 00		 push	 0
  00043	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00048	83 c4 28	 add	 esp, 40			; 00000028H
  0004b	5f		 pop	 edi
  0004c	5e		 pop	 esi

; 2758 : 
; 2759 : 		return TRUE;

  0004d	b8 01 00 00 00	 mov	 eax, 1
  00052	5b		 pop	 ebx

; 2763 : }

  00053	5d		 pop	 ebp
  00054	c3		 ret	 0
$LN1@WithdrawUs:
  00055	5f		 pop	 edi
  00056	5e		 pop	 esi

; 2760 : 	}
; 2761 : 
; 2762 : 	return FALSE;

  00057	33 c0		 xor	 eax, eax
  00059	5b		 pop	 ebx

; 2763 : }

  0005a	5d		 pop	 ebp
  0005b	c3		 ret	 0
?WithdrawUserMoney@@YAHPADPAUOBJECTSTRUCT@@H@Z ENDP	; WithdrawUserMoney
_TEXT	ENDS
PUBLIC	?SetTimeStamp@_GUILD_INFO_STRUCT@@QAEXXZ	; _GUILD_INFO_STRUCT::SetTimeStamp
; Function compile flags: /Ogtp
;	COMDAT ?SetTimeStamp@_GUILD_INFO_STRUCT@@QAEXXZ
_TEXT	SEGMENT
?SetTimeStamp@_GUILD_INFO_STRUCT@@QAEXXZ PROC		; _GUILD_INFO_STRUCT::SetTimeStamp, COMDAT
; _this$ = ecx

; 3046 : 	this->iTimeStamp++;

  00000	ff 81 24 07 00
	00		 inc	 DWORD PTR [ecx+1828]

; 3047 : };

  00006	c3		 ret	 0
?SetTimeStamp@_GUILD_INFO_STRUCT@@QAEXXZ ENDP		; _GUILD_INFO_STRUCT::SetTimeStamp
_TEXT	ENDS
PUBLIC	?set@PBMSG_HEAD@@QAEXPAEEE@Z			; PBMSG_HEAD::set
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
;	COMDAT ?set@PBMSG_HEAD@@QAEXPAEEE@Z
_TEXT	SEGMENT
_lpBuf$ = 8						; size = 4
_head$ = 12						; size = 1
_size$ = 16						; size = 1
?set@PBMSG_HEAD@@QAEXPAEEE@Z PROC			; PBMSG_HEAD::set, COMDAT
; _this$ = ecx

; 92   : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 93   : 		lpBuf[0] = 0xC1;

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpBuf$[ebp]

; 94   : 		lpBuf[1] = size;

  00006	8a 4d 10	 mov	 cl, BYTE PTR _size$[ebp]

; 95   : 		lpBuf[2] = head;

  00009	8a 55 0c	 mov	 dl, BYTE PTR _head$[ebp]
  0000c	c6 00 c1	 mov	 BYTE PTR [eax], 193	; 000000c1H
  0000f	88 48 01	 mov	 BYTE PTR [eax+1], cl
  00012	88 50 02	 mov	 BYTE PTR [eax+2], dl

; 96   : 	};	// line : 22

  00015	5d		 pop	 ebp
  00016	c2 0c 00	 ret	 12			; 0000000cH
?set@PBMSG_HEAD@@QAEXPAEEE@Z ENDP			; PBMSG_HEAD::set
_TEXT	ENDS
PUBLIC	?setE@PBMSG_HEAD@@QAEXPAEEE@Z			; PBMSG_HEAD::setE
; Function compile flags: /Ogtp
;	COMDAT ?setE@PBMSG_HEAD@@QAEXPAEEE@Z
_TEXT	SEGMENT
_lpBuf$ = 8						; size = 4
_head$ = 12						; size = 1
_size$ = 16						; size = 1
?setE@PBMSG_HEAD@@QAEXPAEEE@Z PROC			; PBMSG_HEAD::setE, COMDAT
; _this$ = ecx

; 99   : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 100  : 		lpBuf[0] = 0xC3;

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpBuf$[ebp]

; 101  : 		lpBuf[1] = size;

  00006	8a 4d 10	 mov	 cl, BYTE PTR _size$[ebp]

; 102  : 		lpBuf[2] = head;

  00009	8a 55 0c	 mov	 dl, BYTE PTR _head$[ebp]
  0000c	c6 00 c3	 mov	 BYTE PTR [eax], 195	; 000000c3H
  0000f	88 48 01	 mov	 BYTE PTR [eax+1], cl
  00012	88 50 02	 mov	 BYTE PTR [eax+2], dl

; 103  : 	};	// line : 29

  00015	5d		 pop	 ebp
  00016	c2 0c 00	 ret	 12			; 0000000cH
?setE@PBMSG_HEAD@@QAEXPAEEE@Z ENDP			; PBMSG_HEAD::setE
_TEXT	ENDS
PUBLIC	?set@PWMSG_HEAD@@QAEXPAEEH@Z			; PWMSG_HEAD::set
; Function compile flags: /Ogtp
;	COMDAT ?set@PWMSG_HEAD@@QAEXPAEEH@Z
_TEXT	SEGMENT
_lpBuf$ = 8						; size = 4
_head$ = 12						; size = 1
_size$ = 16						; size = 4
?set@PWMSG_HEAD@@QAEXPAEEH@Z PROC			; PWMSG_HEAD::set, COMDAT
; _this$ = ecx

; 115  : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 116  : 		lpBuf[0] = 0xC2;

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpBuf$[ebp]

; 117  : 		lpBuf[1] = SET_NUMBERH(size);

  00006	8b 4d 10	 mov	 ecx, DWORD PTR _size$[ebp]
  00009	8b d1		 mov	 edx, ecx

; 118  : 		lpBuf[2] = SET_NUMBERL(size);

  0000b	88 48 02	 mov	 BYTE PTR [eax+2], cl

; 119  : 		lpBuf[3] = head;

  0000e	8a 4d 0c	 mov	 cl, BYTE PTR _head$[ebp]
  00011	c1 ea 08	 shr	 edx, 8
  00014	c6 00 c2	 mov	 BYTE PTR [eax], 194	; 000000c2H
  00017	88 50 01	 mov	 BYTE PTR [eax+1], dl
  0001a	88 48 03	 mov	 BYTE PTR [eax+3], cl

; 120  : 	};

  0001d	5d		 pop	 ebp
  0001e	c2 0c 00	 ret	 12			; 0000000cH
?set@PWMSG_HEAD@@QAEXPAEEH@Z ENDP			; PWMSG_HEAD::set
_TEXT	ENDS
PUBLIC	?setE@PWMSG_HEAD@@QAEXPAEEH@Z			; PWMSG_HEAD::setE
; Function compile flags: /Ogtp
;	COMDAT ?setE@PWMSG_HEAD@@QAEXPAEEH@Z
_TEXT	SEGMENT
_lpBuf$ = 8						; size = 4
_head$ = 12						; size = 1
_size$ = 16						; size = 4
?setE@PWMSG_HEAD@@QAEXPAEEH@Z PROC			; PWMSG_HEAD::setE, COMDAT
; _this$ = ecx

; 123  : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 124  : 		lpBuf[0] = 0xC4;

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpBuf$[ebp]

; 125  : 		lpBuf[1] = SET_NUMBERH(size);

  00006	8b 4d 10	 mov	 ecx, DWORD PTR _size$[ebp]
  00009	8b d1		 mov	 edx, ecx

; 126  : 		lpBuf[2] = SET_NUMBERL(size);

  0000b	88 48 02	 mov	 BYTE PTR [eax+2], cl

; 127  : 		lpBuf[3] = head;

  0000e	8a 4d 0c	 mov	 cl, BYTE PTR _head$[ebp]
  00011	c1 ea 08	 shr	 edx, 8
  00014	c6 00 c4	 mov	 BYTE PTR [eax], 196	; 000000c4H
  00017	88 50 01	 mov	 BYTE PTR [eax+1], dl
  0001a	88 48 03	 mov	 BYTE PTR [eax+3], cl

; 128  : 	};

  0001d	5d		 pop	 ebp
  0001e	c2 0c 00	 ret	 12			; 0000000cH
?setE@PWMSG_HEAD@@QAEXPAEEH@Z ENDP			; PWMSG_HEAD::setE
_TEXT	ENDS
PUBLIC	?set@PBMSG_HEAD2@@QAEXPAEEEE@Z			; PBMSG_HEAD2::set
; Function compile flags: /Ogtp
;	COMDAT ?set@PBMSG_HEAD2@@QAEXPAEEEE@Z
_TEXT	SEGMENT
_lpBuf$ = 8						; size = 4
_head$ = 12						; size = 1
_sub$ = 16						; size = 1
_size$ = 20						; size = 1
?set@PBMSG_HEAD2@@QAEXPAEEEE@Z PROC			; PBMSG_HEAD2::set, COMDAT
; _this$ = ecx

; 142  : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 143  : 		lpBuf[0] = 0xC1;

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpBuf$[ebp]

; 144  : 		lpBuf[1] = size;

  00006	8a 4d 14	 mov	 cl, BYTE PTR _size$[ebp]

; 145  : 		lpBuf[2] = head;

  00009	8a 55 0c	 mov	 dl, BYTE PTR _head$[ebp]
  0000c	88 48 01	 mov	 BYTE PTR [eax+1], cl

; 146  : 		lpBuf[3] = sub;

  0000f	8a 4d 10	 mov	 cl, BYTE PTR _sub$[ebp]
  00012	c6 00 c1	 mov	 BYTE PTR [eax], 193	; 000000c1H
  00015	88 50 02	 mov	 BYTE PTR [eax+2], dl
  00018	88 48 03	 mov	 BYTE PTR [eax+3], cl

; 147  : 	};

  0001b	5d		 pop	 ebp
  0001c	c2 10 00	 ret	 16			; 00000010H
?set@PBMSG_HEAD2@@QAEXPAEEEE@Z ENDP			; PBMSG_HEAD2::set
_TEXT	ENDS
PUBLIC	??0char_ID@@QAE@PAD@Z				; char_ID::char_ID
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\winutil.h
;	COMDAT ??0char_ID@@QAE@PAD@Z
_TEXT	SEGMENT
_szName$ = 8						; size = 4
??0char_ID@@QAE@PAD@Z PROC				; char_ID::char_ID, COMDAT
; _this$ = ecx

; 45   : 	char_ID(LPSTR szName)	// line : 44

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	8b c1		 mov	 eax, ecx

; 46   : 	{
; 47   : 		memset(this->Name, 0, sizeof(this->Name));

  00005	33 c9		 xor	 ecx, ecx
  00007	89 08		 mov	 DWORD PTR [eax], ecx
  00009	89 48 04	 mov	 DWORD PTR [eax+4], ecx
  0000c	66 89 48 08	 mov	 WORD PTR [eax+8], cx
  00010	88 48 0a	 mov	 BYTE PTR [eax+10], cl

; 48   : 
; 49   : 		if ( szName != NULL )

  00013	8b 4d 08	 mov	 ecx, DWORD PTR _szName$[ebp]
  00016	85 c9		 test	 ecx, ecx
  00018	74 12		 je	 SHORT $LN1@char_ID

; 50   : 		{
; 51   : 			memcpy(this->Name, szName, MAX_ACCOUNT_LEN);

  0001a	8b 11		 mov	 edx, DWORD PTR [ecx]
  0001c	89 10		 mov	 DWORD PTR [eax], edx
  0001e	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  00021	89 50 04	 mov	 DWORD PTR [eax+4], edx
  00024	66 8b 49 08	 mov	 cx, WORD PTR [ecx+8]
  00028	66 89 48 08	 mov	 WORD PTR [eax+8], cx
$LN1@char_ID:

; 52   : 		}
; 53   : 	}	// line : 49

  0002c	5d		 pop	 ebp
  0002d	c2 04 00	 ret	 4
??0char_ID@@QAE@PAD@Z ENDP				; char_ID::char_ID
_TEXT	ENDS
PUBLIC	?GetBuffer@char_ID@@QAEPADXZ			; char_ID::GetBuffer
; Function compile flags: /Ogtp
;	COMDAT ?GetBuffer@char_ID@@QAEPADXZ
_TEXT	SEGMENT
?GetBuffer@char_ID@@QAEPADXZ PROC			; char_ID::GetBuffer, COMDAT
; _this$ = ecx

; 56   : 	{

  00000	8b c1		 mov	 eax, ecx

; 57   : 		return this->Name;
; 58   : 	}	// line : 54

  00002	c3		 ret	 0
?GetBuffer@char_ID@@QAEPADXZ ENDP			; char_ID::GetBuffer
_TEXT	ENDS
PUBLIC	?GetLength@char_ID@@QAEHXZ			; char_ID::GetLength
; Function compile flags: /Ogtp
;	COMDAT ?GetLength@char_ID@@QAEHXZ
_TEXT	SEGMENT
?GetLength@char_ID@@QAEHXZ PROC				; char_ID::GetLength, COMDAT
; _this$ = ecx

; 62   : 		return strlen(this->Name);

  00000	8d 51 01	 lea	 edx, DWORD PTR [ecx+1]
$LL3@GetLength:
  00003	8a 01		 mov	 al, BYTE PTR [ecx]
  00005	41		 inc	 ecx
  00006	84 c0		 test	 al, al
  00008	75 f9		 jne	 SHORT $LL3@GetLength
  0000a	2b ca		 sub	 ecx, edx
  0000c	8b c1		 mov	 eax, ecx

; 63   : 	}	// line : 65

  0000e	c3		 ret	 0
?GetLength@char_ID@@QAEHXZ ENDP				; char_ID::GetLength
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?DGGuildMemberInfoRequest@@YAXH@Z		; DGGuildMemberInfoRequest
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
;	COMDAT ?DGGuildMemberInfoRequest@@YAXH@Z
_TEXT	SEGMENT
_pMsg$ = -20						; size = 15
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
?DGGuildMemberInfoRequest@@YAXH@Z PROC			; DGGuildMemberInfoRequest, COMDAT

; 736  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]

; 737  : 	SDHP_GUILDMEMBER_INFO_REQUEST pMsg;
; 738  : 
; 739  : 	pMsg.h.set((LPBYTE)&pMsg, 0x35, sizeof(pMsg));
; 740  : 	pMsg.NumberH = SET_NUMBERH(aIndex);

  00013	8b c8		 mov	 ecx, eax

; 741  : 	pMsg.NumberL = SET_NUMBERL(aIndex);

  00015	88 45 f0	 mov	 BYTE PTR _pMsg$[ebp+4], al

; 742  : 	memcpy(pMsg.MemberID, gObj[aIndex].Name, sizeof(pMsg.MemberID));

  00018	69 c0 64 15 00
	00		 imul	 eax, 5476		; 00001564H
  0001e	05 6f 00 00 00	 add	 eax, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+111
  00023	8b 10		 mov	 edx, DWORD PTR [eax]
  00025	c1 e9 08	 shr	 ecx, 8
  00028	88 4d ef	 mov	 BYTE PTR _pMsg$[ebp+3], cl
  0002b	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0002e	89 55 f1	 mov	 DWORD PTR _pMsg$[ebp+5], edx
  00031	66 8b 50 08	 mov	 dx, WORD PTR [eax+8]

; 743  : 
; 744  : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  00035	6a 0f		 push	 15			; 0000000fH
  00037	8d 45 ec	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0003a	89 4d f5	 mov	 DWORD PTR _pMsg$[ebp+9], ecx
  0003d	50		 push	 eax
  0003e	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00043	66 c7 45 ec c1
	0f		 mov	 WORD PTR _pMsg$[ebp], 4033 ; 00000fc1H
  00049	c6 45 ee 35	 mov	 BYTE PTR _pMsg$[ebp+2], 53 ; 00000035H
  0004d	66 89 55 f9	 mov	 WORD PTR _pMsg$[ebp+13], dx
  00051	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 745  : }

  00056	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00059	33 cd		 xor	 ecx, ebp
  0005b	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00060	8b e5		 mov	 esp, ebp
  00062	5d		 pop	 ebp
  00063	c3		 ret	 0
?DGGuildMemberInfoRequest@@YAXH@Z ENDP			; DGGuildMemberInfoRequest
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?DGGuildScoreUpdate@@YAXPADH@Z			; DGGuildScoreUpdate
; Function compile flags: /Ogtp
;	COMDAT ?DGGuildScoreUpdate@@YAXPADH@Z
_TEXT	SEGMENT
_pMsg$ = -20						; size = 16
__$ArrayPad$ = -4					; size = 4
_guildname$ = 8						; size = 4
_score$ = 12						; size = 4
?DGGuildScoreUpdate@@YAXPADH@Z PROC			; DGGuildScoreUpdate, COMDAT

; 947  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _guildname$[ebp]
  00014	57		 push	 edi

; 948  : 	SDHP_GUILDSCOREUPDATE pMsg;
; 949  : 
; 950  : 	pMsg.h.set((LPBYTE)&pMsg, 0x37, sizeof(SDHP_GUILDSCOREUPDATE));
; 951  : 	pMsg.Score = score;

  00015	8b 7d 0c	 mov	 edi, DWORD PTR _score$[ebp]

; 952  : 	strcpy(pMsg.GuildName, guildname);

  00018	8d 55 ef	 lea	 edx, DWORD PTR _pMsg$[ebp+3]
  0001b	66 c7 45 ec c1
	10		 mov	 WORD PTR _pMsg$[ebp], 4289 ; 000010c1H
  00021	c6 45 ee 37	 mov	 BYTE PTR _pMsg$[ebp+2], 55 ; 00000037H
  00025	89 7d f8	 mov	 DWORD PTR _pMsg$[ebp+12], edi
  00028	8b c6		 mov	 eax, esi
  0002a	2b d6		 sub	 edx, esi
  0002c	8d 64 24 00	 npad	 4
$LL3@DGGuildSco:
  00030	8a 08		 mov	 cl, BYTE PTR [eax]
  00032	88 0c 02	 mov	 BYTE PTR [edx+eax], cl
  00035	40		 inc	 eax
  00036	84 c9		 test	 cl, cl
  00038	75 f6		 jne	 SHORT $LL3@DGGuildSco

; 953  : 
; 954  : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  0003a	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  0003e	50		 push	 eax
  0003f	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00042	51		 push	 ecx
  00043	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00048	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 955  : 
; 956  : 	LogAdd(LOG_BLACK, lMsg.Get(MSGGET(1, 186)), guildname, score);

  0004d	57		 push	 edi
  0004e	56		 push	 esi
  0004f	68 ba 01 00 00	 push	 442			; 000001baH
  00054	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00059	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0005e	50		 push	 eax
  0005f	6a 00		 push	 0
  00061	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 957  : }

  00066	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00069	83 c4 10	 add	 esp, 16			; 00000010H
  0006c	5f		 pop	 edi
  0006d	33 cd		 xor	 ecx, ebp
  0006f	5e		 pop	 esi
  00070	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00075	8b e5		 mov	 esp, ebp
  00077	5d		 pop	 ebp
  00078	c3		 ret	 0
?DGGuildScoreUpdate@@YAXPADH@Z ENDP			; DGGuildScoreUpdate
_TEXT	ENDS
PUBLIC	?DGGuildListRequest@@YAXXZ			; DGGuildListRequest
; Function compile flags: /Ogtp
;	COMDAT ?DGGuildListRequest@@YAXXZ
_TEXT	SEGMENT
_pMsg$ = -4						; size = 3
?DGGuildListRequest@@YAXXZ PROC				; DGGuildListRequest, COMDAT

; 1036 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx

; 1037 : 	SDHP_GUILDLISTREQUEST pMsg;
; 1038 : 
; 1039 : 	pMsg.h.set((LPBYTE)&pMsg, 0x40, sizeof(SDHP_GUILDLISTREQUEST));
; 1040 : 
; 1041 : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  00004	6a 03		 push	 3
  00006	8d 45 fc	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00009	50		 push	 eax
  0000a	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  0000f	66 c7 45 fc c1
	03		 mov	 WORD PTR _pMsg$[ebp], 961 ; 000003c1H
  00015	c6 45 fe 40	 mov	 BYTE PTR _pMsg$[ebp+2], 64 ; 00000040H
  00019	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 1042 : }

  0001e	8b e5		 mov	 esp, ebp
  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?DGGuildListRequest@@YAXXZ ENDP				; DGGuildListRequest
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDGuildServerGroupChattingSend@@YAXHPAUPMSG_CHATDATA@@@Z ; GDGuildServerGroupChattingSend
; Function compile flags: /Ogtp
;	COMDAT ?GDGuildServerGroupChattingSend@@YAXHPAUPMSG_CHATDATA@@@Z
_TEXT	SEGMENT
_pMsg$ = -84						; size = 80
__$ArrayPad$ = -4					; size = 4
_iGuildNum$ = 8						; size = 4
_lpChatData$ = 12					; size = 4
?GDGuildServerGroupChattingSend@@YAXHPAUPMSG_CHATDATA@@@Z PROC ; GDGuildServerGroupChattingSend, COMDAT

; 1136 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 54	 sub	 esp, 84			; 00000054H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 0c	 mov	 esi, DWORD PTR _lpChatData$[ebp]
  00014	57		 push	 edi

; 1137 : 	EXSDHP_SERVERGROUP_GUILD_CHATTING_SEND pMsg = {0};

  00015	6a 4f		 push	 79			; 0000004fH
  00017	8d 45 ad	 lea	 eax, DWORD PTR _pMsg$[ebp+1]
  0001a	6a 00		 push	 0
  0001c	50		 push	 eax
  0001d	e8 00 00 00 00	 call	 _memset

; 1138 : 
; 1139 : 	pMsg.h.set((LPBYTE)&pMsg, 0x50, sizeof(EXSDHP_SERVERGROUP_GUILD_CHATTING_SEND));
; 1140 : 	pMsg.iGuildNum = iGuildNum;
; 1141 : 	memcpy(pMsg.szCharacterName, lpChatData->chatid, sizeof(pMsg.szCharacterName));

  00022	8b 56 03	 mov	 edx, DWORD PTR [esi+3]
  00025	8b 4d 08	 mov	 ecx, DWORD PTR _iGuildNum$[ebp]
  00028	89 4d b0	 mov	 DWORD PTR _pMsg$[ebp+4], ecx
  0002b	8b 4e 07	 mov	 ecx, DWORD PTR [esi+7]
  0002e	83 c4 0c	 add	 esp, 12			; 0000000cH
  00031	b8 50 00 00 00	 mov	 eax, 80			; 00000050H
  00036	89 55 b4	 mov	 DWORD PTR _pMsg$[ebp+8], edx
  00039	66 8b 56 0b	 mov	 dx, WORD PTR [esi+11]
  0003d	89 4d b8	 mov	 DWORD PTR _pMsg$[ebp+12], ecx
  00040	88 45 ae	 mov	 BYTE PTR _pMsg$[ebp+2], al

; 1142 : 	memcpy(pMsg.szChattingMsg, lpChatData->chatmsg, sizeof(pMsg.szChattingMsg));
; 1143 : 
; 1144 : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  00043	50		 push	 eax
  00044	66 c7 45 ac c1
	50		 mov	 WORD PTR _pMsg$[ebp], 20673 ; 000050c1H
  0004a	66 89 55 bc	 mov	 WORD PTR _pMsg$[ebp+16], dx
  0004e	83 c6 0d	 add	 esi, 13			; 0000000dH
  00051	b9 0f 00 00 00	 mov	 ecx, 15			; 0000000fH
  00056	8d 7d be	 lea	 edi, DWORD PTR _pMsg$[ebp+18]
  00059	8d 45 ac	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0005c	f3 a5		 rep movsd
  0005e	50		 push	 eax
  0005f	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00064	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 1145 : }

  00069	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0006c	5f		 pop	 edi
  0006d	33 cd		 xor	 ecx, ebp
  0006f	5e		 pop	 esi
  00070	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00075	8b e5		 mov	 esp, ebp
  00077	5d		 pop	 ebp
  00078	c3		 ret	 0
?GDGuildServerGroupChattingSend@@YAXHPAUPMSG_CHATDATA@@@Z ENDP ; GDGuildServerGroupChattingSend
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?DGGuildServerGroupChattingRecv@@YAXPAUEXSDHP_SERVERGROUP_GUILD_CHATTING_RECV@@@Z ; DGGuildServerGroupChattingRecv
; Function compile flags: /Ogtp
;	COMDAT ?DGGuildServerGroupChattingRecv@@YAXPAUEXSDHP_SERVERGROUP_GUILD_CHATTING_RECV@@@Z
_TEXT	SEGMENT
_lpGuildInfo$ = -88					; size = 4
tv302 = -84						; size = 4
_pMsg$ = -80						; size = 73
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?DGGuildServerGroupChattingRecv@@YAXPAUEXSDHP_SERVERGROUP_GUILD_CHATTING_RECV@@@Z PROC ; DGGuildServerGroupChattingRecv, COMDAT

; 1149 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 58	 sub	 esp, 88			; 00000058H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	8b 5d 08	 mov	 ebx, DWORD PTR _lpMsg$[ebp]
  00014	56		 push	 esi
  00015	57		 push	 edi

; 1150 : 	PMSG_CHATDATA pMsg ={0};

  00016	6a 48		 push	 72			; 00000048H
  00018	8d 45 b1	 lea	 eax, DWORD PTR _pMsg$[ebp+1]
  0001b	6a 00		 push	 0
  0001d	50		 push	 eax
  0001e	e8 00 00 00 00	 call	 _memset

; 1151 : 
; 1152 : 	pMsg.h.set((LPBYTE)&pMsg, 0x00, sizeof(pMsg));	// #error MAYBE the header is wrong
; 1153 : 	memcpy(pMsg.chatid, lpMsg->szCharacterName, sizeof(pMsg.chatid));

  00023	8b 4b 08	 mov	 ecx, DWORD PTR [ebx+8]
  00026	8b 53 0c	 mov	 edx, DWORD PTR [ebx+12]
  00029	66 8b 43 10	 mov	 ax, WORD PTR [ebx+16]
  0002d	89 4d b3	 mov	 DWORD PTR _pMsg$[ebp+3], ecx
  00030	66 c7 45 b0 c1
	49		 mov	 WORD PTR _pMsg$[ebp], 18881 ; 000049c1H
  00036	c6 45 b2 00	 mov	 BYTE PTR _pMsg$[ebp+2], 0
  0003a	89 55 b7	 mov	 DWORD PTR _pMsg$[ebp+7], edx
  0003d	66 89 45 bb	 mov	 WORD PTR _pMsg$[ebp+11], ax

; 1154 : 	memcpy(pMsg.chatmsg, lpMsg->szChattingMsg, sizeof(pMsg.chatmsg));

  00041	8d 73 12	 lea	 esi, DWORD PTR [ebx+18]
  00044	b9 0f 00 00 00	 mov	 ecx, 15			; 0000000fH
  00049	8d 7d bd	 lea	 edi, DWORD PTR _pMsg$[ebp+13]
  0004c	f3 a5		 rep movsd

; 1155 : 	_GUILD_INFO_STRUCT * lpGuildInfo = Guild.SearchGuild_Number(lpMsg->iGuildNum);

  0004e	8b 4b 04	 mov	 ecx, DWORD PTR [ebx+4]
  00051	83 c4 0c	 add	 esp, 12			; 0000000cH
  00054	51		 push	 ecx
  00055	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  0005a	e8 00 00 00 00	 call	 ?SearchGuild_Number@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@H@Z ; CGuildClass::SearchGuild_Number
  0005f	89 45 a8	 mov	 DWORD PTR _lpGuildInfo$[ebp], eax

; 1156 : 
; 1157 : 	if ( lpGuildInfo == NULL )

  00062	85 c0		 test	 eax, eax
  00064	0f 84 91 00 00
	00		 je	 $LN5@DGGuildSer

; 1158 : 		return;
; 1159 : 
; 1160 : 	int iUserIndex = -1;
; 1161 : 
; 1162 : 	if ( lpGuildInfo->Count >= 0 )
; 1163 : 	{
; 1164 : 		for ( int i=0;i<MAX_USER_GUILD;i++)

  0006a	8d 90 a0 03 00
	00		 lea	 edx, DWORD PTR [eax+928]
  00070	33 f6		 xor	 esi, esi
  00072	8d 78 2f	 lea	 edi, DWORD PTR [eax+47]
  00075	89 55 ac	 mov	 DWORD PTR tv302[ebp], edx
  00078	eb 06 8d 9b 00
	00 00 00	 npad	 8
$LL22@DGGuildSer:

; 1165 : 		{
; 1166 : 			if ( lpGuildInfo->Use[i] != FALSE )

  00080	80 bc 30 40 04
	00 00 00	 cmp	 BYTE PTR [eax+esi+1088], 0
  00088	74 64		 je	 SHORT $LN6@DGGuildSer

; 1167 : 			{
; 1168 : 				iUserIndex = lpGuildInfo->Index[i];

  0008a	8b 4d ac	 mov	 ecx, DWORD PTR tv302[ebp]
  0008d	0f bf 19	 movsx	 ebx, WORD PTR [ecx]

; 1169 : 
; 1170 : 				if ( iUserIndex >= 0 )

  00090	85 db		 test	 ebx, ebx
  00092	78 5a		 js	 SHORT $LN6@DGGuildSer

; 1171 : 				{
; 1172 : 					if ( lpGuildInfo->Names[i][0] == gObj[iUserIndex].Name[0] )

  00094	8b d3		 mov	 edx, ebx
  00096	69 d2 64 15 00
	00		 imul	 edx, 5476		; 00001564H
  0009c	8d 8a 6f 00 00
	00		 lea	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[edx+111]
  000a2	8a 17		 mov	 dl, BYTE PTR [edi]
  000a4	3a 11		 cmp	 dl, BYTE PTR [ecx]
  000a6	75 46		 jne	 SHORT $LN6@DGGuildSer

; 1173 : 					{
; 1174 : 						if ( !strcmp(lpGuildInfo->Names[i], gObj[iUserIndex].Name ))

  000a8	8b c7		 mov	 eax, edi
  000aa	8d 9b 00 00 00
	00		 npad	 6
$LL16@DGGuildSer:
  000b0	8a 10		 mov	 dl, BYTE PTR [eax]
  000b2	3a 11		 cmp	 dl, BYTE PTR [ecx]
  000b4	75 1a		 jne	 SHORT $LN17@DGGuildSer
  000b6	84 d2		 test	 dl, dl
  000b8	74 12		 je	 SHORT $LN18@DGGuildSer
  000ba	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  000bd	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  000c0	75 0e		 jne	 SHORT $LN17@DGGuildSer
  000c2	83 c0 02	 add	 eax, 2
  000c5	83 c1 02	 add	 ecx, 2
  000c8	84 d2		 test	 dl, dl
  000ca	75 e4		 jne	 SHORT $LL16@DGGuildSer
$LN18@DGGuildSer:
  000cc	33 c0		 xor	 eax, eax
  000ce	eb 05		 jmp	 SHORT $LN19@DGGuildSer
$LN17@DGGuildSer:
  000d0	1b c0		 sbb	 eax, eax
  000d2	83 d8 ff	 sbb	 eax, -1
$LN19@DGGuildSer:
  000d5	85 c0		 test	 eax, eax
  000d7	75 12		 jne	 SHORT $LN20@DGGuildSer

; 1175 : 						{
; 1176 : 							DataSend(iUserIndex, (LPBYTE)&pMsg, pMsg.h.size);

  000d9	0f b6 45 b1	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  000dd	50		 push	 eax
  000de	8d 4d b0	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  000e1	51		 push	 ecx
  000e2	53		 push	 ebx
  000e3	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  000e8	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN20@DGGuildSer:
  000eb	8b 45 a8	 mov	 eax, DWORD PTR _lpGuildInfo$[ebp]
$LN6@DGGuildSer:

; 1158 : 		return;
; 1159 : 
; 1160 : 	int iUserIndex = -1;
; 1161 : 
; 1162 : 	if ( lpGuildInfo->Count >= 0 )
; 1163 : 	{
; 1164 : 		for ( int i=0;i<MAX_USER_GUILD;i++)

  000ee	83 45 ac 02	 add	 DWORD PTR tv302[ebp], 2
  000f2	46		 inc	 esi
  000f3	83 c7 0b	 add	 edi, 11			; 0000000bH
  000f6	83 fe 50	 cmp	 esi, 80			; 00000050H
  000f9	7c 85		 jl	 SHORT $LL22@DGGuildSer
$LN5@DGGuildSer:

; 1177 : 						}
; 1178 : 					}
; 1179 : 				}
; 1180 : 			}
; 1181 : 		}
; 1182 : 	}
; 1183 : }

  000fb	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000fe	5f		 pop	 edi
  000ff	5e		 pop	 esi
  00100	33 cd		 xor	 ecx, ebp
  00102	5b		 pop	 ebx
  00103	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00108	8b e5		 mov	 esp, ebp
  0010a	5d		 pop	 ebp
  0010b	c3		 ret	 0
?DGGuildServerGroupChattingRecv@@YAXPAUEXSDHP_SERVERGROUP_GUILD_CHATTING_RECV@@@Z ENDP ; DGGuildServerGroupChattingRecv
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDUnionServerGroupChattingSend@@YAXHPAUPMSG_CHATDATA@@@Z ; GDUnionServerGroupChattingSend
; Function compile flags: /Ogtp
;	COMDAT ?GDUnionServerGroupChattingSend@@YAXHPAUPMSG_CHATDATA@@@Z
_TEXT	SEGMENT
_pMsg$ = -84						; size = 80
__$ArrayPad$ = -4					; size = 4
_iUnionNum$ = 8						; size = 4
_lpChatData$ = 12					; size = 4
?GDUnionServerGroupChattingSend@@YAXHPAUPMSG_CHATDATA@@@Z PROC ; GDUnionServerGroupChattingSend, COMDAT

; 1197 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 54	 sub	 esp, 84			; 00000054H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 0c	 mov	 esi, DWORD PTR _lpChatData$[ebp]
  00014	57		 push	 edi

; 1198 : 	EXSDHP_SERVERGROUP_UNION_CHATTING_SEND pMsg = {0};

  00015	6a 4f		 push	 79			; 0000004fH
  00017	8d 45 ad	 lea	 eax, DWORD PTR _pMsg$[ebp+1]
  0001a	6a 00		 push	 0
  0001c	50		 push	 eax
  0001d	e8 00 00 00 00	 call	 _memset

; 1199 : 
; 1200 : 	pMsg.h.set((LPBYTE)&pMsg, 0x51, sizeof(pMsg));
; 1201 : 	pMsg.iUnionNum = iUnionNum;

  00022	8b 4d 08	 mov	 ecx, DWORD PTR _iUnionNum$[ebp]

; 1202 : 	memcpy(pMsg.szCharacterName, lpChatData->chatid, sizeof(pMsg.szCharacterName));

  00025	8b 56 03	 mov	 edx, DWORD PTR [esi+3]
  00028	8b 46 07	 mov	 eax, DWORD PTR [esi+7]
  0002b	89 4d b0	 mov	 DWORD PTR _pMsg$[ebp+4], ecx
  0002e	66 8b 4e 0b	 mov	 cx, WORD PTR [esi+11]
  00032	66 89 4d bc	 mov	 WORD PTR _pMsg$[ebp+16], cx
  00036	83 c4 0c	 add	 esp, 12			; 0000000cH
  00039	89 55 b4	 mov	 DWORD PTR _pMsg$[ebp+8], edx
  0003c	66 c7 45 ac c1
	50		 mov	 WORD PTR _pMsg$[ebp], 20673 ; 000050c1H
  00042	c6 45 ae 51	 mov	 BYTE PTR _pMsg$[ebp+2], 81 ; 00000051H
  00046	89 45 b8	 mov	 DWORD PTR _pMsg$[ebp+12], eax

; 1203 : 	memcpy(pMsg.szChattingMsg, lpChatData->chatmsg, sizeof(pMsg.szChattingMsg));

  00049	83 c6 0d	 add	 esi, 13			; 0000000dH
  0004c	b9 0f 00 00 00	 mov	 ecx, 15			; 0000000fH
  00051	8d 7d be	 lea	 edi, DWORD PTR _pMsg$[ebp+18]

; 1204 : 
; 1205 : 	wsExDbCli.DataSend((PCHAR)&pMsg, pMsg.h.size);

  00054	6a 50		 push	 80			; 00000050H
  00056	8d 55 ac	 lea	 edx, DWORD PTR _pMsg$[ebp]
  00059	f3 a5		 rep movsd
  0005b	52		 push	 edx
  0005c	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00061	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 1206 : }

  00066	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00069	5f		 pop	 edi
  0006a	33 cd		 xor	 ecx, ebp
  0006c	5e		 pop	 esi
  0006d	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00072	8b e5		 mov	 esp, ebp
  00074	5d		 pop	 ebp
  00075	c3		 ret	 0
?GDUnionServerGroupChattingSend@@YAXHPAUPMSG_CHATDATA@@@Z ENDP ; GDUnionServerGroupChattingSend
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?DGUnionServerGroupChattingRecv@@YAXPAUEXSDHP_SERVERGROUP_UNION_CHATTING_RECV@@@Z ; DGUnionServerGroupChattingRecv
EXTRN	?GetGuildUnionMemberList@TUnion@@QAEHHAAHPAH@Z:PROC ; TUnion::GetGuildUnionMemberList
; Function compile flags: /Ogtp
;	COMDAT ?DGUnionServerGroupChattingRecv@@YAXPAUEXSDHP_SERVERGROUP_UNION_CHATTING_RECV@@@Z
_TEXT	SEGMENT
_i$157443 = -496					; size = 4
_lpGuildInfo$157447 = -492				; size = 4
tv313 = -488						; size = 4
_iGuildCount$ = -484					; size = 4
_pMsg$ = -480						; size = 73
_iGuildList$ = -404					; size = 400
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?DGUnionServerGroupChattingRecv@@YAXPAUEXSDHP_SERVERGROUP_UNION_CHATTING_RECV@@@Z PROC ; DGUnionServerGroupChattingRecv, COMDAT

; 1210 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec f0 01 00
	00		 sub	 esp, 496		; 000001f0H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	8b 5d 08	 mov	 ebx, DWORD PTR _lpMsg$[ebp]
  00017	56		 push	 esi
  00018	57		 push	 edi

; 1211 : 	PMSG_CHATDATA pMsg ={0};

  00019	6a 48		 push	 72			; 00000048H
  0001b	8d 85 21 fe ff
	ff		 lea	 eax, DWORD PTR _pMsg$[ebp+1]
  00021	6a 00		 push	 0
  00023	50		 push	 eax
  00024	e8 00 00 00 00	 call	 _memset

; 1212 : 
; 1213 : 	pMsg.h.set((LPBYTE)&pMsg, 0x00, sizeof(pMsg));
; 1214 : 	memcpy(pMsg.chatid, lpMsg->szCharacterName, sizeof(pMsg.chatid));

  00029	8b 4b 08	 mov	 ecx, DWORD PTR [ebx+8]
  0002c	8b 53 0c	 mov	 edx, DWORD PTR [ebx+12]
  0002f	66 8b 43 10	 mov	 ax, WORD PTR [ebx+16]
  00033	89 8d 23 fe ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+3], ecx

; 1215 : 	memcpy(pMsg.chatmsg, lpMsg->szChattingMsg, sizeof(pMsg.chatmsg));

  00039	8d 73 12	 lea	 esi, DWORD PTR [ebx+18]

; 1216 : 	int iUnionNum = lpMsg->iUnionNum;

  0003c	8b 5b 04	 mov	 ebx, DWORD PTR [ebx+4]
  0003f	89 95 27 fe ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+7], edx
  00045	66 89 85 2b fe
	ff ff		 mov	 WORD PTR _pMsg$[ebp+11], ax
  0004c	b9 0f 00 00 00	 mov	 ecx, 15			; 0000000fH
  00051	8d bd 2d fe ff
	ff		 lea	 edi, DWORD PTR _pMsg$[ebp+13]
  00057	66 c7 85 20 fe
	ff ff c1 49	 mov	 WORD PTR _pMsg$[ebp], 18881 ; 000049c1H
  00060	c6 85 22 fe ff
	ff 00		 mov	 BYTE PTR _pMsg$[ebp+2], 0
  00067	f3 a5		 rep movsd

; 1217 : 	int iGuildCount =0;

  00069	33 f6		 xor	 esi, esi

; 1218 : 	int iGuildList[100] ={0};

  0006b	68 8c 01 00 00	 push	 396			; 0000018cH
  00070	8d 8d 70 fe ff
	ff		 lea	 ecx, DWORD PTR _iGuildList$[ebp+4]
  00076	56		 push	 esi
  00077	51		 push	 ecx
  00078	89 b5 1c fe ff
	ff		 mov	 DWORD PTR _iGuildCount$[ebp], esi
  0007e	89 b5 6c fe ff
	ff		 mov	 DWORD PTR _iGuildList$[ebp], esi
  00084	e8 00 00 00 00	 call	 _memset
  00089	83 c4 18	 add	 esp, 24			; 00000018H

; 1219 : 
; 1220 : 	if ( UnionManager.GetGuildUnionMemberList(iUnionNum, iGuildCount, iGuildList) == TRUE)

  0008c	8d 95 6c fe ff
	ff		 lea	 edx, DWORD PTR _iGuildList$[ebp]
  00092	52		 push	 edx
  00093	8d 85 1c fe ff
	ff		 lea	 eax, DWORD PTR _iGuildCount$[ebp]
  00099	50		 push	 eax
  0009a	53		 push	 ebx
  0009b	b9 00 00 00 00	 mov	 ecx, OFFSET ?UnionManager@@3VTUnion@@A ; UnionManager
  000a0	e8 00 00 00 00	 call	 ?GetGuildUnionMemberList@TUnion@@QAEHHAAHPAH@Z ; TUnion::GetGuildUnionMemberList
  000a5	83 f8 01	 cmp	 eax, 1
  000a8	0f 85 e6 00 00
	00		 jne	 $LN9@DGUnionSer

; 1221 : 	{
; 1222 : 		int iUserIndex = -1;
; 1223 : 
; 1224 : 		for ( int i=0;i<iGuildCount;i++)

  000ae	89 b5 10 fe ff
	ff		 mov	 DWORD PTR _i$157443[ebp], esi
  000b4	39 b5 1c fe ff
	ff		 cmp	 DWORD PTR _iGuildCount$[ebp], esi
  000ba	0f 8e d4 00 00
	00		 jle	 $LN9@DGUnionSer
$LL28@DGUnionSer:

; 1225 : 		{
; 1226 : 			_GUILD_INFO_STRUCT * lpGuildInfo = Guild.SearchGuild_Number(iGuildList[i]);

  000c0	8b 8c b5 6c fe
	ff ff		 mov	 ecx, DWORD PTR _iGuildList$[ebp+esi*4]
  000c7	51		 push	 ecx
  000c8	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  000cd	e8 00 00 00 00	 call	 ?SearchGuild_Number@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@H@Z ; CGuildClass::SearchGuild_Number
  000d2	89 85 14 fe ff
	ff		 mov	 DWORD PTR _lpGuildInfo$157447[ebp], eax

; 1227 : 
; 1228 : 			if ( lpGuildInfo == NULL )

  000d8	85 c0		 test	 eax, eax
  000da	0f 84 a1 00 00
	00		 je	 $LN10@DGUnionSer

; 1229 : 				continue;
; 1230 : 
; 1231 : 			for ( int n=0;n<MAX_USER_GUILD;n++)

  000e0	8d 90 a0 03 00
	00		 lea	 edx, DWORD PTR [eax+928]
  000e6	33 f6		 xor	 esi, esi
  000e8	8d 58 2f	 lea	 ebx, DWORD PTR [eax+47]
  000eb	89 95 18 fe ff
	ff		 mov	 DWORD PTR tv313[ebp], edx
$LL7@DGUnionSer:

; 1232 : 			{
; 1233 : 				if ( lpGuildInfo->Use[n] != FALSE )

  000f1	80 bc 30 40 04
	00 00 00	 cmp	 BYTE PTR [eax+esi+1088], 0
  000f9	74 6c		 je	 SHORT $LN6@DGUnionSer

; 1234 : 				{
; 1235 : 					iUserIndex = lpGuildInfo->Index[n];

  000fb	8b 8d 18 fe ff
	ff		 mov	 ecx, DWORD PTR tv313[ebp]
  00101	0f bf 39	 movsx	 edi, WORD PTR [ecx]

; 1236 : 
; 1237 : 					if ( iUserIndex >= 0 )

  00104	85 ff		 test	 edi, edi
  00106	78 5f		 js	 SHORT $LN6@DGUnionSer

; 1238 : 					{
; 1239 : 						if ( lpGuildInfo->Names[n][0] == gObj[iUserIndex].Name[0] )

  00108	8b d7		 mov	 edx, edi
  0010a	69 d2 64 15 00
	00		 imul	 edx, 5476		; 00001564H
  00110	8d 8a 6f 00 00
	00		 lea	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[edx+111]
  00116	8a 13		 mov	 dl, BYTE PTR [ebx]
  00118	3a 11		 cmp	 dl, BYTE PTR [ecx]
  0011a	75 4b		 jne	 SHORT $LN6@DGUnionSer

; 1240 : 						{
; 1241 : 							if ( !strcmp(lpGuildInfo->Names[n], gObj[iUserIndex].Name ))

  0011c	8b c3		 mov	 eax, ebx
  0011e	8b ff		 npad	 2
$LL21@DGUnionSer:
  00120	8a 10		 mov	 dl, BYTE PTR [eax]
  00122	3a 11		 cmp	 dl, BYTE PTR [ecx]
  00124	75 1a		 jne	 SHORT $LN22@DGUnionSer
  00126	84 d2		 test	 dl, dl
  00128	74 12		 je	 SHORT $LN23@DGUnionSer
  0012a	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  0012d	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  00130	75 0e		 jne	 SHORT $LN22@DGUnionSer
  00132	83 c0 02	 add	 eax, 2
  00135	83 c1 02	 add	 ecx, 2
  00138	84 d2		 test	 dl, dl
  0013a	75 e4		 jne	 SHORT $LL21@DGUnionSer
$LN23@DGUnionSer:
  0013c	33 c0		 xor	 eax, eax
  0013e	eb 05		 jmp	 SHORT $LN24@DGUnionSer
$LN22@DGUnionSer:
  00140	1b c0		 sbb	 eax, eax
  00142	83 d8 ff	 sbb	 eax, -1
$LN24@DGUnionSer:
  00145	85 c0		 test	 eax, eax
  00147	75 18		 jne	 SHORT $LN25@DGUnionSer

; 1242 : 							{
; 1243 : 								DataSend(iUserIndex, (LPBYTE)&pMsg, pMsg.h.size);

  00149	0f b6 85 21 fe
	ff ff		 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00150	50		 push	 eax
  00151	8d 8d 20 fe ff
	ff		 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00157	51		 push	 ecx
  00158	57		 push	 edi
  00159	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0015e	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN25@DGUnionSer:
  00161	8b 85 14 fe ff
	ff		 mov	 eax, DWORD PTR _lpGuildInfo$157447[ebp]
$LN6@DGUnionSer:

; 1229 : 				continue;
; 1230 : 
; 1231 : 			for ( int n=0;n<MAX_USER_GUILD;n++)

  00167	83 85 18 fe ff
	ff 02		 add	 DWORD PTR tv313[ebp], 2
  0016e	46		 inc	 esi
  0016f	83 c3 0b	 add	 ebx, 11			; 0000000bH
  00172	83 fe 50	 cmp	 esi, 80			; 00000050H
  00175	0f 8c 76 ff ff
	ff		 jl	 $LL7@DGUnionSer
  0017b	8b b5 10 fe ff
	ff		 mov	 esi, DWORD PTR _i$157443[ebp]
$LN10@DGUnionSer:

; 1221 : 	{
; 1222 : 		int iUserIndex = -1;
; 1223 : 
; 1224 : 		for ( int i=0;i<iGuildCount;i++)

  00181	46		 inc	 esi
  00182	89 b5 10 fe ff
	ff		 mov	 DWORD PTR _i$157443[ebp], esi
  00188	3b b5 1c fe ff
	ff		 cmp	 esi, DWORD PTR _iGuildCount$[ebp]
  0018e	0f 8c 2c ff ff
	ff		 jl	 $LL28@DGUnionSer
$LN9@DGUnionSer:

; 1244 : 							}
; 1245 : 						}
; 1246 : 					}
; 1247 : 				}
; 1248 : 			}
; 1249 : 		}
; 1250 : 	}
; 1251 : }

  00194	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00197	5f		 pop	 edi
  00198	5e		 pop	 esi
  00199	33 cd		 xor	 ecx, ebp
  0019b	5b		 pop	 ebx
  0019c	e8 00 00 00 00	 call	 @__security_check_cookie@4
  001a1	8b e5		 mov	 esp, ebp
  001a3	5d		 pop	 ebp
  001a4	c3		 ret	 0
?DGUnionServerGroupChattingRecv@@YAXPAUEXSDHP_SERVERGROUP_UNION_CHATTING_RECV@@@Z ENDP ; DGUnionServerGroupChattingRecv
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDGuildReqAssignStatus@@YAXHHPADH@Z		; GDGuildReqAssignStatus
; Function compile flags: /Ogtp
;	COMDAT ?GDGuildReqAssignStatus@@YAXHHPADH@Z
_TEXT	SEGMENT
_pMsg$ = -32						; size = 28
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_iAssignType$ = 12					; size = 4
_szTagetName$ = 16					; size = 4
_iGuildStatus$ = 20					; size = 4
?GDGuildReqAssignStatus@@YAXHHPADH@Z PROC		; GDGuildReqAssignStatus, COMDAT

; 1266 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 20	 sub	 esp, 32			; 00000020H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 4d 08	 mov	 ecx, DWORD PTR _aIndex$[ebp]
  00013	8b 55 10	 mov	 edx, DWORD PTR _szTagetName$[ebp]

; 1267 : 	EXSDHP_GUILD_ASSIGN_STATUS_REQ pMsg = {0};

  00016	33 c0		 xor	 eax, eax
  00018	89 45 e5	 mov	 DWORD PTR _pMsg$[ebp+5], eax
  0001b	89 45 e1	 mov	 DWORD PTR _pMsg$[ebp+1], eax

; 1268 : 
; 1269 : 	pMsg.h.set((LPBYTE)&pMsg, 0xE1, sizeof(EXSDHP_GUILD_ASSIGN_STATUS_REQ));
; 1270 : 	pMsg.btType = iAssignType;
; 1271 : 	pMsg.btGuildStatus = iGuildStatus;
; 1272 : 	pMsg.wUserIndex = aIndex;

  0001e	66 89 4d e4	 mov	 WORD PTR _pMsg$[ebp+4], cx

; 1273 : 	pMsg.szGuildName[MAX_GUILD_LEN] = 0;
; 1274 : 	pMsg.szTargetName[MAX_ACCOUNT_LEN] = 0;
; 1275 : 	memcpy(pMsg.szGuildName, gObj[aIndex].lpGuild->Name, MAX_GUILD_LEN);

  00022	69 c9 64 15 00
	00		 imul	 ecx, 5476		; 00001564H
  00028	8b 89 b4 02 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[ecx+692]
  0002e	53		 push	 ebx
  0002f	8a 5d 0c	 mov	 bl, BYTE PTR _iAssignType$[ebp]
  00032	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+13], eax
  00035	89 45 e9	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  00038	88 45 fb	 mov	 BYTE PTR _pMsg$[ebp+27], al
  0003b	88 5d e6	 mov	 BYTE PTR _pMsg$[ebp+6], bl
  0003e	8a 5d 14	 mov	 bl, BYTE PTR _iGuildStatus$[ebp]
  00041	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+17], eax
  00044	89 45 f5	 mov	 DWORD PTR _pMsg$[ebp+21], eax
  00047	66 89 45 f9	 mov	 WORD PTR _pMsg$[ebp+25], ax
  0004b	88 45 f0	 mov	 BYTE PTR _pMsg$[ebp+16], al
  0004e	88 45 fb	 mov	 BYTE PTR _pMsg$[ebp+27], al
  00051	66 c7 45 e0 c1
	1c		 mov	 WORD PTR _pMsg$[ebp], 7361 ; 00001cc1H
  00057	c6 45 e2 e1	 mov	 BYTE PTR _pMsg$[ebp+2], 225 ; 000000e1H
  0005b	88 5d e7	 mov	 BYTE PTR _pMsg$[ebp+7], bl
  0005e	8b 41 04	 mov	 eax, DWORD PTR [ecx+4]
  00061	89 45 e8	 mov	 DWORD PTR _pMsg$[ebp+8], eax
  00064	8b 49 08	 mov	 ecx, DWORD PTR [ecx+8]

; 1276 : 	memcpy(pMsg.szTargetName, szTagetName, MAX_ACCOUNT_LEN);

  00067	8b 02		 mov	 eax, DWORD PTR [edx]
  00069	89 4d ec	 mov	 DWORD PTR _pMsg$[ebp+12], ecx
  0006c	8b 4a 04	 mov	 ecx, DWORD PTR [edx+4]
  0006f	66 8b 52 08	 mov	 dx, WORD PTR [edx+8]
  00073	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+17], eax

; 1277 : 
; 1278 : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  00076	6a 1c		 push	 28			; 0000001cH
  00078	8d 45 e0	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0007b	89 4d f5	 mov	 DWORD PTR _pMsg$[ebp+21], ecx
  0007e	50		 push	 eax
  0007f	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00084	66 89 55 f9	 mov	 WORD PTR _pMsg$[ebp+25], dx
  00088	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 1279 : }

  0008d	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00090	33 cd		 xor	 ecx, ebp
  00092	5b		 pop	 ebx
  00093	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00098	8b e5		 mov	 esp, ebp
  0009a	5d		 pop	 ebp
  0009b	c3		 ret	 0
?GDGuildReqAssignStatus@@YAXHHPADH@Z ENDP		; GDGuildReqAssignStatus
_TEXT	ENDS
PUBLIC	??_C@_0FA@EEENHOBM@?$FLU?4System?$FN?$FLGuild?5Status?$FN?$FLAssign?$FN@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?DGGuildAnsAssignStatus@@YAXPAUEXSDHP_GUILD_ASSIGN_STATUS_RESULT@@@Z ; DGGuildAnsAssignStatus
EXTRN	?SendToUser@TNotice@@QAAXHPADZZ:PROC		; TNotice::SendToUser
EXTRN	??0TNotice@@QAE@E@Z:PROC			; TNotice::TNotice
EXTRN	?SetGuildMemberStatus@CGuildClass@@QAEHPAD0H@Z:PROC ; CGuildClass::SetGuildMemberStatus
;	COMDAT ??_C@_0FA@EEENHOBM@?$FLU?4System?$FN?$FLGuild?5Status?$FN?$FLAssign?$FN@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_0FA@EEENHOBM@?$FLU?4System?$FN?$FLGuild?5Status?$FN?$FLAssign?$FN@ DB '['
	DB	'U.System][Guild Status][Assign] Guild : ( %s ) Member : ( %s '
	DB	') Status : ( %d )', 00H			; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?DGGuildAnsAssignStatus@@YAXPAUEXSDHP_GUILD_ASSIGN_STATUS_RESULT@@@Z
_TEXT	SEGMENT
_n$157508 = -300					; size = 4
_lpNode$157485 = -300					; size = 4
_lpNode$157505 = -296					; size = 4
_i$157493 = -296					; size = 4
__Notice$157513 = -292					; size = 272
__Notice$157498 = -292					; size = 272
_pMsg$157487 = -20					; size = 15
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?DGGuildAnsAssignStatus@@YAXPAUEXSDHP_GUILD_ASSIGN_STATUS_RESULT@@@Z PROC ; DGGuildAnsAssignStatus, COMDAT

; 1287 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 2c 01 00
	00		 sub	 esp, 300		; 0000012cH
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi
  00016	8b 7d 08	 mov	 edi, DWORD PTR _lpMsg$[ebp]

; 1288 : 	if ( lpMsg->btFlag == 1 )

  00019	8a 47 03	 mov	 al, BYTE PTR [edi+3]
  0001c	3c 01		 cmp	 al, 1
  0001e	0f 85 68 01 00
	00		 jne	 $LN23@DGGuildAns

; 1289 : 	{
; 1290 : 		_GUILD_INFO_STRUCT * lpNode = Guild.SearchGuild(lpMsg->szGuildName);

  00024	8d 5f 09	 lea	 ebx, DWORD PTR [edi+9]
  00027	53		 push	 ebx
  00028	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  0002d	e8 00 00 00 00	 call	 ?SearchGuild@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@PAD@Z ; CGuildClass::SearchGuild
  00032	89 85 d4 fe ff
	ff		 mov	 DWORD PTR _lpNode$157485[ebp], eax

; 1291 : 
; 1292 : 		if ( lpNode == NULL )

  00038	85 c0		 test	 eax, eax
  0003a	75 03		 jne	 SHORT $LN22@DGGuildAns

; 1293 : 		{
; 1294 : 			lpMsg->btResult = 0;

  0003c	88 47 07	 mov	 BYTE PTR [edi+7], al
$LN22@DGGuildAns:

; 1295 : 		}
; 1296 : 
; 1297 : 		PMSG_GUILD_ASSIGN_STATUS_RESULT pMsg = {0};
; 1298 : 
; 1299 : 		pMsg.h.set((LPBYTE)&pMsg, 0xE1, sizeof(PMSG_GUILD_ASSIGN_STATUS_RESULT));
; 1300 : 		pMsg.btType = lpMsg->btType;
; 1301 : 		pMsg.btResult = lpMsg->btResult;
; 1302 : 		memcpy(pMsg.szTagetName, lpMsg->szTargetName, sizeof(pMsg.szTagetName));

  0003f	8b 57 12	 mov	 edx, DWORD PTR [edi+18]
  00042	8a 4f 07	 mov	 cl, BYTE PTR [edi+7]
  00045	33 c0		 xor	 eax, eax
  00047	89 45 ed	 mov	 DWORD PTR _pMsg$157487[ebp+1], eax
  0004a	89 45 f1	 mov	 DWORD PTR _pMsg$157487[ebp+5], eax
  0004d	89 45 f5	 mov	 DWORD PTR _pMsg$157487[ebp+9], eax
  00050	66 89 45 f9	 mov	 WORD PTR _pMsg$157487[ebp+13], ax
  00054	8a 47 06	 mov	 al, BYTE PTR [edi+6]
  00057	8d 77 12	 lea	 esi, DWORD PTR [edi+18]
  0005a	88 45 ef	 mov	 BYTE PTR _pMsg$157487[ebp+3], al
  0005d	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  00060	89 55 f1	 mov	 DWORD PTR _pMsg$157487[ebp+5], edx
  00063	89 45 f5	 mov	 DWORD PTR _pMsg$157487[ebp+9], eax

; 1303 : 
; 1304 : 		DataSend(lpMsg->wUserIndex, (LPBYTE)&pMsg, sizeof(pMsg));

  00066	0f b7 47 04	 movzx	 eax, WORD PTR [edi+4]
  0006a	6a 0f		 push	 15			; 0000000fH
  0006c	8d 55 ec	 lea	 edx, DWORD PTR _pMsg$157487[ebp]
  0006f	88 4d f0	 mov	 BYTE PTR _pMsg$157487[ebp+4], cl
  00072	66 8b 4e 08	 mov	 cx, WORD PTR [esi+8]
  00076	52		 push	 edx
  00077	50		 push	 eax
  00078	66 c7 45 ec c1
	0f		 mov	 WORD PTR _pMsg$157487[ebp], 4033 ; 00000fc1H
  0007e	c6 45 ee e1	 mov	 BYTE PTR _pMsg$157487[ebp+2], 225 ; 000000e1H
  00082	66 89 4d f9	 mov	 WORD PTR _pMsg$157487[ebp+13], cx
  00086	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0008b	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1305 : 
; 1306 : 		if ( lpMsg->btResult == 0 )

  0008e	80 7f 07 00	 cmp	 BYTE PTR [edi+7], 0
  00092	0f 84 03 02 00
	00		 je	 $LN6@DGGuildAns

; 1307 : 		{
; 1308 : 			return;
; 1309 : 		}
; 1310 : 
; 1311 : 		Guild.SetGuildMemberStatus(lpMsg->szGuildName, lpMsg->szTargetName, lpMsg->btGuildStatus);

  00098	0f b6 4f 08	 movzx	 ecx, BYTE PTR [edi+8]
  0009c	51		 push	 ecx
  0009d	56		 push	 esi
  0009e	53		 push	 ebx
  0009f	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  000a4	e8 00 00 00 00	 call	 ?SetGuildMemberStatus@CGuildClass@@QAEHPAD0H@Z ; CGuildClass::SetGuildMemberStatus

; 1312 : 
; 1313 : 		LogAdd(LOG_BLACK, "[U.System][Guild Status][Assign] Guild : ( %s ) Member : ( %s ) Status : ( %d )",
; 1314 : 			lpMsg->szGuildName, lpMsg->szTargetName, lpMsg->btGuildStatus);

  000a9	0f b6 57 08	 movzx	 edx, BYTE PTR [edi+8]
  000ad	52		 push	 edx
  000ae	56		 push	 esi
  000af	53		 push	 ebx
  000b0	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@EEENHOBM@?$FLU?4System?$FN?$FLGuild?5Status?$FN?$FLAssign?$FN@
  000b5	6a 00		 push	 0
  000b7	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  000bc	8b 9d d4 fe ff
	ff		 mov	 ebx, DWORD PTR _lpNode$157485[ebp]

; 1315 : 
; 1316 : 		for ( int i=0;i<MAX_USER_GUILD;i++)

  000c2	33 c0		 xor	 eax, eax
  000c4	83 c4 14	 add	 esp, 20			; 00000014H
  000c7	89 85 d8 fe ff
	ff		 mov	 DWORD PTR _i$157493[ebp], eax
  000cd	81 c3 a0 03 00
	00		 add	 ebx, 928		; 000003a0H
  000d3	eb 0b 8d a4 24
	00 00 00 00 8d
	64 24 00	 npad	 13
$LL20@DGGuildAns:

; 1317 : 		{
; 1318 : 			if ( lpNode->Use[i] > 0 && lpNode->Index[i] >= 0)

  000e0	8b 8d d4 fe ff
	ff		 mov	 ecx, DWORD PTR _lpNode$157485[ebp]
  000e6	80 bc 01 40 04
	00 00 00	 cmp	 BYTE PTR [ecx+eax+1088], 0
  000ee	76 72		 jbe	 SHORT $LN19@DGGuildAns
  000f0	66 83 3b 00	 cmp	 WORD PTR [ebx], 0
  000f4	7c 6c		 jl	 SHORT $LN19@DGGuildAns

; 1319 : 			{
; 1320 : 				TNotice _Notice(0);

  000f6	6a 00		 push	 0
  000f8	8d 8d dc fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157498[ebp]
  000fe	e8 00 00 00 00	 call	 ??0TNotice@@QAE@E@Z	; TNotice::TNotice

; 1321 : 
; 1322 : 				if ( lpMsg->btGuildStatus == GUILD_ASSISTANT )

  00103	8a 47 08	 mov	 al, BYTE PTR [edi+8]

; 1323 : 				{
; 1324 : 					_Notice.SendToUser(lpNode->Index[i], lMsg.Get(MSGGET(6, 184)), lpMsg->szTargetName);

  00106	56		 push	 esi
  00107	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0010c	3c 40		 cmp	 al, 64			; 00000040H
  0010e	75 18		 jne	 SHORT $LN16@DGGuildAns
  00110	68 b8 06 00 00	 push	 1720			; 000006b8H
  00115	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0011a	0f bf 13	 movsx	 edx, WORD PTR [ebx]
  0011d	50		 push	 eax
  0011e	52		 push	 edx
  0011f	8d 85 dc fe ff
	ff		 lea	 eax, DWORD PTR __Notice$157498[ebp]
  00125	50		 push	 eax
  00126	eb 32		 jmp	 SHORT $LN33@DGGuildAns
$LN16@DGGuildAns:

; 1325 : 				}
; 1326 : 				else if ( lpMsg->btGuildStatus == GUILD_BATTLE_MASTER )

  00128	3c 20		 cmp	 al, 32			; 00000020H
  0012a	75 18		 jne	 SHORT $LN14@DGGuildAns

; 1327 : 				{
; 1328 : 					_Notice.SendToUser(lpNode->Index[i], lMsg.Get(MSGGET(6, 185)), lpMsg->szTargetName);

  0012c	68 b9 06 00 00	 push	 1721			; 000006b9H
  00131	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  00136	0f bf 0b	 movsx	 ecx, WORD PTR [ebx]
  00139	50		 push	 eax
  0013a	51		 push	 ecx
  0013b	8d 95 dc fe ff
	ff		 lea	 edx, DWORD PTR __Notice$157498[ebp]
  00141	52		 push	 edx

; 1329 : 				}
; 1330 : 				else

  00142	eb 16		 jmp	 SHORT $LN33@DGGuildAns
$LN14@DGGuildAns:

; 1331 : 				{
; 1332 : 					_Notice.SendToUser(lpNode->Index[i], lMsg.Get(MSGGET(6, 186)), lpMsg->szTargetName);

  00144	68 ba 06 00 00	 push	 1722			; 000006baH
  00149	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0014e	50		 push	 eax
  0014f	0f bf 03	 movsx	 eax, WORD PTR [ebx]
  00152	50		 push	 eax
  00153	8d 8d dc fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157498[ebp]
  00159	51		 push	 ecx
$LN33@DGGuildAns:
  0015a	e8 00 00 00 00	 call	 ?SendToUser@TNotice@@QAAXHPADZZ ; TNotice::SendToUser
  0015f	83 c4 10	 add	 esp, 16			; 00000010H
$LN19@DGGuildAns:

; 1315 : 
; 1316 : 		for ( int i=0;i<MAX_USER_GUILD;i++)

  00162	8b 85 d8 fe ff
	ff		 mov	 eax, DWORD PTR _i$157493[ebp]
  00168	40		 inc	 eax
  00169	83 c3 02	 add	 ebx, 2
  0016c	89 85 d8 fe ff
	ff		 mov	 DWORD PTR _i$157493[ebp], eax
  00172	83 f8 50	 cmp	 eax, 80			; 00000050H
  00175	0f 8c 65 ff ff
	ff		 jl	 $LL20@DGGuildAns
  0017b	5f		 pop	 edi
  0017c	5e		 pop	 esi
  0017d	5b		 pop	 ebx

; 1374 : 				}
; 1375 : 			}
; 1376 : 		}
; 1377 : 	}
; 1378 : }

  0017e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00181	33 cd		 xor	 ecx, ebp
  00183	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00188	8b e5		 mov	 esp, ebp
  0018a	5d		 pop	 ebp
  0018b	c3		 ret	 0
$LN23@DGGuildAns:

; 1333 : 				}
; 1334 : 			}
; 1335 : 		}
; 1336 : 	}
; 1337 : 	else if ( lpMsg->btFlag == 0 )

  0018c	84 c0		 test	 al, al
  0018e	0f 85 07 01 00
	00		 jne	 $LN6@DGGuildAns

; 1338 : 	{
; 1339 : 		_GUILD_INFO_STRUCT * lpNode = Guild.SearchGuild(lpMsg->szGuildName);

  00194	8d 77 09	 lea	 esi, DWORD PTR [edi+9]
  00197	56		 push	 esi
  00198	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  0019d	e8 00 00 00 00	 call	 ?SearchGuild@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@PAD@Z ; CGuildClass::SearchGuild
  001a2	89 85 d8 fe ff
	ff		 mov	 DWORD PTR _lpNode$157505[ebp], eax

; 1340 : 
; 1341 : 		if ( lpNode == NULL )

  001a8	85 c0		 test	 eax, eax
  001aa	0f 84 eb 00 00
	00		 je	 $LN6@DGGuildAns

; 1342 : 		{
; 1343 : 			return;
; 1344 : 		}
; 1345 : 		
; 1346 : 		Guild.SetGuildMemberStatus(lpMsg->szGuildName, lpMsg->szTargetName, lpMsg->btGuildStatus);

  001b0	0f b6 57 08	 movzx	 edx, BYTE PTR [edi+8]
  001b4	52		 push	 edx
  001b5	8d 5f 12	 lea	 ebx, DWORD PTR [edi+18]
  001b8	53		 push	 ebx
  001b9	56		 push	 esi
  001ba	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  001bf	e8 00 00 00 00	 call	 ?SetGuildMemberStatus@CGuildClass@@QAEHPAD0H@Z ; CGuildClass::SetGuildMemberStatus

; 1347 : 
; 1348 : 		LogAdd(LOG_BLACK, "[U.System][Guild Status][Assign] Guild : ( %s ) Member : ( %s ) Status : ( %d )",
; 1349 : 			lpMsg->szGuildName, lpMsg->szTargetName, lpMsg->btGuildStatus);

  001c4	0f b6 47 08	 movzx	 eax, BYTE PTR [edi+8]
  001c8	50		 push	 eax
  001c9	53		 push	 ebx
  001ca	56		 push	 esi
  001cb	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@EEENHOBM@?$FLU?4System?$FN?$FLGuild?5Status?$FN?$FLAssign?$FN@
  001d0	6a 00		 push	 0
  001d2	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  001d7	83 c4 14	 add	 esp, 20			; 00000014H

; 1350 : 		
; 1351 : 		if ( lpMsg->btResult == 0 )

  001da	80 7f 07 00	 cmp	 BYTE PTR [edi+7], 0
  001de	0f 84 b7 00 00
	00		 je	 $LN6@DGGuildAns

; 1352 : 		{
; 1353 : 			return;
; 1354 : 		}
; 1355 : 
; 1356 : 		for ( int n=0;n<MAX_USER_GUILD;n++)

  001e4	8b b5 d8 fe ff
	ff		 mov	 esi, DWORD PTR _lpNode$157505[ebp]
  001ea	33 c0		 xor	 eax, eax
  001ec	89 85 d4 fe ff
	ff		 mov	 DWORD PTR _n$157508[ebp], eax
  001f2	81 c6 a0 03 00
	00		 add	 esi, 928		; 000003a0H
  001f8	eb 06 8d 9b 00
	00 00 00	 npad	 8
$LL32@DGGuildAns:

; 1357 : 		{
; 1358 : 			if ( lpNode->Use[n] > 0 && lpNode->Index[n] >= 0)

  00200	8b 8d d8 fe ff
	ff		 mov	 ecx, DWORD PTR _lpNode$157505[ebp]
  00206	80 bc 01 40 04
	00 00 00	 cmp	 BYTE PTR [ecx+eax+1088], 0
  0020e	76 72		 jbe	 SHORT $LN7@DGGuildAns
  00210	66 83 3e 00	 cmp	 WORD PTR [esi], 0
  00214	7c 6c		 jl	 SHORT $LN7@DGGuildAns

; 1359 : 			{
; 1360 : 				TNotice _Notice(0);

  00216	6a 00		 push	 0
  00218	8d 8d dc fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157513[ebp]
  0021e	e8 00 00 00 00	 call	 ??0TNotice@@QAE@E@Z	; TNotice::TNotice

; 1361 : 
; 1362 : 
; 1363 : 				if ( lpMsg->btGuildStatus == GUILD_ASSISTANT )

  00223	8a 47 08	 mov	 al, BYTE PTR [edi+8]

; 1364 : 				{
; 1365 : 					_Notice.SendToUser(lpNode->Index[n], lMsg.Get(MSGGET(6, 184)), lpMsg->szTargetName);

  00226	53		 push	 ebx
  00227	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0022c	3c 40		 cmp	 al, 64			; 00000040H
  0022e	75 18		 jne	 SHORT $LN4@DGGuildAns
  00230	68 b8 06 00 00	 push	 1720			; 000006b8H
  00235	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0023a	0f bf 16	 movsx	 edx, WORD PTR [esi]
  0023d	50		 push	 eax
  0023e	52		 push	 edx
  0023f	8d 85 dc fe ff
	ff		 lea	 eax, DWORD PTR __Notice$157513[ebp]
  00245	50		 push	 eax
  00246	eb 32		 jmp	 SHORT $LN34@DGGuildAns
$LN4@DGGuildAns:

; 1366 : 				}
; 1367 : 				else if ( lpMsg->btGuildStatus == GUILD_BATTLE_MASTER )

  00248	3c 20		 cmp	 al, 32			; 00000020H
  0024a	75 18		 jne	 SHORT $LN2@DGGuildAns

; 1368 : 				{
; 1369 : 					_Notice.SendToUser(lpNode->Index[n], lMsg.Get(MSGGET(6, 185)), lpMsg->szTargetName);

  0024c	68 b9 06 00 00	 push	 1721			; 000006b9H
  00251	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  00256	0f bf 0e	 movsx	 ecx, WORD PTR [esi]
  00259	50		 push	 eax
  0025a	51		 push	 ecx
  0025b	8d 95 dc fe ff
	ff		 lea	 edx, DWORD PTR __Notice$157513[ebp]
  00261	52		 push	 edx

; 1370 : 				}
; 1371 : 				else

  00262	eb 16		 jmp	 SHORT $LN34@DGGuildAns
$LN2@DGGuildAns:

; 1372 : 				{
; 1373 : 					_Notice.SendToUser(lpNode->Index[n], lMsg.Get(MSGGET(6, 186)), lpMsg->szTargetName);

  00264	68 ba 06 00 00	 push	 1722			; 000006baH
  00269	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0026e	50		 push	 eax
  0026f	0f bf 06	 movsx	 eax, WORD PTR [esi]
  00272	50		 push	 eax
  00273	8d 8d dc fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157513[ebp]
  00279	51		 push	 ecx
$LN34@DGGuildAns:
  0027a	e8 00 00 00 00	 call	 ?SendToUser@TNotice@@QAAXHPADZZ ; TNotice::SendToUser
  0027f	83 c4 10	 add	 esp, 16			; 00000010H
$LN7@DGGuildAns:

; 1352 : 		{
; 1353 : 			return;
; 1354 : 		}
; 1355 : 
; 1356 : 		for ( int n=0;n<MAX_USER_GUILD;n++)

  00282	8b 85 d4 fe ff
	ff		 mov	 eax, DWORD PTR _n$157508[ebp]
  00288	40		 inc	 eax
  00289	83 c6 02	 add	 esi, 2
  0028c	89 85 d4 fe ff
	ff		 mov	 DWORD PTR _n$157508[ebp], eax
  00292	83 f8 50	 cmp	 eax, 80			; 00000050H
  00295	0f 8c 65 ff ff
	ff		 jl	 $LL32@DGGuildAns
$LN6@DGGuildAns:

; 1374 : 				}
; 1375 : 			}
; 1376 : 		}
; 1377 : 	}
; 1378 : }

  0029b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0029e	5f		 pop	 edi
  0029f	5e		 pop	 esi
  002a0	33 cd		 xor	 ecx, ebp
  002a2	5b		 pop	 ebx
  002a3	e8 00 00 00 00	 call	 @__security_check_cookie@4
  002a8	8b e5		 mov	 esp, ebp
  002aa	5d		 pop	 ebp
  002ab	c3		 ret	 0
?DGGuildAnsAssignStatus@@YAXPAUEXSDHP_GUILD_ASSIGN_STATUS_RESULT@@@Z ENDP ; DGGuildAnsAssignStatus
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDGuildReqAssignType@@YAXHH@Z			; GDGuildReqAssignType
; Function compile flags: /Ogtp
;	COMDAT ?GDGuildReqAssignType@@YAXHH@Z
_TEXT	SEGMENT
_pMsg$ = -20						; size = 16
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_iGuildType$ = 12					; size = 4
?GDGuildReqAssignType@@YAXHH@Z PROC			; GDGuildReqAssignType, COMDAT

; 1393 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 4d 08	 mov	 ecx, DWORD PTR _aIndex$[ebp]

; 1394 : 	EXSDHP_GUILD_ASSIGN_TYPE_REQ pMsg = {0};
; 1395 : 
; 1396 : 	pMsg.h.set((LPBYTE)&pMsg, 0xE2, sizeof(EXSDHP_GUILD_ASSIGN_TYPE_REQ));
; 1397 : 	pMsg.btGuildType = iGuildType;

  00013	8a 55 0c	 mov	 dl, BYTE PTR _iGuildType$[ebp]
  00016	33 c0		 xor	 eax, eax
  00018	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+1], eax
  0001b	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+5], eax

; 1398 : 	pMsg.wUserIndex = aIndex;

  0001e	66 89 4d f0	 mov	 WORD PTR _pMsg$[ebp+4], cx

; 1399 : 	pMsg.szGuildName[MAX_GUILD_LEN] = 0;
; 1400 : 	memcpy(pMsg.szGuildName, gObj[aIndex].lpGuild->Name, MAX_GUILD_LEN);

  00022	69 c9 64 15 00
	00		 imul	 ecx, 5476		; 00001564H
  00028	8b 89 b4 02 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[ecx+692]
  0002e	89 45 f5	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  00031	88 45 fb	 mov	 BYTE PTR _pMsg$[ebp+15], al
  00034	66 89 45 f9	 mov	 WORD PTR _pMsg$[ebp+13], ax
  00038	88 55 f2	 mov	 BYTE PTR _pMsg$[ebp+6], dl
  0003b	66 c7 45 ec c1
	10		 mov	 WORD PTR _pMsg$[ebp], 4289 ; 000010c1H
  00041	c6 45 ee e2	 mov	 BYTE PTR _pMsg$[ebp+2], 226 ; 000000e2H
  00045	88 45 fb	 mov	 BYTE PTR _pMsg$[ebp+15], al
  00048	8b 41 04	 mov	 eax, DWORD PTR [ecx+4]
  0004b	89 45 f3	 mov	 DWORD PTR _pMsg$[ebp+7], eax
  0004e	8b 49 08	 mov	 ecx, DWORD PTR [ecx+8]

; 1401 : 
; 1402 : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  00051	6a 10		 push	 16			; 00000010H
  00053	8d 55 ec	 lea	 edx, DWORD PTR _pMsg$[ebp]
  00056	89 4d f7	 mov	 DWORD PTR _pMsg$[ebp+11], ecx
  00059	52		 push	 edx
  0005a	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  0005f	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 1403 : }

  00064	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00067	33 cd		 xor	 ecx, ebp
  00069	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0006e	8b e5		 mov	 esp, ebp
  00070	5d		 pop	 ebp
  00071	c3		 ret	 0
?GDGuildReqAssignType@@YAXHH@Z ENDP			; GDGuildReqAssignType
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?DGGuildAnsAssignType@@YAXPAUEXSDHP_GUILD_ASSIGN_TYPE_RESULT@@@Z ; DGGuildAnsAssignType
; Function compile flags: /Ogtp
;	COMDAT ?DGGuildAnsAssignType@@YAXPAUEXSDHP_GUILD_ASSIGN_TYPE_RESULT@@@Z
_TEXT	SEGMENT
_lpNode$157556 = -288					; size = 4
_lpNode$157541 = -288					; size = 4
_pMsg$157543 = -284					; size = 5
__Notice$157564 = -276					; size = 272
_pNotice$157553 = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?DGGuildAnsAssignType@@YAXPAUEXSDHP_GUILD_ASSIGN_TYPE_RESULT@@@Z PROC ; DGGuildAnsAssignType, COMDAT

; 1412 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 20 01 00
	00		 sub	 esp, 288		; 00000120H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 1413 : 	if ( lpMsg->btFlag == 1 )

  00018	8a 46 03	 mov	 al, BYTE PTR [esi+3]
  0001b	57		 push	 edi
  0001c	3c 01		 cmp	 al, 1
  0001e	0f 85 f5 00 00
	00		 jne	 $LN15@DGGuildAns@2

; 1414 : 	{
; 1415 : 		_GUILD_INFO_STRUCT * lpNode = Guild.SearchGuild(lpMsg->szGuildName);

  00024	8d 5e 08	 lea	 ebx, DWORD PTR [esi+8]
  00027	53		 push	 ebx
  00028	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  0002d	e8 00 00 00 00	 call	 ?SearchGuild@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@PAD@Z ; CGuildClass::SearchGuild
  00032	8b f8		 mov	 edi, eax
  00034	89 bd e0 fe ff
	ff		 mov	 DWORD PTR _lpNode$157541[ebp], edi

; 1416 : 
; 1417 : 		if ( lpNode == NULL )

  0003a	85 ff		 test	 edi, edi
  0003c	75 03		 jne	 SHORT $LN14@DGGuildAns@2

; 1418 : 		{
; 1419 : 			lpMsg->btResult = 0;

  0003e	88 46 07	 mov	 BYTE PTR [esi+7], al
$LN14@DGGuildAns@2:

; 1420 : 		}
; 1421 : 
; 1422 : 		PMSG_GUILD_ASSIGN_TYPE_RESULT pMsg = {0};
; 1423 : 
; 1424 : 		pMsg.h.set((LPBYTE)&pMsg, 0xE2, sizeof(PMSG_GUILD_ASSIGN_TYPE_RESULT));
; 1425 : 		pMsg.btGuildType = lpMsg->btGuildType;

  00041	8a 46 06	 mov	 al, BYTE PTR [esi+6]

; 1426 : 		pMsg.btResult = lpMsg->btResult;

  00044	8a 4e 07	 mov	 cl, BYTE PTR [esi+7]
  00047	c7 85 e5 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR _pMsg$157543[ebp+1], 0
  00051	88 85 e7 fe ff
	ff		 mov	 BYTE PTR _pMsg$157543[ebp+3], al

; 1427 : 
; 1428 : 		DataSend(lpMsg->wUserIndex, (LPBYTE)&pMsg,sizeof(pMsg));

  00057	0f b7 46 04	 movzx	 eax, WORD PTR [esi+4]
  0005b	6a 05		 push	 5
  0005d	8d 95 e4 fe ff
	ff		 lea	 edx, DWORD PTR _pMsg$157543[ebp]
  00063	52		 push	 edx
  00064	50		 push	 eax
  00065	66 c7 85 e4 fe
	ff ff c1 05	 mov	 WORD PTR _pMsg$157543[ebp], 1473 ; 000005c1H
  0006e	c6 85 e6 fe ff
	ff e2		 mov	 BYTE PTR _pMsg$157543[ebp+2], 226 ; 000000e2H
  00075	88 8d e8 fe ff
	ff		 mov	 BYTE PTR _pMsg$157543[ebp+4], cl
  0007b	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00080	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1429 : 
; 1430 : 		if ( lpMsg->btResult == 0 )

  00083	80 7e 07 00	 cmp	 BYTE PTR [esi+7], 0
  00087	0f 84 2b 01 00
	00		 je	 $LN2@DGGuildAns@2

; 1431 : 		{
; 1432 : 			return;
; 1433 : 		}
; 1434 : 
; 1435 : 		Guild.SetGuildType(lpMsg->szGuildName, lpMsg->btGuildType);

  0008d	0f b6 4e 06	 movzx	 ecx, BYTE PTR [esi+6]
  00091	51		 push	 ecx
  00092	53		 push	 ebx
  00093	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00098	e8 00 00 00 00	 call	 ?SetGuildType@CGuildClass@@QAEHPADH@Z ; CGuildClass::SetGuildType

; 1436 : 
; 1437 : 		for ( int i=0;i<MAX_USER_GUILD;i++)

  0009d	33 db		 xor	 ebx, ebx
  0009f	81 c7 a0 03 00
	00		 add	 edi, 928		; 000003a0H
  000a5	eb 09 8d a4 24
	00 00 00 00 8b
	ff		 npad	 11
$LL12@DGGuildAns@2:

; 1438 : 		{
; 1439 : 			if ( lpNode->Use[i] > 0 && lpNode->Index[i] >= 0)

  000b0	8b 95 e0 fe ff
	ff		 mov	 edx, DWORD PTR _lpNode$157541[ebp]
  000b6	80 bc 1a 40 04
	00 00 00	 cmp	 BYTE PTR [edx+ebx+1088], 0
  000be	76 3f		 jbe	 SHORT $LN11@DGGuildAns@2
  000c0	66 83 3f 00	 cmp	 WORD PTR [edi], 0
  000c4	7c 39		 jl	 SHORT $LN11@DGGuildAns@2

; 1440 : 			{
; 1441 : 				TNotice pNotice(0);

  000c6	6a 00		 push	 0
  000c8	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$157553[ebp]
  000ce	e8 00 00 00 00	 call	 ??0TNotice@@QAE@E@Z	; TNotice::TNotice

; 1442 : 				pNotice.SendToUser(lpNode->Index[i], lMsg.Get(MSGGET(6, 187)), lpMsg->szGuildName, lpMsg->btGuildType);

  000d3	0f b6 46 06	 movzx	 eax, BYTE PTR [esi+6]
  000d7	50		 push	 eax
  000d8	8d 46 08	 lea	 eax, DWORD PTR [esi+8]
  000db	50		 push	 eax
  000dc	68 bb 06 00 00	 push	 1723			; 000006bbH
  000e1	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  000e6	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  000eb	0f bf 0f	 movsx	 ecx, WORD PTR [edi]
  000ee	50		 push	 eax
  000ef	51		 push	 ecx
  000f0	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR _pNotice$157553[ebp]
  000f6	52		 push	 edx
  000f7	e8 00 00 00 00	 call	 ?SendToUser@TNotice@@QAAXHPADZZ ; TNotice::SendToUser
  000fc	83 c4 14	 add	 esp, 20			; 00000014H
$LN11@DGGuildAns@2:

; 1436 : 
; 1437 : 		for ( int i=0;i<MAX_USER_GUILD;i++)

  000ff	43		 inc	 ebx
  00100	83 c7 02	 add	 edi, 2
  00103	83 fb 50	 cmp	 ebx, 80			; 00000050H
  00106	7c a8		 jl	 SHORT $LL12@DGGuildAns@2
  00108	5f		 pop	 edi
  00109	5e		 pop	 esi
  0010a	5b		 pop	 ebx

; 1468 : 			}
; 1469 : 		}
; 1470 : 	}
; 1471 : }

  0010b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0010e	33 cd		 xor	 ecx, ebp
  00110	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00115	8b e5		 mov	 esp, ebp
  00117	5d		 pop	 ebp
  00118	c3		 ret	 0
$LN15@DGGuildAns@2:

; 1443 : 			}
; 1444 : 		}
; 1445 : 	}
; 1446 : 	else if ( lpMsg->btFlag == 0 )

  00119	84 c0		 test	 al, al
  0011b	0f 85 97 00 00
	00		 jne	 $LN2@DGGuildAns@2

; 1447 : 	{
; 1448 : 		_GUILD_INFO_STRUCT * lpNode = Guild.SearchGuild(lpMsg->szGuildName);

  00121	8d 5e 08	 lea	 ebx, DWORD PTR [esi+8]
  00124	53		 push	 ebx
  00125	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  0012a	e8 00 00 00 00	 call	 ?SearchGuild@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@PAD@Z ; CGuildClass::SearchGuild
  0012f	8b f8		 mov	 edi, eax
  00131	89 bd e0 fe ff
	ff		 mov	 DWORD PTR _lpNode$157556[ebp], edi

; 1449 : 
; 1450 : 		if ( lpNode == NULL )

  00137	85 ff		 test	 edi, edi
  00139	74 7d		 je	 SHORT $LN2@DGGuildAns@2

; 1451 : 		{
; 1452 : 			return;
; 1453 : 		}
; 1454 : 
; 1455 : 		Guild.SetGuildType(lpMsg->szGuildName, lpMsg->btGuildType);

  0013b	0f b6 46 06	 movzx	 eax, BYTE PTR [esi+6]
  0013f	50		 push	 eax
  00140	53		 push	 ebx
  00141	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00146	e8 00 00 00 00	 call	 ?SetGuildType@CGuildClass@@QAEHPADH@Z ; CGuildClass::SetGuildType

; 1456 : 
; 1457 : 		if ( lpMsg->btResult == 0 )

  0014b	80 7e 07 00	 cmp	 BYTE PTR [esi+7], 0
  0014f	74 67		 je	 SHORT $LN2@DGGuildAns@2

; 1458 : 		{
; 1459 : 			return;
; 1460 : 		}		
; 1461 : 		
; 1462 : 		for ( int n=0;n<MAX_USER_GUILD;n++)

  00151	33 db		 xor	 ebx, ebx
  00153	81 c7 a0 03 00
	00		 add	 edi, 928		; 000003a0H
  00159	8d a4 24 00 00
	00 00		 npad	 7
$LL4@DGGuildAns@2:

; 1463 : 		{
; 1464 : 			if ( lpNode->Use[n] > 0 && lpNode->Index[n] >= 0)

  00160	8b 8d e0 fe ff
	ff		 mov	 ecx, DWORD PTR _lpNode$157556[ebp]
  00166	80 bc 19 40 04
	00 00 00	 cmp	 BYTE PTR [ecx+ebx+1088], 0
  0016e	76 3f		 jbe	 SHORT $LN3@DGGuildAns@2
  00170	66 83 3f 00	 cmp	 WORD PTR [edi], 0
  00174	7c 39		 jl	 SHORT $LN3@DGGuildAns@2

; 1465 : 			{
; 1466 : 				TNotice _Notice(0);

  00176	6a 00		 push	 0
  00178	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157564[ebp]
  0017e	e8 00 00 00 00	 call	 ??0TNotice@@QAE@E@Z	; TNotice::TNotice

; 1467 : 				_Notice.SendToUser(lpNode->Index[n], lMsg.Get(MSGGET(6, 187)), lpMsg->szGuildName, lpMsg->btGuildType);

  00183	0f b6 56 06	 movzx	 edx, BYTE PTR [esi+6]
  00187	52		 push	 edx
  00188	8d 46 08	 lea	 eax, DWORD PTR [esi+8]
  0018b	50		 push	 eax
  0018c	68 bb 06 00 00	 push	 1723			; 000006bbH
  00191	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00196	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0019b	50		 push	 eax
  0019c	0f bf 07	 movsx	 eax, WORD PTR [edi]
  0019f	50		 push	 eax
  001a0	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157564[ebp]
  001a6	51		 push	 ecx
  001a7	e8 00 00 00 00	 call	 ?SendToUser@TNotice@@QAAXHPADZZ ; TNotice::SendToUser
  001ac	83 c4 14	 add	 esp, 20			; 00000014H
$LN3@DGGuildAns@2:

; 1458 : 		{
; 1459 : 			return;
; 1460 : 		}		
; 1461 : 		
; 1462 : 		for ( int n=0;n<MAX_USER_GUILD;n++)

  001af	43		 inc	 ebx
  001b0	83 c7 02	 add	 edi, 2
  001b3	83 fb 50	 cmp	 ebx, 80			; 00000050H
  001b6	7c a8		 jl	 SHORT $LL4@DGGuildAns@2
$LN2@DGGuildAns@2:

; 1468 : 			}
; 1469 : 		}
; 1470 : 	}
; 1471 : }

  001b8	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001bb	5f		 pop	 edi
  001bc	5e		 pop	 esi
  001bd	33 cd		 xor	 ecx, ebp
  001bf	5b		 pop	 ebx
  001c0	e8 00 00 00 00	 call	 @__security_check_cookie@4
  001c5	8b e5		 mov	 esp, ebp
  001c7	5d		 pop	 ebp
  001c8	c3		 ret	 0
?DGGuildAnsAssignType@@YAXPAUEXSDHP_GUILD_ASSIGN_TYPE_RESULT@@@Z ENDP ; DGGuildAnsAssignType
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDRelationShipReqJoin@@YAXHHH@Z		; GDRelationShipReqJoin
; Function compile flags: /Ogtp
;	COMDAT ?GDRelationShipReqJoin@@YAXHHH@Z
_TEXT	SEGMENT
_pMsg$ = -24						; size = 20
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_iTargetUserIndex$ = 12					; size = 4
_iRelationShipType$ = 16				; size = 4
?GDRelationShipReqJoin@@YAXHHH@Z PROC			; GDRelationShipReqJoin, COMDAT

; 1489 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 18	 sub	 esp, 24			; 00000018H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 55 08	 mov	 edx, DWORD PTR _aIndex$[ebp]
  00013	8b 4d 0c	 mov	 ecx, DWORD PTR _iTargetUserIndex$[ebp]

; 1490 : 	_GUILD_INFO_STRUCT * lpGuildInfo = gObj[aIndex].lpGuild;

  00016	8b c2		 mov	 eax, edx
  00018	69 c0 64 15 00
	00		 imul	 eax, 5476		; 00001564H
  0001e	56		 push	 esi
  0001f	8b b0 b4 02 00
	00		 mov	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+692]

; 1492 : 
; 1493 : 	if ( !lpGuildInfo || !lpTargetGuildInfo )

  00025	85 f6		 test	 esi, esi
  00027	74 5b		 je	 SHORT $LN1@GDRelation

; 1491 : 	_GUILD_INFO_STRUCT * lpTargetGuildInfo = gObj[iTargetUserIndex].lpGuild;

  00029	8b c1		 mov	 eax, ecx
  0002b	69 c0 64 15 00
	00		 imul	 eax, 5476		; 00001564H
  00031	57		 push	 edi
  00032	8b b8 b4 02 00
	00		 mov	 edi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+692]

; 1492 : 
; 1493 : 	if ( !lpGuildInfo || !lpTargetGuildInfo )

  00038	85 ff		 test	 edi, edi
  0003a	74 47		 je	 SHORT $LN7@GDRelation

; 1494 : 	{
; 1495 : 		return;
; 1496 : 	}
; 1497 : 
; 1498 : 	EXSDHP_RELATIONSHIP_JOIN_REQ pMsg = {0};

  0003c	33 c0		 xor	 eax, eax
  0003e	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+5], eax

; 1499 : 
; 1500 : 	pMsg.h.set((LPBYTE)&pMsg, 0xE5, sizeof(EXSDHP_RELATIONSHIP_JOIN_REQ));
; 1501 : 	pMsg.wRequestUserIndex = aIndex;
; 1502 : 	pMsg.wTargetUserIndex = iTargetUserIndex;

  00041	66 89 4d ee	 mov	 WORD PTR _pMsg$[ebp+6], cx

; 1503 : 	pMsg.btRelationShipType = iRelationShipType;

  00045	8a 4d 10	 mov	 cl, BYTE PTR _iRelationShipType$[ebp]
  00048	89 45 e9	 mov	 DWORD PTR _pMsg$[ebp+1], eax
  0004b	89 45 f5	 mov	 DWORD PTR _pMsg$[ebp+13], eax
  0004e	88 4d f0	 mov	 BYTE PTR _pMsg$[ebp+8], cl
  00051	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  00054	66 89 45 f9	 mov	 WORD PTR _pMsg$[ebp+17], ax
  00058	88 45 fb	 mov	 BYTE PTR _pMsg$[ebp+19], al
  0005b	66 c7 45 e8 c1
	14		 mov	 WORD PTR _pMsg$[ebp], 5313 ; 000014c1H
  00061	c6 45 ea e5	 mov	 BYTE PTR _pMsg$[ebp+2], 229 ; 000000e5H
  00065	66 89 55 ec	 mov	 WORD PTR _pMsg$[ebp+4], dx

; 1504 : 	pMsg.iRequestGuildNum = gObj[aIndex].lpGuild->Number;

  00069	8b 16		 mov	 edx, DWORD PTR [esi]

; 1505 : 	pMsg.iTargetGuildNum = gObj[iTargetUserIndex].lpGuild->Number;
; 1506 : 
; 1507 : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  0006b	6a 14		 push	 20			; 00000014H
  0006d	8d 4d e8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00070	89 55 f4	 mov	 DWORD PTR _pMsg$[ebp+12], edx
  00073	8b 07		 mov	 eax, DWORD PTR [edi]
  00075	51		 push	 ecx
  00076	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  0007b	89 45 f8	 mov	 DWORD PTR _pMsg$[ebp+16], eax
  0007e	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend
$LN7@GDRelation:
  00083	5f		 pop	 edi
$LN1@GDRelation:

; 1508 : }

  00084	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00087	33 cd		 xor	 ecx, ebp
  00089	5e		 pop	 esi
  0008a	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0008f	8b e5		 mov	 esp, ebp
  00091	5d		 pop	 ebp
  00092	c3		 ret	 0
?GDRelationShipReqJoin@@YAXHHH@Z ENDP			; GDRelationShipReqJoin
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDUnionBreakOff@@YAXHH@Z			; GDUnionBreakOff
; Function compile flags: /Ogtp
;	COMDAT ?GDUnionBreakOff@@YAXHH@Z
_TEXT	SEGMENT
_pMsg$ = -24						; size = 20
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_iUnionNumber$ = 12					; size = 4
?GDUnionBreakOff@@YAXHH@Z PROC				; GDUnionBreakOff, COMDAT

; 1633 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 18	 sub	 esp, 24			; 00000018H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 4d 08	 mov	 ecx, DWORD PTR _aIndex$[ebp]

; 1634 : 	_GUILD_INFO_STRUCT * lpGuildInfo = gObj[aIndex].lpGuild;

  00013	8b c1		 mov	 eax, ecx
  00015	69 c0 64 15 00
	00		 imul	 eax, 5476		; 00001564H
  0001b	8b 90 b4 02 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+692]

; 1635 : 
; 1636 : 	if ( !lpGuildInfo )

  00021	85 d2		 test	 edx, edx
  00023	74 4b		 je	 SHORT $LN2@GDUnionBre

; 1637 : 	{
; 1638 : 		return;
; 1639 : 	}
; 1640 : 
; 1641 : 	EXSDHP_RELATIONSHIP_BREAKOFF_REQ pMsg = {0};

  00025	33 c0		 xor	 eax, eax
  00027	89 45 e9	 mov	 DWORD PTR _pMsg$[ebp+1], eax
  0002a	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+5], eax

; 1642 : 
; 1643 : 	pMsg.h.set((LPBYTE)&pMsg, 0xE6, sizeof(EXSDHP_RELATIONSHIP_BREAKOFF_REQ));
; 1644 : 	pMsg.wRequestUserIndex = aIndex;

  0002d	66 89 4d ec	 mov	 WORD PTR _pMsg$[ebp+4], cx

; 1645 : 	pMsg.wTargetUserIndex = -1;

  00031	b9 ff ff 00 00	 mov	 ecx, 65535		; 0000ffffH
  00036	66 89 4d ee	 mov	 WORD PTR _pMsg$[ebp+6], cx
  0003a	89 45 f5	 mov	 DWORD PTR _pMsg$[ebp+13], eax
  0003d	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  00040	66 89 45 f9	 mov	 WORD PTR _pMsg$[ebp+17], ax
  00044	88 45 fb	 mov	 BYTE PTR _pMsg$[ebp+19], al

; 1646 : 	pMsg.btRelationShipType = G_RELATIONSHIP_UNION;
; 1647 : 	pMsg.iRequestGuildNum = lpGuildInfo->Number;
; 1648 : 	pMsg.iTargetGuildNum = iUnionNumber;

  00047	8b 45 0c	 mov	 eax, DWORD PTR _iUnionNumber$[ebp]

; 1649 : 
; 1650 : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  0004a	6a 14		 push	 20			; 00000014H
  0004c	8d 4d e8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0004f	66 c7 45 e8 c1
	14		 mov	 WORD PTR _pMsg$[ebp], 5313 ; 000014c1H
  00055	c6 45 ea e6	 mov	 BYTE PTR _pMsg$[ebp+2], 230 ; 000000e6H
  00059	c6 45 f0 01	 mov	 BYTE PTR _pMsg$[ebp+8], 1
  0005d	8b 12		 mov	 edx, DWORD PTR [edx]
  0005f	51		 push	 ecx
  00060	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00065	89 55 f4	 mov	 DWORD PTR _pMsg$[ebp+12], edx
  00068	89 45 f8	 mov	 DWORD PTR _pMsg$[ebp+16], eax
  0006b	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend
$LN2@GDUnionBre:

; 1651 : 
; 1652 : }

  00070	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00073	33 cd		 xor	 ecx, ebp
  00075	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0007a	8b e5		 mov	 esp, ebp
  0007c	5d		 pop	 ebp
  0007d	c3		 ret	 0
?GDUnionBreakOff@@YAXHH@Z ENDP				; GDUnionBreakOff
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDRelationShipReqBreakOff@@YAXHHH@Z		; GDRelationShipReqBreakOff
; Function compile flags: /Ogtp
;	COMDAT ?GDRelationShipReqBreakOff@@YAXHHH@Z
_TEXT	SEGMENT
_pMsg$ = -24						; size = 20
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_iTargetUserIndex$ = 12					; size = 4
_iRelationShipType$ = 16				; size = 4
?GDRelationShipReqBreakOff@@YAXHHH@Z PROC		; GDRelationShipReqBreakOff, COMDAT

; 1736 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 18	 sub	 esp, 24			; 00000018H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 4d 08	 mov	 ecx, DWORD PTR _aIndex$[ebp]
  00013	8b 55 0c	 mov	 edx, DWORD PTR _iTargetUserIndex$[ebp]

; 1737 : 	_GUILD_INFO_STRUCT * lpGuildInfo = gObj[aIndex].lpGuild;

  00016	8b c1		 mov	 eax, ecx
  00018	69 c0 64 15 00
	00		 imul	 eax, 5476		; 00001564H
  0001e	56		 push	 esi
  0001f	8b b0 b4 02 00
	00		 mov	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+692]

; 1738 : 	_GUILD_INFO_STRUCT * lpTargetGuildInfo = gObj[iTargetUserIndex].lpGuild;

  00025	8b c2		 mov	 eax, edx
  00027	69 c0 64 15 00
	00		 imul	 eax, 5476		; 00001564H
  0002d	57		 push	 edi
  0002e	8b b8 b4 02 00
	00		 mov	 edi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+692]

; 1739 : 
; 1740 : 	if ( !lpGuildInfo || !lpTargetGuildInfo )

  00034	85 f6		 test	 esi, esi
  00036	74 4b		 je	 SHORT $LN1@GDRelation@2
  00038	85 ff		 test	 edi, edi
  0003a	74 47		 je	 SHORT $LN1@GDRelation@2

; 1741 : 		return;
; 1742 : 
; 1743 : 	EXSDHP_RELATIONSHIP_BREAKOFF_REQ pMsg = {0};

  0003c	33 c0		 xor	 eax, eax
  0003e	89 45 e9	 mov	 DWORD PTR _pMsg$[ebp+1], eax
  00041	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+5], eax

; 1744 : 
; 1745 : 	pMsg.h.set((LPBYTE)&pMsg, 0xE6, sizeof(EXSDHP_RELATIONSHIP_BREAKOFF_REQ));
; 1746 : 	pMsg.wRequestUserIndex = aIndex;

  00044	66 89 4d ec	 mov	 WORD PTR _pMsg$[ebp+4], cx

; 1747 : 	pMsg.wTargetUserIndex = iTargetUserIndex;
; 1748 : 	pMsg.btRelationShipType = iRelationShipType;

  00048	8a 4d 10	 mov	 cl, BYTE PTR _iRelationShipType$[ebp]
  0004b	89 45 f5	 mov	 DWORD PTR _pMsg$[ebp+13], eax
  0004e	88 4d f0	 mov	 BYTE PTR _pMsg$[ebp+8], cl
  00051	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  00054	66 89 45 f9	 mov	 WORD PTR _pMsg$[ebp+17], ax
  00058	88 45 fb	 mov	 BYTE PTR _pMsg$[ebp+19], al
  0005b	66 c7 45 e8 c1
	14		 mov	 WORD PTR _pMsg$[ebp], 5313 ; 000014c1H
  00061	c6 45 ea e6	 mov	 BYTE PTR _pMsg$[ebp+2], 230 ; 000000e6H
  00065	66 89 55 ee	 mov	 WORD PTR _pMsg$[ebp+6], dx

; 1749 : 	pMsg.iRequestGuildNum = lpGuildInfo->Number;

  00069	8b 16		 mov	 edx, DWORD PTR [esi]

; 1750 : 	pMsg.iTargetGuildNum = lpTargetGuildInfo->Number;
; 1751 : 
; 1752 : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  0006b	6a 14		 push	 20			; 00000014H
  0006d	8d 4d e8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00070	89 55 f4	 mov	 DWORD PTR _pMsg$[ebp+12], edx
  00073	8b 07		 mov	 eax, DWORD PTR [edi]
  00075	51		 push	 ecx
  00076	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  0007b	89 45 f8	 mov	 DWORD PTR _pMsg$[ebp+16], eax
  0007e	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend
$LN1@GDRelation@2:

; 1753 : }

  00083	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00086	5f		 pop	 edi
  00087	33 cd		 xor	 ecx, ebp
  00089	5e		 pop	 esi
  0008a	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0008f	8b e5		 mov	 esp, ebp
  00091	5d		 pop	 ebp
  00092	c3		 ret	 0
?GDRelationShipReqBreakOff@@YAXHHH@Z ENDP		; GDRelationShipReqBreakOff
_TEXT	ENDS
PUBLIC	??_C@_0FG@CCGCMLDE@?$FLU?4System?$FN?$FLUnion?$FN?$FLAuto?5BreakOff?$FN@ ; `string'
PUBLIC	_lpMsg$GSCopy$
PUBLIC	__$ArrayPad$
PUBLIC	?DGRelationShipNotificationRecv@@YAXPAUEXSDHP_NOTIFICATION_RELATIONSHIP@@@Z ; DGRelationShipNotificationRecv
;	COMDAT ??_C@_0FG@CCGCMLDE@?$FLU?4System?$FN?$FLUnion?$FN?$FLAuto?5BreakOff?$FN@
CONST	SEGMENT
??_C@_0FG@CCGCMLDE@?$FLU?4System?$FN?$FLUnion?$FN?$FLAuto?5BreakOff?$FN@ DB '['
	DB	'U.System][Union][Auto BreakOff] ( Union Master Guild: %s ), ('
	DB	'Union Member Guild: %s)', 00H		; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?DGRelationShipNotificationRecv@@YAXPAUEXSDHP_NOTIFICATION_RELATIONSHIP@@@Z
_TEXT	SEGMENT
_lpMsg$GSCopy$ = -280					; size = 4
__Notice$157779 = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?DGRelationShipNotificationRecv@@YAXPAUEXSDHP_NOTIFICATION_RELATIONSHIP@@@Z PROC ; DGRelationShipNotificationRecv, COMDAT

; 1846 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 18 01 00
	00		 sub	 esp, 280		; 00000118H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi
  00016	8b 7d 08	 mov	 edi, DWORD PTR _lpMsg$[ebp]

; 1847 : 	if ( lpMsg->btUpdateFlag == EX_RESULT_FAIL_FOR_CASTLE )

  00019	80 7f 05 10	 cmp	 BYTE PTR [edi+5], 16	; 00000010H

; 1858 : 
; 1859 : 			for ( int n=0;n<MAX_USER_GUILD;n++)

  0001d	89 bd e8 fe ff
	ff		 mov	 DWORD PTR _lpMsg$GSCopy$[ebp], edi
  00023	0f 85 9a 00 00
	00		 jne	 $LN18@DGRelation@2

; 1848 : 	{
; 1849 : 		_GUILD_INFO_STRUCT * lpGuildInfo = Guild.SearchGuild_Number(lpMsg->iGuildList[0]);

  00029	8b 47 08	 mov	 eax, DWORD PTR [edi+8]
  0002c	50		 push	 eax
  0002d	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00032	e8 00 00 00 00	 call	 ?SearchGuild_Number@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@H@Z ; CGuildClass::SearchGuild_Number
  00037	8b d8		 mov	 ebx, eax

; 1850 : 
; 1851 : 		if ( lpGuildInfo )

  00039	85 db		 test	 ebx, ebx
  0003b	0f 84 82 00 00
	00		 je	 $LN18@DGRelation@2

; 1852 : 		{
; 1853 : 			lpGuildInfo->iGuildUnion = 0;
; 1854 : 			lpGuildInfo->SetTimeStamp();

  00041	8b cb		 mov	 ecx, ebx
  00043	c7 83 1c 07 00
	00 00 00 00 00	 mov	 DWORD PTR [ebx+1820], 0
  0004d	e8 00 00 00 00	 call	 ?SetTimeStamp@_GUILD_INFO_STRUCT@@QAEXXZ ; _GUILD_INFO_STRUCT::SetTimeStamp

; 1855 : 
; 1856 : 			LogAdd(LOG_BLACK, "[U.System][Union][Auto BreakOff] ( Union Master Guild: %s ), (Union Member Guild: %s)",
; 1857 : 				lpGuildInfo->Name, lpGuildInfo->Name);

  00052	8d 43 04	 lea	 eax, DWORD PTR [ebx+4]
  00055	50		 push	 eax
  00056	50		 push	 eax
  00057	68 00 00 00 00	 push	 OFFSET ??_C@_0FG@CCGCMLDE@?$FLU?4System?$FN?$FLUnion?$FN?$FLAuto?5BreakOff?$FN@
  0005c	6a 00		 push	 0
  0005e	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00063	83 c4 10	 add	 esp, 16			; 00000010H

; 1858 : 
; 1859 : 			for ( int n=0;n<MAX_USER_GUILD;n++)

  00066	33 ff		 xor	 edi, edi
  00068	8d b3 a0 03 00
	00		 lea	 esi, DWORD PTR [ebx+928]
  0006e	8b ff		 npad	 2
$LL9@DGRelation@2:

; 1860 : 			{
; 1861 : 				if ( lpGuildInfo->Use[n] > 0 )

  00070	80 bc 3b 40 04
	00 00 00	 cmp	 BYTE PTR [ebx+edi+1088], 0
  00078	76 3a		 jbe	 SHORT $LN8@DGRelation@2

; 1862 : 				{
; 1863 : 					if ( lpGuildInfo->Index[n] >= 0 )

  0007a	66 83 3e 00	 cmp	 WORD PTR [esi], 0
  0007e	7c 34		 jl	 SHORT $LN8@DGRelation@2

; 1864 : 					{
; 1865 : 						TNotice _Notice(1);

  00080	6a 01		 push	 1
  00082	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157779[ebp]
  00088	e8 00 00 00 00	 call	 ??0TNotice@@QAE@E@Z	; TNotice::TNotice

; 1866 : 						_Notice.SendToUser(lpGuildInfo->Index[n], lMsg.Get(MSGGET(6, 172)), lpGuildInfo->Name);

  0008d	8d 43 04	 lea	 eax, DWORD PTR [ebx+4]
  00090	50		 push	 eax
  00091	68 ac 06 00 00	 push	 1708			; 000006acH
  00096	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0009b	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  000a0	0f bf 0e	 movsx	 ecx, WORD PTR [esi]
  000a3	50		 push	 eax
  000a4	51		 push	 ecx
  000a5	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR __Notice$157779[ebp]
  000ab	52		 push	 edx
  000ac	e8 00 00 00 00	 call	 ?SendToUser@TNotice@@QAAXHPADZZ ; TNotice::SendToUser
  000b1	83 c4 10	 add	 esp, 16			; 00000010H
$LN8@DGRelation@2:

; 1858 : 
; 1859 : 			for ( int n=0;n<MAX_USER_GUILD;n++)

  000b4	47		 inc	 edi
  000b5	83 c6 02	 add	 esi, 2
  000b8	83 ff 50	 cmp	 edi, 80			; 00000050H
  000bb	7c b3		 jl	 SHORT $LL9@DGRelation@2
  000bd	8b bd e8 fe ff
	ff		 mov	 edi, DWORD PTR _lpMsg$GSCopy$[ebp]
$LN18@DGRelation@2:

; 1867 : 					}
; 1868 : 				}
; 1869 : 			}
; 1870 : 		}
; 1871 : 	}
; 1872 : 
; 1873 : 	for ( int i=0;i<lpMsg->btGuildListCount;i++)

  000c3	33 db		 xor	 ebx, ebx
  000c5	38 5f 06	 cmp	 BYTE PTR [edi+6], bl
  000c8	76 2a		 jbe	 SHORT $LN2@DGRelation@2
  000ca	8d 77 08	 lea	 esi, DWORD PTR [edi+8]
  000cd	8d 49 00	 npad	 3
$LL4@DGRelation@2:

; 1874 : 	{
; 1875 : 		_GUILD_INFO_STRUCT * lpGuildInfo = Guild.SearchGuild_Number(lpMsg->iGuildList[i]);

  000d0	8b 06		 mov	 eax, DWORD PTR [esi]
  000d2	50		 push	 eax
  000d3	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  000d8	e8 00 00 00 00	 call	 ?SearchGuild_Number@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@H@Z ; CGuildClass::SearchGuild_Number

; 1876 : 
; 1877 : 		if ( lpGuildInfo )

  000dd	85 c0		 test	 eax, eax
  000df	74 07		 je	 SHORT $LN3@DGRelation@2

; 1878 : 		{
; 1879 : 			lpGuildInfo->SetTimeStamp();

  000e1	8b c8		 mov	 ecx, eax
  000e3	e8 00 00 00 00	 call	 ?SetTimeStamp@_GUILD_INFO_STRUCT@@QAEXXZ ; _GUILD_INFO_STRUCT::SetTimeStamp
$LN3@DGRelation@2:

; 1867 : 					}
; 1868 : 				}
; 1869 : 			}
; 1870 : 		}
; 1871 : 	}
; 1872 : 
; 1873 : 	for ( int i=0;i<lpMsg->btGuildListCount;i++)

  000e8	0f b6 4f 06	 movzx	 ecx, BYTE PTR [edi+6]
  000ec	43		 inc	 ebx
  000ed	83 c6 04	 add	 esi, 4
  000f0	3b d9		 cmp	 ebx, ecx
  000f2	7c dc		 jl	 SHORT $LL4@DGRelation@2
$LN2@DGRelation@2:

; 1880 : 		}
; 1881 : 	}
; 1882 : }

  000f4	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000f7	5f		 pop	 edi
  000f8	5e		 pop	 esi
  000f9	33 cd		 xor	 ecx, ebp
  000fb	5b		 pop	 ebx
  000fc	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00101	8b e5		 mov	 esp, ebp
  00103	5d		 pop	 ebp
  00104	c3		 ret	 0
?DGRelationShipNotificationRecv@@YAXPAUEXSDHP_NOTIFICATION_RELATIONSHIP@@@Z ENDP ; DGRelationShipNotificationRecv
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDUnionListSend@@YAXHH@Z			; GDUnionListSend
; Function compile flags: /Ogtp
;	COMDAT ?GDUnionListSend@@YAXHH@Z
_TEXT	SEGMENT
_pMsg$ = -16						; size = 12
__$ArrayPad$ = -4					; size = 4
_iUserIndex$ = 8					; size = 4
_iUnionMasterGuildNumber$ = 12				; size = 4
?GDUnionListSend@@YAXHH@Z PROC				; GDUnionListSend, COMDAT

; 1913 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 10	 sub	 esp, 16			; 00000010H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 1914 : 	EXSDHP_UNION_LIST_REQ pMsg = {0};
; 1915 : 
; 1916 : 	pMsg.h.set((LPBYTE)&pMsg, 0xE9, sizeof(EXSDHP_UNION_LIST_REQ));
; 1917 : 	pMsg.wRequestUserIndex = iUserIndex;
; 1918 : 	pMsg.iUnionMasterGuildNumber = iUnionMasterGuildNumber;

  00010	8b 4d 0c	 mov	 ecx, DWORD PTR _iUnionMasterGuildNumber$[ebp]
  00013	33 c0		 xor	 eax, eax
  00015	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+1], eax
  00018	89 45 f5	 mov	 DWORD PTR _pMsg$[ebp+5], eax
  0001b	66 89 45 f9	 mov	 WORD PTR _pMsg$[ebp+9], ax
  0001f	88 45 fb	 mov	 BYTE PTR _pMsg$[ebp+11], al
  00022	66 8b 45 08	 mov	 ax, WORD PTR _iUserIndex$[ebp]

; 1919 : 
; 1920 : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  00026	6a 0c		 push	 12			; 0000000cH
  00028	8d 55 f0	 lea	 edx, DWORD PTR _pMsg$[ebp]
  0002b	89 4d f8	 mov	 DWORD PTR _pMsg$[ebp+8], ecx
  0002e	52		 push	 edx
  0002f	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00034	66 c7 45 f0 c1
	0c		 mov	 WORD PTR _pMsg$[ebp], 3265 ; 00000cc1H
  0003a	c6 45 f2 e9	 mov	 BYTE PTR _pMsg$[ebp+2], 233 ; 000000e9H
  0003e	66 89 45 f4	 mov	 WORD PTR _pMsg$[ebp+4], ax
  00042	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 1921 : }

  00047	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0004a	33 cd		 xor	 ecx, ebp
  0004c	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00051	8b e5		 mov	 esp, ebp
  00053	5d		 pop	 ebp
  00054	c3		 ret	 0
?GDUnionListSend@@YAXHH@Z ENDP				; GDUnionListSend
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GDRelationShipReqKickOutUnionMember@@YAXHPAD@Z	; GDRelationShipReqKickOutUnionMember
; Function compile flags: /Ogtp
;	COMDAT ?GDRelationShipReqKickOutUnionMember@@YAXHPAD@Z
_TEXT	SEGMENT
_pMsg$ = -28						; size = 24
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_szTargetGuildName$ = 12				; size = 4
?GDRelationShipReqKickOutUnionMember@@YAXHPAD@Z PROC	; GDRelationShipReqKickOutUnionMember, COMDAT

; 2015 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 1c	 sub	 esp, 28			; 0000001cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 55 0c	 mov	 edx, DWORD PTR _szTargetGuildName$[ebp]
  00013	56		 push	 esi
  00014	8b 75 08	 mov	 esi, DWORD PTR _aIndex$[ebp]

; 2016 : 	_GUILD_INFO_STRUCT * lpGuildInfo = gObj[aIndex].lpGuild;

  00017	8b c6		 mov	 eax, esi
  00019	69 c0 64 15 00
	00		 imul	 eax, 5476		; 00001564H
  0001f	8b 88 b4 02 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+692]

; 2017 : 
; 2018 : 	if ( lpGuildInfo == NULL )

  00025	85 c9		 test	 ecx, ecx
  00027	74 4f		 je	 SHORT $LN2@GDRelation@3

; 2019 : 	{
; 2020 : 		return;
; 2021 : 	}
; 2022 : 
; 2023 : 
; 2024 : 	EXSDHP_KICKOUT_UNIONMEMBER_REQ pMsg = {0};

  00029	33 c0		 xor	 eax, eax
  0002b	89 45 e9	 mov	 DWORD PTR _pMsg$[ebp+5], eax
  0002e	89 45 e5	 mov	 DWORD PTR _pMsg$[ebp+1], eax
  00031	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  00034	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+13], eax
  00037	89 45 f5	 mov	 DWORD PTR _pMsg$[ebp+17], eax
  0003a	66 89 45 f9	 mov	 WORD PTR _pMsg$[ebp+21], ax
  0003e	88 45 fb	 mov	 BYTE PTR _pMsg$[ebp+23], al

; 2025 : 	pMsg.h.set((LPBYTE)&pMsg, 0xEB, 0x01, sizeof(EXSDHP_KICKOUT_UNIONMEMBER_REQ));

  00041	b0 01		 mov	 al, 1

; 2026 : 	pMsg.wRequestUserIndex = aIndex;
; 2027 : 	pMsg.btRelationShipType = GUILD_RELATION_UNION;

  00043	88 45 ea	 mov	 BYTE PTR _pMsg$[ebp+6], al
  00046	c7 45 e4 c1 18
	eb 01		 mov	 DWORD PTR _pMsg$[ebp], 32184513 ; 01eb18c1H
  0004d	66 89 75 e8	 mov	 WORD PTR _pMsg$[ebp+4], si

; 2028 : 	memcpy(pMsg.szUnionMasterGuildName, lpGuildInfo->Name, sizeof(pMsg.szUnionMasterGuildName));

  00051	8b 41 04	 mov	 eax, DWORD PTR [ecx+4]
  00054	89 45 eb	 mov	 DWORD PTR _pMsg$[ebp+7], eax
  00057	8b 49 08	 mov	 ecx, DWORD PTR [ecx+8]

; 2029 : 	memcpy(pMsg.szUnionMemberGuildName, szTargetGuildName, sizeof(pMsg.szUnionMemberGuildName));

  0005a	8b 02		 mov	 eax, DWORD PTR [edx]
  0005c	89 4d ef	 mov	 DWORD PTR _pMsg$[ebp+11], ecx
  0005f	8b 4a 04	 mov	 ecx, DWORD PTR [edx+4]

; 2030 : 
; 2031 : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  00062	6a 18		 push	 24			; 00000018H
  00064	8d 55 e4	 lea	 edx, DWORD PTR _pMsg$[ebp]
  00067	89 4d f7	 mov	 DWORD PTR _pMsg$[ebp+19], ecx
  0006a	52		 push	 edx
  0006b	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00070	89 45 f3	 mov	 DWORD PTR _pMsg$[ebp+15], eax
  00073	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend
$LN2@GDRelation@3:

; 2032 : }

  00078	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0007b	33 cd		 xor	 ecx, ebp
  0007d	5e		 pop	 esi
  0007e	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00083	8b e5		 mov	 esp, ebp
  00085	5d		 pop	 ebp
  00086	c3		 ret	 0
?GDRelationShipReqKickOutUnionMember@@YAXHPAD@Z ENDP	; GDRelationShipReqKickOutUnionMember
_TEXT	ENDS
PUBLIC	??_C@_0BJ@BDFPCOJL@?$FL?$CFs?$FN?5Friend?5List?5Request?$AA@ ; `string'
PUBLIC	??_C@_0CJ@EJJNCKNG@error?9L3?5?3?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5FriendServer@ ; `string'
PUBLIC	??_C@_0DB@ELGELCGP@error?9L3?5?3?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5FriendServer@ ; `string'
PUBLIC	??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@	; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendListRequest@@YAXH@Z			; FriendListRequest
;	COMDAT ??_C@_0BJ@BDFPCOJL@?$FL?$CFs?$FN?5Friend?5List?5Request?$AA@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_0BJ@BDFPCOJL@?$FL?$CFs?$FN?5Friend?5List?5Request?$AA@ DB '[%s] Fri'
	DB	'end List Request', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0CJ@EJJNCKNG@error?9L3?5?3?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5FriendServer@
CONST	SEGMENT
??_C@_0CJ@EJJNCKNG@error?9L3?5?3?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5FriendServer@ DB 'e'
	DB	'rror-L3 : [%s][%s] FriendServer Offline', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DB@ELGELCGP@error?9L3?5?3?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5FriendServer@
CONST	SEGMENT
??_C@_0DB@ELGELCGP@error?9L3?5?3?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5FriendServer@ DB 'e'
	DB	'rror-L3 : [%s][%s] FriendServer Online Request ', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@ DB 'error-L2 :'
	DB	' Index %s %d', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
CONST	SEGMENT
??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@ DB 'EDSProtocol.cpp', 00H ; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendListRequest@@YAXH@Z
_TEXT	SEGMENT
_pMsg$ = -24						; size = 18
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
?FriendListRequest@@YAXH@Z PROC				; FriendListRequest, COMDAT

; 2134 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 18	 sub	 esp, 24			; 00000018H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	8b 5d 08	 mov	 ebx, DWORD PTR _aIndex$[ebp]

; 2135 : 
; 2136 : 
; 2137 : 	if ( gObjIsConnectedGP(aIndex) == FALSE )

  00014	53		 push	 ebx
  00015	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHH@Z ; gObjIsConnectedGP
  0001a	83 c4 04	 add	 esp, 4
  0001d	85 c0		 test	 eax, eax
  0001f	75 27		 jne	 SHORT $LN3@FriendList

; 2138 : 	{
; 2139 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00021	68 5b 08 00 00	 push	 2139			; 0000085bH
  00026	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0002b	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00030	50		 push	 eax
  00031	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00036	83 c4 10	 add	 esp, 16			; 00000010H
  00039	5b		 pop	 ebx

; 2165 : 
; 2166 : 	gObj[aIndex].m_FriendServerOnline = 2;
; 2167 : 
; 2168 : }

  0003a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0003d	33 cd		 xor	 ecx, ebp
  0003f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00044	8b e5		 mov	 esp, ebp
  00046	5d		 pop	 ebp
  00047	c3		 ret	 0
$LN3@FriendList:
  00048	56		 push	 esi

; 2140 : 		return;
; 2141 : 	}
; 2142 : 
; 2143 : 	if (gObj[aIndex].m_FriendServerOnline == 2 )

  00049	8b f3		 mov	 esi, ebx
  0004b	69 f6 64 15 00
	00		 imul	 esi, 5476		; 00001564H
  00051	8a 86 d0 01 00
	00		 mov	 al, BYTE PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+464]
  00057	3c 02		 cmp	 al, 2
  00059	75 2d		 jne	 SHORT $LN2@FriendList

; 2144 : 	{
; 2145 : 		LogAdd(LOG_BLACK, "error-L3 : [%s][%s] FriendServer Online Request ", gObj[aIndex].AccountID, gObj[aIndex].Name);

  0005b	8d 86 6f 00 00
	00		 lea	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+111]
  00061	50		 push	 eax
  00062	8d 8e 64 00 00
	00		 lea	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+100]
  00068	51		 push	 ecx
  00069	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@ELGELCGP@error?9L3?5?3?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5FriendServer@
  0006e	6a 00		 push	 0
  00070	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00075	83 c4 10	 add	 esp, 16			; 00000010H
  00078	5e		 pop	 esi
  00079	5b		 pop	 ebx

; 2165 : 
; 2166 : 	gObj[aIndex].m_FriendServerOnline = 2;
; 2167 : 
; 2168 : }

  0007a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0007d	33 cd		 xor	 ecx, ebp
  0007f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00084	8b e5		 mov	 esp, ebp
  00086	5d		 pop	 ebp
  00087	c3		 ret	 0
$LN2@FriendList:

; 2146 : 		return;
; 2147 : 	}
; 2148 : 
; 2149 : 	if (gObj[aIndex].m_FriendServerOnline == FRIEND_SERVER_STATE_OFFLINE )

  00088	3c 01		 cmp	 al, 1
  0008a	75 2d		 jne	 SHORT $LN1@FriendList

; 2150 : 	{
; 2151 : 		LogAdd(LOG_BLACK, "error-L3 : [%s][%s] FriendServer Offline", gObj[aIndex].AccountID, gObj[aIndex].Name);

  0008c	8d 96 6f 00 00
	00		 lea	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+111]
  00092	52		 push	 edx
  00093	8d 86 64 00 00
	00		 lea	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+100]
  00099	50		 push	 eax
  0009a	68 00 00 00 00	 push	 OFFSET ??_C@_0CJ@EJJNCKNG@error?9L3?5?3?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5FriendServer@
  0009f	6a 00		 push	 0
  000a1	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  000a6	83 c4 10	 add	 esp, 16			; 00000010H
  000a9	5e		 pop	 esi
  000aa	5b		 pop	 ebx

; 2165 : 
; 2166 : 	gObj[aIndex].m_FriendServerOnline = 2;
; 2167 : 
; 2168 : }

  000ab	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000ae	33 cd		 xor	 ecx, ebp
  000b0	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000b5	8b e5		 mov	 esp, ebp
  000b7	5d		 pop	 ebp
  000b8	c3		 ret	 0
$LN1@FriendList:

; 2152 : 		return;
; 2153 : 	}
; 2154 : 
; 2155 : 	FHP_FRIENDLIST_REQ pMsg;
; 2156 : 
; 2157 : 	pMsg.h.set((LPBYTE)&pMsg, 0x60, sizeof(FHP_FRIENDLIST_REQ));
; 2158 : 	memcpy(pMsg.Name, gObj[aIndex].Name, sizeof(pMsg.Name));

  000b9	8b 8e 6f 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+111]
  000bf	8b 96 73 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+115]
  000c5	66 8b 86 77 00
	00 00		 mov	 ax, WORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+119]
  000cc	57		 push	 edi
  000cd	8d be 6f 00 00
	00		 lea	 edi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+111]
  000d3	89 4d ee	 mov	 DWORD PTR _pMsg$[ebp+6], ecx

; 2159 : 	pMsg.Number = aIndex;
; 2160 : 	pMsg.pServer = gGameServerCode;

  000d6	8a 0d 00 00 00
	00		 mov	 cl, BYTE PTR ?gGameServerCode@@3FA
  000dc	89 55 f2	 mov	 DWORD PTR _pMsg$[ebp+10], edx

; 2161 : 	
; 2162 : 	wsExDbCli.DataSend((char*)&pMsg, pMsg.h.size);

  000df	6a 12		 push	 18			; 00000012H
  000e1	8d 55 e8	 lea	 edx, DWORD PTR _pMsg$[ebp]
  000e4	88 4d f8	 mov	 BYTE PTR _pMsg$[ebp+16], cl
  000e7	52		 push	 edx
  000e8	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  000ed	66 c7 45 e8 c1
	12		 mov	 WORD PTR _pMsg$[ebp], 4801 ; 000012c1H
  000f3	c6 45 ea 60	 mov	 BYTE PTR _pMsg$[ebp+2], 96 ; 00000060H
  000f7	66 89 45 f6	 mov	 WORD PTR _pMsg$[ebp+14], ax
  000fb	66 89 5d ec	 mov	 WORD PTR _pMsg$[ebp+4], bx
  000ff	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 2163 : 
; 2164 : 	LogAdd(LOG_BLACK, "[%s] Friend List Request", gObj[aIndex].Name);

  00104	57		 push	 edi
  00105	68 00 00 00 00	 push	 OFFSET ??_C@_0BJ@BDFPCOJL@?$FL?$CFs?$FN?5Friend?5List?5Request?$AA@
  0010a	6a 00		 push	 0
  0010c	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2165 : 
; 2166 : 	gObj[aIndex].m_FriendServerOnline = 2;
; 2167 : 
; 2168 : }

  00111	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00114	83 c4 0c	 add	 esp, 12			; 0000000cH
  00117	5f		 pop	 edi
  00118	c6 86 d0 01 00
	00 02		 mov	 BYTE PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+464], 2
  0011f	5e		 pop	 esi
  00120	33 cd		 xor	 ecx, ebp
  00122	5b		 pop	 ebx
  00123	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00128	8b e5		 mov	 esp, ebp
  0012a	5d		 pop	 ebp
  0012b	c3		 ret	 0
?FriendListRequest@@YAXH@Z ENDP				; FriendListRequest
_TEXT	ENDS
PUBLIC	??_C@_0CB@HGMGGPGK@?$FL?$CFs?$FN?5Friend?5List?5Count?5?$CI?$CFd?$CJ?5Send@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendListResult@@YAXPAE@Z			; FriendListResult
EXTRN	?gObjIsConnectedGP@@YAHHPAD@Z:PROC		; gObjIsConnectedGP
;	COMDAT ??_C@_0CB@HGMGGPGK@?$FL?$CFs?$FN?5Friend?5List?5Count?5?$CI?$CFd?$CJ?5Send@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_0CB@HGMGGPGK@?$FL?$CFs?$FN?5Friend?5List?5Count?5?$CI?$CFd?$CJ?5Send@ DB '['
	DB	'%s] Friend List Count (%d) Send', 00H	; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendListResult@@YAXPAE@Z
_TEXT	SEGMENT
_pOfs$ = -2028						; size = 4
_pCount$ = -2024					; size = 7
_Name$ = -2016						; size = 11
_TmpSendBuf$ = -2004					; size = 2000
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?FriendListResult@@YAXPAE@Z PROC			; FriendListResult, COMDAT

; 2199 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec ec 07 00
	00		 sub	 esp, 2028		; 000007ecH
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	57		 push	 edi
  00014	8b 7d 08	 mov	 edi, DWORD PTR _lpMsg$[ebp]

; 2200 : 
; 2201 : 	FHP_FRIENDLIST_COUNT * lpCount;
; 2202 : 	FHP_FRIENDLIST * lpList;
; 2203 : 	int lOfs = sizeof(FHP_FRIENDLIST_COUNT);
; 2204 : 	PMSG_FRIEND_LIST_COUNT pCount;
; 2205 : 	int pOfs = sizeof(PMSG_FRIEND_LIST_COUNT);
; 2206 : 
; 2207 : 	lpCount = (FHP_FRIENDLIST_COUNT *)lpMsg;
; 2208 : 	lpList  = (FHP_FRIENDLIST *)(&lpMsg[lOfs * sizeof(FHP_FRIENDLIST)]);
; 2209 : 
; 2210 : 	char_ID Name( lpCount->Name);

  00017	33 c0		 xor	 eax, eax
  00019	8d 4f 06	 lea	 ecx, DWORD PTR [edi+6]
  0001c	c7 85 14 f8 ff
	ff 07 00 00 00	 mov	 DWORD PTR _pOfs$[ebp], 7
  00026	89 85 20 f8 ff
	ff		 mov	 DWORD PTR _Name$[ebp], eax
  0002c	89 85 24 f8 ff
	ff		 mov	 DWORD PTR _Name$[ebp+4], eax
  00032	66 89 85 28 f8
	ff ff		 mov	 WORD PTR _Name$[ebp+8], ax
  00039	88 85 2a f8 ff
	ff		 mov	 BYTE PTR _Name$[ebp+10], al
  0003f	85 c9		 test	 ecx, ecx
  00041	74 1c		 je	 SHORT $LN8@FriendList@2
  00043	8b 01		 mov	 eax, DWORD PTR [ecx]
  00045	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  00048	89 85 20 f8 ff
	ff		 mov	 DWORD PTR _Name$[ebp], eax
  0004e	66 8b 41 08	 mov	 ax, WORD PTR [ecx+8]
  00052	89 95 24 f8 ff
	ff		 mov	 DWORD PTR _Name$[ebp+4], edx
  00058	66 89 85 28 f8
	ff ff		 mov	 WORD PTR _Name$[ebp+8], ax
$LN8@FriendList@2:

; 2211 : 	BYTE TmpSendBuf[2000];
; 2212 : 	
; 2213 : 	if ( !gObjIsConnectedGP(lpCount->Number, Name.GetBuffer()))

  0005f	0f bf 57 04	 movsx	 edx, WORD PTR [edi+4]
  00063	8d 8d 20 f8 ff
	ff		 lea	 ecx, DWORD PTR _Name$[ebp]
  00069	51		 push	 ecx
  0006a	52		 push	 edx
  0006b	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHHPAD@Z ; gObjIsConnectedGP
  00070	83 c4 08	 add	 esp, 8
  00073	85 c0		 test	 eax, eax
  00075	75 27		 jne	 SHORT $LN5@FriendList@2

; 2214 : 	{
; 2215 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00077	68 a7 08 00 00	 push	 2215			; 000008a7H
  0007c	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  00081	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00086	50		 push	 eax
  00087	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0008c	83 c4 10	 add	 esp, 16			; 00000010H
  0008f	5f		 pop	 edi

; 2242 : }

  00090	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00093	33 cd		 xor	 ecx, ebp
  00095	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0009a	8b e5		 mov	 esp, ebp
  0009c	5d		 pop	 ebp
  0009d	c3		 ret	 0
$LN5@FriendList@2:

; 2216 : 		return;
; 2217 : 	}
; 2218 : 
; 2219 : 	gObj[lpCount->Number].m_FriendServerOnline = 0;

  0009e	0f bf 47 04	 movsx	 eax, WORD PTR [edi+4]
  000a2	69 c0 64 15 00
	00		 imul	 eax, 5476		; 00001564H
  000a8	c6 80 d0 01 00
	00 00		 mov	 BYTE PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+464], 0

; 2220 : 	pCount.Count = lpCount->Count;
; 2221 : 	pCount.MemoCount = lpCount->MailCount;

  000af	8a 4f 11	 mov	 cl, BYTE PTR [edi+17]
  000b2	53		 push	 ebx
  000b3	8a 5f 10	 mov	 bl, BYTE PTR [edi+16]
  000b6	88 9d 1e f8 ff
	ff		 mov	 BYTE PTR _pCount$[ebp+6], bl
  000bc	88 8d 1c f8 ff
	ff		 mov	 BYTE PTR _pCount$[ebp+4], cl

; 2222 : 	pCount.MailTotal = 50;

  000c2	c6 85 1d f8 ff
	ff 32		 mov	 BYTE PTR _pCount$[ebp+5], 50 ; 00000032H

; 2223 : 
; 2224 : 	if ( pCount.Count != 0 )

  000c9	84 db		 test	 bl, bl
  000cb	74 4b		 je	 SHORT $LN17@FriendList@2

; 2225 : 	{
; 2226 : 		for ( int n=0;n<pCount.Count;n++)

  000cd	56		 push	 esi
  000ce	0f b6 f3	 movzx	 esi, bl
  000d1	85 f6		 test	 esi, esi
  000d3	7e 42		 jle	 SHORT $LN18@FriendList@2
  000d5	8b d6		 mov	 edx, esi
  000d7	6b f6 0b	 imul	 esi, 11			; 0000000bH
  000da	83 c6 07	 add	 esi, 7
  000dd	8d 8d 33 f8 ff
	ff		 lea	 ecx, DWORD PTR _TmpSendBuf$[ebp+7]
  000e3	8d 47 12	 lea	 eax, DWORD PTR [edi+18]
  000e6	89 b5 14 f8 ff
	ff		 mov	 DWORD PTR _pOfs$[ebp], esi
  000ec	8d 64 24 00	 npad	 4
$LL3@FriendList@2:

; 2227 : 		{
; 2228 : 			lpList = (FHP_FRIENDLIST *)&lpMsg[lOfs];
; 2229 : 			memcpy(&TmpSendBuf[pOfs], lpList, sizeof(FHP_FRIENDLIST));

  000f0	8b 30		 mov	 esi, DWORD PTR [eax]
  000f2	89 31		 mov	 DWORD PTR [ecx], esi
  000f4	8b 70 04	 mov	 esi, DWORD PTR [eax+4]
  000f7	89 71 04	 mov	 DWORD PTR [ecx+4], esi
  000fa	66 8b 70 08	 mov	 si, WORD PTR [eax+8]
  000fe	66 89 71 08	 mov	 WORD PTR [ecx+8], si
  00102	8a 58 0a	 mov	 bl, BYTE PTR [eax+10]
  00105	88 59 0a	 mov	 BYTE PTR [ecx+10], bl

; 2230 : 			lOfs+=sizeof(FHP_FRIENDLIST);
; 2231 : 			pOfs+=sizeof(FHP_FRIENDLIST);	// #warning why plus that??

  00108	83 c0 0b	 add	 eax, 11			; 0000000bH
  0010b	83 c1 0b	 add	 ecx, 11			; 0000000bH
  0010e	4a		 dec	 edx
  0010f	75 df		 jne	 SHORT $LL3@FriendList@2

; 2225 : 	{
; 2226 : 		for ( int n=0;n<pCount.Count;n++)

  00111	8a 9d 1e f8 ff
	ff		 mov	 bl, BYTE PTR _pCount$[ebp+6]
$LN18@FriendList@2:
  00117	5e		 pop	 esi
$LN17@FriendList@2:

; 2232 : 		}
; 2233 : 	}
; 2234 : 
; 2235 : 	pCount.h.set((LPBYTE)&pCount, 0xC0, pOfs);

  00118	8b 85 14 f8 ff
	ff		 mov	 eax, DWORD PTR _pOfs$[ebp]
  0011e	8b d0		 mov	 edx, eax
  00120	c1 ea 08	 shr	 edx, 8
  00123	88 95 19 f8 ff
	ff		 mov	 BYTE PTR _pCount$[ebp+1], dl

; 2236 : 	memcpy(TmpSendBuf, &pCount, sizeof(PMSG_FRIEND_LIST_COUNT));

  00129	66 8b 95 1c f8
	ff ff		 mov	 dx, WORD PTR _pCount$[ebp+4]
  00130	88 85 1a f8 ff
	ff		 mov	 BYTE PTR _pCount$[ebp+2], al
  00136	c6 85 18 f8 ff
	ff c2		 mov	 BYTE PTR _pCount$[ebp], 194 ; 000000c2H
  0013d	c6 85 1b f8 ff
	ff c0		 mov	 BYTE PTR _pCount$[ebp+3], 192 ; 000000c0H
  00144	8b 8d 18 f8 ff
	ff		 mov	 ecx, DWORD PTR _pCount$[ebp]

; 2237 : 
; 2238 : 	DataSend(lpCount->Number, TmpSendBuf, pOfs);

  0014a	50		 push	 eax
  0014b	89 8d 2c f8 ff
	ff		 mov	 DWORD PTR _TmpSendBuf$[ebp], ecx
  00151	0f bf 4f 04	 movsx	 ecx, WORD PTR [edi+4]
  00155	8d 85 2c f8 ff
	ff		 lea	 eax, DWORD PTR _TmpSendBuf$[ebp]
  0015b	50		 push	 eax
  0015c	51		 push	 ecx
  0015d	66 89 95 30 f8
	ff ff		 mov	 WORD PTR _TmpSendBuf$[ebp+4], dx
  00164	88 9d 32 f8 ff
	ff		 mov	 BYTE PTR _TmpSendBuf$[ebp+6], bl
  0016a	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 2239 : 
; 2240 : 	LogAdd(LOG_BLACK, "[%s] Friend List Count (%d) Send",
; 2241 : 		gObj[lpCount->Number].Name, pCount.Count);

  0016f	0f bf 47 04	 movsx	 eax, WORD PTR [edi+4]
  00173	69 c0 64 15 00
	00		 imul	 eax, 5476		; 00001564H
  00179	0f b6 d3	 movzx	 edx, bl
  0017c	52		 push	 edx
  0017d	05 6f 00 00 00	 add	 eax, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+111
  00182	50		 push	 eax
  00183	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@HGMGGPGK@?$FL?$CFs?$FN?5Friend?5List?5Count?5?$CI?$CFd?$CJ?5Send@
  00188	6a 00		 push	 0
  0018a	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2242 : }

  0018f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00192	83 c4 1c	 add	 esp, 28			; 0000001cH
  00195	5b		 pop	 ebx
  00196	33 cd		 xor	 ecx, ebp
  00198	5f		 pop	 edi
  00199	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0019e	8b e5		 mov	 esp, ebp
  001a0	5d		 pop	 ebp
  001a1	c3		 ret	 0
?FriendListResult@@YAXPAE@Z ENDP			; FriendListResult
_TEXT	ENDS
PUBLIC	??_C@_0BK@HLHJLCCE@?$FL?$CFs?$FN?5WaitFriend?5List?5?$FL?$CFs?$FN?$AA@ ; `string'
PUBLIC	??_C@_0BN@DOMMEPOB@error?9L2?5?3?5?$CI?$CFs?$CJ?5Index?5?$CFs?5?$CFd?5?$AA@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?WaitFriendListResult@@YAXPAUFHP_WAITFRIENDLIST_COUNT@@@Z ; WaitFriendListResult
;	COMDAT ??_C@_0BK@HLHJLCCE@?$FL?$CFs?$FN?5WaitFriend?5List?5?$FL?$CFs?$FN?$AA@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\winutil.h
CONST	SEGMENT
??_C@_0BK@HLHJLCCE@?$FL?$CFs?$FN?5WaitFriend?5List?5?$FL?$CFs?$FN?$AA@ DB '['
	DB	'%s] WaitFriend List [%s]', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BN@DOMMEPOB@error?9L2?5?3?5?$CI?$CFs?$CJ?5Index?5?$CFs?5?$CFd?5?$AA@
CONST	SEGMENT
??_C@_0BN@DOMMEPOB@error?9L2?5?3?5?$CI?$CFs?$CJ?5Index?5?$CFs?5?$CFd?5?$AA@ DB 'e'
	DB	'rror-L2 : (%s) Index %s %d ', 00H		; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?WaitFriendListResult@@YAXPAUFHP_WAITFRIENDLIST_COUNT@@@Z
_TEXT	SEGMENT
_pMsg$ = -32						; size = 13
_Name$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?WaitFriendListResult@@YAXPAUFHP_WAITFRIENDLIST_COUNT@@@Z PROC ; WaitFriendListResult, COMDAT

; 2254 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 20	 sub	 esp, 32			; 00000020H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 2255 : 	PMSG_FRIEND_ADD_SIN_REQ pMsg;
; 2256 : 	char_ID Name(lpMsg->Name);

  00014	33 c0		 xor	 eax, eax
  00016	8d 4e 06	 lea	 ecx, DWORD PTR [esi+6]
  00019	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  0001c	89 45 f4	 mov	 DWORD PTR _Name$[ebp+4], eax
  0001f	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
  00023	88 45 fa	 mov	 BYTE PTR _Name$[ebp+10], al
  00026	85 c9		 test	 ecx, ecx
  00028	74 13		 je	 SHORT $LN5@WaitFriend
  0002a	8b 01		 mov	 eax, DWORD PTR [ecx]
  0002c	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  0002f	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  00032	66 8b 41 08	 mov	 ax, WORD PTR [ecx+8]
  00036	89 55 f4	 mov	 DWORD PTR _Name$[ebp+4], edx
  00039	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
$LN5@WaitFriend:

; 2257 : 
; 2258 : 	if ( !gObjIsConnectedGP(lpMsg->Number, Name.GetBuffer()))

  0003d	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  00041	8d 4d f0	 lea	 ecx, DWORD PTR _Name$[ebp]
  00044	51		 push	 ecx
  00045	52		 push	 edx
  00046	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHHPAD@Z ; gObjIsConnectedGP
  0004b	83 c4 08	 add	 esp, 8
  0004e	85 c0		 test	 eax, eax

; 2259 : 	{
; 2260 : 		LogAdd(LOG_BLACK, "error-L2 : (%s) Index %s %d ",
; 2261 : 			Name.GetBuffer(), __FILE__, __LINE__);

  00050	8d 45 f0	 lea	 eax, DWORD PTR _Name$[ebp]
  00053	75 29		 jne	 SHORT $LN2@WaitFriend
  00055	68 d5 08 00 00	 push	 2261			; 000008d5H
  0005a	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0005f	50		 push	 eax
  00060	68 00 00 00 00	 push	 OFFSET ??_C@_0BN@DOMMEPOB@error?9L2?5?3?5?$CI?$CFs?$CJ?5Index?5?$CFs?5?$CFd?5?$AA@
  00065	6a 00		 push	 0
  00067	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0006c	83 c4 14	 add	 esp, 20			; 00000014H
  0006f	5e		 pop	 esi

; 2274 : }

  00070	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00073	33 cd		 xor	 ecx, ebp
  00075	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0007a	8b e5		 mov	 esp, ebp
  0007c	5d		 pop	 ebp
  0007d	c3		 ret	 0
$LN2@WaitFriend:

; 2262 : 		return;
; 2263 : 	}
; 2264 : 
; 2265 : 	if ( Name.GetLength() < 1 )

  0007e	8d 50 01	 lea	 edx, DWORD PTR [eax+1]
$LL18@WaitFriend:
  00081	8a 08		 mov	 cl, BYTE PTR [eax]
  00083	40		 inc	 eax
  00084	84 c9		 test	 cl, cl
  00086	75 f9		 jne	 SHORT $LL18@WaitFriend
  00088	2b c2		 sub	 eax, edx
  0008a	83 f8 01	 cmp	 eax, 1
  0008d	7c 52		 jl	 SHORT $LN3@WaitFriend

; 2266 : 		return;
; 2267 : 
; 2268 : 	pMsg.h.set((LPBYTE)&pMsg, 0xC2, sizeof(pMsg));
; 2269 : 	memcpy(pMsg.Name, lpMsg->FriendName, sizeof(pMsg.Name));

  0008f	8b 4e 10	 mov	 ecx, DWORD PTR [esi+16]
  00092	8b 56 14	 mov	 edx, DWORD PTR [esi+20]
  00095	66 8b 46 18	 mov	 ax, WORD PTR [esi+24]
  00099	89 4d e3	 mov	 DWORD PTR _pMsg$[ebp+3], ecx
  0009c	89 55 e7	 mov	 DWORD PTR _pMsg$[ebp+7], edx

; 2270 : 
; 2271 : 	DataSend(lpMsg->Number, (LPBYTE)&pMsg, sizeof(pMsg));

  0009f	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  000a3	6a 0d		 push	 13			; 0000000dH
  000a5	8d 4d e0	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  000a8	51		 push	 ecx
  000a9	52		 push	 edx
  000aa	66 c7 45 e0 c1
	0d		 mov	 WORD PTR _pMsg$[ebp], 3521 ; 00000dc1H
  000b0	c6 45 e2 c2	 mov	 BYTE PTR _pMsg$[ebp+2], 194 ; 000000c2H
  000b4	66 89 45 eb	 mov	 WORD PTR _pMsg$[ebp+11], ax
  000b8	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 2272 : 
; 2273 : 	LogAdd(LOG_BLACK, "[%s] WaitFriend List [%s]", gObj[lpMsg->Number].Name, Name.GetBuffer());

  000bd	0f bf 4e 04	 movsx	 ecx, WORD PTR [esi+4]
  000c1	69 c9 64 15 00
	00		 imul	 ecx, 5476		; 00001564H
  000c7	8d 45 f0	 lea	 eax, DWORD PTR _Name$[ebp]
  000ca	50		 push	 eax
  000cb	81 c1 6f 00 00
	00		 add	 ecx, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+111
  000d1	51		 push	 ecx
  000d2	68 00 00 00 00	 push	 OFFSET ??_C@_0BK@HLHJLCCE@?$FL?$CFs?$FN?5WaitFriend?5List?5?$FL?$CFs?$FN?$AA@
  000d7	6a 00		 push	 0
  000d9	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  000de	83 c4 1c	 add	 esp, 28			; 0000001cH
$LN3@WaitFriend:

; 2274 : }

  000e1	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000e4	33 cd		 xor	 ecx, ebp
  000e6	5e		 pop	 esi
  000e7	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000ec	8b e5		 mov	 esp, ebp
  000ee	5d		 pop	 ebp
  000ef	c3		 ret	 0
?WaitFriendListResult@@YAXPAUFHP_WAITFRIENDLIST_COUNT@@@Z ENDP ; WaitFriendListResult
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?FriendStateClientRecv@@YAXPAUPMSG_FRIEND_STATE_C@@H@Z ; FriendStateClientRecv
; Function compile flags: /Ogtp
;	COMDAT ?FriendStateClientRecv@@YAXPAUPMSG_FRIEND_STATE_C@@H@Z
_TEXT	SEGMENT
_pMsg$ = -24						; size = 18
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
_aIndex$ = 12						; size = 4
?FriendStateClientRecv@@YAXPAUPMSG_FRIEND_STATE_C@@H@Z PROC ; FriendStateClientRecv, COMDAT

; 2288 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 18	 sub	 esp, 24			; 00000018H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 0c	 mov	 esi, DWORD PTR _aIndex$[ebp]
  00014	57		 push	 edi
  00015	8b 7d 08	 mov	 edi, DWORD PTR _lpMsg$[ebp]

; 2289 : 	if ( !gObjIsConnectedGP(aIndex))

  00018	56		 push	 esi
  00019	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHH@Z ; gObjIsConnectedGP
  0001e	83 c4 04	 add	 esp, 4
  00021	85 c0		 test	 eax, eax
  00023	75 28		 jne	 SHORT $LN1@FriendStat

; 2290 : 	{
; 2291 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00025	68 f3 08 00 00	 push	 2291			; 000008f3H
  0002a	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0002f	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00034	50		 push	 eax
  00035	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0003a	83 c4 10	 add	 esp, 16			; 00000010H
  0003d	5f		 pop	 edi
  0003e	5e		 pop	 esi

; 2302 : }

  0003f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00042	33 cd		 xor	 ecx, ebp
  00044	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00049	8b e5		 mov	 esp, ebp
  0004b	5d		 pop	 ebp
  0004c	c3		 ret	 0
$LN1@FriendStat:

; 2292 : 		return;
; 2293 : 	}
; 2294 : 
; 2295 : 	FHP_FRIEND_STATE_C pMsg;
; 2296 : 
; 2297 : 	pMsg.h.set((LPBYTE)&pMsg, 0x62, sizeof(pMsg));
; 2298 : 	memcpy(pMsg.Name, gObj[aIndex].Name, sizeof(pMsg.Name));

  0004d	69 f6 64 15 00
	00		 imul	 esi, 5476		; 00001564H
  00053	81 c6 6f 00 00
	00		 add	 esi, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+111
  00059	8b 4e 04	 mov	 ecx, DWORD PTR [esi+4]
  0005c	8b 06		 mov	 eax, DWORD PTR [esi]
  0005e	66 8b 56 08	 mov	 dx, WORD PTR [esi+8]
  00062	89 4d f2	 mov	 DWORD PTR _pMsg$[ebp+10], ecx

; 2299 : 	pMsg.State = lpMsg->ChatVeto;
; 2300 : 
; 2301 : 	wsExDbCli.DataSend((PCHAR)&pMsg, pMsg.h.size);

  00065	6a 12		 push	 18			; 00000012H
  00067	8d 4d e8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0006a	89 45 ee	 mov	 DWORD PTR _pMsg$[ebp+6], eax
  0006d	8a 47 03	 mov	 al, BYTE PTR [edi+3]
  00070	51		 push	 ecx
  00071	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00076	66 c7 45 e8 c1
	12		 mov	 WORD PTR _pMsg$[ebp], 4801 ; 000012c1H
  0007c	c6 45 ea 62	 mov	 BYTE PTR _pMsg$[ebp+2], 98 ; 00000062H
  00080	66 89 55 f6	 mov	 WORD PTR _pMsg$[ebp+14], dx
  00084	88 45 f8	 mov	 BYTE PTR _pMsg$[ebp+16], al
  00087	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 2302 : }

  0008c	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0008f	5f		 pop	 edi
  00090	33 cd		 xor	 ecx, ebp
  00092	5e		 pop	 esi
  00093	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00098	8b e5		 mov	 esp, ebp
  0009a	5d		 pop	 ebp
  0009b	c3		 ret	 0
?FriendStateClientRecv@@YAXPAUPMSG_FRIEND_STATE_C@@H@Z ENDP ; FriendStateClientRecv
_TEXT	ENDS
PUBLIC	??_C@_0BH@OEEJLGGK@?$FL?$CFs?$FN?5Friend?5State?5?$CI?$CFd?$CJ?$AA@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendStateRecv@@YAXPAUFHP_FRIEND_STATE@@@Z	; FriendStateRecv
;	COMDAT ??_C@_0BH@OEEJLGGK@?$FL?$CFs?$FN?5Friend?5State?5?$CI?$CFd?$CJ?$AA@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_0BH@OEEJLGGK@?$FL?$CFs?$FN?5Friend?5State?5?$CI?$CFd?$CJ?$AA@ DB '['
	DB	'%s] Friend State (%d)', 00H			; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendStateRecv@@YAXPAUFHP_FRIEND_STATE@@@Z
_TEXT	SEGMENT
_pMsg$ = -32						; size = 14
_Name$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?FriendStateRecv@@YAXPAUFHP_FRIEND_STATE@@@Z PROC	; FriendStateRecv, COMDAT

; 2309 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 20	 sub	 esp, 32			; 00000020H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 2310 : 	char_ID Name(lpMsg->Name);

  00014	33 c0		 xor	 eax, eax
  00016	8d 4e 06	 lea	 ecx, DWORD PTR [esi+6]
  00019	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  0001c	89 45 f4	 mov	 DWORD PTR _Name$[ebp+4], eax
  0001f	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
  00023	88 45 fa	 mov	 BYTE PTR _Name$[ebp+10], al
  00026	85 c9		 test	 ecx, ecx
  00028	74 13		 je	 SHORT $LN4@FriendStat@2
  0002a	8b 01		 mov	 eax, DWORD PTR [ecx]
  0002c	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  0002f	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  00032	66 8b 41 08	 mov	 ax, WORD PTR [ecx+8]
  00036	89 55 f4	 mov	 DWORD PTR _Name$[ebp+4], edx
  00039	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
$LN4@FriendStat@2:

; 2311 : 
; 2312 : 	if ( !gObjIsConnectedGP(lpMsg->Number, Name.GetBuffer()))

  0003d	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  00041	8d 4d f0	 lea	 ecx, DWORD PTR _Name$[ebp]
  00044	51		 push	 ecx
  00045	52		 push	 edx
  00046	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHHPAD@Z ; gObjIsConnectedGP
  0004b	83 c4 08	 add	 esp, 8
  0004e	85 c0		 test	 eax, eax
  00050	75 2c		 jne	 SHORT $LN1@FriendStat@2

; 2313 : 	{
; 2314 : 		LogAdd(LOG_BLACK, "error-L2 : (%s) Index %s %d ", Name.GetBuffer(), __FILE__, __LINE__);

  00052	68 0a 09 00 00	 push	 2314			; 0000090aH
  00057	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0005c	8d 45 f0	 lea	 eax, DWORD PTR _Name$[ebp]
  0005f	50		 push	 eax
  00060	68 00 00 00 00	 push	 OFFSET ??_C@_0BN@DOMMEPOB@error?9L2?5?3?5?$CI?$CFs?$CJ?5Index?5?$CFs?5?$CFd?5?$AA@
  00065	6a 00		 push	 0
  00067	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0006c	83 c4 14	 add	 esp, 20			; 00000014H
  0006f	5e		 pop	 esi

; 2327 : }

  00070	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00073	33 cd		 xor	 ecx, ebp
  00075	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0007a	8b e5		 mov	 esp, ebp
  0007c	5d		 pop	 ebp
  0007d	c3		 ret	 0
$LN1@FriendStat@2:

; 2315 : 		return;
; 2316 : 	}
; 2317 : 
; 2318 : 	PMSG_FRIEND_STATE pMsg;
; 2319 : 
; 2320 : 	pMsg.h.set((LPBYTE)&pMsg, 0xC4, sizeof(pMsg));
; 2321 : 	memcpy(pMsg.Name, lpMsg->FriendName, sizeof(pMsg.Name));

  0007e	8b 56 14	 mov	 edx, DWORD PTR [esi+20]
  00081	66 8b 46 18	 mov	 ax, WORD PTR [esi+24]
  00085	8b 4e 10	 mov	 ecx, DWORD PTR [esi+16]
  00088	89 55 e7	 mov	 DWORD PTR _pMsg$[ebp+7], edx
  0008b	66 89 45 eb	 mov	 WORD PTR _pMsg$[ebp+11], ax

; 2322 : 	pMsg.State = lpMsg->State;
; 2323 : 
; 2324 : 	DataSend(lpMsg->Number, (LPBYTE)&pMsg, sizeof(pMsg));

  0008f	0f bf 46 04	 movsx	 eax, WORD PTR [esi+4]
  00093	6a 0e		 push	 14			; 0000000eH
  00095	8d 55 e0	 lea	 edx, DWORD PTR _pMsg$[ebp]
  00098	89 4d e3	 mov	 DWORD PTR _pMsg$[ebp+3], ecx
  0009b	8a 4e 1a	 mov	 cl, BYTE PTR [esi+26]
  0009e	52		 push	 edx
  0009f	50		 push	 eax
  000a0	66 c7 45 e0 c1
	0e		 mov	 WORD PTR _pMsg$[ebp], 3777 ; 00000ec1H
  000a6	c6 45 e2 c4	 mov	 BYTE PTR _pMsg$[ebp+2], 196 ; 000000c4H
  000aa	88 4d ed	 mov	 BYTE PTR _pMsg$[ebp+13], cl
  000ad	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 2325 : 
; 2326 : 	LogAdd(LOG_BLACK, "[%s] Friend State (%d)", gObj[lpMsg->Number].Name, lpMsg->State);

  000b2	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  000b6	0f b6 4e 1a	 movzx	 ecx, BYTE PTR [esi+26]
  000ba	69 d2 64 15 00
	00		 imul	 edx, 5476		; 00001564H
  000c0	51		 push	 ecx
  000c1	81 c2 6f 00 00
	00		 add	 edx, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+111
  000c7	52		 push	 edx
  000c8	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@OEEJLGGK@?$FL?$CFs?$FN?5Friend?5State?5?$CI?$CFd?$CJ?$AA@
  000cd	6a 00		 push	 0
  000cf	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2327 : }

  000d4	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000d7	83 c4 1c	 add	 esp, 28			; 0000001cH
  000da	33 cd		 xor	 ecx, ebp
  000dc	5e		 pop	 esi
  000dd	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000e2	8b e5		 mov	 esp, ebp
  000e4	5d		 pop	 ebp
  000e5	c3		 ret	 0
?FriendStateRecv@@YAXPAUFHP_FRIEND_STATE@@@Z ENDP	; FriendStateRecv
_TEXT	ENDS
PUBLIC	??_C@_0CG@JNIACLCP@error?9L3?5?3?5?$FL?$CFs?$FN?5Friend?5add?5?3?5Not@ ; `string'
PUBLIC	??_C@_0CD@OOGOJAIC@?$FL?$CFs?$FN?5Friend?5add?5request?5Name?3?5?$FL?$CF@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendAddRequest@@YAXPAUPMSG_FRIEND_ADD_REQ@@H@Z ; FriendAddRequest
;	COMDAT ??_C@_0CG@JNIACLCP@error?9L3?5?3?5?$FL?$CFs?$FN?5Friend?5add?5?3?5Not@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_0CG@JNIACLCP@error?9L3?5?3?5?$FL?$CFs?$FN?5Friend?5add?5?3?5Not@ DB 'e'
	DB	'rror-L3 : [%s] Friend add : Not self', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CD@OOGOJAIC@?$FL?$CFs?$FN?5Friend?5add?5request?5Name?3?5?$FL?$CF@
CONST	SEGMENT
??_C@_0CD@OOGOJAIC@?$FL?$CFs?$FN?5Friend?5add?5request?5Name?3?5?$FL?$CF@ DB '['
	DB	'%s] Friend add request Name: [%s]', 00H	; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendAddRequest@@YAXPAUPMSG_FRIEND_ADD_REQ@@H@Z
_TEXT	SEGMENT
_pMsg$ = -60						; size = 26
_pResult$158124 = -32					; size = 15
_szFriendName$ = -16					; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
_aIndex$ = 12						; size = 4
?FriendAddRequest@@YAXPAUPMSG_FRIEND_ADD_REQ@@H@Z PROC	; FriendAddRequest, COMDAT

; 2354 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 3c	 sub	 esp, 60			; 0000003cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	8b 5d 0c	 mov	 ebx, DWORD PTR _aIndex$[ebp]
  00014	56		 push	 esi
  00015	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 2355 : 	if ( !gObjIsConnectedGP(aIndex))

  00018	53		 push	 ebx
  00019	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHH@Z ; gObjIsConnectedGP
  0001e	83 c4 04	 add	 esp, 4
  00021	85 c0		 test	 eax, eax
  00023	75 28		 jne	 SHORT $LN3@FriendAddR

; 2356 : 	{
; 2357 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00025	68 35 09 00 00	 push	 2357			; 00000935H
  0002a	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0002f	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00034	50		 push	 eax
  00035	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0003a	83 c4 10	 add	 esp, 16			; 00000010H
  0003d	5e		 pop	 esi
  0003e	5b		 pop	 ebx

; 2387 : 	}
; 2388 : }		

  0003f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00042	33 cd		 xor	 ecx, ebp
  00044	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00049	8b e5		 mov	 esp, ebp
  0004b	5d		 pop	 ebp
  0004c	c3		 ret	 0
$LN3@FriendAddR:

; 2358 : 		return;
; 2359 : 	}
; 2360 : 
; 2361 : 	FHP_FRIEND_ADD_REQ pMsg;
; 2362 : 
; 2363 : 	pMsg.h.set((LPBYTE)&pMsg, 0x63, sizeof(pMsg));
; 2364 : 	memcpy(pMsg.Name, gObj[aIndex].Name, sizeof(pMsg.Name));

  0004d	8b c3		 mov	 eax, ebx
  0004f	69 c0 64 15 00
	00		 imul	 eax, 5476		; 00001564H
  00055	8b 88 6f 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+111]
  0005b	8b 90 73 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+115]
  00061	57		 push	 edi
  00062	8d b8 6f 00 00
	00		 lea	 edi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+111]
  00068	0f b7 47 08	 movzx	 eax, WORD PTR [edi+8]

; 2365 : 	memcpy(pMsg.FriendName, lpMsg->Name, sizeof(pMsg.FriendName));

  0006c	83 c6 03	 add	 esi, 3
  0006f	66 89 45 d2	 mov	 WORD PTR _pMsg$[ebp+14], ax
  00073	0f b7 46 08	 movzx	 eax, WORD PTR [esi+8]
  00077	89 4d ca	 mov	 DWORD PTR _pMsg$[ebp+6], ecx
  0007a	8b 0e		 mov	 ecx, DWORD PTR [esi]
  0007c	89 55 ce	 mov	 DWORD PTR _pMsg$[ebp+10], edx
  0007f	8b 56 04	 mov	 edx, DWORD PTR [esi+4]
  00082	66 89 45 dc	 mov	 WORD PTR _pMsg$[ebp+24], ax

; 2366 : 	pMsg.Number = aIndex;
; 2367 : 	char_ID szFriendName(lpMsg->Name);

  00086	33 c0		 xor	 eax, eax
  00088	66 c7 45 c4 c1
	1a		 mov	 WORD PTR _pMsg$[ebp], 6849 ; 00001ac1H
  0008e	c6 45 c6 63	 mov	 BYTE PTR _pMsg$[ebp+2], 99 ; 00000063H
  00092	89 4d d4	 mov	 DWORD PTR _pMsg$[ebp+16], ecx
  00095	89 55 d8	 mov	 DWORD PTR _pMsg$[ebp+20], edx
  00098	66 89 5d c8	 mov	 WORD PTR _pMsg$[ebp+4], bx
  0009c	89 45 f0	 mov	 DWORD PTR _szFriendName$[ebp], eax
  0009f	89 45 f4	 mov	 DWORD PTR _szFriendName$[ebp+4], eax
  000a2	66 89 45 f8	 mov	 WORD PTR _szFriendName$[ebp+8], ax
  000a6	88 45 fa	 mov	 BYTE PTR _szFriendName$[ebp+10], al
  000a9	85 f6		 test	 esi, esi
  000ab	74 0e		 je	 SHORT $LN8@FriendAddR
  000ad	66 8b 46 08	 mov	 ax, WORD PTR [esi+8]
  000b1	89 4d f0	 mov	 DWORD PTR _szFriendName$[ebp], ecx
  000b4	89 55 f4	 mov	 DWORD PTR _szFriendName$[ebp+4], edx
  000b7	66 89 45 f8	 mov	 WORD PTR _szFriendName$[ebp+8], ax
$LN8@FriendAddR:

; 2368 : 	
; 2369 : 	LogAdd(LOG_BLACK, "[%s] Friend add request Name: [%s]", gObj[aIndex].Name,		szFriendName.GetBuffer());

  000bb	8d 4d f0	 lea	 ecx, DWORD PTR _szFriendName$[ebp]
  000be	51		 push	 ecx
  000bf	57		 push	 edi
  000c0	68 00 00 00 00	 push	 OFFSET ??_C@_0CD@OOGOJAIC@?$FL?$CFs?$FN?5Friend?5add?5request?5Name?3?5?$FL?$CF@
  000c5	6a 00		 push	 0
  000c7	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  000cc	83 c4 10	 add	 esp, 16			; 00000010H

; 2370 : 
; 2371 : 	if ( !strcmp(gObj[aIndex].Name, szFriendName.GetBuffer()))

  000cf	8d 4d f0	 lea	 ecx, DWORD PTR _szFriendName$[ebp]
  000d2	8b c7		 mov	 eax, edi
$LL17@FriendAddR:
  000d4	8a 10		 mov	 dl, BYTE PTR [eax]
  000d6	3a 11		 cmp	 dl, BYTE PTR [ecx]
  000d8	75 1a		 jne	 SHORT $LN18@FriendAddR
  000da	84 d2		 test	 dl, dl
  000dc	74 12		 je	 SHORT $LN19@FriendAddR
  000de	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  000e1	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  000e4	75 0e		 jne	 SHORT $LN18@FriendAddR
  000e6	83 c0 02	 add	 eax, 2
  000e9	83 c1 02	 add	 ecx, 2
  000ec	84 d2		 test	 dl, dl
  000ee	75 e4		 jne	 SHORT $LL17@FriendAddR
$LN19@FriendAddR:
  000f0	33 c0		 xor	 eax, eax
  000f2	eb 05		 jmp	 SHORT $LN20@FriendAddR
$LN18@FriendAddR:
  000f4	1b c0		 sbb	 eax, eax
  000f6	83 d8 ff	 sbb	 eax, -1
$LN20@FriendAddR:
  000f9	85 c0		 test	 eax, eax
  000fb	75 4a		 jne	 SHORT $LN2@FriendAddR

; 2372 : 	{
; 2373 : 		LogAdd(LOG_BLACK, "error-L3 : [%s] Friend add : Not self", gObj[aIndex].Name);

  000fd	57		 push	 edi
  000fe	68 00 00 00 00	 push	 OFFSET ??_C@_0CG@JNIACLCP@error?9L3?5?3?5?$FL?$CFs?$FN?5Friend?5add?5?3?5Not@
  00103	50		 push	 eax
  00104	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2374 : 		
; 2375 : 		PMSG_FRIEND_ADD_RESULT pResult;
; 2376 : 
; 2377 : 		pResult.h.set((LPBYTE)&pResult, 0xC1, sizeof(pResult));
; 2378 : 		memcpy(pResult.Name, lpMsg->Name, sizeof(pMsg.Name));

  00109	8b 16		 mov	 edx, DWORD PTR [esi]
  0010b	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  0010e	66 8b 4e 08	 mov	 cx, WORD PTR [esi+8]
  00112	89 55 e4	 mov	 DWORD PTR _pResult$158124[ebp+4], edx

; 2379 : 		pResult.Result = 5;
; 2380 : 		pResult.State = -1;
; 2381 : 
; 2382 : 		DataSend(aIndex, (LPBYTE)&pResult, sizeof(pResult));

  00115	6a 0f		 push	 15			; 0000000fH
  00117	8d 55 e0	 lea	 edx, DWORD PTR _pResult$158124[ebp]
  0011a	52		 push	 edx
  0011b	53		 push	 ebx
  0011c	89 45 e8	 mov	 DWORD PTR _pResult$158124[ebp+8], eax
  0011f	66 89 4d ec	 mov	 WORD PTR _pResult$158124[ebp+12], cx
  00123	c7 45 e0 c1 0f
	c1 05		 mov	 DWORD PTR _pResult$158124[ebp], 96538561 ; 05c10fc1H
  0012a	c6 45 ee ff	 mov	 BYTE PTR _pResult$158124[ebp+14], 255 ; 000000ffH
  0012e	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00133	83 c4 18	 add	 esp, 24			; 00000018H
  00136	5f		 pop	 edi
  00137	5e		 pop	 esi
  00138	5b		 pop	 ebx

; 2387 : 	}
; 2388 : }		

  00139	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0013c	33 cd		 xor	 ecx, ebp
  0013e	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00143	8b e5		 mov	 esp, ebp
  00145	5d		 pop	 ebp
  00146	c3		 ret	 0
$LN2@FriendAddR:

; 2383 : 	}
; 2384 : 	else
; 2385 : 	{
; 2386 : 		wsExDbCli.DataSend((PCHAR)&pMsg, pMsg.h.size);

  00147	0f b6 45 c5	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  0014b	50		 push	 eax
  0014c	8d 4d c4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0014f	51		 push	 ecx
  00150	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00155	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 2387 : 	}
; 2388 : }		

  0015a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0015d	5f		 pop	 edi
  0015e	5e		 pop	 esi
  0015f	33 cd		 xor	 ecx, ebp
  00161	5b		 pop	 ebx
  00162	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00167	8b e5		 mov	 esp, ebp
  00169	5d		 pop	 ebp
  0016a	c3		 ret	 0
?FriendAddRequest@@YAXPAUPMSG_FRIEND_ADD_REQ@@H@Z ENDP	; FriendAddRequest
_TEXT	ENDS
PUBLIC	??_C@_0DB@NPDFCIKD@?$FL?$CFs?$FN?5Friend?5add?5result?5?3?5?$CI?$CFd?$CJ?5fr@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendAddResult@@YAXPAUFHP_FRIEND_ADD_RESULT@@@Z ; FriendAddResult
;	COMDAT ??_C@_0DB@NPDFCIKD@?$FL?$CFs?$FN?5Friend?5add?5result?5?3?5?$CI?$CFd?$CJ?5fr@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\winutil.h
CONST	SEGMENT
??_C@_0DB@NPDFCIKD@?$FL?$CFs?$FN?5Friend?5add?5result?5?3?5?$CI?$CFd?$CJ?5fr@ DB '['
	DB	'%s] Friend add result : (%d) friend Name : (%s)', 00H ; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendAddResult@@YAXPAUFHP_FRIEND_ADD_RESULT@@@Z
_TEXT	SEGMENT
_pMsg$ = -44						; size = 15
_szFriendName$ = -28					; size = 11
_Name$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?FriendAddResult@@YAXPAUFHP_FRIEND_ADD_RESULT@@@Z PROC	; FriendAddResult, COMDAT

; 2395 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 2c	 sub	 esp, 44			; 0000002cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 2396 : 	char_ID Name(lpMsg->Name);

  00014	33 c0		 xor	 eax, eax
  00016	8d 4e 07	 lea	 ecx, DWORD PTR [esi+7]
  00019	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  0001c	89 45 f4	 mov	 DWORD PTR _Name$[ebp+4], eax
  0001f	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
  00023	88 45 fa	 mov	 BYTE PTR _Name$[ebp+10], al
  00026	85 c9		 test	 ecx, ecx
  00028	74 13		 je	 SHORT $LN4@FriendAddR@2
  0002a	8b 01		 mov	 eax, DWORD PTR [ecx]
  0002c	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  0002f	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  00032	66 8b 41 08	 mov	 ax, WORD PTR [ecx+8]
  00036	89 55 f4	 mov	 DWORD PTR _Name$[ebp+4], edx
  00039	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
$LN4@FriendAddR@2:

; 2397 : 
; 2398 : 	if ( !gObjIsConnectedGP(lpMsg->Number, Name.GetBuffer()))

  0003d	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  00041	8d 4d f0	 lea	 ecx, DWORD PTR _Name$[ebp]
  00044	51		 push	 ecx
  00045	52		 push	 edx
  00046	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHHPAD@Z ; gObjIsConnectedGP
  0004b	83 c4 08	 add	 esp, 8
  0004e	85 c0		 test	 eax, eax
  00050	75 27		 jne	 SHORT $LN1@FriendAddR@2

; 2399 : 	{
; 2400 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00052	68 60 09 00 00	 push	 2400			; 00000960H
  00057	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0005c	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00061	50		 push	 eax
  00062	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00067	83 c4 10	 add	 esp, 16			; 00000010H
  0006a	5e		 pop	 esi

; 2416 : }

  0006b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0006e	33 cd		 xor	 ecx, ebp
  00070	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00075	8b e5		 mov	 esp, ebp
  00077	5d		 pop	 ebp
  00078	c3		 ret	 0
$LN1@FriendAddR@2:

; 2401 : 		return;
; 2402 : 	}
; 2403 : 
; 2404 : 	PMSG_FRIEND_ADD_RESULT pMsg;
; 2405 : 	char_ID szFriendName(lpMsg->FriendName);

  00079	33 c9		 xor	 ecx, ecx
  0007b	8d 46 11	 lea	 eax, DWORD PTR [esi+17]
  0007e	89 4d e4	 mov	 DWORD PTR _szFriendName$[ebp], ecx
  00081	89 4d e8	 mov	 DWORD PTR _szFriendName$[ebp+4], ecx
  00084	66 89 4d ec	 mov	 WORD PTR _szFriendName$[ebp+8], cx
  00088	88 4d ee	 mov	 BYTE PTR _szFriendName$[ebp+10], cl
  0008b	85 c0		 test	 eax, eax
  0008d	74 13		 je	 SHORT $LN9@FriendAddR@2
  0008f	8b 08		 mov	 ecx, DWORD PTR [eax]
  00091	8b 50 04	 mov	 edx, DWORD PTR [eax+4]
  00094	89 4d e4	 mov	 DWORD PTR _szFriendName$[ebp], ecx
  00097	66 8b 48 08	 mov	 cx, WORD PTR [eax+8]
  0009b	89 55 e8	 mov	 DWORD PTR _szFriendName$[ebp+4], edx
  0009e	66 89 4d ec	 mov	 WORD PTR _szFriendName$[ebp+8], cx
$LN9@FriendAddR@2:

; 2406 : 
; 2407 : 	pMsg.h.set((LPBYTE)&pMsg, 0xC1, sizeof(pMsg));
; 2408 : 	memcpy(pMsg.Name, lpMsg->FriendName, sizeof(pMsg.Name));

  000a2	8b 10		 mov	 edx, DWORD PTR [eax]
  000a4	b1 c1		 mov	 cl, 193			; 000000c1H
  000a6	88 4d d6	 mov	 BYTE PTR _pMsg$[ebp+2], cl
  000a9	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  000ac	89 55 d8	 mov	 DWORD PTR _pMsg$[ebp+4], edx
  000af	66 8b 50 08	 mov	 dx, WORD PTR [eax+8]

; 2409 : 	pMsg.Result = lpMsg->Result;

  000b3	8a 46 06	 mov	 al, BYTE PTR [esi+6]
  000b6	66 89 55 e0	 mov	 WORD PTR _pMsg$[ebp+12], dx
  000ba	88 45 d7	 mov	 BYTE PTR _pMsg$[ebp+3], al

; 2410 : 	pMsg.State = lpMsg->Server;
; 2411 : 
; 2412 : 	DataSend(lpMsg->Number, (LPBYTE)&pMsg, sizeof(pMsg));

  000bd	0f bf 46 04	 movsx	 eax, WORD PTR [esi+4]
  000c1	6a 0f		 push	 15			; 0000000fH
  000c3	8d 55 d4	 lea	 edx, DWORD PTR _pMsg$[ebp]
  000c6	89 4d dc	 mov	 DWORD PTR _pMsg$[ebp+8], ecx
  000c9	8a 4e 1b	 mov	 cl, BYTE PTR [esi+27]
  000cc	52		 push	 edx
  000cd	50		 push	 eax
  000ce	66 c7 45 d4 c1
	0f		 mov	 WORD PTR _pMsg$[ebp], 4033 ; 00000fc1H
  000d4	88 4d e2	 mov	 BYTE PTR _pMsg$[ebp+14], cl
  000d7	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 2413 : 
; 2414 : 	LogAdd(LOG_BLACK, "[%s] Friend add result : (%d) friend Name : (%s)",
; 2415 : 		Name.GetBuffer(), lpMsg->Result, szFriendName.GetBuffer());

  000dc	0f b6 56 06	 movzx	 edx, BYTE PTR [esi+6]
  000e0	8d 4d e4	 lea	 ecx, DWORD PTR _szFriendName$[ebp]
  000e3	51		 push	 ecx
  000e4	52		 push	 edx
  000e5	8d 45 f0	 lea	 eax, DWORD PTR _Name$[ebp]
  000e8	50		 push	 eax
  000e9	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@NPDFCIKD@?$FL?$CFs?$FN?5Friend?5add?5result?5?3?5?$CI?$CFd?$CJ?5fr@
  000ee	6a 00		 push	 0
  000f0	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2416 : }

  000f5	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000f8	83 c4 20	 add	 esp, 32			; 00000020H
  000fb	33 cd		 xor	 ecx, ebp
  000fd	5e		 pop	 esi
  000fe	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00103	8b e5		 mov	 esp, ebp
  00105	5d		 pop	 ebp
  00106	c3		 ret	 0
?FriendAddResult@@YAXPAUFHP_FRIEND_ADD_RESULT@@@Z ENDP	; FriendAddResult
_TEXT	ENDS
PUBLIC	??_C@_0CB@IIBIOFAA@?$FL?$CFs?$FN?5WaitFriend?5add?5request?5?$FL?$CFs?$FN@ ; `string'
PUBLIC	_lpMsg$GSCopy$
PUBLIC	__$ArrayPad$
PUBLIC	?WaitFriendAddRequest@@YAXPAUPMSG_FRIEND_ADD_SIN_RESULT@@H@Z ; WaitFriendAddRequest
;	COMDAT ??_C@_0CB@IIBIOFAA@?$FL?$CFs?$FN?5WaitFriend?5add?5request?5?$FL?$CFs?$FN@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\winutil.h
CONST	SEGMENT
??_C@_0CB@IIBIOFAA@?$FL?$CFs?$FN?5WaitFriend?5add?5request?5?$FL?$CFs?$FN@ DB '['
	DB	'%s] WaitFriend add request [%s]', 00H	; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?WaitFriendAddRequest@@YAXPAUPMSG_FRIEND_ADD_SIN_RESULT@@H@Z
_TEXT	SEGMENT
_lpMsg$GSCopy$ = -48					; size = 4
_pMsg$ = -44						; size = 26
_fname$158159 = -16					; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
_aIndex$ = 12						; size = 4
?WaitFriendAddRequest@@YAXPAUPMSG_FRIEND_ADD_SIN_RESULT@@H@Z PROC ; WaitFriendAddRequest, COMDAT

; 2431 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 30	 sub	 esp, 48			; 00000030H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	8b 5d 0c	 mov	 ebx, DWORD PTR _aIndex$[ebp]
  00014	56		 push	 esi
  00015	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 2432 : 	if ( !gObjIsConnectedGP(aIndex))

  00018	53		 push	 ebx

; 2435 : 		return;
; 2436 : 	}
; 2437 : 
; 2438 : 	FHP_WAITFRIEND_ADD_REQ pMsg;
; 2439 : 
; 2440 : 	pMsg.h.set((LPBYTE)&pMsg, 0x64, sizeof(pMsg));

  00019	89 75 d0	 mov	 DWORD PTR _lpMsg$GSCopy$[ebp], esi
  0001c	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHH@Z ; gObjIsConnectedGP
  00021	83 c4 04	 add	 esp, 4
  00024	85 c0		 test	 eax, eax
  00026	75 28		 jne	 SHORT $LN1@WaitFriend@2

; 2433 : 	{
; 2434 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00028	68 82 09 00 00	 push	 2434			; 00000982H
  0002d	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  00032	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00037	50		 push	 eax
  00038	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0003d	83 c4 10	 add	 esp, 16			; 00000010H
  00040	5e		 pop	 esi
  00041	5b		 pop	 ebx

; 2451 : 	}
; 2452 : }

  00042	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00045	33 cd		 xor	 ecx, ebp
  00047	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0004c	8b e5		 mov	 esp, ebp
  0004e	5d		 pop	 ebp
  0004f	c3		 ret	 0
$LN1@WaitFriend@2:

; 2441 : 	memcpy(pMsg.Name, gObj[aIndex].Name, sizeof(pMsg.Name));

  00050	8b c3		 mov	 eax, ebx
  00052	69 c0 64 15 00
	00		 imul	 eax, 5476		; 00001564H
  00058	8b 88 6f 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+111]
  0005e	8b 90 73 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+115]
  00064	57		 push	 edi
  00065	8d b8 6f 00 00
	00		 lea	 edi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+111]
  0006b	0f b7 47 08	 movzx	 eax, WORD PTR [edi+8]

; 2442 : 	memcpy(pMsg.FriendName, lpMsg->Name, sizeof(pMsg.FriendName));

  0006f	83 c6 04	 add	 esi, 4
  00072	89 4d da	 mov	 DWORD PTR _pMsg$[ebp+6], ecx
  00075	8b 0e		 mov	 ecx, DWORD PTR [esi]
  00077	66 89 45 e2	 mov	 WORD PTR _pMsg$[ebp+14], ax
  0007b	0f b7 46 08	 movzx	 eax, WORD PTR [esi+8]
  0007f	89 55 de	 mov	 DWORD PTR _pMsg$[ebp+10], edx
  00082	8b 56 04	 mov	 edx, DWORD PTR [esi+4]
  00085	89 4d e4	 mov	 DWORD PTR _pMsg$[ebp+16], ecx

; 2443 : 	pMsg.Result = lpMsg->Result;

  00088	8b 4d d0	 mov	 ecx, DWORD PTR _lpMsg$GSCopy$[ebp]
  0008b	66 89 45 ec	 mov	 WORD PTR _pMsg$[ebp+24], ax
  0008f	89 55 e8	 mov	 DWORD PTR _pMsg$[ebp+20], edx
  00092	8a 51 03	 mov	 dl, BYTE PTR [ecx+3]

; 2444 : 	pMsg.Number = aIndex;
; 2445 : 
; 2446 : 	wsExDbCli.DataSend((PCHAR)&pMsg, pMsg.h.size);

  00095	6a 1a		 push	 26			; 0000001aH
  00097	8d 45 d4	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0009a	50		 push	 eax
  0009b	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  000a0	66 c7 45 d4 c1
	1a		 mov	 WORD PTR _pMsg$[ebp], 6849 ; 00001ac1H
  000a6	c6 45 d6 64	 mov	 BYTE PTR _pMsg$[ebp+2], 100 ; 00000064H
  000aa	88 55 d7	 mov	 BYTE PTR _pMsg$[ebp+3], dl
  000ad	66 89 5d d8	 mov	 WORD PTR _pMsg$[ebp+4], bx
  000b1	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 2447 : 
; 2448 : 	{
; 2449 : 		char_ID fname(lpMsg->Name);

  000b6	33 c0		 xor	 eax, eax
  000b8	89 45 f0	 mov	 DWORD PTR _fname$158159[ebp], eax
  000bb	89 45 f4	 mov	 DWORD PTR _fname$158159[ebp+4], eax
  000be	66 89 45 f8	 mov	 WORD PTR _fname$158159[ebp+8], ax
  000c2	88 45 fa	 mov	 BYTE PTR _fname$158159[ebp+10], al
  000c5	85 f6		 test	 esi, esi
  000c7	74 13		 je	 SHORT $LN6@WaitFriend@2
  000c9	8b 0e		 mov	 ecx, DWORD PTR [esi]
  000cb	8b 56 04	 mov	 edx, DWORD PTR [esi+4]
  000ce	66 8b 46 08	 mov	 ax, WORD PTR [esi+8]
  000d2	89 4d f0	 mov	 DWORD PTR _fname$158159[ebp], ecx
  000d5	89 55 f4	 mov	 DWORD PTR _fname$158159[ebp+4], edx
  000d8	66 89 45 f8	 mov	 WORD PTR _fname$158159[ebp+8], ax
$LN6@WaitFriend@2:

; 2450 : 		LogAdd(LOG_BLACK, "[%s] WaitFriend add request [%s]", gObj[aIndex].Name, fname.GetBuffer());

  000dc	8d 4d f0	 lea	 ecx, DWORD PTR _fname$158159[ebp]
  000df	51		 push	 ecx
  000e0	57		 push	 edi
  000e1	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@IIBIOFAA@?$FL?$CFs?$FN?5WaitFriend?5add?5request?5?$FL?$CFs?$FN@
  000e6	6a 00		 push	 0
  000e8	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2451 : 	}
; 2452 : }

  000ed	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000f0	83 c4 10	 add	 esp, 16			; 00000010H
  000f3	5f		 pop	 edi
  000f4	5e		 pop	 esi
  000f5	33 cd		 xor	 ecx, ebp
  000f7	5b		 pop	 ebx
  000f8	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000fd	8b e5		 mov	 esp, ebp
  000ff	5d		 pop	 ebp
  00100	c3		 ret	 0
?WaitFriendAddRequest@@YAXPAUPMSG_FRIEND_ADD_SIN_RESULT@@H@Z ENDP ; WaitFriendAddRequest
_TEXT	ENDS
PUBLIC	??_C@_0CF@CCKIBLLA@?$FL?$CFs?$FN?5WaitFriend?5add?5result?5?$CI?$CFd?$CJ?5@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?WaitFriendAddResult@@YAXPAUFHP_WAITFRIEND_ADD_RESULT@@@Z ; WaitFriendAddResult
;	COMDAT ??_C@_0CF@CCKIBLLA@?$FL?$CFs?$FN?5WaitFriend?5add?5result?5?$CI?$CFd?$CJ?5@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\winutil.h
CONST	SEGMENT
??_C@_0CF@CCKIBLLA@?$FL?$CFs?$FN?5WaitFriend?5add?5result?5?$CI?$CFd?$CJ?5@ DB '['
	DB	'%s] WaitFriend add result (%d) [%s]', 00H	; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?WaitFriendAddResult@@YAXPAUFHP_WAITFRIEND_ADD_RESULT@@@Z
_TEXT	SEGMENT
_pMsg$ = -44						; size = 15
_szFriendName$ = -28					; size = 11
_Name$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?WaitFriendAddResult@@YAXPAUFHP_WAITFRIEND_ADD_RESULT@@@Z PROC ; WaitFriendAddResult, COMDAT

; 2459 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 2c	 sub	 esp, 44			; 0000002cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 2460 : 	char_ID Name(lpMsg->Name);

  00014	33 c0		 xor	 eax, eax
  00016	8d 4e 07	 lea	 ecx, DWORD PTR [esi+7]
  00019	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  0001c	89 45 f4	 mov	 DWORD PTR _Name$[ebp+4], eax
  0001f	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
  00023	88 45 fa	 mov	 BYTE PTR _Name$[ebp+10], al
  00026	85 c9		 test	 ecx, ecx
  00028	74 13		 je	 SHORT $LN4@WaitFriend@3
  0002a	8b 01		 mov	 eax, DWORD PTR [ecx]
  0002c	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  0002f	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  00032	66 8b 41 08	 mov	 ax, WORD PTR [ecx+8]
  00036	89 55 f4	 mov	 DWORD PTR _Name$[ebp+4], edx
  00039	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
$LN4@WaitFriend@3:

; 2461 : 
; 2462 : 	if ( !gObjIsConnectedGP(lpMsg->Number, Name.GetBuffer()))

  0003d	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  00041	8d 4d f0	 lea	 ecx, DWORD PTR _Name$[ebp]
  00044	51		 push	 ecx
  00045	52		 push	 edx
  00046	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHHPAD@Z ; gObjIsConnectedGP
  0004b	83 c4 08	 add	 esp, 8
  0004e	85 c0		 test	 eax, eax
  00050	75 27		 jne	 SHORT $LN1@WaitFriend@3

; 2463 : 	{
; 2464 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00052	68 a0 09 00 00	 push	 2464			; 000009a0H
  00057	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0005c	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00061	50		 push	 eax
  00062	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00067	83 c4 10	 add	 esp, 16			; 00000010H
  0006a	5e		 pop	 esi

; 2481 : }

  0006b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0006e	33 cd		 xor	 ecx, ebp
  00070	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00075	8b e5		 mov	 esp, ebp
  00077	5d		 pop	 ebp
  00078	c3		 ret	 0
$LN1@WaitFriend@3:

; 2465 : 		return;
; 2466 : 	}
; 2467 : 
; 2468 : 	PMSG_FRIEND_ADD_RESULT pMsg;
; 2469 : 
; 2470 : 	pMsg.h.set((LPBYTE)&pMsg, 0xC1, sizeof(pMsg));
; 2471 : 	memcpy(pMsg.Name, lpMsg->FriendName, sizeof(pMsg.Name));

  00079	8b 4e 11	 mov	 ecx, DWORD PTR [esi+17]
  0007c	8b 56 15	 mov	 edx, DWORD PTR [esi+21]
  0007f	b0 c1		 mov	 al, 193			; 000000c1H
  00081	88 45 d6	 mov	 BYTE PTR _pMsg$[ebp+2], al
  00084	8d 46 11	 lea	 eax, DWORD PTR [esi+17]
  00087	89 4d d8	 mov	 DWORD PTR _pMsg$[ebp+4], ecx
  0008a	66 8b 48 08	 mov	 cx, WORD PTR [eax+8]
  0008e	66 89 4d e0	 mov	 WORD PTR _pMsg$[ebp+12], cx

; 2472 : 	pMsg.Result = lpMsg->Result;
; 2473 : 	pMsg.State = lpMsg->pServer;

  00092	8a 4e 1b	 mov	 cl, BYTE PTR [esi+27]
  00095	89 55 dc	 mov	 DWORD PTR _pMsg$[ebp+8], edx
  00098	8a 56 06	 mov	 dl, BYTE PTR [esi+6]
  0009b	88 4d e2	 mov	 BYTE PTR _pMsg$[ebp+14], cl

; 2474 : 
; 2475 : 	char_ID szFriendName(lpMsg->FriendName);

  0009e	33 c9		 xor	 ecx, ecx
  000a0	66 c7 45 d4 c1
	0f		 mov	 WORD PTR _pMsg$[ebp], 4033 ; 00000fc1H
  000a6	88 55 d7	 mov	 BYTE PTR _pMsg$[ebp+3], dl
  000a9	89 4d e4	 mov	 DWORD PTR _szFriendName$[ebp], ecx
  000ac	89 4d e8	 mov	 DWORD PTR _szFriendName$[ebp+4], ecx
  000af	66 89 4d ec	 mov	 WORD PTR _szFriendName$[ebp+8], cx
  000b3	88 4d ee	 mov	 BYTE PTR _szFriendName$[ebp+10], cl
  000b6	85 c0		 test	 eax, eax
  000b8	74 13		 je	 SHORT $LN11@WaitFriend@3
  000ba	8b 08		 mov	 ecx, DWORD PTR [eax]
  000bc	89 4d e4	 mov	 DWORD PTR _szFriendName$[ebp], ecx
  000bf	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  000c2	66 8b 40 08	 mov	 ax, WORD PTR [eax+8]
  000c6	89 4d e8	 mov	 DWORD PTR _szFriendName$[ebp+4], ecx
  000c9	66 89 45 ec	 mov	 WORD PTR _szFriendName$[ebp+8], ax
$LN11@WaitFriend@3:

; 2476 : 
; 2477 : 	LogAdd(LOG_BLACK, "[%s] WaitFriend add result (%d) [%s]",
; 2478 : 		Name.GetBuffer(), lpMsg->Result, szFriendName.GetBuffer());

  000cd	8d 4d e4	 lea	 ecx, DWORD PTR _szFriendName$[ebp]
  000d0	51		 push	 ecx
  000d1	0f b6 d2	 movzx	 edx, dl
  000d4	52		 push	 edx
  000d5	8d 45 f0	 lea	 eax, DWORD PTR _Name$[ebp]
  000d8	50		 push	 eax
  000d9	68 00 00 00 00	 push	 OFFSET ??_C@_0CF@CCKIBLLA@?$FL?$CFs?$FN?5WaitFriend?5add?5result?5?$CI?$CFd?$CJ?5@
  000de	6a 00		 push	 0
  000e0	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2479 : 
; 2480 : 	DataSend(lpMsg->Number, (LPBYTE)&pMsg, sizeof(pMsg));

  000e5	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  000e9	6a 0f		 push	 15			; 0000000fH
  000eb	8d 4d d4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  000ee	51		 push	 ecx
  000ef	52		 push	 edx
  000f0	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 2481 : }

  000f5	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000f8	83 c4 20	 add	 esp, 32			; 00000020H
  000fb	33 cd		 xor	 ecx, ebp
  000fd	5e		 pop	 esi
  000fe	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00103	8b e5		 mov	 esp, ebp
  00105	5d		 pop	 ebp
  00106	c3		 ret	 0
?WaitFriendAddResult@@YAXPAUFHP_WAITFRIEND_ADD_RESULT@@@Z ENDP ; WaitFriendAddResult
_TEXT	ENDS
PUBLIC	??_C@_0BN@HLFBKLAE@?$FL?$CFs?$FN?5Friend?5del?5request?5?$FL?$CFs?$FN?$AA@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendDelRequest@@YAXPAUPMSG_FRIEND_DEL_REQ@@H@Z ; FriendDelRequest
;	COMDAT ??_C@_0BN@HLFBKLAE@?$FL?$CFs?$FN?5Friend?5del?5request?5?$FL?$CFs?$FN?$AA@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\winutil.h
CONST	SEGMENT
??_C@_0BN@HLFBKLAE@?$FL?$CFs?$FN?5Friend?5del?5request?5?$FL?$CFs?$FN?$AA@ DB '['
	DB	'%s] Friend del request [%s]', 00H		; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendDelRequest@@YAXPAUPMSG_FRIEND_DEL_REQ@@H@Z
_TEXT	SEGMENT
_pMsg$ = -44						; size = 26
_Name$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
_aIndex$ = 12						; size = 4
?FriendDelRequest@@YAXPAUPMSG_FRIEND_DEL_REQ@@H@Z PROC	; FriendDelRequest, COMDAT

; 2488 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 2c	 sub	 esp, 44			; 0000002cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	8b 5d 0c	 mov	 ebx, DWORD PTR _aIndex$[ebp]
  00014	56		 push	 esi
  00015	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 2489 : 	if ( !gObjIsConnectedGP(aIndex))

  00018	53		 push	 ebx
  00019	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHH@Z ; gObjIsConnectedGP
  0001e	83 c4 04	 add	 esp, 4
  00021	85 c0		 test	 eax, eax
  00023	75 28		 jne	 SHORT $LN1@FriendDelR

; 2490 : 	{
; 2491 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00025	68 bb 09 00 00	 push	 2491			; 000009bbH
  0002a	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0002f	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00034	50		 push	 eax
  00035	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0003a	83 c4 10	 add	 esp, 16			; 00000010H
  0003d	5e		 pop	 esi
  0003e	5b		 pop	 ebx

; 2506 : }

  0003f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00042	33 cd		 xor	 ecx, ebp
  00044	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00049	8b e5		 mov	 esp, ebp
  0004b	5d		 pop	 ebp
  0004c	c3		 ret	 0
$LN1@FriendDelR:

; 2492 : 		return;
; 2493 : 	}
; 2494 : 
; 2495 : 	FHP_FRIEND_ADD_REQ pMsg;
; 2496 : 	char_ID Name(lpMsg->Name);

  0004d	33 c0		 xor	 eax, eax
  0004f	57		 push	 edi
  00050	8d 4e 03	 lea	 ecx, DWORD PTR [esi+3]
  00053	8b d0		 mov	 edx, eax
  00055	66 8b f8	 mov	 di, ax
  00058	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  0005b	89 55 f4	 mov	 DWORD PTR _Name$[ebp+4], edx
  0005e	66 89 7d f8	 mov	 WORD PTR _Name$[ebp+8], di
  00062	88 45 fa	 mov	 BYTE PTR _Name$[ebp+10], al
  00065	85 c9		 test	 ecx, ecx
  00067	74 13		 je	 SHORT $LN4@FriendDelR
  00069	8b 01		 mov	 eax, DWORD PTR [ecx]
  0006b	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  0006e	66 8b 79 08	 mov	 di, WORD PTR [ecx+8]
  00072	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  00075	89 55 f4	 mov	 DWORD PTR _Name$[ebp+4], edx
  00078	66 89 7d f8	 mov	 WORD PTR _Name$[ebp+8], di
$LN4@FriendDelR:

; 2497 : 
; 2498 : 	pMsg.h.set((LPBYTE)&pMsg, 0x65, sizeof(pMsg));
; 2499 : 	memcpy(pMsg.Name, gObj[aIndex].Name, sizeof(pMsg.Name));

  0007c	8b cb		 mov	 ecx, ebx
  0007e	69 c9 64 15 00
	00		 imul	 ecx, 5476		; 00001564H
  00084	8d b1 6f 00 00
	00		 lea	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[ecx+111]
  0008a	8b 0e		 mov	 ecx, DWORD PTR [esi]
  0008c	89 4d da	 mov	 DWORD PTR _pMsg$[ebp+6], ecx
  0008f	8b 4e 04	 mov	 ecx, DWORD PTR [esi+4]
  00092	89 4d de	 mov	 DWORD PTR _pMsg$[ebp+10], ecx
  00095	66 8b 4e 08	 mov	 cx, WORD PTR [esi+8]

; 2500 : 	memcpy(pMsg.FriendName, Name.GetBuffer(), sizeof(pMsg.FriendName));

  00099	89 55 e8	 mov	 DWORD PTR _pMsg$[ebp+20], edx

; 2501 : 	pMsg.Number = aIndex;
; 2502 : 
; 2503 : 	wsExDbCli.DataSend((PCHAR)&pMsg, pMsg.h.size);

  0009c	6a 1a		 push	 26			; 0000001aH
  0009e	8d 55 d4	 lea	 edx, DWORD PTR _pMsg$[ebp]
  000a1	66 89 4d e2	 mov	 WORD PTR _pMsg$[ebp+14], cx
  000a5	52		 push	 edx
  000a6	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  000ab	66 c7 45 d4 c1
	1a		 mov	 WORD PTR _pMsg$[ebp], 6849 ; 00001ac1H
  000b1	c6 45 d6 65	 mov	 BYTE PTR _pMsg$[ebp+2], 101 ; 00000065H
  000b5	89 45 e4	 mov	 DWORD PTR _pMsg$[ebp+16], eax
  000b8	66 89 7d ec	 mov	 WORD PTR _pMsg$[ebp+24], di
  000bc	66 89 5d d8	 mov	 WORD PTR _pMsg$[ebp+4], bx
  000c0	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 2504 : 
; 2505 : 	LogAdd(LOG_BLACK, "[%s] Friend del request [%s]", gObj[aIndex].Name, Name.GetBuffer());

  000c5	8d 45 f0	 lea	 eax, DWORD PTR _Name$[ebp]
  000c8	50		 push	 eax
  000c9	56		 push	 esi
  000ca	68 00 00 00 00	 push	 OFFSET ??_C@_0BN@HLFBKLAE@?$FL?$CFs?$FN?5Friend?5del?5request?5?$FL?$CFs?$FN?$AA@
  000cf	6a 00		 push	 0
  000d1	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2506 : }

  000d6	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000d9	83 c4 10	 add	 esp, 16			; 00000010H
  000dc	5f		 pop	 edi
  000dd	5e		 pop	 esi
  000de	33 cd		 xor	 ecx, ebp
  000e0	5b		 pop	 ebx
  000e1	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000e6	8b e5		 mov	 esp, ebp
  000e8	5d		 pop	 ebp
  000e9	c3		 ret	 0
?FriendDelRequest@@YAXPAUPMSG_FRIEND_DEL_REQ@@H@Z ENDP	; FriendDelRequest
_TEXT	ENDS
PUBLIC	??_C@_0CB@NCMBHLMH@?$FL?$CFs?$FN?5Friend?5del?5result?5?$CI?$CFd?$CJ?5?$FL?$CFs?$FN@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendDelResult@@YAXPAUFHP_FRIEND_DEL_RESULT@@@Z ; FriendDelResult
;	COMDAT ??_C@_0CB@NCMBHLMH@?$FL?$CFs?$FN?5Friend?5del?5result?5?$CI?$CFd?$CJ?5?$FL?$CFs?$FN@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\winutil.h
CONST	SEGMENT
??_C@_0CB@NCMBHLMH@?$FL?$CFs?$FN?5Friend?5del?5result?5?$CI?$CFd?$CJ?5?$FL?$CFs?$FN@ DB '['
	DB	'%s] Friend del result (%d) [%s]', 00H	; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendDelResult@@YAXPAUFHP_FRIEND_DEL_RESULT@@@Z
_TEXT	SEGMENT
_pMsg$ = -44						; size = 14
_FriendName$ = -28					; size = 11
_Name$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?FriendDelResult@@YAXPAUFHP_FRIEND_DEL_RESULT@@@Z PROC	; FriendDelResult, COMDAT

; 2519 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 2c	 sub	 esp, 44			; 0000002cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 2520 : 	char_ID Name(lpMsg->Name);

  00014	33 c0		 xor	 eax, eax
  00016	8d 4e 07	 lea	 ecx, DWORD PTR [esi+7]
  00019	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  0001c	89 45 f4	 mov	 DWORD PTR _Name$[ebp+4], eax
  0001f	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
  00023	88 45 fa	 mov	 BYTE PTR _Name$[ebp+10], al
  00026	85 c9		 test	 ecx, ecx
  00028	74 13		 je	 SHORT $LN4@FriendDelR@2
  0002a	8b 01		 mov	 eax, DWORD PTR [ecx]
  0002c	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  0002f	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  00032	66 8b 41 08	 mov	 ax, WORD PTR [ecx+8]
  00036	89 55 f4	 mov	 DWORD PTR _Name$[ebp+4], edx
  00039	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
$LN4@FriendDelR@2:

; 2521 : 
; 2522 : 	if ( !gObjIsConnectedGP(lpMsg->Number, Name.GetBuffer()))

  0003d	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  00041	8d 4d f0	 lea	 ecx, DWORD PTR _Name$[ebp]
  00044	51		 push	 ecx
  00045	52		 push	 edx
  00046	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHHPAD@Z ; gObjIsConnectedGP
  0004b	83 c4 08	 add	 esp, 8
  0004e	85 c0		 test	 eax, eax
  00050	75 27		 jne	 SHORT $LN1@FriendDelR@2

; 2523 : 	{
; 2524 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00052	68 dc 09 00 00	 push	 2524			; 000009dcH
  00057	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0005c	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00061	50		 push	 eax
  00062	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00067	83 c4 10	 add	 esp, 16			; 00000010H
  0006a	5e		 pop	 esi

; 2539 : }

  0006b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0006e	33 cd		 xor	 ecx, ebp
  00070	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00075	8b e5		 mov	 esp, ebp
  00077	5d		 pop	 ebp
  00078	c3		 ret	 0
$LN1@FriendDelR@2:

; 2525 : 		return;
; 2526 : 	}
; 2527 : 
; 2528 : 	PMSG_FRIEND_DEL_RESULT pMsg;
; 2529 : 	char_ID FriendName(lpMsg->FriendName);

  00079	33 c9		 xor	 ecx, ecx
  0007b	8d 46 11	 lea	 eax, DWORD PTR [esi+17]
  0007e	89 4d e4	 mov	 DWORD PTR _FriendName$[ebp], ecx
  00081	89 4d e8	 mov	 DWORD PTR _FriendName$[ebp+4], ecx
  00084	66 89 4d ec	 mov	 WORD PTR _FriendName$[ebp+8], cx
  00088	88 4d ee	 mov	 BYTE PTR _FriendName$[ebp+10], cl
  0008b	85 c0		 test	 eax, eax
  0008d	74 13		 je	 SHORT $LN9@FriendDelR@2
  0008f	8b 08		 mov	 ecx, DWORD PTR [eax]
  00091	8b 50 04	 mov	 edx, DWORD PTR [eax+4]
  00094	89 4d e4	 mov	 DWORD PTR _FriendName$[ebp], ecx
  00097	66 8b 48 08	 mov	 cx, WORD PTR [eax+8]
  0009b	89 55 e8	 mov	 DWORD PTR _FriendName$[ebp+4], edx
  0009e	66 89 4d ec	 mov	 WORD PTR _FriendName$[ebp+8], cx
$LN9@FriendDelR@2:

; 2530 : 
; 2531 : 	pMsg.h.set((LPBYTE)&pMsg, 0xC3, sizeof(pMsg));
; 2532 : 	memcpy(pMsg.Name, lpMsg->FriendName, sizeof(pMsg.Name));

  000a2	8b 10		 mov	 edx, DWORD PTR [eax]
  000a4	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  000a7	89 55 d8	 mov	 DWORD PTR _pMsg$[ebp+4], edx
  000aa	66 8b 50 08	 mov	 dx, WORD PTR [eax+8]

; 2533 : 	pMsg.Result = lpMsg->Result;

  000ae	8a 46 06	 mov	 al, BYTE PTR [esi+6]
  000b1	89 4d dc	 mov	 DWORD PTR _pMsg$[ebp+8], ecx
  000b4	66 89 55 e0	 mov	 WORD PTR _pMsg$[ebp+12], dx

; 2534 : 
; 2535 : 	LogAdd(LOG_BLACK, "[%s] Friend del result (%d) [%s]",
; 2536 : 		Name.GetBuffer(), lpMsg->Result, FriendName.GetBuffer());

  000b8	0f b6 d0	 movzx	 edx, al
  000bb	8d 4d e4	 lea	 ecx, DWORD PTR _FriendName$[ebp]
  000be	51		 push	 ecx
  000bf	52		 push	 edx
  000c0	88 45 d7	 mov	 BYTE PTR _pMsg$[ebp+3], al
  000c3	8d 45 f0	 lea	 eax, DWORD PTR _Name$[ebp]
  000c6	50		 push	 eax
  000c7	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@NCMBHLMH@?$FL?$CFs?$FN?5Friend?5del?5result?5?$CI?$CFd?$CJ?5?$FL?$CFs?$FN@
  000cc	6a 00		 push	 0
  000ce	66 c7 45 d4 c1
	0e		 mov	 WORD PTR _pMsg$[ebp], 3777 ; 00000ec1H
  000d4	c6 45 d6 c3	 mov	 BYTE PTR _pMsg$[ebp+2], 195 ; 000000c3H
  000d8	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2537 : 
; 2538 : 	DataSend(lpMsg->Number, (LPBYTE)&pMsg, sizeof(pMsg));

  000dd	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  000e1	6a 0e		 push	 14			; 0000000eH
  000e3	8d 4d d4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  000e6	51		 push	 ecx
  000e7	52		 push	 edx
  000e8	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 2539 : }

  000ed	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000f0	83 c4 20	 add	 esp, 32			; 00000020H
  000f3	33 cd		 xor	 ecx, ebp
  000f5	5e		 pop	 esi
  000f6	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000fb	8b e5		 mov	 esp, ebp
  000fd	5d		 pop	 ebp
  000fe	c3		 ret	 0
?FriendDelResult@@YAXPAUFHP_FRIEND_DEL_RESULT@@@Z ENDP	; FriendDelResult
_TEXT	ENDS
PUBLIC	??_C@_0CC@HAGNMCFJ@?$FL?$CFs?$FN?5Chatroom?5create?5request?5?$FL?$CFs@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendChatRoomCreateReq@@YAXPAUPMSG_FRIEND_ROOMCREATE_REQ@@H@Z ; FriendChatRoomCreateReq
;	COMDAT ??_C@_0CC@HAGNMCFJ@?$FL?$CFs?$FN?5Chatroom?5create?5request?5?$FL?$CFs@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\winutil.h
CONST	SEGMENT
??_C@_0CC@HAGNMCFJ@?$FL?$CFs?$FN?5Chatroom?5create?5request?5?$FL?$CFs@ DB '['
	DB	'%s] Chatroom create request [%s]', 00H	; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendChatRoomCreateReq@@YAXPAUPMSG_FRIEND_ROOMCREATE_REQ@@H@Z
_TEXT	SEGMENT
_pMsg$ = -44						; size = 26
_szName$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
_aIndex$ = 12						; size = 4
?FriendChatRoomCreateReq@@YAXPAUPMSG_FRIEND_ROOMCREATE_REQ@@H@Z PROC ; FriendChatRoomCreateReq, COMDAT

; 2553 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 2c	 sub	 esp, 44			; 0000002cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	8b 5d 08	 mov	 ebx, DWORD PTR _lpMsg$[ebp]
  00014	56		 push	 esi
  00015	8b 75 0c	 mov	 esi, DWORD PTR _aIndex$[ebp]

; 2554 : 	if ( !gObjIsConnectedGP(aIndex))

  00018	56		 push	 esi
  00019	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHH@Z ; gObjIsConnectedGP
  0001e	83 c4 04	 add	 esp, 4
  00021	85 c0		 test	 eax, eax
  00023	75 28		 jne	 SHORT $LN1@FriendChat

; 2555 : 	{
; 2556 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00025	68 fc 09 00 00	 push	 2556			; 000009fcH
  0002a	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0002f	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00034	50		 push	 eax
  00035	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0003a	83 c4 10	 add	 esp, 16			; 00000010H
  0003d	5e		 pop	 esi
  0003e	5b		 pop	 ebx

; 2572 : }

  0003f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00042	33 cd		 xor	 ecx, ebp
  00044	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00049	8b e5		 mov	 esp, ebp
  0004b	5d		 pop	 ebp
  0004c	c3		 ret	 0
$LN1@FriendChat:

; 2557 : 		return;
; 2558 : 	}
; 2559 : 
; 2560 : 	FHP_FRIEND_CHATROOM_CREATE_REQ pMsg;
; 2561 : 
; 2562 : 	pMsg.h.set((LPBYTE)&pMsg, 0x66, sizeof(pMsg));
; 2563 : 	memcpy(pMsg.Name, gObj[aIndex].Name, sizeof(pMsg.Name));

  0004d	8b c6		 mov	 eax, esi
  0004f	69 c0 64 15 00
	00		 imul	 eax, 5476		; 00001564H
  00055	8b 88 6f 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+111]
  0005b	8b 90 73 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+115]
  00061	57		 push	 edi
  00062	8d b8 6f 00 00
	00		 lea	 edi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+111]
  00068	0f b7 47 08	 movzx	 eax, WORD PTR [edi+8]
  0006c	89 4d da	 mov	 DWORD PTR _pMsg$[ebp+6], ecx

; 2564 : 	pMsg.Number = aIndex;
; 2565 : 	memcpy(pMsg.fName, lpMsg->Name, sizeof(pMsg.fName));

  0006f	8b 4b 03	 mov	 ecx, DWORD PTR [ebx+3]
  00072	66 89 75 d8	 mov	 WORD PTR _pMsg$[ebp+4], si
  00076	8d 73 03	 lea	 esi, DWORD PTR [ebx+3]
  00079	89 4d e4	 mov	 DWORD PTR _pMsg$[ebp+16], ecx
  0007c	66 89 45 e2	 mov	 WORD PTR _pMsg$[ebp+14], ax
  00080	0f b7 46 08	 movzx	 eax, WORD PTR [esi+8]

; 2566 : 	
; 2567 : 	wsExDbCli.DataSend((PCHAR)&pMsg, pMsg.h.size);

  00084	6a 1a		 push	 26			; 0000001aH
  00086	8d 4d d4	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00089	89 55 de	 mov	 DWORD PTR _pMsg$[ebp+10], edx
  0008c	8b 56 04	 mov	 edx, DWORD PTR [esi+4]
  0008f	51		 push	 ecx
  00090	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00095	66 c7 45 d4 c1
	1a		 mov	 WORD PTR _pMsg$[ebp], 6849 ; 00001ac1H
  0009b	c6 45 d6 66	 mov	 BYTE PTR _pMsg$[ebp+2], 102 ; 00000066H
  0009f	89 55 e8	 mov	 DWORD PTR _pMsg$[ebp+20], edx
  000a2	66 89 45 ec	 mov	 WORD PTR _pMsg$[ebp+24], ax
  000a6	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 2568 : 
; 2569 : 	char_ID szName(lpMsg->Name);

  000ab	33 c0		 xor	 eax, eax
  000ad	89 45 f0	 mov	 DWORD PTR _szName$[ebp], eax
  000b0	89 45 f4	 mov	 DWORD PTR _szName$[ebp+4], eax
  000b3	66 89 45 f8	 mov	 WORD PTR _szName$[ebp+8], ax
  000b7	88 45 fa	 mov	 BYTE PTR _szName$[ebp+10], al
  000ba	85 f6		 test	 esi, esi
  000bc	74 13		 je	 SHORT $LN6@FriendChat
  000be	8b 16		 mov	 edx, DWORD PTR [esi]
  000c0	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  000c3	66 8b 4e 08	 mov	 cx, WORD PTR [esi+8]
  000c7	89 55 f0	 mov	 DWORD PTR _szName$[ebp], edx
  000ca	89 45 f4	 mov	 DWORD PTR _szName$[ebp+4], eax
  000cd	66 89 4d f8	 mov	 WORD PTR _szName$[ebp+8], cx
$LN6@FriendChat:

; 2570 : 
; 2571 : 	LogAdd(LOG_BLACK, "[%s] Chatroom create request [%s]", gObj[aIndex].Name, szName.GetBuffer());

  000d1	8d 55 f0	 lea	 edx, DWORD PTR _szName$[ebp]
  000d4	52		 push	 edx
  000d5	57		 push	 edi
  000d6	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@HAGNMCFJ@?$FL?$CFs?$FN?5Chatroom?5create?5request?5?$FL?$CFs@
  000db	6a 00		 push	 0
  000dd	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2572 : }

  000e2	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000e5	83 c4 10	 add	 esp, 16			; 00000010H
  000e8	5f		 pop	 edi
  000e9	5e		 pop	 esi
  000ea	33 cd		 xor	 ecx, ebp
  000ec	5b		 pop	 ebx
  000ed	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000f2	8b e5		 mov	 esp, ebp
  000f4	5d		 pop	 ebp
  000f5	c3		 ret	 0
?FriendChatRoomCreateReq@@YAXPAUPMSG_FRIEND_ROOMCREATE_REQ@@H@Z ENDP ; FriendChatRoomCreateReq
_TEXT	ENDS
PUBLIC	??_C@_0CN@LPLKDCJE@?$FL?$CFs?$FN?5Chatroom?5create?5result?5?$CI?$CFd?$CJ@ ; `string'
PUBLIC	??_C@_0BM@JEKCBGDH@error?9L2?5?3?5Index?5?$CFs?5?$CFd?5?$CI?$CFs?$CJ?$AA@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendChatRoomCreateResult@@YAXPAUFHP_FRIEND_CHATROOM_CREATE_RESULT@@@Z ; FriendChatRoomCreateResult
;	COMDAT ??_C@_0CN@LPLKDCJE@?$FL?$CFs?$FN?5Chatroom?5create?5result?5?$CI?$CFd?$CJ@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_0CN@LPLKDCJE@?$FL?$CFs?$FN?5Chatroom?5create?5result?5?$CI?$CFd?$CJ@ DB '['
	DB	'%s] Chatroom create result (%d) ticket:(%d)', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BM@JEKCBGDH@error?9L2?5?3?5Index?5?$CFs?5?$CFd?5?$CI?$CFs?$CJ?$AA@
CONST	SEGMENT
??_C@_0BM@JEKCBGDH@error?9L2?5?3?5Index?5?$CFs?5?$CFd?5?$CI?$CFs?$CJ?$AA@ DB 'e'
	DB	'rror-L2 : Index %s %d (%s)', 00H		; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendChatRoomCreateResult@@YAXPAUFHP_FRIEND_CHATROOM_CREATE_RESULT@@@Z
_TEXT	SEGMENT
_pMsg$ = -52						; size = 36
_Name$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?FriendChatRoomCreateResult@@YAXPAUFHP_FRIEND_CHATROOM_CREATE_RESULT@@@Z PROC ; FriendChatRoomCreateResult, COMDAT

; 2590 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 34	 sub	 esp, 52			; 00000034H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 2591 : 	char_ID Name(lpMsg->Name);

  00014	33 c0		 xor	 eax, eax
  00016	8d 4e 06	 lea	 ecx, DWORD PTR [esi+6]
  00019	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  0001c	89 45 f4	 mov	 DWORD PTR _Name$[ebp+4], eax
  0001f	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
  00023	88 45 fa	 mov	 BYTE PTR _Name$[ebp+10], al
  00026	85 c9		 test	 ecx, ecx
  00028	74 13		 je	 SHORT $LN4@FriendChat@2
  0002a	8b 01		 mov	 eax, DWORD PTR [ecx]
  0002c	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  0002f	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  00032	66 8b 41 08	 mov	 ax, WORD PTR [ecx+8]
  00036	89 55 f4	 mov	 DWORD PTR _Name$[ebp+4], edx
  00039	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
$LN4@FriendChat@2:

; 2592 : 
; 2593 : 	if ( !gObjIsConnectedGP(lpMsg->Number, Name.GetBuffer()))

  0003d	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  00041	8d 4d f0	 lea	 ecx, DWORD PTR _Name$[ebp]
  00044	51		 push	 ecx
  00045	52		 push	 edx
  00046	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHHPAD@Z ; gObjIsConnectedGP
  0004b	83 c4 08	 add	 esp, 8
  0004e	85 c0		 test	 eax, eax
  00050	75 2c		 jne	 SHORT $LN1@FriendChat@2

; 2594 : 	{
; 2595 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d (%s)", __FILE__, __LINE__, Name.GetBuffer());

  00052	8d 45 f0	 lea	 eax, DWORD PTR _Name$[ebp]
  00055	50		 push	 eax
  00056	68 23 0a 00 00	 push	 2595			; 00000a23H
  0005b	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  00060	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@JEKCBGDH@error?9L2?5?3?5Index?5?$CFs?5?$CFd?5?$CI?$CFs?$CJ?$AA@
  00065	6a 00		 push	 0
  00067	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0006c	83 c4 14	 add	 esp, 20			; 00000014H
  0006f	5e		 pop	 esi

; 2613 : }

  00070	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00073	33 cd		 xor	 ecx, ebp
  00075	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0007a	8b e5		 mov	 esp, ebp
  0007c	5d		 pop	 ebp
  0007d	c3		 ret	 0
$LN1@FriendChat@2:

; 2596 : 		return;
; 2597 : 	}
; 2598 : 
; 2599 : 	PMSG_FRIEND_ROOMCREATE_RESULT pMsg;
; 2600 : 
; 2601 : 	pMsg.h.setE((LPBYTE)&pMsg, 0xCA, sizeof(pMsg));
; 2602 : 	memcpy(pMsg.ServerIp, lpMsg->ServerIp, sizeof(pMsg.ServerIp));

  0007e	8b 56 1e	 mov	 edx, DWORD PTR [esi+30]
  00081	8b 4e 1a	 mov	 ecx, DWORD PTR [esi+26]
  00084	8b 46 22	 mov	 eax, DWORD PTR [esi+34]
  00087	89 55 d3	 mov	 DWORD PTR _pMsg$[ebp+7], edx
  0008a	0f b6 56 28	 movzx	 edx, BYTE PTR [esi+40]
  0008e	89 4d cf	 mov	 DWORD PTR _pMsg$[ebp+3], ecx
  00091	66 8b 4e 26	 mov	 cx, WORD PTR [esi+38]
  00095	88 55 dd	 mov	 BYTE PTR _pMsg$[ebp+17], dl

; 2603 : 	pMsg.RoomNumber = lpMsg->RoomNumber;
; 2604 : 	pMsg.Ticket = lpMsg->Ticket;
; 2605 : 	pMsg.Type = lpMsg->Type;

  00098	0f b6 56 30	 movzx	 edx, BYTE PTR [esi+48]
  0009c	89 45 d7	 mov	 DWORD PTR _pMsg$[ebp+11], eax
  0009f	0f b7 46 2a	 movzx	 eax, WORD PTR [esi+42]
  000a3	66 89 4d db	 mov	 WORD PTR _pMsg$[ebp+15], cx
  000a7	8b 4e 2c	 mov	 ecx, DWORD PTR [esi+44]
  000aa	89 4d e0	 mov	 DWORD PTR _pMsg$[ebp+20], ecx

; 2606 : 	pMsg.Result = lpMsg->Result;
; 2607 : 	memcpy(pMsg.Name, lpMsg->FriendName, sizeof(pMsg.Name));

  000ad	8b 4e 10	 mov	 ecx, DWORD PTR [esi+16]
  000b0	88 55 e4	 mov	 BYTE PTR _pMsg$[ebp+24], dl
  000b3	8b 56 14	 mov	 edx, DWORD PTR [esi+20]
  000b6	66 89 45 de	 mov	 WORD PTR _pMsg$[ebp+18], ax
  000ba	8a 46 03	 mov	 al, BYTE PTR [esi+3]
  000bd	89 4d e5	 mov	 DWORD PTR _pMsg$[ebp+25], ecx
  000c0	89 55 e9	 mov	 DWORD PTR _pMsg$[ebp+29], edx

; 2608 : 
; 2609 : 	DataSend(lpMsg->Number, (LPBYTE)&pMsg, sizeof(pMsg));

  000c3	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  000c7	88 45 ef	 mov	 BYTE PTR _pMsg$[ebp+35], al
  000ca	0f b7 46 18	 movzx	 eax, WORD PTR [esi+24]
  000ce	6a 24		 push	 36			; 00000024H
  000d0	8d 4d cc	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  000d3	51		 push	 ecx
  000d4	52		 push	 edx
  000d5	66 c7 45 cc c3
	24		 mov	 WORD PTR _pMsg$[ebp], 9411 ; 000024c3H
  000db	c6 45 ce ca	 mov	 BYTE PTR _pMsg$[ebp+2], 202 ; 000000caH
  000df	66 89 45 ed	 mov	 WORD PTR _pMsg$[ebp+33], ax
  000e3	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 2610 : 
; 2611 : 	LogAdd(LOG_BLACK, "[%s] Chatroom create result (%d) ticket:(%d)",
; 2612 : 		gObj[lpMsg->Number].Name, lpMsg->Result, lpMsg->Ticket);

  000e8	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  000ec	8b 46 2c	 mov	 eax, DWORD PTR [esi+44]
  000ef	69 d2 64 15 00
	00		 imul	 edx, 5476		; 00001564H
  000f5	0f b6 4e 03	 movzx	 ecx, BYTE PTR [esi+3]
  000f9	50		 push	 eax
  000fa	51		 push	 ecx
  000fb	81 c2 6f 00 00
	00		 add	 edx, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+111
  00101	52		 push	 edx
  00102	68 00 00 00 00	 push	 OFFSET ??_C@_0CN@LPLKDCJE@?$FL?$CFs?$FN?5Chatroom?5create?5result?5?$CI?$CFd?$CJ@
  00107	6a 00		 push	 0
  00109	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2613 : }

  0010e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00111	83 c4 20	 add	 esp, 32			; 00000020H
  00114	33 cd		 xor	 ecx, ebp
  00116	5e		 pop	 esi
  00117	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0011c	8b e5		 mov	 esp, ebp
  0011e	5d		 pop	 ebp
  0011f	c3		 ret	 0
?FriendChatRoomCreateResult@@YAXPAUFHP_FRIEND_CHATROOM_CREATE_RESULT@@@Z ENDP ; FriendChatRoomCreateResult
_TEXT	ENDS
PUBLIC	??_C@_0CC@MFFMGDDE@JoinServer?5mail?5send?5?$CFs?5?$CISize?3?$CFd@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?MngFriendMemoSend@@YAXPAUPMSG_JG_MEMO_SEND@@@Z	; MngFriendMemoSend
EXTRN	_memcpy:PROC
;	COMDAT ??_C@_0CC@MFFMGDDE@JoinServer?5mail?5send?5?$CFs?5?$CISize?3?$CFd@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\winutil.h
CONST	SEGMENT
??_C@_0CC@MFFMGDDE@JoinServer?5mail?5send?5?$CFs?5?$CISize?3?$CFd@ DB 'Jo'
	DB	'inServer mail send %s (Size:%d)', 00H	; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?MngFriendMemoSend@@YAXPAUPMSG_JG_MEMO_SEND@@@Z
_TEXT	SEGMENT
_pMsg$ = -1104						; size = 1088
_Name$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?MngFriendMemoSend@@YAXPAUPMSG_JG_MEMO_SEND@@@Z PROC	; MngFriendMemoSend, COMDAT

; 2711 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 50 04 00
	00		 sub	 esp, 1104		; 00000450H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]

; 2712 : 	char_ID Name(lpMsg->Name);

  00016	33 c9		 xor	 ecx, ecx
  00018	8d 50 04	 lea	 edx, DWORD PTR [eax+4]
  0001b	89 4d f0	 mov	 DWORD PTR _Name$[ebp], ecx
  0001e	89 4d f4	 mov	 DWORD PTR _Name$[ebp+4], ecx
  00021	66 89 4d f8	 mov	 WORD PTR _Name$[ebp+8], cx
  00025	88 4d fa	 mov	 BYTE PTR _Name$[ebp+10], cl
  00028	85 d2		 test	 edx, edx
  0002a	74 13		 je	 SHORT $LN6@MngFriendM
  0002c	8b 0a		 mov	 ecx, DWORD PTR [edx]
  0002e	89 4d f0	 mov	 DWORD PTR _Name$[ebp], ecx
  00031	8b 4a 04	 mov	 ecx, DWORD PTR [edx+4]
  00034	89 4d f4	 mov	 DWORD PTR _Name$[ebp+4], ecx
  00037	66 8b 4a 08	 mov	 cx, WORD PTR [edx+8]
  0003b	66 89 4d f8	 mov	 WORD PTR _Name$[ebp+8], cx
$LN6@MngFriendM:

; 2713 : 
; 2714 : 	if ( lpMsg->MemoSize < 0 || lpMsg->MemoSize > 1000 )

  0003f	0f b7 48 38	 movzx	 ecx, WORD PTR [eax+56]
  00043	66 85 c9	 test	 cx, cx
  00046	0f 88 24 01 00
	00		 js	 $LN2@MngFriendM
  0004c	56		 push	 esi
  0004d	be e8 03 00 00	 mov	 esi, 1000		; 000003e8H
  00052	66 3b ce	 cmp	 cx, si
  00055	0f 8f 14 01 00
	00		 jg	 $LN16@MngFriendM

; 2715 : 		return;
; 2716 : 
; 2717 : 	if ( Name.GetLength() < 1 )

  0005b	8d 4d f0	 lea	 ecx, DWORD PTR _Name$[ebp]
  0005e	8d 71 01	 lea	 esi, DWORD PTR [ecx+1]
  00061	53		 push	 ebx
$LL15@MngFriendM:
  00062	8a 19		 mov	 bl, BYTE PTR [ecx]
  00064	41		 inc	 ecx
  00065	84 db		 test	 bl, bl
  00067	75 f9		 jne	 SHORT $LL15@MngFriendM
  00069	2b ce		 sub	 ecx, esi
  0006b	83 f9 01	 cmp	 ecx, 1
  0006e	0f 8c fa 00 00
	00		 jl	 $LN17@MngFriendM

; 2718 : 		return;
; 2719 : 
; 2720 : 	FHP_FRIEND_MEMO_SEND pMsg;
; 2721 : 
; 2722 : 	int bsize = lpMsg->MemoSize + sizeof(pMsg) - sizeof(pMsg.Memo);

  00074	0f b7 70 38	 movzx	 esi, WORD PTR [eax+56]
  00078	0f bf de	 movsx	 ebx, si
  0007b	83 c3 58	 add	 ebx, 88			; 00000058H

; 2723 : 
; 2724 : 	pMsg.h.set((LPBYTE)&pMsg, 0x70, bsize);

  0007e	8b cb		 mov	 ecx, ebx
  00080	c1 e9 08	 shr	 ecx, 8
  00083	88 8d b1 fb ff
	ff		 mov	 BYTE PTR _pMsg$[ebp+1], cl

; 2725 : 	pMsg.WindowGuid = 0;
; 2726 : 	pMsg.MemoSize = lpMsg->MemoSize;
; 2727 : 	pMsg.Number = -1;

  00089	83 c9 ff	 or	 ecx, -1
  0008c	66 89 8d b4 fb
	ff ff		 mov	 WORD PTR _pMsg$[ebp+4], cx
  00093	57		 push	 edi
  00094	66 89 b5 f2 fb
	ff ff		 mov	 WORD PTR _pMsg$[ebp+66], si

; 2728 : 	pMsg.Dir = 0;
; 2729 : 	pMsg.Action = 0;
; 2730 : 	memcpy(pMsg.Subject, lpMsg->Subject, sizeof(pMsg.Subject));

  0009b	8d 70 18	 lea	 esi, DWORD PTR [eax+24]
  0009e	c6 85 b0 fb ff
	ff c2		 mov	 BYTE PTR _pMsg$[ebp], 194 ; 000000c2H
  000a5	88 9d b2 fb ff
	ff		 mov	 BYTE PTR _pMsg$[ebp+2], bl
  000ab	c6 85 b3 fb ff
	ff 70		 mov	 BYTE PTR _pMsg$[ebp+3], 112 ; 00000070H
  000b2	c7 85 b8 fb ff
	ff 00 00 00 00	 mov	 DWORD PTR _pMsg$[ebp+8], 0
  000bc	66 c7 85 f0 fb
	ff ff 00 00	 mov	 WORD PTR _pMsg$[ebp+64], 0
  000c5	b9 08 00 00 00	 mov	 ecx, 8
  000ca	8d bd d0 fb ff
	ff		 lea	 edi, DWORD PTR _pMsg$[ebp+32]
  000d0	f3 a5		 rep movsd

; 2731 : 	memcpy(pMsg.Name, lpMsg->Name , sizeof(pMsg.Name));

  000d2	8b 0a		 mov	 ecx, DWORD PTR [edx]
  000d4	89 8d bc fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+12], ecx
  000da	8b 4a 04	 mov	 ecx, DWORD PTR [edx+4]
  000dd	66 8b 52 08	 mov	 dx, WORD PTR [edx+8]
  000e1	89 8d c0 fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+16], ecx

; 2732 : 	memset(pMsg.Photo, 0, sizeof(pMsg.Photo));

  000e7	33 c9		 xor	 ecx, ecx
  000e9	89 8d f4 fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+68], ecx
  000ef	89 8d f8 fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+72], ecx
  000f5	89 8d fc fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+76], ecx
  000fb	89 8d 00 fc ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+80], ecx
  00101	66 89 8d 04 fc
	ff ff		 mov	 WORD PTR _pMsg$[ebp+84], cx

; 2733 : 	memcpy(pMsg.ToName, lpMsg->TargetName, sizeof(pMsg.ToName));

  00108	8b 48 0e	 mov	 ecx, DWORD PTR [eax+14]
  0010b	89 8d c6 fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+22], ecx
  00111	66 8b 48 16	 mov	 cx, WORD PTR [eax+22]
  00115	66 89 95 c4 fb
	ff ff		 mov	 WORD PTR _pMsg$[ebp+20], dx
  0011c	8b 50 12	 mov	 edx, DWORD PTR [eax+18]
  0011f	66 89 8d ce fb
	ff ff		 mov	 WORD PTR _pMsg$[ebp+30], cx

; 2734 : 	memcpy(pMsg.Memo, lpMsg->Memo, lpMsg->MemoSize);

  00126	0f b7 48 38	 movzx	 ecx, WORD PTR [eax+56]
  0012a	89 95 ca fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+26], edx
  00130	0f bf d1	 movsx	 edx, cx
  00133	52		 push	 edx
  00134	83 c0 3a	 add	 eax, 58			; 0000003aH
  00137	50		 push	 eax
  00138	8d 85 06 fc ff
	ff		 lea	 eax, DWORD PTR _pMsg$[ebp+86]
  0013e	50		 push	 eax
  0013f	e8 00 00 00 00	 call	 _memcpy
  00144	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2735 : 
; 2736 : 	wsExDbCli.DataSend((PCHAR)&pMsg, bsize);

  00147	53		 push	 ebx
  00148	8d 8d b0 fb ff
	ff		 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0014e	51		 push	 ecx
  0014f	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00154	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 2737 : 
; 2738 : 	LogAdd(LOG_BLACK, "JoinServer mail send %s (Size:%d)", Name.GetBuffer(), bsize);

  00159	53		 push	 ebx
  0015a	8d 55 f0	 lea	 edx, DWORD PTR _Name$[ebp]
  0015d	52		 push	 edx
  0015e	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@MFFMGDDE@JoinServer?5mail?5send?5?$CFs?5?$CISize?3?$CFd@
  00163	6a 00		 push	 0
  00165	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0016a	83 c4 10	 add	 esp, 16			; 00000010H
  0016d	5f		 pop	 edi
$LN17@MngFriendM:
  0016e	5b		 pop	 ebx
$LN16@MngFriendM:
  0016f	5e		 pop	 esi
$LN2@MngFriendM:

; 2739 : }

  00170	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00173	33 cd		 xor	 ecx, ebp
  00175	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0017a	8b e5		 mov	 esp, ebp
  0017c	5d		 pop	 ebp
  0017d	c3		 ret	 0
?MngFriendMemoSend@@YAXPAUPMSG_JG_MEMO_SEND@@@Z ENDP	; MngFriendMemoSend
_TEXT	ENDS
PUBLIC	??_C@_04JEGKNAHI@Mail?$AA@			; `string'
PUBLIC	??_C@_0CO@FGOJBJPG@?$FL?$CFs?$FN?5Friend?5mail?5Send?5result?5?3?5?$CI@ ; `string'
PUBLIC	??_C@_0CD@EFIPOPHK@JoinServer?5Send?5Mail?5result?5?3?5?$CI?$CF@ ; `string'
PUBLIC	??_C@_06EBHHHLPK@webzen?$AA@			; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendMemoSendResult@@YAXPAUFHP_FRIEND_MEMO_SEND_RESULT@@@Z ; FriendMemoSendResult
;	COMDAT ??_C@_04JEGKNAHI@Mail?$AA@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_04JEGKNAHI@Mail?$AA@ DB 'Mail', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CO@FGOJBJPG@?$FL?$CFs?$FN?5Friend?5mail?5Send?5result?5?3?5?$CI@
CONST	SEGMENT
??_C@_0CO@FGOJBJPG@?$FL?$CFs?$FN?5Friend?5mail?5Send?5result?5?3?5?$CI@ DB '['
	DB	'%s] Friend mail Send result : (%d) guid:(%d)', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CD@EFIPOPHK@JoinServer?5Send?5Mail?5result?5?3?5?$CI?$CF@
CONST	SEGMENT
??_C@_0CD@EFIPOPHK@JoinServer?5Send?5Mail?5result?5?3?5?$CI?$CF@ DB 'Join'
	DB	'Server Send Mail result : (%d)', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_06EBHHHLPK@webzen?$AA@
CONST	SEGMENT
??_C@_06EBHHHLPK@webzen?$AA@ DB 'webzen', 00H		; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendMemoSendResult@@YAXPAUFHP_FRIEND_MEMO_SEND_RESULT@@@Z
_TEXT	SEGMENT
_pMsg$ = -24						; size = 8
_Name$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?FriendMemoSendResult@@YAXPAUFHP_FRIEND_MEMO_SEND_RESULT@@@Z PROC ; FriendMemoSendResult, COMDAT

; 2776 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 18	 sub	 esp, 24			; 00000018H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 2777 : 	char_ID Name(lpMsg->Name);

  00014	33 c0		 xor	 eax, eax
  00016	8d 4e 06	 lea	 ecx, DWORD PTR [esi+6]
  00019	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  0001c	89 45 f4	 mov	 DWORD PTR _Name$[ebp+4], eax
  0001f	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
  00023	88 45 fa	 mov	 BYTE PTR _Name$[ebp+10], al
  00026	85 c9		 test	 ecx, ecx
  00028	74 13		 je	 SHORT $LN6@FriendMemo
  0002a	8b 01		 mov	 eax, DWORD PTR [ecx]
  0002c	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  0002f	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  00032	66 8b 41 08	 mov	 ax, WORD PTR [ecx+8]
  00036	89 55 f4	 mov	 DWORD PTR _Name$[ebp+4], edx
  00039	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
$LN6@FriendMemo:

; 2778 : 
; 2779 : 	if ( !strcmp(Name.GetBuffer(), "webzen"))	// #warning Deathway

  0003d	ba 00 00 00 00	 mov	 edx, OFFSET ??_C@_06EBHHHLPK@webzen?$AA@
  00042	8d 4d f0	 lea	 ecx, DWORD PTR _Name$[ebp]
$LL15@FriendMemo:
  00045	8a 01		 mov	 al, BYTE PTR [ecx]
  00047	3a 02		 cmp	 al, BYTE PTR [edx]
  00049	75 1a		 jne	 SHORT $LN16@FriendMemo
  0004b	84 c0		 test	 al, al
  0004d	74 12		 je	 SHORT $LN17@FriendMemo
  0004f	8a 41 01	 mov	 al, BYTE PTR [ecx+1]
  00052	3a 42 01	 cmp	 al, BYTE PTR [edx+1]
  00055	75 0e		 jne	 SHORT $LN16@FriendMemo
  00057	83 c1 02	 add	 ecx, 2
  0005a	83 c2 02	 add	 edx, 2
  0005d	84 c0		 test	 al, al
  0005f	75 e4		 jne	 SHORT $LL15@FriendMemo
$LN17@FriendMemo:
  00061	33 c0		 xor	 eax, eax
  00063	eb 05		 jmp	 SHORT $LN18@FriendMemo
$LN16@FriendMemo:
  00065	1b c0		 sbb	 eax, eax
  00067	83 d8 ff	 sbb	 eax, -1
$LN18@FriendMemo:
  0006a	85 c0		 test	 eax, eax
  0006c	75 22		 jne	 SHORT $LN3@FriendMemo

; 2780 : 	{
; 2781 : 		LogAdd(LOG_BLACK, "JoinServer Send Mail result : (%d)", lpMsg->Result);

  0006e	0f b6 4e 10	 movzx	 ecx, BYTE PTR [esi+16]
  00072	51		 push	 ecx
  00073	68 00 00 00 00	 push	 OFFSET ??_C@_0CD@EFIPOPHK@JoinServer?5Send?5Mail?5result?5?3?5?$CI?$CF@
  00078	50		 push	 eax
  00079	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2803 : 	{
; 2804 : 		WithdrawUserMoney("Mail", &gObj[lpMsg->Number], 1000);

  0007e	83 c4 0c	 add	 esp, 12			; 0000000cH
  00081	5e		 pop	 esi

; 2805 : 	}
; 2806 : }

  00082	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00085	33 cd		 xor	 ecx, ebp
  00087	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0008c	8b e5		 mov	 esp, ebp
  0008e	5d		 pop	 ebp
  0008f	c3		 ret	 0
$LN3@FriendMemo:

; 2782 : 		return;
; 2783 : 	}
; 2784 : 
; 2785 : 	if ( !gObjIsConnectedGP(lpMsg->Number, Name.GetBuffer()))

  00090	0f bf 46 04	 movsx	 eax, WORD PTR [esi+4]
  00094	8d 55 f0	 lea	 edx, DWORD PTR _Name$[ebp]
  00097	52		 push	 edx
  00098	50		 push	 eax
  00099	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHHPAD@Z ; gObjIsConnectedGP
  0009e	83 c4 08	 add	 esp, 8
  000a1	85 c0		 test	 eax, eax
  000a3	75 27		 jne	 SHORT $LN2@FriendMemo

; 2786 : 	{
; 2787 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  000a5	68 e3 0a 00 00	 push	 2787			; 00000ae3H
  000aa	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  000af	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  000b4	50		 push	 eax
  000b5	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  000ba	83 c4 10	 add	 esp, 16			; 00000010H
  000bd	5e		 pop	 esi

; 2805 : 	}
; 2806 : }

  000be	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000c1	33 cd		 xor	 ecx, ebp
  000c3	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000c8	8b e5		 mov	 esp, ebp
  000ca	5d		 pop	 ebp
  000cb	c3		 ret	 0
$LN2@FriendMemo:

; 2788 : 		return;
; 2789 : 	}
; 2790 : 
; 2791 : 	PMSG_FRIEND_MEMO_RESULT pMsg;
; 2792 : 
; 2793 : 	pMsg.h.set((LPBYTE)&pMsg, 0xC5, sizeof(pMsg));
; 2794 : 	pMsg.Result = lpMsg->Result;

  000cc	8a 4e 10	 mov	 cl, BYTE PTR [esi+16]

; 2795 : 	pMsg.WindowGuid = lpMsg->WindowGuid;

  000cf	8b 56 14	 mov	 edx, DWORD PTR [esi+20]
  000d2	88 4d eb	 mov	 BYTE PTR _pMsg$[ebp+3], cl

; 2796 : 
; 2797 : 	DataSend(lpMsg->Number, (LPBYTE)&pMsg, sizeof(pMsg));

  000d5	0f bf 4e 04	 movsx	 ecx, WORD PTR [esi+4]
  000d9	6a 08		 push	 8
  000db	8d 45 e8	 lea	 eax, DWORD PTR _pMsg$[ebp]
  000de	50		 push	 eax
  000df	51		 push	 ecx
  000e0	66 c7 45 e8 c1
	08		 mov	 WORD PTR _pMsg$[ebp], 2241 ; 000008c1H
  000e6	c6 45 ea c5	 mov	 BYTE PTR _pMsg$[ebp+2], 197 ; 000000c5H
  000ea	89 55 ec	 mov	 DWORD PTR _pMsg$[ebp+4], edx
  000ed	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 2798 : 
; 2799 : 	LogAdd(LOG_BLACK, "[%s] Friend mail Send result : (%d) guid:(%d)",
; 2800 : 		gObj[lpMsg->Number].Name, lpMsg->Result, lpMsg->WindowGuid);

  000f2	0f bf 4e 04	 movsx	 ecx, WORD PTR [esi+4]
  000f6	8b 56 14	 mov	 edx, DWORD PTR [esi+20]
  000f9	69 c9 64 15 00
	00		 imul	 ecx, 5476		; 00001564H
  000ff	0f b6 46 10	 movzx	 eax, BYTE PTR [esi+16]
  00103	52		 push	 edx
  00104	50		 push	 eax
  00105	81 c1 6f 00 00
	00		 add	 ecx, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+111
  0010b	51		 push	 ecx
  0010c	68 00 00 00 00	 push	 OFFSET ??_C@_0CO@FGOJBJPG@?$FL?$CFs?$FN?5Friend?5mail?5Send?5result?5?3?5?$CI@
  00111	6a 00		 push	 0
  00113	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00118	83 c4 20	 add	 esp, 32			; 00000020H

; 2801 : 
; 2802 : 	if ( pMsg.Result == 1 )

  0011b	80 7d eb 01	 cmp	 BYTE PTR _pMsg$[ebp+3], 1
  0011f	75 23		 jne	 SHORT $LN1@FriendMemo

; 2803 : 	{
; 2804 : 		WithdrawUserMoney("Mail", &gObj[lpMsg->Number], 1000);

  00121	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  00125	69 d2 64 15 00
	00		 imul	 edx, 5476		; 00001564H
  0012b	68 e8 03 00 00	 push	 1000			; 000003e8H
  00130	81 c2 00 00 00
	00		 add	 edx, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00136	52		 push	 edx
  00137	68 00 00 00 00	 push	 OFFSET ??_C@_04JEGKNAHI@Mail?$AA@
  0013c	e8 00 00 00 00	 call	 ?WithdrawUserMoney@@YAHPADPAUOBJECTSTRUCT@@H@Z ; WithdrawUserMoney
  00141	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN1@FriendMemo:

; 2805 : 	}
; 2806 : }

  00144	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00147	33 cd		 xor	 ecx, ebp
  00149	5e		 pop	 esi
  0014a	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0014f	8b e5		 mov	 esp, ebp
  00151	5d		 pop	 ebp
  00152	c3		 ret	 0
?FriendMemoSendResult@@YAXPAUFHP_FRIEND_MEMO_SEND_RESULT@@@Z ENDP ; FriendMemoSendResult
_TEXT	ENDS
PUBLIC	??_C@_0BO@BLCCADHK@?$FL?$CFs?$FN?5Friend?5mail?5list?5request?$AA@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendMemoListReq@@YAXH@Z			; FriendMemoListReq
;	COMDAT ??_C@_0BO@BLCCADHK@?$FL?$CFs?$FN?5Friend?5mail?5list?5request?$AA@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_0BO@BLCCADHK@?$FL?$CFs?$FN?5Friend?5mail?5list?5request?$AA@ DB '[%'
	DB	's] Friend mail list request', 00H		; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendMemoListReq@@YAXH@Z
_TEXT	SEGMENT
_pMsg$ = -20						; size = 16
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
?FriendMemoListReq@@YAXH@Z PROC				; FriendMemoListReq, COMDAT

; 2819 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _aIndex$[ebp]

; 2820 : 	if ( !gObjIsConnectedGP(aIndex))

  00014	56		 push	 esi
  00015	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHH@Z ; gObjIsConnectedGP
  0001a	83 c4 04	 add	 esp, 4
  0001d	85 c0		 test	 eax, eax
  0001f	75 27		 jne	 SHORT $LN1@FriendMemo@2

; 2821 : 	{
; 2822 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00021	68 06 0b 00 00	 push	 2822			; 00000b06H
  00026	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0002b	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00030	50		 push	 eax
  00031	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00036	83 c4 10	 add	 esp, 16			; 00000010H
  00039	5e		 pop	 esi

; 2835 : }

  0003a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0003d	33 cd		 xor	 ecx, ebp
  0003f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00044	8b e5		 mov	 esp, ebp
  00046	5d		 pop	 ebp
  00047	c3		 ret	 0
$LN1@FriendMemo@2:

; 2823 : 		return;
; 2824 : 	}
; 2825 : 
; 2826 : 	FHP_FRIEND_MEMO_LIST_REQ pMsg;
; 2827 : 
; 2828 : 	pMsg.h.set((LPBYTE)&pMsg, 0x71, sizeof(pMsg));
; 2829 : 	pMsg.Number = aIndex;

  00048	66 89 75 f0	 mov	 WORD PTR _pMsg$[ebp+4], si

; 2830 : 	memcpy(pMsg.Name, gObj[aIndex].Name, sizeof(pMsg.Name));

  0004c	69 f6 64 15 00
	00		 imul	 esi, 5476		; 00001564H
  00052	8b 86 6f 00 00
	00		 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+111]
  00058	8b 8e 73 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+115]
  0005e	66 8b 96 77 00
	00 00		 mov	 dx, WORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+119]
  00065	8d b6 6f 00 00
	00		 lea	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+111]
  0006b	89 45 f2	 mov	 DWORD PTR _pMsg$[ebp+6], eax

; 2831 : 
; 2832 : 	wsExDbCli.DataSend((PCHAR)&pMsg, pMsg.h.size);

  0006e	6a 10		 push	 16			; 00000010H
  00070	8d 45 ec	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00073	89 4d f6	 mov	 DWORD PTR _pMsg$[ebp+10], ecx
  00076	50		 push	 eax
  00077	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  0007c	66 c7 45 ec c1
	10		 mov	 WORD PTR _pMsg$[ebp], 4289 ; 000010c1H
  00082	c6 45 ee 71	 mov	 BYTE PTR _pMsg$[ebp+2], 113 ; 00000071H
  00086	66 89 55 fa	 mov	 WORD PTR _pMsg$[ebp+14], dx
  0008a	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 2833 : 
; 2834 : 	LogAdd(LOG_BLACK, "[%s] Friend mail list request", gObj[aIndex].Name);

  0008f	56		 push	 esi
  00090	68 00 00 00 00	 push	 OFFSET ??_C@_0BO@BLCCADHK@?$FL?$CFs?$FN?5Friend?5mail?5list?5request?$AA@
  00095	6a 00		 push	 0
  00097	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2835 : }

  0009c	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0009f	83 c4 0c	 add	 esp, 12			; 0000000cH
  000a2	33 cd		 xor	 ecx, ebp
  000a4	5e		 pop	 esi
  000a5	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000aa	8b e5		 mov	 esp, ebp
  000ac	5d		 pop	 ebp
  000ad	c3		 ret	 0
?FriendMemoListReq@@YAXH@Z ENDP				; FriendMemoListReq
_TEXT	ENDS
PUBLIC	??_C@_0CI@INBOEHDN@?$FL?$CFs?$FN?5Friend?5Mail?5list?5?3?5?$CI?$CFd?3?$CF10s@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendMemoList@@YAXPAUFHP_FRIEND_MEMO_LIST@@@Z	; FriendMemoList
;	COMDAT ??_C@_0CI@INBOEHDN@?$FL?$CFs?$FN?5Friend?5Mail?5list?5?3?5?$CI?$CFd?3?$CF10s@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\winutil.h
CONST	SEGMENT
??_C@_0CI@INBOEHDN@?$FL?$CFs?$FN?5Friend?5Mail?5list?5?3?5?$CI?$CFd?3?$CF10s@ DB '['
	DB	'%s] Friend Mail list : (%d:%10s:%s:%s)', 00H ; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendMemoList@@YAXPAUFHP_FRIEND_MEMO_LIST@@@Z
_TEXT	SEGMENT
_memoindex$ = -180					; size = 4
_pMsg$ = -176						; size = 80
_SendName$ = -96					; size = 11
_RecvName$ = -84					; size = 11
_subject$ = -72						; size = 33
_date$ = -36						; size = 31
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?FriendMemoList@@YAXPAUFHP_FRIEND_MEMO_LIST@@@Z PROC	; FriendMemoList, COMDAT

; 2851 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec b4 00 00
	00		 sub	 esp, 180		; 000000b4H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	8b 5d 08	 mov	 ebx, DWORD PTR _lpMsg$[ebp]

; 2852 : 	char_ID SendName(lpMsg->SendName);

  00017	33 c0		 xor	 eax, eax
  00019	8d 4b 08	 lea	 ecx, DWORD PTR [ebx+8]
  0001c	89 45 a0	 mov	 DWORD PTR _SendName$[ebp], eax
  0001f	89 45 a4	 mov	 DWORD PTR _SendName$[ebp+4], eax
  00022	66 89 45 a8	 mov	 WORD PTR _SendName$[ebp+8], ax
  00026	88 45 aa	 mov	 BYTE PTR _SendName$[ebp+10], al
  00029	85 c9		 test	 ecx, ecx
  0002b	74 13		 je	 SHORT $LN4@FriendMemo@3
  0002d	8b 01		 mov	 eax, DWORD PTR [ecx]
  0002f	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  00032	89 45 a0	 mov	 DWORD PTR _SendName$[ebp], eax
  00035	66 8b 41 08	 mov	 ax, WORD PTR [ecx+8]
  00039	89 55 a4	 mov	 DWORD PTR _SendName$[ebp+4], edx
  0003c	66 89 45 a8	 mov	 WORD PTR _SendName$[ebp+8], ax
$LN4@FriendMemo@3:

; 2853 : 	char_ID RecvName(lpMsg->RecvName);

  00040	33 c0		 xor	 eax, eax
  00042	8d 4b 12	 lea	 ecx, DWORD PTR [ebx+18]
  00045	89 45 ac	 mov	 DWORD PTR _RecvName$[ebp], eax
  00048	89 45 b0	 mov	 DWORD PTR _RecvName$[ebp+4], eax
  0004b	66 89 45 b4	 mov	 WORD PTR _RecvName$[ebp+8], ax
  0004f	88 45 b6	 mov	 BYTE PTR _RecvName$[ebp+10], al
  00052	85 c9		 test	 ecx, ecx
  00054	74 13		 je	 SHORT $LN7@FriendMemo@3
  00056	8b 11		 mov	 edx, DWORD PTR [ecx]
  00058	8b 41 04	 mov	 eax, DWORD PTR [ecx+4]
  0005b	66 8b 49 08	 mov	 cx, WORD PTR [ecx+8]
  0005f	89 55 ac	 mov	 DWORD PTR _RecvName$[ebp], edx
  00062	89 45 b0	 mov	 DWORD PTR _RecvName$[ebp+4], eax
  00065	66 89 4d b4	 mov	 WORD PTR _RecvName$[ebp+8], cx
$LN7@FriendMemo@3:

; 2854 : 
; 2855 : 	if ( !gObjIsConnectedGP(lpMsg->Number, RecvName.GetBuffer()))

  00069	0f b7 43 04	 movzx	 eax, WORD PTR [ebx+4]
  0006d	8d 55 ac	 lea	 edx, DWORD PTR _RecvName$[ebp]
  00070	52		 push	 edx
  00071	50		 push	 eax
  00072	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHHPAD@Z ; gObjIsConnectedGP
  00077	83 c4 08	 add	 esp, 8
  0007a	85 c0		 test	 eax, eax
  0007c	75 27		 jne	 SHORT $LN1@FriendMemo@3

; 2856 : 	{
; 2857 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  0007e	68 29 0b 00 00	 push	 2857			; 00000b29H
  00083	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  00088	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  0008d	50		 push	 eax
  0008e	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00093	83 c4 10	 add	 esp, 16			; 00000010H
  00096	5b		 pop	 ebx

; 2882 : }

  00097	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0009a	33 cd		 xor	 ecx, ebp
  0009c	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000a1	8b e5		 mov	 esp, ebp
  000a3	5d		 pop	 ebp
  000a4	c3		 ret	 0
$LN1@FriendMemo@3:

; 2858 : 		return;
; 2859 : 	}
; 2860 : 
; 2861 : 	int memoindex;
; 2862 : 	char subject[33]="";
; 2863 : 	char date[31]="";
; 2864 : 
; 2865 : 	memoindex = lpMsg->MemoIndex;

  000a5	0f b7 4b 06	 movzx	 ecx, WORD PTR [ebx+6]
  000a9	33 c0		 xor	 eax, eax
  000ab	56		 push	 esi
  000ac	57		 push	 edi
  000ad	89 8d 4c ff ff
	ff		 mov	 DWORD PTR _memoindex$[ebp], ecx
  000b3	89 45 b9	 mov	 DWORD PTR _subject$[ebp+1], eax
  000b6	89 45 bd	 mov	 DWORD PTR _subject$[ebp+5], eax
  000b9	89 45 c1	 mov	 DWORD PTR _subject$[ebp+9], eax
  000bc	89 45 c5	 mov	 DWORD PTR _subject$[ebp+13], eax
  000bf	89 45 c9	 mov	 DWORD PTR _subject$[ebp+17], eax
  000c2	89 45 cd	 mov	 DWORD PTR _subject$[ebp+21], eax
  000c5	89 45 d1	 mov	 DWORD PTR _subject$[ebp+25], eax
  000c8	89 45 d5	 mov	 DWORD PTR _subject$[ebp+29], eax
  000cb	89 45 dd	 mov	 DWORD PTR _date$[ebp+1], eax
  000ce	89 45 e1	 mov	 DWORD PTR _date$[ebp+5], eax
  000d1	89 45 e5	 mov	 DWORD PTR _date$[ebp+9], eax
  000d4	89 45 e9	 mov	 DWORD PTR _date$[ebp+13], eax
  000d7	89 45 ed	 mov	 DWORD PTR _date$[ebp+17], eax
  000da	89 45 f1	 mov	 DWORD PTR _date$[ebp+21], eax
  000dd	89 45 f5	 mov	 DWORD PTR _date$[ebp+25], eax
  000e0	66 89 45 f9	 mov	 WORD PTR _date$[ebp+29], ax

; 2866 : 	memcpy(subject, lpMsg->Subject, sizeof(lpMsg->Subject));

  000e4	b9 08 00 00 00	 mov	 ecx, 8
  000e9	8d 73 3a	 lea	 esi, DWORD PTR [ebx+58]
  000ec	8d 7d b8	 lea	 edi, DWORD PTR _subject$[ebp]
  000ef	f3 a5		 rep movsd

; 2867 : 	memcpy(date, lpMsg->Date, sizeof(lpMsg->Date));
; 2868 : 
; 2869 : 	PMSG_FRIEND_MEMO_LIST pMsg;
; 2870 : 
; 2871 : 	pMsg.h.setE((LPBYTE)&pMsg, 0xC6, sizeof(pMsg));
; 2872 : 	memcpy(pMsg.Date, lpMsg->Date, sizeof(pMsg.Date));
; 2873 : 	memcpy(pMsg.Name, lpMsg->SendName, sizeof(pMsg.Name));

  000f1	8b 53 08	 mov	 edx, DWORD PTR [ebx+8]
  000f4	b9 07 00 00 00	 mov	 ecx, 7
  000f9	8d 73 1c	 lea	 esi, DWORD PTR [ebx+28]
  000fc	8d 7d dc	 lea	 edi, DWORD PTR _date$[ebp]
  000ff	f3 a5		 rep movsd

; 2874 : 	memcpy(pMsg.Subject, lpMsg->Subject, sizeof(pMsg.Subject));
; 2875 : 	pMsg.Number = memoindex;	// #warning maybe here and error Deathway

  00101	66 8b 85 4c ff
	ff ff		 mov	 ax, WORD PTR _memoindex$[ebp]
  00108	66 a5		 movsw
  0010a	66 c7 85 50 ff
	ff ff c3 50	 mov	 WORD PTR _pMsg$[ebp], 20675 ; 000050c3H
  00113	c6 85 52 ff ff
	ff c6		 mov	 BYTE PTR _pMsg$[ebp+2], 198 ; 000000c6H
  0011a	b9 07 00 00 00	 mov	 ecx, 7
  0011f	8d 73 1c	 lea	 esi, DWORD PTR [ebx+28]
  00122	8d bd 60 ff ff
	ff		 lea	 edi, DWORD PTR _pMsg$[ebp+16]
  00128	f3 a5		 rep movsd
  0012a	8b 4b 0c	 mov	 ecx, DWORD PTR [ebx+12]
  0012d	66 a5		 movsw
  0012f	89 95 56 ff ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+6], edx
  00135	66 8b 53 10	 mov	 dx, WORD PTR [ebx+16]
  00139	89 8d 5a ff ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+10], ecx
  0013f	66 89 95 5e ff
	ff ff		 mov	 WORD PTR _pMsg$[ebp+14], dx
  00146	b9 08 00 00 00	 mov	 ecx, 8
  0014b	8d 73 3a	 lea	 esi, DWORD PTR [ebx+58]
  0014e	8d bd 7e ff ff
	ff		 lea	 edi, DWORD PTR _pMsg$[ebp+46]
  00154	f3 a5		 rep movsd

; 2876 : 	pMsg.read = lpMsg->read;

  00156	8a 4b 5a	 mov	 cl, BYTE PTR [ebx+90]
  00159	66 89 85 54 ff
	ff ff		 mov	 WORD PTR _pMsg$[ebp+4], ax

; 2877 : 
; 2878 : 	DataSend(lpMsg->Number, (LPBYTE)&pMsg, sizeof(pMsg));

  00160	0f b7 43 04	 movzx	 eax, WORD PTR [ebx+4]
  00164	6a 50		 push	 80			; 00000050H
  00166	8d 95 50 ff ff
	ff		 lea	 edx, DWORD PTR _pMsg$[ebp]
  0016c	52		 push	 edx
  0016d	50		 push	 eax
  0016e	88 4d 9e	 mov	 BYTE PTR _pMsg$[ebp+78], cl
  00171	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 2879 : 	
; 2880 : 	LogAdd(LOG_BLACK, "[%s] Friend Mail list : (%d:%10s:%s:%s)",
; 2881 : 		SendName.GetBuffer(), memoindex, date, RecvName.GetBuffer(), subject);

  00176	8d 4d b8	 lea	 ecx, DWORD PTR _subject$[ebp]
  00179	51		 push	 ecx
  0017a	8b 8d 4c ff ff
	ff		 mov	 ecx, DWORD PTR _memoindex$[ebp]
  00180	8d 55 ac	 lea	 edx, DWORD PTR _RecvName$[ebp]
  00183	52		 push	 edx
  00184	8d 45 dc	 lea	 eax, DWORD PTR _date$[ebp]
  00187	50		 push	 eax
  00188	51		 push	 ecx
  00189	8d 55 a0	 lea	 edx, DWORD PTR _SendName$[ebp]
  0018c	52		 push	 edx
  0018d	68 00 00 00 00	 push	 OFFSET ??_C@_0CI@INBOEHDN@?$FL?$CFs?$FN?5Friend?5Mail?5list?5?3?5?$CI?$CFd?3?$CF10s@
  00192	6a 00		 push	 0
  00194	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2882 : }

  00199	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0019c	83 c4 28	 add	 esp, 40			; 00000028H
  0019f	5f		 pop	 edi
  001a0	5e		 pop	 esi
  001a1	33 cd		 xor	 ecx, ebp
  001a3	5b		 pop	 ebx
  001a4	e8 00 00 00 00	 call	 @__security_check_cookie@4
  001a9	8b e5		 mov	 esp, ebp
  001ab	5d		 pop	 ebp
  001ac	c3		 ret	 0
?FriendMemoList@@YAXPAUFHP_FRIEND_MEMO_LIST@@@Z ENDP	; FriendMemoList
_TEXT	ENDS
PUBLIC	??_C@_0BP@DKLEPGIB@?$FL?$CFs?$FN?5Friend?5Mail?5read?5Index?3?$CFd?$AA@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendMemoReadReq@@YAXPAUPMSG_FRIEND_READ_MEMO_REQ@@H@Z ; FriendMemoReadReq
;	COMDAT ??_C@_0BP@DKLEPGIB@?$FL?$CFs?$FN?5Friend?5Mail?5read?5Index?3?$CFd?$AA@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_0BP@DKLEPGIB@?$FL?$CFs?$FN?5Friend?5Mail?5read?5Index?3?$CFd?$AA@ DB '['
	DB	'%s] Friend Mail read Index:%d', 00H		; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendMemoReadReq@@YAXPAUPMSG_FRIEND_READ_MEMO_REQ@@H@Z
_TEXT	SEGMENT
_pMsg$ = -24						; size = 18
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
_aIndex$ = 12						; size = 4
?FriendMemoReadReq@@YAXPAUPMSG_FRIEND_READ_MEMO_REQ@@H@Z PROC ; FriendMemoReadReq, COMDAT

; 2896 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 18	 sub	 esp, 24			; 00000018H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 0c	 mov	 esi, DWORD PTR _aIndex$[ebp]
  00014	57		 push	 edi
  00015	8b 7d 08	 mov	 edi, DWORD PTR _lpMsg$[ebp]

; 2897 : 	if ( !gObjIsConnectedGP(aIndex))

  00018	56		 push	 esi
  00019	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHH@Z ; gObjIsConnectedGP
  0001e	83 c4 04	 add	 esp, 4
  00021	85 c0		 test	 eax, eax
  00023	75 11		 jne	 SHORT $LN1@FriendMemo@4

; 2898 : 	{
; 2899 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00025	68 53 0b 00 00	 push	 2899			; 00000b53H
  0002a	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0002f	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@

; 2900 : 		return;

  00034	eb 57		 jmp	 SHORT $LN6@FriendMemo@4
$LN1@FriendMemo@4:

; 2901 : 	}
; 2902 : 
; 2903 : 	FHP_FRIEND_MEMO_RECV_REQ pMsg;
; 2904 : 
; 2905 : 	pMsg.h.set((LPBYTE)&pMsg, 0x72, sizeof(pMsg));
; 2906 : 	pMsg.MemoIndex = lpMsg->MemoIndex;

  00036	0f b7 47 04	 movzx	 eax, WORD PTR [edi+4]

; 2907 : 	pMsg.Number = aIndex;

  0003a	66 89 75 ec	 mov	 WORD PTR _pMsg$[ebp+4], si

; 2908 : 	memcpy(pMsg.Name, gObj[aIndex].Name, sizeof(pMsg.Name));

  0003e	69 f6 64 15 00
	00		 imul	 esi, 5476		; 00001564H
  00044	8b 8e 6f 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+111]
  0004a	8b 96 73 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+115]
  00050	8d b6 6f 00 00
	00		 lea	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+111]
  00056	89 4d f0	 mov	 DWORD PTR _pMsg$[ebp+8], ecx
  00059	66 89 45 ee	 mov	 WORD PTR _pMsg$[ebp+6], ax
  0005d	0f b7 46 08	 movzx	 eax, WORD PTR [esi+8]

; 2909 : 
; 2910 : 	wsExDbCli.DataSend((PCHAR)&pMsg, pMsg.h.size);

  00061	6a 12		 push	 18			; 00000012H
  00063	8d 4d e8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00066	51		 push	 ecx
  00067	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  0006c	66 c7 45 e8 c1
	12		 mov	 WORD PTR _pMsg$[ebp], 4801 ; 000012c1H
  00072	c6 45 ea 72	 mov	 BYTE PTR _pMsg$[ebp+2], 114 ; 00000072H
  00076	89 55 f4	 mov	 DWORD PTR _pMsg$[ebp+12], edx
  00079	66 89 45 f8	 mov	 WORD PTR _pMsg$[ebp+16], ax
  0007d	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 2911 : 
; 2912 : 	LogAdd(LOG_BLACK, "[%s] Friend Mail read Index:%d", 
; 2913 : 		gObj[aIndex].Name, lpMsg->MemoIndex);

  00082	0f b7 57 04	 movzx	 edx, WORD PTR [edi+4]
  00086	52		 push	 edx
  00087	56		 push	 esi
  00088	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@DKLEPGIB@?$FL?$CFs?$FN?5Friend?5Mail?5read?5Index?3?$CFd?$AA@
$LN6@FriendMemo@4:
  0008d	6a 00		 push	 0
  0008f	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2914 : 
; 2915 : }

  00094	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00097	83 c4 10	 add	 esp, 16			; 00000010H
  0009a	5f		 pop	 edi
  0009b	33 cd		 xor	 ecx, ebp
  0009d	5e		 pop	 esi
  0009e	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000a3	8b e5		 mov	 esp, ebp
  000a5	5d		 pop	 ebp
  000a6	c3		 ret	 0
?FriendMemoReadReq@@YAXPAUPMSG_FRIEND_READ_MEMO_REQ@@H@Z ENDP ; FriendMemoReadReq
_TEXT	ENDS
PUBLIC	??_C@_0BL@NKLNIHDF@?$FL?$CFs?$FN?5Friend?5Mail?5read?5?$CI?$CFd?$CJ?$AA@ ; `string'
PUBLIC	??_C@_0CB@LDOIFNPP@error?9L2?5?3?5Friend?5Memo?5Max?5?$CFs?5?$CFd@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendMemoRead@@YAXPAUFHP_FRIEND_MEMO_RECV@@@Z	; FriendMemoRead
;	COMDAT ??_C@_0BL@NKLNIHDF@?$FL?$CFs?$FN?5Friend?5Mail?5read?5?$CI?$CFd?$CJ?$AA@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_0BL@NKLNIHDF@?$FL?$CFs?$FN?5Friend?5Mail?5read?5?$CI?$CFd?$CJ?$AA@ DB '['
	DB	'%s] Friend Mail read (%d)', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CB@LDOIFNPP@error?9L2?5?3?5Friend?5Memo?5Max?5?$CFs?5?$CFd@
CONST	SEGMENT
??_C@_0CB@LDOIFNPP@error?9L2?5?3?5Friend?5Memo?5Max?5?$CFs?5?$CFd@ DB 'er'
	DB	'ror-L2 : Friend Memo Max %s %d', 00H	; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendMemoRead@@YAXPAUFHP_FRIEND_MEMO_RECV@@@Z
_TEXT	SEGMENT
_pMsg$ = -1044						; size = 1028
_Name$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?FriendMemoRead@@YAXPAUFHP_FRIEND_MEMO_RECV@@@Z PROC	; FriendMemoRead, COMDAT

; 2932 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 14 04 00
	00		 sub	 esp, 1044		; 00000414H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 2933 : 	char_ID Name(lpMsg->Name);

  00017	33 c0		 xor	 eax, eax
  00019	8d 4e 06	 lea	 ecx, DWORD PTR [esi+6]
  0001c	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  0001f	89 45 f4	 mov	 DWORD PTR _Name$[ebp+4], eax
  00022	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
  00026	88 45 fa	 mov	 BYTE PTR _Name$[ebp+10], al
  00029	85 c9		 test	 ecx, ecx
  0002b	74 13		 je	 SHORT $LN5@FriendMemo@5
  0002d	8b 01		 mov	 eax, DWORD PTR [ecx]
  0002f	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  00032	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  00035	66 8b 41 08	 mov	 ax, WORD PTR [ecx+8]
  00039	89 55 f4	 mov	 DWORD PTR _Name$[ebp+4], edx
  0003c	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
$LN5@FriendMemo@5:

; 2934 : 
; 2935 : 	if ( !gObjIsConnectedGP(lpMsg->Number, Name.GetBuffer()))

  00040	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  00044	8d 4d f0	 lea	 ecx, DWORD PTR _Name$[ebp]
  00047	51		 push	 ecx
  00048	52		 push	 edx
  00049	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHHPAD@Z ; gObjIsConnectedGP
  0004e	83 c4 08	 add	 esp, 8
  00051	85 c0		 test	 eax, eax
  00053	75 27		 jne	 SHORT $LN2@FriendMemo@5

; 2936 : 	{
; 2937 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00055	68 79 0b 00 00	 push	 2937			; 00000b79H
  0005a	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0005f	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00064	50		 push	 eax
  00065	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0006a	83 c4 10	 add	 esp, 16			; 00000010H
  0006d	5e		 pop	 esi

; 2965 : }

  0006e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00071	33 cd		 xor	 ecx, ebp
  00073	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00078	8b e5		 mov	 esp, ebp
  0007a	5d		 pop	 ebp
  0007b	c3		 ret	 0
$LN2@FriendMemo@5:
  0007c	57		 push	 edi

; 2938 : 		return;
; 2939 : 	}
; 2940 : 
; 2941 : 	PMSG_FRIEND_READ_MEMO pMsg;
; 2942 : 
; 2943 : 	int nsize = sizeof(pMsg)-1000;
; 2944 : 
; 2945 : 	if ( lpMsg->MemoSize > 1000 )

  0007d	0f b7 7e 12	 movzx	 edi, WORD PTR [esi+18]
  00081	b8 e8 03 00 00	 mov	 eax, 1000		; 000003e8H
  00086	66 3b f8	 cmp	 di, ax
  00089	7e 29		 jle	 SHORT $LN1@FriendMemo@5

; 2946 : 	{
; 2947 : 		LogAdd(LOG_BLACK, "error-L2 : Friend Memo Max %s %d", __FILE__, __LINE__);

  0008b	68 83 0b 00 00	 push	 2947			; 00000b83H
  00090	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  00095	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@LDOIFNPP@error?9L2?5?3?5Friend?5Memo?5Max?5?$CFs?5?$CFd@
  0009a	6a 00		 push	 0
  0009c	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  000a1	83 c4 10	 add	 esp, 16			; 00000010H
  000a4	5f		 pop	 edi
  000a5	5e		 pop	 esi

; 2965 : }

  000a6	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000a9	33 cd		 xor	 ecx, ebp
  000ab	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000b0	8b e5		 mov	 esp, ebp
  000b2	5d		 pop	 ebp
  000b3	c3		 ret	 0
$LN1@FriendMemo@5:

; 2948 : 		return;
; 2949 : 	}
; 2950 : 
; 2951 : 	nsize += lpMsg->MemoSize;

  000b4	0f b7 46 12	 movzx	 eax, WORD PTR [esi+18]

; 2952 : 
; 2953 : 	pMsg.h.setE((LPBYTE)&pMsg, 0xC7, nsize);
; 2954 : 	pMsg.MemoIndex = lpMsg->MemoIndex;

  000b8	66 8b 56 10	 mov	 dx, WORD PTR [esi+16]
  000bc	53		 push	 ebx
  000bd	0f bf d8	 movsx	 ebx, ax
  000c0	83 c3 1c	 add	 ebx, 28			; 0000001cH
  000c3	8b cb		 mov	 ecx, ebx
  000c5	c1 e9 08	 shr	 ecx, 8
  000c8	88 8d ed fb ff
	ff		 mov	 BYTE PTR _pMsg$[ebp+1], cl

; 2955 : 	pMsg.MemoSize = lpMsg->MemoSize;
; 2956 : 	pMsg.Dir = lpMsg->Dir;
; 2957 : 	pMsg.Action = lpMsg->Action;

  000ce	8a 4e 27	 mov	 cl, BYTE PTR [esi+39]
  000d1	66 89 85 f2 fb
	ff ff		 mov	 WORD PTR _pMsg$[ebp+6], ax
  000d8	8a 46 26	 mov	 al, BYTE PTR [esi+38]
  000db	66 89 95 f0 fb
	ff ff		 mov	 WORD PTR _pMsg$[ebp+4], dx

; 2958 : 	memcpy(pMsg.Photo, lpMsg->Photo,sizeof(pMsg.Photo));

  000e2	8b 56 14	 mov	 edx, DWORD PTR [esi+20]
  000e5	88 8d 07 fc ff
	ff		 mov	 BYTE PTR _pMsg$[ebp+27], cl
  000eb	8b 4e 1c	 mov	 ecx, DWORD PTR [esi+28]
  000ee	88 85 06 fc ff
	ff		 mov	 BYTE PTR _pMsg$[ebp+26], al
  000f4	8b 46 18	 mov	 eax, DWORD PTR [esi+24]
  000f7	89 95 f4 fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+8], edx
  000fd	8b 56 20	 mov	 edx, DWORD PTR [esi+32]
  00100	89 8d fc fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+16], ecx

; 2959 : 	memcpy(pMsg.Memo, lpMsg->Memo, lpMsg->MemoSize);

  00106	0f bf cf	 movsx	 ecx, di
  00109	89 85 f8 fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+12], eax
  0010f	66 8b 46 24	 mov	 ax, WORD PTR [esi+36]
  00113	89 95 00 fc ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+20], edx
  00119	51		 push	 ecx
  0011a	8d 56 28	 lea	 edx, DWORD PTR [esi+40]
  0011d	66 89 85 04 fc
	ff ff		 mov	 WORD PTR _pMsg$[ebp+24], ax
  00124	52		 push	 edx
  00125	8d 85 08 fc ff
	ff		 lea	 eax, DWORD PTR _pMsg$[ebp+28]
  0012b	50		 push	 eax
  0012c	c6 85 ec fb ff
	ff c4		 mov	 BYTE PTR _pMsg$[ebp], 196 ; 000000c4H
  00133	88 9d ee fb ff
	ff		 mov	 BYTE PTR _pMsg$[ebp+2], bl
  00139	c6 85 ef fb ff
	ff c7		 mov	 BYTE PTR _pMsg$[ebp+3], 199 ; 000000c7H
  00140	e8 00 00 00 00	 call	 _memcpy

; 2960 : 
; 2961 : 	DataSend(lpMsg->Number, (LPBYTE)&pMsg, nsize);

  00145	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  00149	53		 push	 ebx
  0014a	8d 8d ec fb ff
	ff		 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00150	51		 push	 ecx
  00151	52		 push	 edx
  00152	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 2962 : 
; 2963 : 	LogAdd(LOG_BLACK, "[%s] Friend Mail read (%d)",
; 2964 : 		gObj[lpMsg->Number].Name, lpMsg->MemoIndex);

  00157	0f bf 4e 04	 movsx	 ecx, WORD PTR [esi+4]
  0015b	0f b7 46 10	 movzx	 eax, WORD PTR [esi+16]
  0015f	69 c9 64 15 00
	00		 imul	 ecx, 5476		; 00001564H
  00165	50		 push	 eax
  00166	81 c1 6f 00 00
	00		 add	 ecx, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+111
  0016c	51		 push	 ecx
  0016d	68 00 00 00 00	 push	 OFFSET ??_C@_0BL@NKLNIHDF@?$FL?$CFs?$FN?5Friend?5Mail?5read?5?$CI?$CFd?$CJ?$AA@
  00172	6a 00		 push	 0
  00174	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2965 : }

  00179	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0017c	83 c4 28	 add	 esp, 40			; 00000028H
  0017f	5b		 pop	 ebx
  00180	5f		 pop	 edi
  00181	33 cd		 xor	 ecx, ebp
  00183	5e		 pop	 esi
  00184	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00189	8b e5		 mov	 esp, ebp
  0018b	5d		 pop	 ebp
  0018c	c3		 ret	 0
?FriendMemoRead@@YAXPAUFHP_FRIEND_MEMO_RECV@@@Z ENDP	; FriendMemoRead
_TEXT	ENDS
PUBLIC	??_C@_0CL@CONIHEEP@?$FL?$CFs?$FN?5Friend?5mail?5delete?5request?5@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendMemoDelReq@@YAXPAUPMSG_FRIEND_MEMO_DEL_REQ@@H@Z ; FriendMemoDelReq
;	COMDAT ??_C@_0CL@CONIHEEP@?$FL?$CFs?$FN?5Friend?5mail?5delete?5request?5@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_0CL@CONIHEEP@?$FL?$CFs?$FN?5Friend?5mail?5delete?5request?5@ DB '[%'
	DB	's] Friend mail delete request Index:(%d)', 00H ; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendMemoDelReq@@YAXPAUPMSG_FRIEND_MEMO_DEL_REQ@@H@Z
_TEXT	SEGMENT
_pMsg$ = -24						; size = 18
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
_aIndex$ = 12						; size = 4
?FriendMemoDelReq@@YAXPAUPMSG_FRIEND_MEMO_DEL_REQ@@H@Z PROC ; FriendMemoDelReq, COMDAT

; 2979 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 18	 sub	 esp, 24			; 00000018H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 0c	 mov	 esi, DWORD PTR _aIndex$[ebp]
  00014	57		 push	 edi
  00015	8b 7d 08	 mov	 edi, DWORD PTR _lpMsg$[ebp]

; 2980 : 	if ( !gObjIsConnectedGP(aIndex))

  00018	56		 push	 esi
  00019	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHH@Z ; gObjIsConnectedGP
  0001e	83 c4 04	 add	 esp, 4
  00021	85 c0		 test	 eax, eax
  00023	75 11		 jne	 SHORT $LN1@FriendMemo@6

; 2981 : 	{
; 2982 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00025	68 a6 0b 00 00	 push	 2982			; 00000ba6H
  0002a	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0002f	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@

; 2983 : 		return;

  00034	eb 57		 jmp	 SHORT $LN6@FriendMemo@6
$LN1@FriendMemo@6:

; 2984 : 	}
; 2985 : 
; 2986 : 	FHP_FRIEND_MEMO_DEL_REQ pMsg;
; 2987 : 
; 2988 : 	pMsg.h.set((LPBYTE)&pMsg, 0x73, sizeof(pMsg));
; 2989 : 	pMsg.MemoIndex = lpMsg->MemoIndex;

  00036	0f b7 47 04	 movzx	 eax, WORD PTR [edi+4]

; 2990 : 	pMsg.Number = aIndex;

  0003a	66 89 75 ec	 mov	 WORD PTR _pMsg$[ebp+4], si

; 2991 : 	memcpy(pMsg.Name, gObj[aIndex].Name, sizeof(pMsg.Name));

  0003e	69 f6 64 15 00
	00		 imul	 esi, 5476		; 00001564H
  00044	8b 8e 6f 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+111]
  0004a	8b 96 73 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+115]
  00050	8d b6 6f 00 00
	00		 lea	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[esi+111]
  00056	89 4d f0	 mov	 DWORD PTR _pMsg$[ebp+8], ecx
  00059	66 89 45 ee	 mov	 WORD PTR _pMsg$[ebp+6], ax
  0005d	0f b7 46 08	 movzx	 eax, WORD PTR [esi+8]

; 2992 : 
; 2993 : 	wsExDbCli.DataSend((PCHAR)&pMsg, pMsg.h.size);

  00061	6a 12		 push	 18			; 00000012H
  00063	8d 4d e8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00066	51		 push	 ecx
  00067	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  0006c	66 c7 45 e8 c1
	12		 mov	 WORD PTR _pMsg$[ebp], 4801 ; 000012c1H
  00072	c6 45 ea 73	 mov	 BYTE PTR _pMsg$[ebp+2], 115 ; 00000073H
  00076	89 55 f4	 mov	 DWORD PTR _pMsg$[ebp+12], edx
  00079	66 89 45 f8	 mov	 WORD PTR _pMsg$[ebp+16], ax
  0007d	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 2994 : 
; 2995 : 	LogAdd(LOG_BLACK, "[%s] Friend mail delete request Index:(%d)",
; 2996 : 		gObj[aIndex].Name, lpMsg->MemoIndex);

  00082	0f b7 57 04	 movzx	 edx, WORD PTR [edi+4]
  00086	52		 push	 edx
  00087	56		 push	 esi
  00088	68 00 00 00 00	 push	 OFFSET ??_C@_0CL@CONIHEEP@?$FL?$CFs?$FN?5Friend?5mail?5delete?5request?5@
$LN6@FriendMemo@6:
  0008d	6a 00		 push	 0
  0008f	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 2997 : }

  00094	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00097	83 c4 10	 add	 esp, 16			; 00000010H
  0009a	5f		 pop	 edi
  0009b	33 cd		 xor	 ecx, ebp
  0009d	5e		 pop	 esi
  0009e	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000a3	8b e5		 mov	 esp, ebp
  000a5	5d		 pop	 ebp
  000a6	c3		 ret	 0
?FriendMemoDelReq@@YAXPAUPMSG_FRIEND_MEMO_DEL_REQ@@H@Z ENDP ; FriendMemoDelReq
_TEXT	ENDS
PUBLIC	??_C@_0DA@BCDIIKMO@?$FL?$CFs?$FN?5Friend?5mail?5delete?5request?5@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendMemoDelResult@@YAXPAUFHP_FRIEND_MEMO_DEL_RESULT@@@Z ; FriendMemoDelResult
;	COMDAT ??_C@_0DA@BCDIIKMO@?$FL?$CFs?$FN?5Friend?5mail?5delete?5request?5@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\winutil.h
CONST	SEGMENT
??_C@_0DA@BCDIIKMO@?$FL?$CFs?$FN?5Friend?5mail?5delete?5request?5@ DB '[%'
	DB	's] Friend mail delete request (%d) index:(%d)', 00H ; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendMemoDelResult@@YAXPAUFHP_FRIEND_MEMO_DEL_RESULT@@@Z
_TEXT	SEGMENT
_pMsg$ = -24						; size = 6
_Name$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?FriendMemoDelResult@@YAXPAUFHP_FRIEND_MEMO_DEL_RESULT@@@Z PROC ; FriendMemoDelResult, COMDAT

; 3010 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 18	 sub	 esp, 24			; 00000018H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 3011 : 	char_ID Name(lpMsg->Name);

  00014	33 c0		 xor	 eax, eax
  00016	8d 4e 08	 lea	 ecx, DWORD PTR [esi+8]
  00019	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  0001c	89 45 f4	 mov	 DWORD PTR _Name$[ebp+4], eax
  0001f	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
  00023	88 45 fa	 mov	 BYTE PTR _Name$[ebp+10], al
  00026	85 c9		 test	 ecx, ecx
  00028	74 13		 je	 SHORT $LN4@FriendMemo@7
  0002a	8b 01		 mov	 eax, DWORD PTR [ecx]
  0002c	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  0002f	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  00032	66 8b 41 08	 mov	 ax, WORD PTR [ecx+8]
  00036	89 55 f4	 mov	 DWORD PTR _Name$[ebp+4], edx
  00039	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
$LN4@FriendMemo@7:

; 3012 : 
; 3013 : 	if ( !gObjIsConnectedGP(lpMsg->Number, Name.GetBuffer()))

  0003d	0f bf 56 06	 movsx	 edx, WORD PTR [esi+6]
  00041	8d 4d f0	 lea	 ecx, DWORD PTR _Name$[ebp]
  00044	51		 push	 ecx
  00045	52		 push	 edx
  00046	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHHPAD@Z ; gObjIsConnectedGP
  0004b	83 c4 08	 add	 esp, 8
  0004e	85 c0		 test	 eax, eax
  00050	75 27		 jne	 SHORT $LN1@FriendMemo@7

; 3014 : 	{
; 3015 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00052	68 c7 0b 00 00	 push	 3015			; 00000bc7H
  00057	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0005c	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00061	50		 push	 eax
  00062	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00067	83 c4 10	 add	 esp, 16			; 00000010H
  0006a	5e		 pop	 esi

; 3029 : }

  0006b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0006e	33 cd		 xor	 ecx, ebp
  00070	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00075	8b e5		 mov	 esp, ebp
  00077	5d		 pop	 ebp
  00078	c3		 ret	 0
$LN1@FriendMemo@7:

; 3016 : 		return;
; 3017 : 	}
; 3018 : 
; 3019 : 	PMSG_FRIEND_MEMO_DEL_RESULT pMsg;
; 3020 : 
; 3021 : 	pMsg.h.set((LPBYTE)&pMsg, 0xC8, sizeof(pMsg));
; 3022 : 	pMsg.MemoIndex = lpMsg->MemoIndex;

  00079	66 8b 46 04	 mov	 ax, WORD PTR [esi+4]

; 3023 : 	pMsg.Result = lpMsg->Result;

  0007d	8a 4e 03	 mov	 cl, BYTE PTR [esi+3]
  00080	66 89 45 ec	 mov	 WORD PTR _pMsg$[ebp+4], ax

; 3024 : 
; 3025 : 	DataSend(lpMsg->Number, (LPBYTE)&pMsg, sizeof(pMsg));

  00084	0f bf 46 06	 movsx	 eax, WORD PTR [esi+6]
  00088	6a 06		 push	 6
  0008a	8d 55 e8	 lea	 edx, DWORD PTR _pMsg$[ebp]
  0008d	52		 push	 edx
  0008e	50		 push	 eax
  0008f	66 c7 45 e8 c1
	06		 mov	 WORD PTR _pMsg$[ebp], 1729 ; 000006c1H
  00095	c6 45 ea c8	 mov	 BYTE PTR _pMsg$[ebp+2], 200 ; 000000c8H
  00099	88 4d eb	 mov	 BYTE PTR _pMsg$[ebp+3], cl
  0009c	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 3026 : 
; 3027 : 	LogAdd(LOG_BLACK, "[%s] Friend mail delete request (%d) index:(%d)",
; 3028 : 		Name.GetBuffer(), lpMsg->Result, lpMsg->MemoIndex);

  000a1	0f b7 4e 04	 movzx	 ecx, WORD PTR [esi+4]
  000a5	0f b6 56 03	 movzx	 edx, BYTE PTR [esi+3]
  000a9	51		 push	 ecx
  000aa	52		 push	 edx
  000ab	8d 45 f0	 lea	 eax, DWORD PTR _Name$[ebp]
  000ae	50		 push	 eax
  000af	68 00 00 00 00	 push	 OFFSET ??_C@_0DA@BCDIIKMO@?$FL?$CFs?$FN?5Friend?5mail?5delete?5request?5@
  000b4	6a 00		 push	 0
  000b6	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 3029 : }

  000bb	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000be	83 c4 20	 add	 esp, 32			; 00000020H
  000c1	33 cd		 xor	 ecx, ebp
  000c3	5e		 pop	 esi
  000c4	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000c9	8b e5		 mov	 esp, ebp
  000cb	5d		 pop	 ebp
  000cc	c3		 ret	 0
?FriendMemoDelResult@@YAXPAUFHP_FRIEND_MEMO_DEL_RESULT@@@Z ENDP ; FriendMemoDelResult
_TEXT	ENDS
PUBLIC	?SetGuildUnion@_GUILD_INFO_STRUCT@@QAEXH@Z	; _GUILD_INFO_STRUCT::SetGuildUnion
; Function compile flags: /Ogtp
;	COMDAT ?SetGuildUnion@_GUILD_INFO_STRUCT@@QAEXH@Z
_TEXT	SEGMENT
_iGuildNumber$ = 8					; size = 4
?SetGuildUnion@_GUILD_INFO_STRUCT@@QAEXH@Z PROC		; _GUILD_INFO_STRUCT::SetGuildUnion, COMDAT
; _this$ = ecx

; 3033 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 3034 : 	this->iGuildUnion = iGuildNumber;

  00003	8b 45 08	 mov	 eax, DWORD PTR _iGuildNumber$[ebp]
  00006	89 81 1c 07 00
	00		 mov	 DWORD PTR [ecx+1820], eax

; 3035 : 	this->SetTimeStamp();

  0000c	e8 00 00 00 00	 call	 ?SetTimeStamp@_GUILD_INFO_STRUCT@@QAEXXZ ; _GUILD_INFO_STRUCT::SetTimeStamp

; 3036 : };	// line : 105

  00011	5d		 pop	 ebp
  00012	c2 04 00	 ret	 4
?SetGuildUnion@_GUILD_INFO_STRUCT@@QAEXH@Z ENDP		; _GUILD_INFO_STRUCT::SetGuildUnion
_TEXT	ENDS
PUBLIC	?SetGuildRival@_GUILD_INFO_STRUCT@@QAEXH@Z	; _GUILD_INFO_STRUCT::SetGuildRival
; Function compile flags: /Ogtp
;	COMDAT ?SetGuildRival@_GUILD_INFO_STRUCT@@QAEXH@Z
_TEXT	SEGMENT
_iGuildNumber$ = 8					; size = 4
?SetGuildRival@_GUILD_INFO_STRUCT@@QAEXH@Z PROC		; _GUILD_INFO_STRUCT::SetGuildRival, COMDAT
; _this$ = ecx

; 3039 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 3040 : 	this->iGuildRival = iGuildNumber;

  00003	8b 45 08	 mov	 eax, DWORD PTR _iGuildNumber$[ebp]
  00006	89 81 20 07 00
	00		 mov	 DWORD PTR [ecx+1824], eax

; 3041 : 	this->SetTimeStamp();

  0000c	e8 00 00 00 00	 call	 ?SetTimeStamp@_GUILD_INFO_STRUCT@@QAEXXZ ; _GUILD_INFO_STRUCT::SetTimeStamp

; 3042 : };	// line : 111

  00011	5d		 pop	 ebp
  00012	c2 04 00	 ret	 4
?SetGuildRival@_GUILD_INFO_STRUCT@@QAEXH@Z ENDP		; _GUILD_INFO_STRUCT::SetGuildRival
_TEXT	ENDS
PUBLIC	??_C@_0DD@OCMMINHH@?$FL?$CFs?$FN?5Friend?5Invistation?5request?5@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendRoomInvitationReq@@YAXPAUPMSG_ROOM_INVITATION@@H@Z ; FriendRoomInvitationReq
;	COMDAT ??_C@_0DD@OCMMINHH@?$FL?$CFs?$FN?5Friend?5Invistation?5request?5@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_0DD@OCMMINHH@?$FL?$CFs?$FN?5Friend?5Invistation?5request?5@ DB '[%s'
	DB	'] Friend Invistation request room:%d winguid:%d', 00H ; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendRoomInvitationReq@@YAXPAUPMSG_ROOM_INVITATION@@H@Z
_TEXT	SEGMENT
_pMsg$ = -36						; size = 32
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
_aIndex$ = 12						; size = 4
?FriendRoomInvitationReq@@YAXPAUPMSG_ROOM_INVITATION@@H@Z PROC ; FriendRoomInvitationReq, COMDAT

; 3062 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 24	 sub	 esp, 36			; 00000024H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]
  00014	57		 push	 edi
  00015	8b 7d 0c	 mov	 edi, DWORD PTR _aIndex$[ebp]

; 3063 : 	if ( !gObjIsConnectedGP(aIndex))

  00018	57		 push	 edi
  00019	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHH@Z ; gObjIsConnectedGP
  0001e	83 c4 04	 add	 esp, 4
  00021	85 c0		 test	 eax, eax
  00023	75 28		 jne	 SHORT $LN1@FriendRoom

; 3064 : 	{
; 3065 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00025	68 f9 0b 00 00	 push	 3065			; 00000bf9H
  0002a	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0002f	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00034	50		 push	 eax
  00035	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0003a	83 c4 10	 add	 esp, 16			; 00000010H
  0003d	5f		 pop	 edi
  0003e	5e		 pop	 esi

; 3082 : }

  0003f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00042	33 cd		 xor	 ecx, ebp
  00044	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00049	8b e5		 mov	 esp, ebp
  0004b	5d		 pop	 ebp
  0004c	c3		 ret	 0
$LN1@FriendRoom:

; 3066 : 		return;
; 3067 : 	}
; 3068 : 
; 3069 : 	FHP_FRIEND_INVITATION_REQ pMsg;
; 3070 : 
; 3071 : 	pMsg.h.set((LPBYTE)&pMsg, 0x74, sizeof(pMsg));
; 3072 : 	pMsg.Number = aIndex;
; 3073 : 	pMsg.RoomNumber = lpMsg->RoomNumber;
; 3074 : 	pMsg.WindowGuid = lpMsg->WindowGuid;

  0004d	8b 4e 10	 mov	 ecx, DWORD PTR [esi+16]

; 3075 : 	memcpy(pMsg.FriendName, lpMsg->Name, sizeof(pMsg.FriendName));

  00050	8b 56 03	 mov	 edx, DWORD PTR [esi+3]
  00053	66 8b 46 0e	 mov	 ax, WORD PTR [esi+14]
  00057	66 89 7d e0	 mov	 WORD PTR _pMsg$[ebp+4], di

; 3076 : 	memcpy(pMsg.Name, gObj[aIndex].Name, sizeof(pMsg.Name));

  0005b	69 ff 64 15 00
	00		 imul	 edi, 5476		; 00001564H
  00061	89 4d f8	 mov	 DWORD PTR _pMsg$[ebp+28], ecx
  00064	0f b7 4e 0b	 movzx	 ecx, WORD PTR [esi+11]
  00068	8d bf 6f 00 00
	00		 lea	 edi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[edi+111]
  0006e	89 55 ec	 mov	 DWORD PTR _pMsg$[ebp+16], edx
  00071	8b 17		 mov	 edx, DWORD PTR [edi]
  00073	66 89 4d f4	 mov	 WORD PTR _pMsg$[ebp+24], cx
  00077	0f b7 4f 08	 movzx	 ecx, WORD PTR [edi+8]
  0007b	66 89 45 f6	 mov	 WORD PTR _pMsg$[ebp+26], ax
  0007f	8b 46 07	 mov	 eax, DWORD PTR [esi+7]
  00082	89 55 e2	 mov	 DWORD PTR _pMsg$[ebp+6], edx
  00085	89 45 f0	 mov	 DWORD PTR _pMsg$[ebp+20], eax
  00088	8b 47 04	 mov	 eax, DWORD PTR [edi+4]

; 3077 : 
; 3078 : 	wsExDbCli.DataSend((PCHAR)&pMsg, pMsg.h.size);

  0008b	6a 20		 push	 32			; 00000020H
  0008d	8d 55 dc	 lea	 edx, DWORD PTR _pMsg$[ebp]
  00090	66 89 4d ea	 mov	 WORD PTR _pMsg$[ebp+14], cx
  00094	52		 push	 edx
  00095	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  0009a	66 c7 45 dc c1
	20		 mov	 WORD PTR _pMsg$[ebp], 8385 ; 000020c1H
  000a0	c6 45 de 74	 mov	 BYTE PTR _pMsg$[ebp+2], 116 ; 00000074H
  000a4	89 45 e6	 mov	 DWORD PTR _pMsg$[ebp+10], eax
  000a7	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 3079 : 
; 3080 : 	LogAdd(LOG_BLACK, "[%s] Friend Invistation request room:%d winguid:%d",
; 3081 : 		gObj[aIndex].Name, lpMsg->RoomNumber, lpMsg->WindowGuid);

  000ac	8b 46 10	 mov	 eax, DWORD PTR [esi+16]
  000af	0f b7 4e 0e	 movzx	 ecx, WORD PTR [esi+14]
  000b3	50		 push	 eax
  000b4	51		 push	 ecx
  000b5	57		 push	 edi
  000b6	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@OCMMINHH@?$FL?$CFs?$FN?5Friend?5Invistation?5request?5@
  000bb	6a 00		 push	 0
  000bd	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 3082 : }

  000c2	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000c5	83 c4 14	 add	 esp, 20			; 00000014H
  000c8	5f		 pop	 edi
  000c9	33 cd		 xor	 ecx, ebp
  000cb	5e		 pop	 esi
  000cc	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000d1	8b e5		 mov	 esp, ebp
  000d3	5d		 pop	 ebp
  000d4	c3		 ret	 0
?FriendRoomInvitationReq@@YAXPAUPMSG_ROOM_INVITATION@@H@Z ENDP ; FriendRoomInvitationReq
_TEXT	ENDS
PUBLIC	??_C@_0CC@LIINHIPA@?$FL?$CFs?$FN?5Friend?5Invitation?5result?5?3?$CF@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendRoomInvitationRecv@@YAXPAUFHP_FRIEND_INVITATION_RET@@@Z ; FriendRoomInvitationRecv
;	COMDAT ??_C@_0CC@LIINHIPA@?$FL?$CFs?$FN?5Friend?5Invitation?5result?5?3?$CF@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\winutil.h
CONST	SEGMENT
??_C@_0CC@LIINHIPA@?$FL?$CFs?$FN?5Friend?5Invitation?5result?5?3?$CF@ DB '['
	DB	'%s] Friend Invitation result :%d', 00H	; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendRoomInvitationRecv@@YAXPAUFHP_FRIEND_INVITATION_RET@@@Z
_TEXT	SEGMENT
_pMsg$ = -24						; size = 8
_Name$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?FriendRoomInvitationRecv@@YAXPAUFHP_FRIEND_INVITATION_RET@@@Z PROC ; FriendRoomInvitationRecv, COMDAT

; 3097 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 18	 sub	 esp, 24			; 00000018H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 3098 : 	char_ID Name(lpMsg->Name);

  00014	33 c0		 xor	 eax, eax
  00016	8d 4e 06	 lea	 ecx, DWORD PTR [esi+6]
  00019	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  0001c	89 45 f4	 mov	 DWORD PTR _Name$[ebp+4], eax
  0001f	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
  00023	88 45 fa	 mov	 BYTE PTR _Name$[ebp+10], al
  00026	85 c9		 test	 ecx, ecx
  00028	74 13		 je	 SHORT $LN4@FriendRoom@2
  0002a	8b 01		 mov	 eax, DWORD PTR [ecx]
  0002c	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  0002f	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  00032	66 8b 41 08	 mov	 ax, WORD PTR [ecx+8]
  00036	89 55 f4	 mov	 DWORD PTR _Name$[ebp+4], edx
  00039	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
$LN4@FriendRoom@2:

; 3099 : 
; 3100 : 	if ( !gObjIsConnectedGP(lpMsg->Number, Name.GetBuffer()))

  0003d	0f bf 56 04	 movsx	 edx, WORD PTR [esi+4]
  00041	8d 4d f0	 lea	 ecx, DWORD PTR _Name$[ebp]
  00044	51		 push	 ecx
  00045	52		 push	 edx
  00046	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHHPAD@Z ; gObjIsConnectedGP
  0004b	83 c4 08	 add	 esp, 8
  0004e	85 c0		 test	 eax, eax
  00050	75 27		 jne	 SHORT $LN1@FriendRoom@2

; 3101 : 	{
; 3102 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00052	68 1e 0c 00 00	 push	 3102			; 00000c1eH
  00057	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  0005c	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00061	50		 push	 eax
  00062	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00067	83 c4 10	 add	 esp, 16			; 00000010H
  0006a	5e		 pop	 esi

; 3116 : }

  0006b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0006e	33 cd		 xor	 ecx, ebp
  00070	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00075	8b e5		 mov	 esp, ebp
  00077	5d		 pop	 ebp
  00078	c3		 ret	 0
$LN1@FriendRoom@2:

; 3103 : 		return;
; 3104 : 	}
; 3105 : 
; 3106 : 	PMSG_ROOM_INVITATION_RESULT pMsg;
; 3107 : 
; 3108 : 	pMsg.h.set((LPBYTE)&pMsg, 0xCB, sizeof(pMsg));
; 3109 : 	pMsg.Result = lpMsg->Result;

  00079	8a 46 03	 mov	 al, BYTE PTR [esi+3]

; 3110 : 	pMsg.WindowGuid = lpMsg->WindowGuid;

  0007c	8b 4e 10	 mov	 ecx, DWORD PTR [esi+16]
  0007f	88 45 eb	 mov	 BYTE PTR _pMsg$[ebp+3], al

; 3111 : 
; 3112 : 	DataSend(lpMsg->Number, (LPBYTE)&pMsg, sizeof(pMsg));

  00082	0f bf 46 04	 movsx	 eax, WORD PTR [esi+4]
  00086	6a 08		 push	 8
  00088	8d 55 e8	 lea	 edx, DWORD PTR _pMsg$[ebp]
  0008b	52		 push	 edx
  0008c	50		 push	 eax
  0008d	66 c7 45 e8 c1
	08		 mov	 WORD PTR _pMsg$[ebp], 2241 ; 000008c1H
  00093	c6 45 ea cb	 mov	 BYTE PTR _pMsg$[ebp+2], 203 ; 000000cbH
  00097	89 4d ec	 mov	 DWORD PTR _pMsg$[ebp+4], ecx
  0009a	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 3113 : 
; 3114 : 	LogAdd(LOG_BLACK, "[%s] Friend Invitation result :%d",
; 3115 : 		Name.GetBuffer(), pMsg.Result);

  0009f	0f b6 4d eb	 movzx	 ecx, BYTE PTR _pMsg$[ebp+3]
  000a3	51		 push	 ecx
  000a4	8d 55 f0	 lea	 edx, DWORD PTR _Name$[ebp]
  000a7	52		 push	 edx
  000a8	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@LIINHIPA@?$FL?$CFs?$FN?5Friend?5Invitation?5result?5?3?$CF@
  000ad	6a 00		 push	 0
  000af	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd

; 3116 : }

  000b4	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000b7	83 c4 1c	 add	 esp, 28			; 0000001cH
  000ba	33 cd		 xor	 ecx, ebp
  000bc	5e		 pop	 esi
  000bd	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000c2	8b e5		 mov	 esp, ebp
  000c4	5d		 pop	 ebp
  000c5	c3		 ret	 0
?FriendRoomInvitationRecv@@YAXPAUFHP_FRIEND_INVITATION_RET@@@Z ENDP ; FriendRoomInvitationRecv
_TEXT	ENDS
PUBLIC	??_C@_0CK@CDNGEFAB@?$FLU?4System?$FN?$FLRival?$FN?$FLJoin?$FN?5?$CI?5?5?$CFs?5?$CJ?5@ ; `string'
PUBLIC	??_C@_0EN@PFEKLNHO@?$FLU?4System?$FN?$FLUnion?$FN?$FLJoin?$FN?5?$CI?5Union?5@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?DGRelationShipAnsJoin@@YAXPAUEXSDHP_RELATIONSHIP_JOIN_RESULT@@@Z ; DGRelationShipAnsJoin
;	COMDAT ??_C@_0CK@CDNGEFAB@?$FLU?4System?$FN?$FLRival?$FN?$FLJoin?$FN?5?$CI?5?5?$CFs?5?$CJ?5@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_0CK@CDNGEFAB@?$FLU?4System?$FN?$FLRival?$FN?$FLJoin?$FN?5?$CI?5?5?$CFs?5?$CJ?5@ DB '['
	DB	'U.System][Rival][Join] (  %s ) vs ( %s )', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0EN@PFEKLNHO@?$FLU?4System?$FN?$FLUnion?$FN?$FLJoin?$FN?5?$CI?5Union?5@
CONST	SEGMENT
??_C@_0EN@PFEKLNHO@?$FLU?4System?$FN?$FLUnion?$FN?$FLJoin?$FN?5?$CI?5Union?5@ DB '['
	DB	'U.System][Union][Join] ( Union Master Guild: %s ), (Union Mem'
	DB	'ber Guild: %s)', 00H			; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?DGRelationShipAnsJoin@@YAXPAUEXSDHP_RELATIONSHIP_JOIN_RESULT@@@Z
_TEXT	SEGMENT
_lpReqGuild$ = -288					; size = 4
_pMsg$157599 = -284					; size = 8
_n$157636 = -280					; size = 4
_n$157626 = -280					; size = 4
__Notice$157642 = -276					; size = 272
__Notice$157632 = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?DGRelationShipAnsJoin@@YAXPAUEXSDHP_RELATIONSHIP_JOIN_RESULT@@@Z PROC ; DGRelationShipAnsJoin, COMDAT

; 1517 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 20 01 00
	00		 sub	 esp, 288		; 00000120H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 1518 : 	_GUILD_INFO_STRUCT * lpReqGuild = Guild.SearchGuild_Number(lpMsg->iRequestGuildNum);

  00018	8b 46 0c	 mov	 eax, DWORD PTR [esi+12]
  0001b	57		 push	 edi
  0001c	50		 push	 eax
  0001d	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00022	e8 00 00 00 00	 call	 ?SearchGuild_Number@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@H@Z ; CGuildClass::SearchGuild_Number

; 1519 : 	_GUILD_INFO_STRUCT * lpTargetGuild = Guild.SearchGuild_Number(lpMsg->iTargetGuildNum);

  00027	8b 4e 10	 mov	 ecx, DWORD PTR [esi+16]
  0002a	8b d8		 mov	 ebx, eax
  0002c	51		 push	 ecx
  0002d	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00032	89 9d e0 fe ff
	ff		 mov	 DWORD PTR _lpReqGuild$[ebp], ebx
  00038	e8 00 00 00 00	 call	 ?SearchGuild_Number@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@H@Z ; CGuildClass::SearchGuild_Number
  0003d	8b f8		 mov	 edi, eax

; 1520 : 
; 1521 : 	if ( lpMsg->btFlag == 1 )

  0003f	8a 46 03	 mov	 al, BYTE PTR [esi+3]
  00042	3c 01		 cmp	 al, 1
  00044	0f 85 bc 00 00
	00		 jne	 $LN30@DGRelation@3

; 1522 : 	{
; 1523 : 		if ( !lpReqGuild || !lpTargetGuild )

  0004a	85 db		 test	 ebx, ebx
  0004c	74 04		 je	 SHORT $LN28@DGRelation@3
  0004e	85 ff		 test	 edi, edi
  00050	75 04		 jne	 SHORT $LN29@DGRelation@3
$LN28@DGRelation@3:

; 1524 : 		{
; 1525 : 			lpMsg->btResult = 0;

  00052	c6 46 08 00	 mov	 BYTE PTR [esi+8], 0
$LN29@DGRelation@3:

; 1526 : 		}
; 1527 : 
; 1528 : 		PMSG_RELATIONSHIP_JOIN_BREAKOFF_ANS pMsg ={0};
; 1529 : 
; 1530 : 		pMsg.h.set((LPBYTE)&pMsg, 0xE6, sizeof(pMsg));
; 1531 : 		pMsg.btResult = lpMsg->btResult;

  00056	0f b6 56 08	 movzx	 edx, BYTE PTR [esi+8]

; 1532 : 		pMsg.btRequestType = G_RELATION_OPERATION_JOIN;
; 1533 : 		pMsg.btRelationShipType = lpMsg->btRelationShipType;
; 1534 : 		pMsg.btTargetUserIndexH = SET_NUMBERH(lpMsg->wTargetUserIndex);

  0005a	8a 4e 07	 mov	 cl, BYTE PTR [esi+7]
  0005d	33 c0		 xor	 eax, eax
  0005f	89 85 e5 fe ff
	ff		 mov	 DWORD PTR _pMsg$157599[ebp+1], eax
  00065	66 89 85 e9 fe
	ff ff		 mov	 WORD PTR _pMsg$157599[ebp+5], ax
  0006c	88 85 eb fe ff
	ff		 mov	 BYTE PTR _pMsg$157599[ebp+7], al
  00072	0f b6 46 09	 movzx	 eax, BYTE PTR [esi+9]
  00076	88 85 e7 fe ff
	ff		 mov	 BYTE PTR _pMsg$157599[ebp+3], al
  0007c	88 8d ea fe ff
	ff		 mov	 BYTE PTR _pMsg$157599[ebp+6], cl

; 1535 : 		pMsg.btTargetUserIndexL = SET_NUMBERL(lpMsg->wTargetUserIndex);
; 1536 : 
; 1537 : 		DataSend(lpMsg->wRequestUserIndex, (LPBYTE)&pMsg, sizeof(pMsg));

  00082	0f b7 4e 04	 movzx	 ecx, WORD PTR [esi+4]
  00086	88 95 e9 fe ff
	ff		 mov	 BYTE PTR _pMsg$157599[ebp+5], dl
  0008c	0f b6 56 06	 movzx	 edx, BYTE PTR [esi+6]
  00090	6a 08		 push	 8
  00092	8d 85 e4 fe ff
	ff		 lea	 eax, DWORD PTR _pMsg$157599[ebp]
  00098	50		 push	 eax
  00099	51		 push	 ecx
  0009a	66 c7 85 e4 fe
	ff ff c1 08	 mov	 WORD PTR _pMsg$157599[ebp], 2241 ; 000008c1H
  000a3	c6 85 e6 fe ff
	ff e6		 mov	 BYTE PTR _pMsg$157599[ebp+2], 230 ; 000000e6H
  000aa	c6 85 e8 fe ff
	ff 01		 mov	 BYTE PTR _pMsg$157599[ebp+4], 1
  000b1	88 95 eb fe ff
	ff		 mov	 BYTE PTR _pMsg$157599[ebp+7], dl
  000b7	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 1538 : 
; 1539 : 		pMsg.btTargetUserIndexH = SET_NUMBERH(lpMsg->wRequestUserIndex);

  000bc	0f b6 56 05	 movzx	 edx, BYTE PTR [esi+5]

; 1540 : 		pMsg.btTargetUserIndexL = SET_NUMBERL(lpMsg->wRequestUserIndex);

  000c0	0f b6 46 04	 movzx	 eax, BYTE PTR [esi+4]
  000c4	88 95 ea fe ff
	ff		 mov	 BYTE PTR _pMsg$157599[ebp+6], dl

; 1541 : 
; 1542 : 		DataSend(lpMsg->wTargetUserIndex, (LPBYTE)&pMsg, sizeof(pMsg));

  000ca	0f b7 56 06	 movzx	 edx, WORD PTR [esi+6]
  000ce	6a 08		 push	 8
  000d0	8d 8d e4 fe ff
	ff		 lea	 ecx, DWORD PTR _pMsg$157599[ebp]
  000d6	51		 push	 ecx
  000d7	52		 push	 edx
  000d8	88 85 eb fe ff
	ff		 mov	 BYTE PTR _pMsg$157599[ebp+7], al
  000de	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 1543 : 
; 1544 : 		if ( lpMsg->btResult == EX_RESULT_FAIL ||lpMsg->btResult == EX_RESULT_FAIL_FOR_CASTLE )

  000e3	8a 46 08	 mov	 al, BYTE PTR [esi+8]
  000e6	83 c4 18	 add	 esp, 24			; 00000018H
  000e9	84 c0		 test	 al, al
  000eb	0f 84 f3 01 00
	00		 je	 $LN6@DGRelation@3
  000f1	3c 10		 cmp	 al, 16			; 00000010H
  000f3	75 38		 jne	 SHORT $LN39@DGRelation@3
  000f5	5f		 pop	 edi
  000f6	5e		 pop	 esi
  000f7	5b		 pop	 ebx

; 1612 : 				}
; 1613 : 			}
; 1614 : 		}
; 1615 : 	}
; 1616 : }

  000f8	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000fb	33 cd		 xor	 ecx, ebp
  000fd	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00102	8b e5		 mov	 esp, ebp
  00104	5d		 pop	 ebp
  00105	c3		 ret	 0
$LN30@DGRelation@3:

; 1545 : 			return;
; 1546 : 
; 1547 : 	}
; 1548 : 	else if ( lpMsg->btFlag == 0 )

  00106	84 c0		 test	 al, al
  00108	75 23		 jne	 SHORT $LN39@DGRelation@3

; 1549 : 	{
; 1550 : 		if ( !lpReqGuild || !lpTargetGuild )

  0010a	85 db		 test	 ebx, ebx
  0010c	0f 84 d2 01 00
	00		 je	 $LN6@DGRelation@3
  00112	85 ff		 test	 edi, edi
  00114	0f 84 ca 01 00
	00		 je	 $LN6@DGRelation@3

; 1551 : 			return;
; 1552 : 
; 1553 : 		if ( lpMsg->btResult == EX_RESULT_FAIL ||lpMsg->btResult == EX_RESULT_FAIL_FOR_CASTLE )

  0011a	8a 46 08	 mov	 al, BYTE PTR [esi+8]
  0011d	84 c0		 test	 al, al
  0011f	0f 84 bf 01 00
	00		 je	 $LN6@DGRelation@3
  00125	3c 10		 cmp	 al, 16			; 00000010H

; 1554 : 			return;

  00127	0f 84 b7 01 00
	00		 je	 $LN6@DGRelation@3
$LN39@DGRelation@3:

; 1555 : 
; 1556 : 	}
; 1557 : 
; 1558 : 	if (lpMsg->btRelationShipType == G_RELATIONSHIP_UNION )

  0012d	8a 46 09	 mov	 al, BYTE PTR [esi+9]
  00130	3c 01		 cmp	 al, 1
  00132	75 23		 jne	 SHORT $LN19@DGRelation@3

; 1559 : 	{
; 1560 : 		lpReqGuild->SetGuildUnion(lpTargetGuild->Number);

  00134	8b 07		 mov	 eax, DWORD PTR [edi]
  00136	50		 push	 eax
  00137	8b cb		 mov	 ecx, ebx
  00139	e8 00 00 00 00	 call	 ?SetGuildUnion@_GUILD_INFO_STRUCT@@QAEXH@Z ; _GUILD_INFO_STRUCT::SetGuildUnion

; 1561 : 		lpTargetGuild->SetGuildUnion(lpTargetGuild->Number);

  0013e	8b 0f		 mov	 ecx, DWORD PTR [edi]
  00140	51		 push	 ecx
  00141	8b cf		 mov	 ecx, edi
  00143	e8 00 00 00 00	 call	 ?SetGuildUnion@_GUILD_INFO_STRUCT@@QAEXH@Z ; _GUILD_INFO_STRUCT::SetGuildUnion

; 1562 : 
; 1563 : 		LogAdd(LOG_BLACK, "[U.System][Union][Join] ( Union Master Guild: %s ), (Union Member Guild: %s)",
; 1564 : 			lpTargetGuild->Name, lpReqGuild->Name);

  00148	8d 53 04	 lea	 edx, DWORD PTR [ebx+4]
  0014b	52		 push	 edx
  0014c	8d 47 04	 lea	 eax, DWORD PTR [edi+4]
  0014f	50		 push	 eax
  00150	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@PFEKLNHO@?$FLU?4System?$FN?$FLUnion?$FN?$FLJoin?$FN?5?$CI?5Union?5@
  00155	eb 49		 jmp	 SHORT $LN43@DGRelation@3
$LN19@DGRelation@3:

; 1565 : 	}
; 1566 : 	else if ( lpMsg->btRelationShipType == G_RELATIONSHIP_RIVAL )

  00157	3c 02		 cmp	 al, 2
  00159	75 4f		 jne	 SHORT $LN17@DGRelation@3

; 1567 : 	{
; 1568 : 		lpReqGuild->SetGuildRival(lpTargetGuild->Number);

  0015b	8b 0f		 mov	 ecx, DWORD PTR [edi]
  0015d	51		 push	 ecx
  0015e	8b cb		 mov	 ecx, ebx
  00160	e8 00 00 00 00	 call	 ?SetGuildRival@_GUILD_INFO_STRUCT@@QAEXH@Z ; _GUILD_INFO_STRUCT::SetGuildRival

; 1569 : 		lpTargetGuild->SetGuildRival(lpReqGuild->Number);

  00165	8b 13		 mov	 edx, DWORD PTR [ebx]
  00167	52		 push	 edx
  00168	8b cf		 mov	 ecx, edi
  0016a	e8 00 00 00 00	 call	 ?SetGuildRival@_GUILD_INFO_STRUCT@@QAEXH@Z ; _GUILD_INFO_STRUCT::SetGuildRival

; 1570 : 		memcpy(lpReqGuild->szGuildRivalName, lpMsg->szTargetGuildName, MAX_GUILD_LEN);

  0016f	8b 46 1d	 mov	 eax, DWORD PTR [esi+29]
  00172	89 83 28 07 00
	00		 mov	 DWORD PTR [ebx+1832], eax
  00178	8b 4e 21	 mov	 ecx, DWORD PTR [esi+33]
  0017b	89 8b 2c 07 00
	00		 mov	 DWORD PTR [ebx+1836], ecx

; 1571 : 		memcpy(lpTargetGuild->szGuildRivalName, lpMsg->szRequestGuildName, MAX_GUILD_LEN);

  00181	8b 56 14	 mov	 edx, DWORD PTR [esi+20]
  00184	89 97 28 07 00
	00		 mov	 DWORD PTR [edi+1832], edx
  0018a	8b 46 18	 mov	 eax, DWORD PTR [esi+24]

; 1572 : 
; 1573 : 		LogAdd(LOG_BLACK, "[U.System][Rival][Join] (  %s ) vs ( %s )",
; 1574 : 			lpReqGuild->Name, lpTargetGuild->Name);

  0018d	8d 4f 04	 lea	 ecx, DWORD PTR [edi+4]
  00190	51		 push	 ecx
  00191	8d 53 04	 lea	 edx, DWORD PTR [ebx+4]
  00194	52		 push	 edx
  00195	89 87 2c 07 00
	00		 mov	 DWORD PTR [edi+1836], eax
  0019b	68 00 00 00 00	 push	 OFFSET ??_C@_0CK@CDNGEFAB@?$FLU?4System?$FN?$FLRival?$FN?$FLJoin?$FN?5?$CI?5?5?$CFs?5?$CJ?5@
$LN43@DGRelation@3:
  001a0	6a 00		 push	 0
  001a2	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  001a7	83 c4 10	 add	 esp, 16			; 00000010H
$LN17@DGRelation@3:

; 1575 : 	}
; 1576 : 
; 1577 : 	for ( int n=0;n<MAX_USER_GUILD;n++)

  001aa	33 c0		 xor	 eax, eax
  001ac	89 85 e8 fe ff
	ff		 mov	 DWORD PTR _n$157626[ebp], eax
  001b2	81 c3 a0 03 00
	00		 add	 ebx, 928		; 000003a0H
  001b8	eb 06 8d 9b 00
	00 00 00	 npad	 8
$LL16@DGRelation@3:

; 1578 : 	{
; 1579 : 		if ( lpReqGuild->Use[n] > 0 )

  001c0	8b 8d e0 fe ff
	ff		 mov	 ecx, DWORD PTR _lpReqGuild$[ebp]
  001c6	80 bc 01 40 04
	00 00 00	 cmp	 BYTE PTR [ecx+eax+1088], 0
  001ce	76 50		 jbe	 SHORT $LN15@DGRelation@3

; 1580 : 		{
; 1581 : 			if ( lpReqGuild->Index[n] >= 0 )

  001d0	66 83 3b 00	 cmp	 WORD PTR [ebx], 0
  001d4	7c 4a		 jl	 SHORT $LN15@DGRelation@3

; 1582 : 			{
; 1583 : 				TNotice _Notice(1);

  001d6	6a 01		 push	 1
  001d8	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157632[ebp]
  001de	e8 00 00 00 00	 call	 ??0TNotice@@QAE@E@Z	; TNotice::TNotice

; 1584 : 
; 1585 : 				if ( lpMsg->btRelationShipType == G_RELATIONSHIP_UNION )

  001e3	8a 46 09	 mov	 al, BYTE PTR [esi+9]
  001e6	3c 01		 cmp	 al, 1
  001e8	75 0b		 jne	 SHORT $LN11@DGRelation@3

; 1586 : 				{
; 1587 : 					_Notice.SendToUser(lpReqGuild->Index[n], lMsg.Get(MSGGET(6, 165)), lpTargetGuild->Name);

  001ea	8d 57 04	 lea	 edx, DWORD PTR [edi+4]
  001ed	52		 push	 edx
  001ee	68 a5 06 00 00	 push	 1701			; 000006a5H
  001f3	eb 0d		 jmp	 SHORT $LN44@DGRelation@3
$LN11@DGRelation@3:

; 1588 : 				}
; 1589 : 				else if ( lpMsg->btRelationShipType == G_RELATIONSHIP_RIVAL )

  001f5	3c 02		 cmp	 al, 2
  001f7	75 27		 jne	 SHORT $LN15@DGRelation@3

; 1590 : 				{
; 1591 : 					_Notice.SendToUser(lpReqGuild->Index[n], lMsg.Get(MSGGET(6, 166)), lpTargetGuild->Name);

  001f9	8d 57 04	 lea	 edx, DWORD PTR [edi+4]
  001fc	52		 push	 edx
  001fd	68 a6 06 00 00	 push	 1702			; 000006a6H
$LN44@DGRelation@3:
  00202	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00207	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0020c	50		 push	 eax
  0020d	0f bf 03	 movsx	 eax, WORD PTR [ebx]
  00210	50		 push	 eax
  00211	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157632[ebp]
  00217	51		 push	 ecx
  00218	e8 00 00 00 00	 call	 ?SendToUser@TNotice@@QAAXHPADZZ ; TNotice::SendToUser
  0021d	83 c4 10	 add	 esp, 16			; 00000010H
$LN15@DGRelation@3:

; 1575 : 	}
; 1576 : 
; 1577 : 	for ( int n=0;n<MAX_USER_GUILD;n++)

  00220	8b 85 e8 fe ff
	ff		 mov	 eax, DWORD PTR _n$157626[ebp]
  00226	40		 inc	 eax
  00227	83 c3 02	 add	 ebx, 2
  0022a	89 85 e8 fe ff
	ff		 mov	 DWORD PTR _n$157626[ebp], eax
  00230	83 f8 50	 cmp	 eax, 80			; 00000050H
  00233	7c 8b		 jl	 SHORT $LL16@DGRelation@3

; 1592 : 				}
; 1593 : 			}
; 1594 : 		}
; 1595 : 	}
; 1596 : 
; 1597 : 	for (int n=0;n<MAX_USER_GUILD;n++)

  00235	33 c0		 xor	 eax, eax
  00237	89 85 e8 fe ff
	ff		 mov	 DWORD PTR _n$157636[ebp], eax
  0023d	8d 9f a0 03 00
	00		 lea	 ebx, DWORD PTR [edi+928]
$LL8@DGRelation@3:

; 1598 : 	{
; 1599 : 		if ( lpTargetGuild->Use[n] > 0 )

  00243	80 bc 07 40 04
	00 00 00	 cmp	 BYTE PTR [edi+eax+1088], 0
  0024b	76 7e		 jbe	 SHORT $LN7@DGRelation@3

; 1600 : 		{
; 1601 : 			if ( lpTargetGuild->Index[n] >= 0 )

  0024d	66 83 3b 00	 cmp	 WORD PTR [ebx], 0
  00251	7c 78		 jl	 SHORT $LN7@DGRelation@3

; 1602 : 			{
; 1603 : 				TNotice _Notice(1);

  00253	6a 01		 push	 1
  00255	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157642[ebp]
  0025b	e8 00 00 00 00	 call	 ??0TNotice@@QAE@E@Z	; TNotice::TNotice

; 1604 : 
; 1605 : 				if ( lpMsg->btRelationShipType == G_RELATIONSHIP_UNION )

  00260	8a 46 09	 mov	 al, BYTE PTR [esi+9]
  00263	3c 01		 cmp	 al, 1
  00265	75 33		 jne	 SHORT $LN3@DGRelation@3

; 1606 : 				{
; 1607 : 					_Notice.SendToUser(lpTargetGuild->Index[n], lMsg.Get(MSGGET(6, 167)), lpReqGuild->Name, lpTargetGuild->Name);

  00267	8b 85 e0 fe ff
	ff		 mov	 eax, DWORD PTR _lpReqGuild$[ebp]
  0026d	8d 57 04	 lea	 edx, DWORD PTR [edi+4]
  00270	52		 push	 edx
  00271	83 c0 04	 add	 eax, 4
  00274	50		 push	 eax
  00275	68 a7 06 00 00	 push	 1703			; 000006a7H
  0027a	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0027f	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  00284	0f bf 0b	 movsx	 ecx, WORD PTR [ebx]
  00287	50		 push	 eax
  00288	51		 push	 ecx
  00289	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR __Notice$157642[ebp]
  0028f	52		 push	 edx
  00290	e8 00 00 00 00	 call	 ?SendToUser@TNotice@@QAAXHPADZZ ; TNotice::SendToUser
  00295	83 c4 14	 add	 esp, 20			; 00000014H
  00298	eb 31		 jmp	 SHORT $LN7@DGRelation@3
$LN3@DGRelation@3:

; 1608 : 				}
; 1609 : 				else if ( lpMsg->btRelationShipType == G_RELATIONSHIP_RIVAL )

  0029a	3c 02		 cmp	 al, 2
  0029c	75 2d		 jne	 SHORT $LN7@DGRelation@3

; 1610 : 				{
; 1611 : 					_Notice.SendToUser(lpTargetGuild->Index[n], lMsg.Get(MSGGET(6, 166)), lpReqGuild->Name);

  0029e	8b 85 e0 fe ff
	ff		 mov	 eax, DWORD PTR _lpReqGuild$[ebp]
  002a4	83 c0 04	 add	 eax, 4
  002a7	50		 push	 eax
  002a8	68 a6 06 00 00	 push	 1702			; 000006a6H
  002ad	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  002b2	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  002b7	0f bf 0b	 movsx	 ecx, WORD PTR [ebx]
  002ba	50		 push	 eax
  002bb	51		 push	 ecx
  002bc	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR __Notice$157642[ebp]
  002c2	52		 push	 edx
  002c3	e8 00 00 00 00	 call	 ?SendToUser@TNotice@@QAAXHPADZZ ; TNotice::SendToUser
  002c8	83 c4 10	 add	 esp, 16			; 00000010H
$LN7@DGRelation@3:

; 1592 : 				}
; 1593 : 			}
; 1594 : 		}
; 1595 : 	}
; 1596 : 
; 1597 : 	for (int n=0;n<MAX_USER_GUILD;n++)

  002cb	8b 85 e8 fe ff
	ff		 mov	 eax, DWORD PTR _n$157636[ebp]
  002d1	40		 inc	 eax
  002d2	83 c3 02	 add	 ebx, 2
  002d5	89 85 e8 fe ff
	ff		 mov	 DWORD PTR _n$157636[ebp], eax
  002db	83 f8 50	 cmp	 eax, 80			; 00000050H
  002de	0f 8c 5f ff ff
	ff		 jl	 $LL8@DGRelation@3
$LN6@DGRelation@3:

; 1612 : 				}
; 1613 : 			}
; 1614 : 		}
; 1615 : 	}
; 1616 : }

  002e4	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  002e7	5f		 pop	 edi
  002e8	5e		 pop	 esi
  002e9	33 cd		 xor	 ecx, ebp
  002eb	5b		 pop	 ebx
  002ec	e8 00 00 00 00	 call	 @__security_check_cookie@4
  002f1	8b e5		 mov	 esp, ebp
  002f3	5d		 pop	 ebp
  002f4	c3		 ret	 0
?DGRelationShipAnsJoin@@YAXPAUEXSDHP_RELATIONSHIP_JOIN_RESULT@@@Z ENDP ; DGRelationShipAnsJoin
_TEXT	ENDS
PUBLIC	??_C@_0FF@IACINBOG@?$FLGS?$FN?$FLU?4System?$FN?$FLUnion?$FN?$FLBreakOff?$FN?5@ ; `string'
PUBLIC	??_C@_0EA@EGALHNLI@?$FLGS?$FN?$FLU?4System?$FN?$FLUnion?$FN?$FLBreakOff?$FN?5@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?DGUnionBreakOff@@YAXPAUEXSDHP_RELATIONSHIP_BREAKOFF_RESULT@@@Z ; DGUnionBreakOff
;	COMDAT ??_C@_0FF@IACINBOG@?$FLGS?$FN?$FLU?4System?$FN?$FLUnion?$FN?$FLBreakOff?$FN?5@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_0FF@IACINBOG@?$FLGS?$FN?$FLU?4System?$FN?$FLUnion?$FN?$FLBreakOff?$FN?5@ DB '['
	DB	'GS][U.System][Union][BreakOff] ( Union Master Guild: %s ), (U'
	DB	'nion Member Guild: %s)', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0EA@EGALHNLI@?$FLGS?$FN?$FLU?4System?$FN?$FLUnion?$FN?$FLBreakOff?$FN?5@
CONST	SEGMENT
??_C@_0EA@EGALHNLI@?$FLGS?$FN?$FLU?4System?$FN?$FLUnion?$FN?$FLBreakOff?$FN?5@ DB '['
	DB	'GS][U.System][Union][BreakOff] Request Union Member Guild: %s'
	DB	')', 00H					; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?DGUnionBreakOff@@YAXPAUEXSDHP_RELATIONSHIP_BREAKOFF_RESULT@@@Z
_TEXT	SEGMENT
_lpTargetGuild$ = -288					; size = 4
_pMsg$157676 = -284					; size = 8
tv284 = -280						; size = 4
__Notice$157707 = -276					; size = 272
__Notice$157698 = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?DGUnionBreakOff@@YAXPAUEXSDHP_RELATIONSHIP_BREAKOFF_RESULT@@@Z PROC ; DGUnionBreakOff, COMDAT

; 1659 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 20 01 00
	00		 sub	 esp, 288		; 00000120H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 1660 : 	_GUILD_INFO_STRUCT * lpReqGuild = Guild.SearchGuild_Number(lpMsg->iRequestGuildNum);

  00018	8b 46 0c	 mov	 eax, DWORD PTR [esi+12]
  0001b	50		 push	 eax
  0001c	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00021	e8 00 00 00 00	 call	 ?SearchGuild_Number@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@H@Z ; CGuildClass::SearchGuild_Number

; 1661 : 	_GUILD_INFO_STRUCT * lpTargetGuild = Guild.SearchGuild_Number(lpMsg->iTargetGuildNum);

  00026	8b 4e 10	 mov	 ecx, DWORD PTR [esi+16]
  00029	51		 push	 ecx
  0002a	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  0002f	8b d8		 mov	 ebx, eax
  00031	e8 00 00 00 00	 call	 ?SearchGuild_Number@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@H@Z ; CGuildClass::SearchGuild_Number
  00036	89 85 e0 fe ff
	ff		 mov	 DWORD PTR _lpTargetGuild$[ebp], eax

; 1662 : 
; 1663 : 	if ( lpMsg->btFlag == 1 )

  0003c	8a 46 03	 mov	 al, BYTE PTR [esi+3]
  0003f	3c 01		 cmp	 al, 1
  00041	0f 85 86 00 00
	00		 jne	 $LN20@DGUnionBre@2

; 1664 : 	{
; 1665 : 		if ( !lpReqGuild )

  00047	85 db		 test	 ebx, ebx
  00049	75 03		 jne	 SHORT $LN19@DGUnionBre@2

; 1666 : 		{
; 1667 : 			lpMsg->btResult = 0;

  0004b	88 5e 08	 mov	 BYTE PTR [esi+8], bl
$LN19@DGUnionBre@2:

; 1668 : 		}
; 1669 : 
; 1670 : 		PMSG_RELATIONSHIP_JOIN_BREAKOFF_ANS pMsg ={0};
; 1671 : 
; 1672 : 		pMsg.h.set((LPBYTE)&pMsg, 0xE6, sizeof(pMsg));
; 1673 : 		pMsg.btResult = lpMsg->btResult;

  0004e	8a 56 08	 mov	 dl, BYTE PTR [esi+8]

; 1674 : 		pMsg.btRequestType = G_RELATION_OPERATION_BREAKOFF;
; 1675 : 		pMsg.btRelationShipType = G_RELATIONSHIP_UNION;
; 1676 : 		pMsg.btTargetUserIndexH = SET_NUMBERH(lpMsg->wTargetUserIndex);
; 1677 : 		pMsg.btTargetUserIndexL = SET_NUMBERL(lpMsg->wTargetUserIndex);

  00051	8a 4e 06	 mov	 cl, BYTE PTR [esi+6]
  00054	33 c0		 xor	 eax, eax
  00056	89 85 e5 fe ff
	ff		 mov	 DWORD PTR _pMsg$157676[ebp+1], eax
  0005c	66 89 85 e9 fe
	ff ff		 mov	 WORD PTR _pMsg$157676[ebp+5], ax
  00063	88 85 eb fe ff
	ff		 mov	 BYTE PTR _pMsg$157676[ebp+7], al
  00069	0f b6 46 07	 movzx	 eax, BYTE PTR [esi+7]
  0006d	88 95 e9 fe ff
	ff		 mov	 BYTE PTR _pMsg$157676[ebp+5], dl
  00073	88 85 ea fe ff
	ff		 mov	 BYTE PTR _pMsg$157676[ebp+6], al

; 1678 : 
; 1679 : 		DataSend(lpMsg->wRequestUserIndex, (LPBYTE)&pMsg, sizeof(pMsg));

  00079	0f b7 46 04	 movzx	 eax, WORD PTR [esi+4]
  0007d	6a 08		 push	 8
  0007f	8d 95 e4 fe ff
	ff		 lea	 edx, DWORD PTR _pMsg$157676[ebp]
  00085	52		 push	 edx
  00086	50		 push	 eax
  00087	66 c7 85 e4 fe
	ff ff c1 08	 mov	 WORD PTR _pMsg$157676[ebp], 2241 ; 000008c1H
  00090	c6 85 e6 fe ff
	ff e6		 mov	 BYTE PTR _pMsg$157676[ebp+2], 230 ; 000000e6H
  00097	66 c7 85 e7 fe
	ff ff 01 02	 mov	 WORD PTR _pMsg$157676[ebp+3], 513 ; 00000201H
  000a0	88 8d eb fe ff
	ff		 mov	 BYTE PTR _pMsg$157676[ebp+7], cl
  000a6	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 1680 : 
; 1681 : 		if ( lpMsg->btResult == EX_RESULT_FAIL ||lpMsg->btResult == EX_RESULT_FAIL_FOR_CASTLE )

  000ab	8a 46 08	 mov	 al, BYTE PTR [esi+8]
  000ae	83 c4 0c	 add	 esp, 12			; 0000000cH
  000b1	84 c0		 test	 al, al
  000b3	0f 84 3f 01 00
	00		 je	 $LN3@DGUnionBre@2
  000b9	3c 10		 cmp	 al, 16			; 00000010H
  000bb	75 2f		 jne	 SHORT $LN29@DGUnionBre@2
  000bd	5e		 pop	 esi
  000be	5b		 pop	 ebx

; 1726 : 			}
; 1727 : 		}
; 1728 : 	}
; 1729 : }

  000bf	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000c2	33 cd		 xor	 ecx, ebp
  000c4	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000c9	8b e5		 mov	 esp, ebp
  000cb	5d		 pop	 ebp
  000cc	c3		 ret	 0
$LN20@DGUnionBre@2:

; 1682 : 			return;
; 1683 : 
; 1684 : 	}
; 1685 : 	else if ( lpMsg->btFlag == 0 )

  000cd	84 c0		 test	 al, al
  000cf	75 1b		 jne	 SHORT $LN29@DGUnionBre@2

; 1686 : 	{
; 1687 : 		if ( !lpReqGuild )

  000d1	85 db		 test	 ebx, ebx
  000d3	0f 84 1f 01 00
	00		 je	 $LN3@DGUnionBre@2

; 1688 : 			return;
; 1689 : 
; 1690 : 		if ( lpMsg->btResult == EX_RESULT_FAIL ||lpMsg->btResult == EX_RESULT_FAIL_FOR_CASTLE )

  000d9	8a 46 08	 mov	 al, BYTE PTR [esi+8]
  000dc	84 c0		 test	 al, al
  000de	0f 84 14 01 00
	00		 je	 $LN3@DGUnionBre@2
  000e4	3c 10		 cmp	 al, 16			; 00000010H

; 1691 : 			return;

  000e6	0f 84 0c 01 00
	00		 je	 $LN3@DGUnionBre@2
$LN29@DGUnionBre@2:
  000ec	57		 push	 edi

; 1692 : 
; 1693 : 	}
; 1694 : 
; 1695 : 	lpReqGuild->SetGuildUnion(0);

  000ed	6a 00		 push	 0
  000ef	8b cb		 mov	 ecx, ebx
  000f1	e8 00 00 00 00	 call	 ?SetGuildUnion@_GUILD_INFO_STRUCT@@QAEXH@Z ; _GUILD_INFO_STRUCT::SetGuildUnion

; 1696 : 
; 1697 : 	LogAdd(LOG_BLACK, "[GS][U.System][Union][BreakOff] Request Union Member Guild: %s)",
; 1698 : 		lpReqGuild->Name);

  000f6	8d 43 04	 lea	 eax, DWORD PTR [ebx+4]
  000f9	50		 push	 eax
  000fa	68 00 00 00 00	 push	 OFFSET ??_C@_0EA@EGALHNLI@?$FLGS?$FN?$FLU?4System?$FN?$FLUnion?$FN?$FLBreakOff?$FN?5@
  000ff	6a 00		 push	 0
  00101	89 85 e8 fe ff
	ff		 mov	 DWORD PTR tv284[ebp], eax
  00107	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0010c	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1699 : 
; 1700 : 	for ( int n=0;n<MAX_USER_GUILD;n++)

  0010f	33 f6		 xor	 esi, esi
  00111	8d bb a0 03 00
	00		 lea	 edi, DWORD PTR [ebx+928]
  00117	eb 07 8d a4 24
	00 00 00 00	 npad	 9
$LL11@DGUnionBre@2:

; 1701 : 	{
; 1702 : 		if ( lpReqGuild->Use[n] > 0 )

  00120	80 bc 33 40 04
	00 00 00	 cmp	 BYTE PTR [ebx+esi+1088], 0
  00128	76 36		 jbe	 SHORT $LN10@DGUnionBre@2

; 1703 : 		{
; 1704 : 			if ( lpReqGuild->Index[n] >= 0 )

  0012a	66 83 3f 00	 cmp	 WORD PTR [edi], 0
  0012e	7c 30		 jl	 SHORT $LN10@DGUnionBre@2

; 1705 : 			{
; 1706 : 				TNotice _Notice(1);

  00130	6a 01		 push	 1
  00132	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157698[ebp]
  00138	e8 00 00 00 00	 call	 ??0TNotice@@QAE@E@Z	; TNotice::TNotice

; 1707 : 				_Notice.SendToUser(lpReqGuild->Index[n], lMsg.Get(MSGGET(6, 168)));

  0013d	68 a8 06 00 00	 push	 1704			; 000006a8H
  00142	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00147	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0014c	0f bf 0f	 movsx	 ecx, WORD PTR [edi]
  0014f	50		 push	 eax
  00150	51		 push	 ecx
  00151	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR __Notice$157698[ebp]
  00157	52		 push	 edx
  00158	e8 00 00 00 00	 call	 ?SendToUser@TNotice@@QAAXHPADZZ ; TNotice::SendToUser
  0015d	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN10@DGUnionBre@2:

; 1699 : 
; 1700 : 	for ( int n=0;n<MAX_USER_GUILD;n++)

  00160	46		 inc	 esi
  00161	83 c7 02	 add	 edi, 2
  00164	83 fe 50	 cmp	 esi, 80			; 00000050H
  00167	7c b7		 jl	 SHORT $LL11@DGUnionBre@2

; 1708 : 			}
; 1709 : 		}
; 1710 : 	}
; 1711 : 
; 1712 : 	if ( !lpTargetGuild)

  00169	8b 9d e0 fe ff
	ff		 mov	 ebx, DWORD PTR _lpTargetGuild$[ebp]
  0016f	85 db		 test	 ebx, ebx
  00171	0f 84 80 00 00
	00		 je	 $LN32@DGUnionBre@2

; 1713 : 		return;
; 1714 : 
; 1715 : 	LogAdd(LOG_BLACK, "[GS][U.System][Union][BreakOff] ( Union Master Guild: %s ), (Union Member Guild: %s)",
; 1716 : 		lpTargetGuild->Name, lpReqGuild->Name);

  00177	8b 85 e8 fe ff
	ff		 mov	 eax, DWORD PTR tv284[ebp]
  0017d	50		 push	 eax
  0017e	83 c3 04	 add	 ebx, 4
  00181	53		 push	 ebx
  00182	68 00 00 00 00	 push	 OFFSET ??_C@_0FF@IACINBOG@?$FLGS?$FN?$FLU?4System?$FN?$FLUnion?$FN?$FLBreakOff?$FN?5@
  00187	6a 00		 push	 0
  00189	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0018e	8b b5 e0 fe ff
	ff		 mov	 esi, DWORD PTR _lpTargetGuild$[ebp]
  00194	83 c4 10	 add	 esp, 16			; 00000010H

; 1717 : 
; 1718 : 	for (int n=0;n<MAX_USER_GUILD;n++)

  00197	33 ff		 xor	 edi, edi
  00199	81 c6 a0 03 00
	00		 add	 esi, 928		; 000003a0H
  0019f	90		 npad	 1
$LL31@DGUnionBre@2:

; 1719 : 	{
; 1720 : 		if ( lpTargetGuild->Use[n] > 0 )

  001a0	8b 8d e0 fe ff
	ff		 mov	 ecx, DWORD PTR _lpTargetGuild$[ebp]
  001a6	80 bc 39 40 04
	00 00 00	 cmp	 BYTE PTR [ecx+edi+1088], 0
  001ae	76 3e		 jbe	 SHORT $LN4@DGUnionBre@2

; 1721 : 		{
; 1722 : 			if ( lpTargetGuild->Index[n] >= 0 )

  001b0	66 83 3e 00	 cmp	 WORD PTR [esi], 0
  001b4	7c 38		 jl	 SHORT $LN4@DGUnionBre@2

; 1723 : 			{
; 1724 : 				TNotice _Notice(1);

  001b6	6a 01		 push	 1
  001b8	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157707[ebp]
  001be	e8 00 00 00 00	 call	 ??0TNotice@@QAE@E@Z	; TNotice::TNotice

; 1725 : 				_Notice.SendToUser(lpTargetGuild->Index[n], lMsg.Get(MSGGET(6, 169)), lpReqGuild->Name, lpTargetGuild->Name);

  001c3	8b 95 e8 fe ff
	ff		 mov	 edx, DWORD PTR tv284[ebp]
  001c9	53		 push	 ebx
  001ca	52		 push	 edx
  001cb	68 a9 06 00 00	 push	 1705			; 000006a9H
  001d0	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  001d5	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  001da	50		 push	 eax
  001db	0f bf 06	 movsx	 eax, WORD PTR [esi]
  001de	50		 push	 eax
  001df	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157707[ebp]
  001e5	51		 push	 ecx
  001e6	e8 00 00 00 00	 call	 ?SendToUser@TNotice@@QAAXHPADZZ ; TNotice::SendToUser
  001eb	83 c4 14	 add	 esp, 20			; 00000014H
$LN4@DGUnionBre@2:

; 1717 : 
; 1718 : 	for (int n=0;n<MAX_USER_GUILD;n++)

  001ee	47		 inc	 edi
  001ef	83 c6 02	 add	 esi, 2
  001f2	83 ff 50	 cmp	 edi, 80			; 00000050H
  001f5	7c a9		 jl	 SHORT $LL31@DGUnionBre@2
$LN32@DGUnionBre@2:
  001f7	5f		 pop	 edi
$LN3@DGUnionBre@2:

; 1726 : 			}
; 1727 : 		}
; 1728 : 	}
; 1729 : }

  001f8	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001fb	5e		 pop	 esi
  001fc	33 cd		 xor	 ecx, ebp
  001fe	5b		 pop	 ebx
  001ff	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00204	8b e5		 mov	 esp, ebp
  00206	5d		 pop	 ebp
  00207	c3		 ret	 0
?DGUnionBreakOff@@YAXPAUEXSDHP_RELATIONSHIP_BREAKOFF_RESULT@@@Z ENDP ; DGUnionBreakOff
_TEXT	ENDS
PUBLIC	??_C@_0CO@FKCLICLC@?$FLU?4System?$FN?$FLRival?$FN?$FLBreakOff?$FN?5?$CI?5?5?$CF@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?DGRelationShipAnsBreakOff@@YAXPAUEXSDHP_RELATIONSHIP_BREAKOFF_RESULT@@@Z ; DGRelationShipAnsBreakOff
;	COMDAT ??_C@_0CO@FKCLICLC@?$FLU?4System?$FN?$FLRival?$FN?$FLBreakOff?$FN?5?$CI?5?5?$CF@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_0CO@FKCLICLC@?$FLU?4System?$FN?$FLRival?$FN?$FLBreakOff?$FN?5?$CI?5?5?$CF@ DB '['
	DB	'U.System][Rival][BreakOff] (  %s ) vs ( %s )', 00H ; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?DGRelationShipAnsBreakOff@@YAXPAUEXSDHP_RELATIONSHIP_BREAKOFF_RESULT@@@Z
_TEXT	SEGMENT
_lpReqGuild$ = -288					; size = 4
_pMsg$157730 = -284					; size = 8
tv300 = -280						; size = 4
__Notice$157762 = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?DGRelationShipAnsBreakOff@@YAXPAUEXSDHP_RELATIONSHIP_BREAKOFF_RESULT@@@Z PROC ; DGRelationShipAnsBreakOff, COMDAT

; 1760 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 20 01 00
	00		 sub	 esp, 288		; 00000120H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 1761 : 	if ( lpMsg->btRelationShipType == G_RELATIONSHIP_UNION )

  00017	80 7e 09 01	 cmp	 BYTE PTR [esi+9], 1
  0001b	75 18		 jne	 SHORT $LN23@DGRelation@4

; 1762 : 	{
; 1763 : 		DGUnionBreakOff(lpMsg);

  0001d	56		 push	 esi
  0001e	e8 00 00 00 00	 call	 ?DGUnionBreakOff@@YAXPAUEXSDHP_RELATIONSHIP_BREAKOFF_RESULT@@@Z ; DGUnionBreakOff
  00023	83 c4 04	 add	 esp, 4
  00026	5e		 pop	 esi

; 1836 : 				}
; 1837 : 			}
; 1838 : 		}
; 1839 : 	}
; 1840 : }

  00027	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0002a	33 cd		 xor	 ecx, ebp
  0002c	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00031	8b e5		 mov	 esp, ebp
  00033	5d		 pop	 ebp
  00034	c3		 ret	 0
$LN23@DGRelation@4:

; 1764 : 		return;
; 1765 : 	}
; 1766 : 
; 1767 : 
; 1768 : 	_GUILD_INFO_STRUCT * lpReqGuild = Guild.SearchGuild_Number(lpMsg->iRequestGuildNum);

  00035	8b 46 0c	 mov	 eax, DWORD PTR [esi+12]
  00038	53		 push	 ebx
  00039	57		 push	 edi
  0003a	50		 push	 eax
  0003b	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00040	e8 00 00 00 00	 call	 ?SearchGuild_Number@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@H@Z ; CGuildClass::SearchGuild_Number

; 1769 : 	_GUILD_INFO_STRUCT * lpTargetGuild = Guild.SearchGuild_Number(lpMsg->iTargetGuildNum);

  00045	8b 4e 10	 mov	 ecx, DWORD PTR [esi+16]
  00048	8b f8		 mov	 edi, eax
  0004a	51		 push	 ecx
  0004b	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00050	89 bd e0 fe ff
	ff		 mov	 DWORD PTR _lpReqGuild$[ebp], edi
  00056	e8 00 00 00 00	 call	 ?SearchGuild_Number@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@H@Z ; CGuildClass::SearchGuild_Number
  0005b	8b d8		 mov	 ebx, eax

; 1770 : 
; 1771 : 	if ( lpMsg->btFlag == 1 )

  0005d	8a 46 03	 mov	 al, BYTE PTR [esi+3]
  00060	3c 01		 cmp	 al, 1
  00062	0f 85 a8 00 00
	00		 jne	 $LN22@DGRelation@4

; 1772 : 	{
; 1773 : 		if ( !lpReqGuild || !lpTargetGuild )

  00068	85 ff		 test	 edi, edi
  0006a	74 04		 je	 SHORT $LN20@DGRelation@4
  0006c	85 db		 test	 ebx, ebx
  0006e	75 04		 jne	 SHORT $LN21@DGRelation@4
$LN20@DGRelation@4:

; 1774 : 		{
; 1775 : 			lpMsg->btResult = 0;

  00070	c6 46 08 00	 mov	 BYTE PTR [esi+8], 0
$LN21@DGRelation@4:

; 1776 : 		}
; 1777 : 
; 1778 : 		PMSG_RELATIONSHIP_JOIN_BREAKOFF_ANS pMsg ={0};
; 1779 : 
; 1780 : 		pMsg.h.set((LPBYTE)&pMsg, 0xE6, sizeof(pMsg));
; 1781 : 		pMsg.btResult = lpMsg->btResult;

  00074	0f b6 56 08	 movzx	 edx, BYTE PTR [esi+8]

; 1782 : 		pMsg.btRequestType = 2;
; 1783 : 		pMsg.btRelationShipType = lpMsg->btRelationShipType;
; 1784 : 		pMsg.btTargetUserIndexH = SET_NUMBERH(lpMsg->wTargetUserIndex);

  00078	8a 4e 07	 mov	 cl, BYTE PTR [esi+7]
  0007b	33 c0		 xor	 eax, eax
  0007d	89 85 e5 fe ff
	ff		 mov	 DWORD PTR _pMsg$157730[ebp+1], eax
  00083	66 89 85 e9 fe
	ff ff		 mov	 WORD PTR _pMsg$157730[ebp+5], ax
  0008a	88 85 eb fe ff
	ff		 mov	 BYTE PTR _pMsg$157730[ebp+7], al
  00090	8a 46 09	 mov	 al, BYTE PTR [esi+9]
  00093	88 85 e7 fe ff
	ff		 mov	 BYTE PTR _pMsg$157730[ebp+3], al

; 1785 : 		pMsg.btTargetUserIndexL = SET_NUMBERL(lpMsg->wTargetUserIndex);
; 1786 : 
; 1787 : 		if ( lpMsg->wRequestUserIndex != -1 )

  00099	0f b7 46 04	 movzx	 eax, WORD PTR [esi+4]
  0009d	88 95 e9 fe ff
	ff		 mov	 BYTE PTR _pMsg$157730[ebp+5], dl
  000a3	0f b6 56 06	 movzx	 edx, BYTE PTR [esi+6]
  000a7	66 c7 85 e4 fe
	ff ff c1 08	 mov	 WORD PTR _pMsg$157730[ebp], 2241 ; 000008c1H
  000b0	c6 85 e6 fe ff
	ff e6		 mov	 BYTE PTR _pMsg$157730[ebp+2], 230 ; 000000e6H
  000b7	c6 85 e8 fe ff
	ff 02		 mov	 BYTE PTR _pMsg$157730[ebp+4], 2
  000be	88 8d ea fe ff
	ff		 mov	 BYTE PTR _pMsg$157730[ebp+6], cl
  000c4	88 95 eb fe ff
	ff		 mov	 BYTE PTR _pMsg$157730[ebp+7], dl
  000ca	83 f8 ff	 cmp	 eax, -1
  000cd	74 12		 je	 SHORT $LN19@DGRelation@4

; 1788 : 			DataSend(lpMsg->wRequestUserIndex, (LPBYTE)&pMsg, sizeof(pMsg));

  000cf	6a 08		 push	 8
  000d1	8d 8d e4 fe ff
	ff		 lea	 ecx, DWORD PTR _pMsg$157730[ebp]
  000d7	51		 push	 ecx
  000d8	50		 push	 eax
  000d9	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  000de	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN19@DGRelation@4:

; 1789 : 
; 1790 : 		pMsg.btTargetUserIndexH = SET_NUMBERH(lpMsg->wRequestUserIndex);
; 1791 : 		pMsg.btTargetUserIndexL = SET_NUMBERL(lpMsg->wRequestUserIndex);

  000e1	8a 46 04	 mov	 al, BYTE PTR [esi+4]
  000e4	8a 56 05	 mov	 dl, BYTE PTR [esi+5]
  000e7	88 85 eb fe ff
	ff		 mov	 BYTE PTR _pMsg$157730[ebp+7], al

; 1792 : 
; 1793 : 		if ( lpMsg->wTargetUserIndex != -1 )

  000ed	0f b7 46 06	 movzx	 eax, WORD PTR [esi+6]
  000f1	88 95 ea fe ff
	ff		 mov	 BYTE PTR _pMsg$157730[ebp+6], dl
  000f7	83 f8 ff	 cmp	 eax, -1
  000fa	74 28		 je	 SHORT $LN18@DGRelation@4

; 1794 : 			DataSend(lpMsg->wTargetUserIndex, (LPBYTE)&pMsg, sizeof(pMsg));

  000fc	6a 08		 push	 8
  000fe	8d 8d e4 fe ff
	ff		 lea	 ecx, DWORD PTR _pMsg$157730[ebp]
  00104	51		 push	 ecx
  00105	50		 push	 eax
  00106	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0010b	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1795 : 
; 1796 : 		if ( lpMsg->btResult == EX_RESULT_FAIL ||lpMsg->btResult == EX_RESULT_FAIL_FOR_CASTLE )
; 1797 : 			return;

  0010e	eb 14		 jmp	 SHORT $LN18@DGRelation@4
$LN22@DGRelation@4:

; 1798 : 
; 1799 : 	}
; 1800 : 	else if ( lpMsg->btFlag == 0 )

  00110	84 c0		 test	 al, al
  00112	75 23		 jne	 SHORT $LN30@DGRelation@4

; 1801 : 	{
; 1802 : 		if ( !lpReqGuild || !lpTargetGuild )

  00114	85 ff		 test	 edi, edi
  00116	0f 84 e3 00 00
	00		 je	 $LN32@DGRelation@4
  0011c	85 db		 test	 ebx, ebx
  0011e	0f 84 db 00 00
	00		 je	 $LN32@DGRelation@4
$LN18@DGRelation@4:

; 1803 : 			return;
; 1804 : 
; 1805 : 		if ( lpMsg->btResult == EX_RESULT_FAIL ||lpMsg->btResult == EX_RESULT_FAIL_FOR_CASTLE )

  00124	8a 46 08	 mov	 al, BYTE PTR [esi+8]
  00127	84 c0		 test	 al, al
  00129	0f 84 d0 00 00
	00		 je	 $LN32@DGRelation@4
  0012f	3c 10		 cmp	 al, 16			; 00000010H

; 1806 : 			return;

  00131	0f 84 c8 00 00
	00		 je	 $LN32@DGRelation@4
$LN30@DGRelation@4:

; 1807 : 
; 1808 : 	}
; 1809 : 
; 1810 : 	if ( lpMsg->btRelationShipType == G_RELATIONSHIP_RIVAL )

  00137	80 7e 09 02	 cmp	 BYTE PTR [esi+9], 2
  0013b	75 20		 jne	 SHORT $LN31@DGRelation@4

; 1811 : 	{
; 1812 : 		lpReqGuild->SetGuildRival(0);

  0013d	6a 00		 push	 0
  0013f	8b cf		 mov	 ecx, edi
  00141	e8 00 00 00 00	 call	 ?SetGuildRival@_GUILD_INFO_STRUCT@@QAEXH@Z ; _GUILD_INFO_STRUCT::SetGuildRival

; 1813 : 		lpTargetGuild->SetGuildRival(0);

  00146	6a 00		 push	 0
  00148	8b cb		 mov	 ecx, ebx
  0014a	e8 00 00 00 00	 call	 ?SetGuildRival@_GUILD_INFO_STRUCT@@QAEXH@Z ; _GUILD_INFO_STRUCT::SetGuildRival

; 1814 : 		lpReqGuild->szGuildRivalName[0]=0;

  0014f	c6 87 28 07 00
	00 00		 mov	 BYTE PTR [edi+1832], 0

; 1815 : 		lpTargetGuild->szGuildRivalName[0]=0;

  00156	c6 83 28 07 00
	00 00		 mov	 BYTE PTR [ebx+1832], 0
$LN31@DGRelation@4:

; 1816 : 	}
; 1817 : 
; 1818 : 	LogAdd(LOG_BLACK, "[U.System][Rival][BreakOff] (  %s ) vs ( %s )",
; 1819 : 		lpReqGuild->Name, lpTargetGuild->Name);

  0015d	8d 43 04	 lea	 eax, DWORD PTR [ebx+4]
  00160	50		 push	 eax
  00161	8d 57 04	 lea	 edx, DWORD PTR [edi+4]
  00164	52		 push	 edx
  00165	68 00 00 00 00	 push	 OFFSET ??_C@_0CO@FKCLICLC@?$FLU?4System?$FN?$FLRival?$FN?$FLBreakOff?$FN?5?$CI?5?5?$CF@
  0016a	6a 00		 push	 0
  0016c	89 85 e8 fe ff
	ff		 mov	 DWORD PTR tv300[ebp], eax
  00172	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00177	83 c4 10	 add	 esp, 16			; 00000010H

; 1820 : 
; 1821 : 	for ( int n=0;n<MAX_USER_GUILD;n++)

  0017a	33 db		 xor	 ebx, ebx
  0017c	81 c7 a0 03 00
	00		 add	 edi, 928		; 000003a0H
  00182	eb 0c 8d a4 24
	00 00 00 00 eb
	03 8d 49 00	 npad	 14
$LL8@DGRelation@4:

; 1822 : 	{
; 1823 : 		if ( lpReqGuild->Use[n] > 0 )

  00190	8b 85 e0 fe ff
	ff		 mov	 eax, DWORD PTR _lpReqGuild$[ebp]
  00196	80 bc 18 40 04
	00 00 00	 cmp	 BYTE PTR [eax+ebx+1088], 0
  0019e	76 56		 jbe	 SHORT $LN7@DGRelation@4

; 1824 : 		{
; 1825 : 			if ( lpReqGuild->Index[n] >= 0 )

  001a0	66 83 3f 00	 cmp	 WORD PTR [edi], 0
  001a4	7c 50		 jl	 SHORT $LN7@DGRelation@4

; 1826 : 			{
; 1827 : 				TNotice _Notice(1);

  001a6	6a 01		 push	 1
  001a8	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157762[ebp]
  001ae	e8 00 00 00 00	 call	 ??0TNotice@@QAE@E@Z	; TNotice::TNotice

; 1828 : 
; 1829 : 				if ( lpMsg->btRelationShipType == G_RELATIONSHIP_UNION )

  001b3	8a 46 09	 mov	 al, BYTE PTR [esi+9]
  001b6	3c 01		 cmp	 al, 1
  001b8	75 0e		 jne	 SHORT $LN3@DGRelation@4

; 1830 : 				{
; 1831 : 					_Notice.SendToUser(lpReqGuild->Index[n], lMsg.Get(MSGGET(6, 170)), lpTargetGuild->Name);

  001ba	8b 8d e8 fe ff
	ff		 mov	 ecx, DWORD PTR tv300[ebp]
  001c0	51		 push	 ecx
  001c1	68 aa 06 00 00	 push	 1706			; 000006aaH
  001c6	eb 10		 jmp	 SHORT $LN36@DGRelation@4
$LN3@DGRelation@4:

; 1832 : 				}
; 1833 : 				else if ( lpMsg->btRelationShipType == G_RELATIONSHIP_RIVAL )

  001c8	3c 02		 cmp	 al, 2
  001ca	75 2a		 jne	 SHORT $LN7@DGRelation@4

; 1834 : 				{
; 1835 : 					_Notice.SendToUser(lpReqGuild->Index[n], lMsg.Get(MSGGET(6, 171)), lpTargetGuild->Name);

  001cc	8b 8d e8 fe ff
	ff		 mov	 ecx, DWORD PTR tv300[ebp]
  001d2	51		 push	 ecx
  001d3	68 ab 06 00 00	 push	 1707			; 000006abH
$LN36@DGRelation@4:
  001d8	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  001dd	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  001e2	0f bf 17	 movsx	 edx, WORD PTR [edi]
  001e5	50		 push	 eax
  001e6	52		 push	 edx
  001e7	8d 85 ec fe ff
	ff		 lea	 eax, DWORD PTR __Notice$157762[ebp]
  001ed	50		 push	 eax
  001ee	e8 00 00 00 00	 call	 ?SendToUser@TNotice@@QAAXHPADZZ ; TNotice::SendToUser
  001f3	83 c4 10	 add	 esp, 16			; 00000010H
$LN7@DGRelation@4:

; 1820 : 
; 1821 : 	for ( int n=0;n<MAX_USER_GUILD;n++)

  001f6	43		 inc	 ebx
  001f7	83 c7 02	 add	 edi, 2
  001fa	83 fb 50	 cmp	 ebx, 80			; 00000050H
  001fd	7c 91		 jl	 SHORT $LL8@DGRelation@4
$LN32@DGRelation@4:

; 1836 : 				}
; 1837 : 			}
; 1838 : 		}
; 1839 : 	}
; 1840 : }

  001ff	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00202	5f		 pop	 edi
  00203	5b		 pop	 ebx
  00204	33 cd		 xor	 ecx, ebp
  00206	5e		 pop	 esi
  00207	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0020c	8b e5		 mov	 esp, ebp
  0020e	5d		 pop	 ebp
  0020f	c3		 ret	 0
?DGRelationShipAnsBreakOff@@YAXPAUEXSDHP_RELATIONSHIP_BREAKOFF_RESULT@@@Z ENDP ; DGRelationShipAnsBreakOff
_TEXT	ENDS
PUBLIC	??_C@_0FE@MHBNIMHI@?$FLGS?$FN?$FLU?4System?$FN?$FLUnion?$FN?$FLKickOut?$FN?5?$CI@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?DGRelationShipAnsKickOutUnionMember@@YAXPAUEXSDHP_KICKOUT_UNIONMEMBER_RESULT@@@Z ; DGRelationShipAnsKickOutUnionMember
;	COMDAT ??_C@_0FE@MHBNIMHI@?$FLGS?$FN?$FLU?4System?$FN?$FLUnion?$FN?$FLKickOut?$FN?5?$CI@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\include\prodef.h
CONST	SEGMENT
??_C@_0FE@MHBNIMHI@?$FLGS?$FN?$FLU?4System?$FN?$FLUnion?$FN?$FLKickOut?$FN?5?$CI@ DB '['
	DB	'GS][U.System][Union][KickOut] ( Union Master Guild: %s ), (Un'
	DB	'ion Member Guild: %s)', 00H			; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?DGRelationShipAnsKickOutUnionMember@@YAXPAUEXSDHP_KICKOUT_UNIONMEMBER_RESULT@@@Z
_TEXT	SEGMENT
tv225 = -296						; size = 4
_lpUnionMemberGuild$ = -292				; size = 4
_lpUnionMasterGuild$ = -288				; size = 4
_pMsg$157930 = -284					; size = 7
__Notice$157956 = -276					; size = 272
__Notice$157947 = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?DGRelationShipAnsKickOutUnionMember@@YAXPAUEXSDHP_KICKOUT_UNIONMEMBER_RESULT@@@Z PROC ; DGRelationShipAnsKickOutUnionMember, COMDAT

; 2046 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 28 01 00
	00		 sub	 esp, 296		; 00000128H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]
  00018	57		 push	 edi

; 2047 : 
; 2048 : 	_GUILD_INFO_STRUCT * lpUnionMasterGuild = Guild.SearchGuild(lpMsg->szUnionMasterGuildName);

  00019	8d 5e 0a	 lea	 ebx, DWORD PTR [esi+10]
  0001c	53		 push	 ebx
  0001d	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00022	e8 00 00 00 00	 call	 ?SearchGuild@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@PAD@Z ; CGuildClass::SearchGuild
  00027	89 85 e0 fe ff
	ff		 mov	 DWORD PTR _lpUnionMasterGuild$[ebp], eax

; 2049 : 	_GUILD_INFO_STRUCT * lpUnionMemberGuild = Guild.SearchGuild(lpMsg->szUnionMemberGuildName);

  0002d	8d 46 13	 lea	 eax, DWORD PTR [esi+19]
  00030	50		 push	 eax
  00031	b9 00 00 00 00	 mov	 ecx, OFFSET ?Guild@@3VCGuildClass@@A ; Guild
  00036	89 85 d8 fe ff
	ff		 mov	 DWORD PTR tv225[ebp], eax
  0003c	e8 00 00 00 00	 call	 ?SearchGuild@CGuildClass@@QAEPAU_GUILD_INFO_STRUCT@@PAD@Z ; CGuildClass::SearchGuild
  00041	8b f8		 mov	 edi, eax

; 2050 : 
; 2051 : 	if ( lpMsg->btFlag == 1 )

  00043	8a 46 04	 mov	 al, BYTE PTR [esi+4]
  00046	89 bd dc fe ff
	ff		 mov	 DWORD PTR _lpUnionMemberGuild$[ebp], edi
  0004c	3c 01		 cmp	 al, 1
  0004e	75 6f		 jne	 SHORT $LN21@DGRelation@5

; 2052 : 	{
; 2053 : 		if ( !lpUnionMasterGuild )

  00050	83 bd e0 fe ff
	ff 00		 cmp	 DWORD PTR _lpUnionMasterGuild$[ebp], 0
  00057	75 04		 jne	 SHORT $LN20@DGRelation@5

; 2054 : 		{
; 2055 : 			lpMsg->btResult = 0;

  00059	c6 46 09 00	 mov	 BYTE PTR [esi+9], 0
$LN20@DGRelation@5:

; 2056 : 		}
; 2057 : 
; 2058 : 		PMSG_KICKOUT_UNIONMEMBER_RESULT pMsg ={0};
; 2059 : 
; 2060 : 		pMsg.h.set((LPBYTE)&pMsg, 0xEB, 0x01, sizeof(pMsg));
; 2061 : 		pMsg.btResult = lpMsg->btResult;
; 2062 : 		pMsg.btRequestType = 2;
; 2063 : 		pMsg.btRelationShipType = 1;
; 2064 : 
; 2065 : 		DataSend(lpMsg->wRequestUserIndex, (LPBYTE)&pMsg, sizeof(pMsg));

  0005d	0f b7 56 06	 movzx	 edx, WORD PTR [esi+6]
  00061	33 c0		 xor	 eax, eax
  00063	89 85 e5 fe ff
	ff		 mov	 DWORD PTR _pMsg$157930[ebp+1], eax
  00069	66 89 85 e9 fe
	ff ff		 mov	 WORD PTR _pMsg$157930[ebp+5], ax
  00070	0f b6 46 09	 movzx	 eax, BYTE PTR [esi+9]
  00074	6a 07		 push	 7
  00076	8d 8d e4 fe ff
	ff		 lea	 ecx, DWORD PTR _pMsg$157930[ebp]
  0007c	51		 push	 ecx
  0007d	52		 push	 edx
  0007e	c7 85 e4 fe ff
	ff c1 07 eb 01	 mov	 DWORD PTR _pMsg$157930[ebp], 32180161 ; 01eb07c1H
  00088	88 85 e8 fe ff
	ff		 mov	 BYTE PTR _pMsg$157930[ebp+4], al
  0008e	66 c7 85 e9 fe
	ff ff 02 01	 mov	 WORD PTR _pMsg$157930[ebp+5], 258 ; 00000102H
  00097	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 2066 : 
; 2067 : 		if ( lpMsg->btResult == 0 || lpMsg->btResult == 0x10 )

  0009c	8a 46 09	 mov	 al, BYTE PTR [esi+9]
  0009f	83 c4 0c	 add	 esp, 12			; 0000000cH
  000a2	84 c0		 test	 al, al
  000a4	0f 84 35 01 00
	00		 je	 $LN3@DGRelation@5
  000aa	3c 10		 cmp	 al, 16			; 00000010H
  000ac	75 30		 jne	 SHORT $LN30@DGRelation@5
  000ae	5f		 pop	 edi
  000af	5e		 pop	 esi
  000b0	5b		 pop	 ebx

; 2111 : 			}
; 2112 : 		}
; 2113 : 	}
; 2114 : 
; 2115 : }

  000b1	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000b4	33 cd		 xor	 ecx, ebp
  000b6	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000bb	8b e5		 mov	 esp, ebp
  000bd	5d		 pop	 ebp
  000be	c3		 ret	 0
$LN21@DGRelation@5:

; 2068 : 			return;
; 2069 : 	}
; 2070 : 	else if ( lpMsg->btFlag == 0 )

  000bf	84 c0		 test	 al, al
  000c1	75 1b		 jne	 SHORT $LN30@DGRelation@5

; 2071 : 	{
; 2072 : 		if ( !lpUnionMemberGuild )

  000c3	85 ff		 test	 edi, edi
  000c5	0f 84 14 01 00
	00		 je	 $LN3@DGRelation@5

; 2073 : 			return;
; 2074 : 
; 2075 : 		if ( lpMsg->btResult == 0 || lpMsg->btResult == 0x10 )

  000cb	8a 46 09	 mov	 al, BYTE PTR [esi+9]
  000ce	84 c0		 test	 al, al
  000d0	0f 84 09 01 00
	00		 je	 $LN3@DGRelation@5
  000d6	3c 10		 cmp	 al, 16			; 00000010H

; 2076 : 			return;

  000d8	0f 84 01 01 00
	00		 je	 $LN3@DGRelation@5
$LN30@DGRelation@5:

; 2077 : 	}		
; 2078 : 
; 2079 : 	if ( lpUnionMasterGuild )

  000de	83 bd e0 fe ff
	ff 00		 cmp	 DWORD PTR _lpUnionMasterGuild$[ebp], 0
  000e5	74 76		 je	 SHORT $LN9@DGRelation@5

; 2080 : 	{
; 2081 : 		for ( int n=0;n<MAX_USER_GUILD;n++)

  000e7	8b b5 e0 fe ff
	ff		 mov	 esi, DWORD PTR _lpUnionMasterGuild$[ebp]
  000ed	33 ff		 xor	 edi, edi
  000ef	81 c6 a0 03 00
	00		 add	 esi, 928		; 000003a0H
  000f5	eb 09 8d a4 24
	00 00 00 00 8b
	ff		 npad	 11
$LL32@DGRelation@5:

; 2082 : 		{
; 2083 : 			if ( lpUnionMasterGuild->Use[n] > 0 )

  00100	8b 85 e0 fe ff
	ff		 mov	 eax, DWORD PTR _lpUnionMasterGuild$[ebp]
  00106	80 bc 38 40 04
	00 00 00	 cmp	 BYTE PTR [eax+edi+1088], 0
  0010e	76 3e		 jbe	 SHORT $LN10@DGRelation@5

; 2084 : 			{
; 2085 : 				if ( lpUnionMasterGuild->Index[n] >= 0 )

  00110	66 83 3e 00	 cmp	 WORD PTR [esi], 0
  00114	7c 38		 jl	 SHORT $LN10@DGRelation@5

; 2086 : 				{
; 2087 : 					TNotice _Notice(1);

  00116	6a 01		 push	 1
  00118	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157947[ebp]
  0011e	e8 00 00 00 00	 call	 ??0TNotice@@QAE@E@Z	; TNotice::TNotice

; 2088 : 					_Notice.SendToUser(lpUnionMasterGuild->Index[n], lMsg.Get(MSGGET(6, 169)),
; 2089 : 						lpMsg->szUnionMemberGuildName, lpMsg->szUnionMasterGuildName);

  00123	8b 8d d8 fe ff
	ff		 mov	 ecx, DWORD PTR tv225[ebp]
  00129	53		 push	 ebx
  0012a	51		 push	 ecx
  0012b	68 a9 06 00 00	 push	 1705			; 000006a9H
  00130	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00135	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0013a	0f bf 16	 movsx	 edx, WORD PTR [esi]
  0013d	50		 push	 eax
  0013e	52		 push	 edx
  0013f	8d 85 ec fe ff
	ff		 lea	 eax, DWORD PTR __Notice$157947[ebp]
  00145	50		 push	 eax
  00146	e8 00 00 00 00	 call	 ?SendToUser@TNotice@@QAAXHPADZZ ; TNotice::SendToUser
  0014b	83 c4 14	 add	 esp, 20			; 00000014H
$LN10@DGRelation@5:

; 2080 : 	{
; 2081 : 		for ( int n=0;n<MAX_USER_GUILD;n++)

  0014e	47		 inc	 edi
  0014f	83 c6 02	 add	 esi, 2
  00152	83 ff 50	 cmp	 edi, 80			; 00000050H
  00155	7c a9		 jl	 SHORT $LL32@DGRelation@5
  00157	8b bd dc fe ff
	ff		 mov	 edi, DWORD PTR _lpUnionMemberGuild$[ebp]
$LN9@DGRelation@5:

; 2090 : 				}
; 2091 : 			}
; 2092 : 		}
; 2093 : 	}
; 2094 : 
; 2095 : 	LogAdd(LOG_BLACK, "[GS][U.System][Union][KickOut] ( Union Master Guild: %s ), (Union Member Guild: %s)",
; 2096 : 		lpMsg->szUnionMasterGuildName, lpMsg->szUnionMemberGuildName);

  0015d	8b 8d d8 fe ff
	ff		 mov	 ecx, DWORD PTR tv225[ebp]
  00163	51		 push	 ecx
  00164	53		 push	 ebx
  00165	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MHBNIMHI@?$FLGS?$FN?$FLU?4System?$FN?$FLUnion?$FN?$FLKickOut?$FN?5?$CI@
  0016a	6a 00		 push	 0
  0016c	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00171	83 c4 10	 add	 esp, 16			; 00000010H

; 2097 : 
; 2098 : 	if ( !lpUnionMemberGuild )

  00174	85 ff		 test	 edi, edi
  00176	74 67		 je	 SHORT $LN3@DGRelation@5

; 2099 : 		return;
; 2100 : 
; 2101 : 	lpUnionMemberGuild->SetGuildUnion(0);

  00178	6a 00		 push	 0
  0017a	8b cf		 mov	 ecx, edi
  0017c	e8 00 00 00 00	 call	 ?SetGuildUnion@_GUILD_INFO_STRUCT@@QAEXH@Z ; _GUILD_INFO_STRUCT::SetGuildUnion

; 2102 : 
; 2103 : 	for ( int n=0;n<MAX_USER_GUILD;n++)

  00181	33 f6		 xor	 esi, esi
  00183	81 c7 a0 03 00
	00		 add	 edi, 928		; 000003a0H
  00189	8d a4 24 00 00
	00 00		 npad	 7
$LL5@DGRelation@5:

; 2104 : 	{
; 2105 : 		if ( lpUnionMemberGuild->Use[n] > 0 )

  00190	8b 95 dc fe ff
	ff		 mov	 edx, DWORD PTR _lpUnionMemberGuild$[ebp]
  00196	80 bc 32 40 04
	00 00 00	 cmp	 BYTE PTR [edx+esi+1088], 0
  0019e	76 36		 jbe	 SHORT $LN4@DGRelation@5

; 2106 : 		{
; 2107 : 			if ( lpUnionMemberGuild->Index[n] >= 0 )

  001a0	66 83 3f 00	 cmp	 WORD PTR [edi], 0
  001a4	7c 30		 jl	 SHORT $LN4@DGRelation@5

; 2108 : 			{
; 2109 : 				TNotice _Notice(1);

  001a6	6a 01		 push	 1
  001a8	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157956[ebp]
  001ae	e8 00 00 00 00	 call	 ??0TNotice@@QAE@E@Z	; TNotice::TNotice

; 2110 : 				_Notice.SendToUser(lpUnionMemberGuild->Index[n], lMsg.Get(MSGGET(6, 168)));

  001b3	68 a8 06 00 00	 push	 1704			; 000006a8H
  001b8	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  001bd	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  001c2	50		 push	 eax
  001c3	0f bf 07	 movsx	 eax, WORD PTR [edi]
  001c6	50		 push	 eax
  001c7	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR __Notice$157956[ebp]
  001cd	51		 push	 ecx
  001ce	e8 00 00 00 00	 call	 ?SendToUser@TNotice@@QAAXHPADZZ ; TNotice::SendToUser
  001d3	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN4@DGRelation@5:

; 2102 : 
; 2103 : 	for ( int n=0;n<MAX_USER_GUILD;n++)

  001d6	46		 inc	 esi
  001d7	83 c7 02	 add	 edi, 2
  001da	83 fe 50	 cmp	 esi, 80			; 00000050H
  001dd	7c b1		 jl	 SHORT $LL5@DGRelation@5
$LN3@DGRelation@5:

; 2111 : 			}
; 2112 : 		}
; 2113 : 	}
; 2114 : 
; 2115 : }

  001df	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001e2	5f		 pop	 edi
  001e3	5e		 pop	 esi
  001e4	33 cd		 xor	 ecx, ebp
  001e6	5b		 pop	 ebx
  001e7	e8 00 00 00 00	 call	 @__security_check_cookie@4
  001ec	8b e5		 mov	 esp, ebp
  001ee	5d		 pop	 ebp
  001ef	c3		 ret	 0
?DGRelationShipAnsKickOutUnionMember@@YAXPAUEXSDHP_KICKOUT_UNIONMEMBER_RESULT@@@Z ENDP ; DGRelationShipAnsKickOutUnionMember
_TEXT	ENDS
PUBLIC	??_C@_0CD@HIFGHJCH@?$FL?$CFs?$FN?5Friend?5mail?5send?5?$CFs?5?$CISize?3?$CF@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendMemoSend@@YAXPAUPMSG_FRIEND_MEMO@@H@Z	; FriendMemoSend
;	COMDAT ??_C@_0CD@HIFGHJCH@?$FL?$CFs?$FN?5Friend?5mail?5send?5?$CFs?5?$CISize?3?$CF@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\winutil.h
CONST	SEGMENT
??_C@_0CD@HIFGHJCH@?$FL?$CFs?$FN?5Friend?5mail?5send?5?$CFs?5?$CISize?3?$CF@ DB '['
	DB	'%s] Friend mail send %s (Size:%d)', 00H	; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\edsprotocol.cpp
CONST	ENDS
;	COMDAT ?FriendMemoSend@@YAXPAUPMSG_FRIEND_MEMO@@H@Z
_TEXT	SEGMENT
_bsize$ = -1132						; size = 4
_pResult$158276 = -1128					; size = 24
_pResult$158274 = -1128					; size = 24
_pResult$158271 = -1128					; size = 24
_pMsg$ = -1104						; size = 1088
_Name$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
_aIndex$ = 12						; size = 4
?FriendMemoSend@@YAXPAUPMSG_FRIEND_MEMO@@H@Z PROC	; FriendMemoSend, COMDAT

; 2635 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 6c 04 00
	00		 sub	 esp, 1132		; 0000046cH
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	8b 5d 08	 mov	 ebx, DWORD PTR _lpMsg$[ebp]
  00017	57		 push	 edi
  00018	8b 7d 0c	 mov	 edi, DWORD PTR _aIndex$[ebp]

; 2636 : 	if ( !gObjIsConnectedGP(aIndex))

  0001b	57		 push	 edi
  0001c	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHH@Z ; gObjIsConnectedGP
  00021	83 c4 04	 add	 esp, 4
  00024	85 c0		 test	 eax, eax
  00026	75 28		 jne	 SHORT $LN5@FriendMemo@8

; 2637 : 	{
; 2638 : 		LogAdd(LOG_BLACK, "error-L2 : Index %s %d", __FILE__, __LINE__);

  00028	68 4e 0a 00 00	 push	 2638			; 00000a4eH
  0002d	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@FCCBMCDG@EDSProtocol?4cpp?$AA@
  00032	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@LCDOHCGD@error?9L2?5?3?5Index?5?$CFs?5?$CFd?$AA@
  00037	50		 push	 eax
  00038	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0003d	83 c4 10	 add	 esp, 16			; 00000010H
  00040	5f		 pop	 edi
  00041	5b		 pop	 ebx

; 2704 : }

  00042	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00045	33 cd		 xor	 ecx, ebp
  00047	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0004c	8b e5		 mov	 esp, ebp
  0004e	5d		 pop	 ebp
  0004f	c3		 ret	 0
$LN5@FriendMemo@8:

; 2639 : 		return;
; 2640 : 	}
; 2641 : 
; 2642 : 	char_ID Name(lpMsg->Name);

  00050	33 c0		 xor	 eax, eax
  00052	8d 4b 08	 lea	 ecx, DWORD PTR [ebx+8]
  00055	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  00058	89 45 f4	 mov	 DWORD PTR _Name$[ebp+4], eax
  0005b	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
  0005f	88 45 fa	 mov	 BYTE PTR _Name$[ebp+10], al
  00062	85 c9		 test	 ecx, ecx
  00064	74 13		 je	 SHORT $LN8@FriendMemo@8
  00066	8b 01		 mov	 eax, DWORD PTR [ecx]
  00068	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  0006b	89 45 f0	 mov	 DWORD PTR _Name$[ebp], eax
  0006e	66 8b 41 08	 mov	 ax, WORD PTR [ecx+8]
  00072	89 55 f4	 mov	 DWORD PTR _Name$[ebp+4], edx
  00075	66 89 45 f8	 mov	 WORD PTR _Name$[ebp+8], ax
$LN8@FriendMemo@8:

; 2643 : 
; 2644 : 	if ( gObj[aIndex].Money < 1000 )

  00079	8b c7		 mov	 eax, edi
  0007b	69 c0 64 15 00
	00		 imul	 eax, 5476		; 00001564H
  00081	81 b8 b0 00 00
	00 e8 03 00 00	 cmp	 DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+176], 1000 ; 000003e8H
  0008b	7d 5c		 jge	 SHORT $LN4@FriendMemo@8

; 2645 : 	{
; 2646 : 		FHP_FRIEND_MEMO_SEND_RESULT pResult;
; 2647 : 
; 2648 : 		pResult.Number = aIndex;
; 2649 : 		pResult.Result = 7;
; 2650 : 		pResult.WindowGuid = lpMsg->WindowGuid;
; 2651 : 		memcpy(pResult.Name, gObj[aIndex].Name, sizeof(pResult.Name));

  0008d	8b 90 6f 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+111]
  00093	8b 4b 04	 mov	 ecx, DWORD PTR [ebx+4]
  00096	89 8d ac fb ff
	ff		 mov	 DWORD PTR _pResult$158271[ebp+20], ecx
  0009c	8b 88 73 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+115]
  000a2	89 95 9e fb ff
	ff		 mov	 DWORD PTR _pResult$158271[ebp+6], edx
  000a8	66 8b 90 77 00
	00 00		 mov	 dx, WORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+119]

; 2652 : 
; 2653 : 		FriendMemoSendResult(&pResult);

  000af	8d 85 98 fb ff
	ff		 lea	 eax, DWORD PTR _pResult$158271[ebp]
  000b5	50		 push	 eax
  000b6	66 89 bd 9c fb
	ff ff		 mov	 WORD PTR _pResult$158271[ebp+4], di
  000bd	c6 85 a8 fb ff
	ff 07		 mov	 BYTE PTR _pResult$158271[ebp+16], 7
  000c4	89 8d a2 fb ff
	ff		 mov	 DWORD PTR _pResult$158271[ebp+10], ecx
  000ca	66 89 95 a6 fb
	ff ff		 mov	 WORD PTR _pResult$158271[ebp+14], dx
  000d1	e8 00 00 00 00	 call	 ?FriendMemoSendResult@@YAXPAUFHP_FRIEND_MEMO_SEND_RESULT@@@Z ; FriendMemoSendResult
  000d6	83 c4 04	 add	 esp, 4
  000d9	5f		 pop	 edi
  000da	5b		 pop	 ebx

; 2704 : }

  000db	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000de	33 cd		 xor	 ecx, ebp
  000e0	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000e5	8b e5		 mov	 esp, ebp
  000e7	5d		 pop	 ebp
  000e8	c3		 ret	 0
$LN4@FriendMemo@8:

; 2654 : 
; 2655 : 		return;
; 2656 : 	}
; 2657 : 
; 2658 : 	if ( lpMsg->MemoSize < 0 || lpMsg->MemoSize > 1000 )

  000e9	0f b7 4b 34	 movzx	 ecx, WORD PTR [ebx+52]
  000ed	66 85 c9	 test	 cx, cx
  000f0	0f 88 c9 01 00
	00		 js	 $LN2@FriendMemo@8
  000f6	ba e8 03 00 00	 mov	 edx, 1000		; 000003e8H
  000fb	66 3b ca	 cmp	 cx, dx
  000fe	0f 8f bb 01 00
	00		 jg	 $LN2@FriendMemo@8

; 2668 : 
; 2669 : 		return;
; 2670 : 	}
; 2671 : 
; 2672 : 	if ( Name.GetLength() < 1 )

  00104	56		 push	 esi
  00105	8d 75 f0	 lea	 esi, DWORD PTR _Name$[ebp]
  00108	8d 56 01	 lea	 edx, DWORD PTR [esi+1]
  0010b	eb 03 8d 49 00	 npad	 5
$LL17@FriendMemo@8:
  00110	8a 0e		 mov	 cl, BYTE PTR [esi]
  00112	46		 inc	 esi
  00113	84 c9		 test	 cl, cl
  00115	75 f9		 jne	 SHORT $LL17@FriendMemo@8
  00117	2b f2		 sub	 esi, edx
  00119	83 fe 01	 cmp	 esi, 1
  0011c	7d 5c		 jge	 SHORT $LN1@FriendMemo@8

; 2673 : 	{
; 2674 : 		FHP_FRIEND_MEMO_SEND_RESULT pResult;
; 2675 : 
; 2676 : 		pResult.Number = aIndex;
; 2677 : 		pResult.Result = 0;
; 2678 : 		pResult.WindowGuid = lpMsg->WindowGuid;
; 2679 : 		memcpy(pResult.Name, gObj[aIndex].Name, sizeof(pResult.Name));

  0011e	8b 90 6f 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+111]
  00124	88 8d a8 fb ff
	ff		 mov	 BYTE PTR _pResult$158276[ebp+16], cl
  0012a	8b 4b 04	 mov	 ecx, DWORD PTR [ebx+4]
  0012d	89 8d ac fb ff
	ff		 mov	 DWORD PTR _pResult$158276[ebp+20], ecx
  00133	8b 88 73 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+115]
  00139	89 95 9e fb ff
	ff		 mov	 DWORD PTR _pResult$158276[ebp+6], edx
  0013f	66 8b 90 77 00
	00 00		 mov	 dx, WORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+119]

; 2680 : 
; 2681 : 		FriendMemoSendResult(&pResult);

  00146	8d 85 98 fb ff
	ff		 lea	 eax, DWORD PTR _pResult$158276[ebp]
  0014c	50		 push	 eax
  0014d	66 89 bd 9c fb
	ff ff		 mov	 WORD PTR _pResult$158276[ebp+4], di
  00154	89 8d a2 fb ff
	ff		 mov	 DWORD PTR _pResult$158276[ebp+10], ecx
  0015a	66 89 95 a6 fb
	ff ff		 mov	 WORD PTR _pResult$158276[ebp+14], dx
  00161	e8 00 00 00 00	 call	 ?FriendMemoSendResult@@YAXPAUFHP_FRIEND_MEMO_SEND_RESULT@@@Z ; FriendMemoSendResult
  00166	83 c4 04	 add	 esp, 4
  00169	5e		 pop	 esi
  0016a	5f		 pop	 edi
  0016b	5b		 pop	 ebx

; 2704 : }

  0016c	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0016f	33 cd		 xor	 ecx, ebp
  00171	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00176	8b e5		 mov	 esp, ebp
  00178	5d		 pop	 ebp
  00179	c3		 ret	 0
$LN1@FriendMemo@8:

; 2682 : 
; 2683 : 		return;
; 2684 : 	}
; 2685 : 
; 2686 : 	FHP_FRIEND_MEMO_SEND pMsg;
; 2687 : 	int bsize = lpMsg->MemoSize + sizeof(pMsg) - sizeof(pMsg.Memo);

  0017a	0f b7 73 34	 movzx	 esi, WORD PTR [ebx+52]
  0017e	0f bf ce	 movsx	 ecx, si
  00181	83 c1 58	 add	 ecx, 88			; 00000058H

; 2688 : 
; 2689 : 	pMsg.h.set((LPBYTE)&pMsg, 0x70, bsize);

  00184	8b d1		 mov	 edx, ecx
  00186	89 8d 94 fb ff
	ff		 mov	 DWORD PTR _bsize$[ebp], ecx
  0018c	88 8d b2 fb ff
	ff		 mov	 BYTE PTR _pMsg$[ebp+2], cl

; 2690 : 	pMsg.WindowGuid = lpMsg->WindowGuid;

  00192	8b 4b 04	 mov	 ecx, DWORD PTR [ebx+4]
  00195	c1 ea 08	 shr	 edx, 8
  00198	89 8d b8 fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+8], ecx

; 2691 : 	pMsg.MemoSize = lpMsg->MemoSize;
; 2692 : 	pMsg.Number = aIndex;
; 2693 : 	pMsg.Dir = lpMsg->Dir;
; 2694 : 	pMsg.Action = lpMsg->Action;

  0019e	8a 4b 33	 mov	 cl, BYTE PTR [ebx+51]
  001a1	88 95 b1 fb ff
	ff		 mov	 BYTE PTR _pMsg$[ebp+1], dl
  001a7	8a 53 32	 mov	 dl, BYTE PTR [ebx+50]
  001aa	88 8d f1 fb ff
	ff		 mov	 BYTE PTR _pMsg$[ebp+65], cl
  001b0	88 95 f0 fb ff
	ff		 mov	 BYTE PTR _pMsg$[ebp+64], dl

; 2695 : 	memcpy(pMsg.Subject, lpMsg->Subject, sizeof(pMsg.Subject));
; 2696 : 	memcpy(pMsg.Name, gObj[aIndex].Name, sizeof(pMsg.Name));

  001b6	8b 90 6f 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+111]
  001bc	66 89 b5 f2 fb
	ff ff		 mov	 WORD PTR _pMsg$[ebp+66], si
  001c3	66 89 bd b4 fb
	ff ff		 mov	 WORD PTR _pMsg$[ebp+4], di
  001ca	8d 73 12	 lea	 esi, DWORD PTR [ebx+18]
  001cd	c6 85 b0 fb ff
	ff c2		 mov	 BYTE PTR _pMsg$[ebp], 194 ; 000000c2H
  001d4	c6 85 b3 fb ff
	ff 70		 mov	 BYTE PTR _pMsg$[ebp+3], 112 ; 00000070H
  001db	b9 08 00 00 00	 mov	 ecx, 8
  001e0	8d bd d0 fb ff
	ff		 lea	 edi, DWORD PTR _pMsg$[ebp+32]
  001e6	f3 a5		 rep movsd
  001e8	8b 88 73 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+115]
  001ee	8d b0 6f 00 00
	00		 lea	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+111]
  001f4	89 95 bc fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+12], edx
  001fa	66 8b 56 08	 mov	 dx, WORD PTR [esi+8]
  001fe	89 8d c0 fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+16], ecx

; 2697 : 	memcpy(pMsg.Photo, gObj[aIndex].CharSet, sizeof(pMsg.Photo));

  00204	8b 88 50 03 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+848]
  0020a	66 89 95 c4 fb
	ff ff		 mov	 WORD PTR _pMsg$[ebp+20], dx
  00211	8b 90 54 03 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+852]
  00217	89 8d f4 fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+68], ecx
  0021d	8b 88 58 03 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+856]
  00223	89 95 f8 fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+72], edx
  00229	8b 90 5c 03 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+860]
  0022f	0f b7 80 60 03
	00 00		 movzx	 eax, WORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+864]
  00236	66 89 85 04 fc
	ff ff		 mov	 WORD PTR _pMsg$[ebp+84], ax

; 2698 : 	memcpy(pMsg.ToName, lpMsg->Name, sizeof(pMsg.ToName));

  0023d	0f b7 43 10	 movzx	 eax, WORD PTR [ebx+16]
  00241	89 8d fc fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+76], ecx
  00247	8b 4b 08	 mov	 ecx, DWORD PTR [ebx+8]
  0024a	66 89 85 ce fb
	ff ff		 mov	 WORD PTR _pMsg$[ebp+30], ax

; 2699 : 	memcpy(pMsg.Memo, lpMsg->Memo, lpMsg->MemoSize);

  00251	0f b7 43 34	 movzx	 eax, WORD PTR [ebx+52]
  00255	89 8d c6 fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+22], ecx
  0025b	0f bf c8	 movsx	 ecx, ax
  0025e	89 95 00 fc ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+80], edx
  00264	8b 53 0c	 mov	 edx, DWORD PTR [ebx+12]
  00267	51		 push	 ecx
  00268	89 95 ca fb ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+26], edx
  0026e	83 c3 36	 add	 ebx, 54			; 00000036H
  00271	8d 95 06 fc ff
	ff		 lea	 edx, DWORD PTR _pMsg$[ebp+86]
  00277	53		 push	 ebx
  00278	52		 push	 edx
  00279	e8 00 00 00 00	 call	 _memcpy

; 2700 : 
; 2701 : 	wsExDbCli.DataSend((PCHAR)&pMsg, bsize);

  0027e	8b bd 94 fb ff
	ff		 mov	 edi, DWORD PTR _bsize$[ebp]
  00284	83 c4 0c	 add	 esp, 12			; 0000000cH
  00287	57		 push	 edi
  00288	8d 85 b0 fb ff
	ff		 lea	 eax, DWORD PTR _pMsg$[ebp]
  0028e	50		 push	 eax
  0028f	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsExDbCli@@3VwsJoinServerCli@@A ; wsExDbCli
  00294	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend

; 2702 : 
; 2703 : 	LogAdd(LOG_BLACK, "[%s] Friend mail send %s (Size:%d)", gObj[aIndex].Name, Name.GetBuffer(), bsize);

  00299	57		 push	 edi
  0029a	8d 4d f0	 lea	 ecx, DWORD PTR _Name$[ebp]
  0029d	51		 push	 ecx
  0029e	56		 push	 esi
  0029f	68 00 00 00 00	 push	 OFFSET ??_C@_0CD@HIFGHJCH@?$FL?$CFs?$FN?5Friend?5mail?5send?5?$CFs?5?$CISize?3?$CF@
  002a4	6a 00		 push	 0
  002a6	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  002ab	83 c4 14	 add	 esp, 20			; 00000014H
  002ae	5e		 pop	 esi
  002af	5f		 pop	 edi
  002b0	5b		 pop	 ebx

; 2704 : }

  002b1	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  002b4	33 cd		 xor	 ecx, ebp
  002b6	e8 00 00 00 00	 call	 @__security_check_cookie@4
  002bb	8b e5		 mov	 esp, ebp
  002bd	5d		 pop	 ebp
  002be	c3		 ret	 0
$LN2@FriendMemo@8:

; 2659 : 	{
; 2660 : 		FHP_FRIEND_MEMO_SEND_RESULT pResult;
; 2661 : 
; 2662 : 		pResult.Number = aIndex;
; 2663 : 		pResult.Result = 0;
; 2664 : 		pResult.WindowGuid = lpMsg->WindowGuid;
; 2665 : 		memcpy(pResult.Name, gObj[aIndex].Name, sizeof(pResult.Name));

  002bf	8b 88 6f 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+111]
  002c5	8b 53 04	 mov	 edx, DWORD PTR [ebx+4]
  002c8	89 95 ac fb ff
	ff		 mov	 DWORD PTR _pResult$158274[ebp+20], edx
  002ce	8b 90 73 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+115]
  002d4	66 8b 80 77 00
	00 00		 mov	 ax, WORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A[eax+119]
  002db	89 8d 9e fb ff
	ff		 mov	 DWORD PTR _pResult$158274[ebp+6], ecx

; 2666 : 
; 2667 : 		FriendMemoSendResult(&pResult);

  002e1	8d 8d 98 fb ff
	ff		 lea	 ecx, DWORD PTR _pResult$158274[ebp]
  002e7	51		 push	 ecx
  002e8	66 89 bd 9c fb
	ff ff		 mov	 WORD PTR _pResult$158274[ebp+4], di
  002ef	c6 85 a8 fb ff
	ff 00		 mov	 BYTE PTR _pResult$158274[ebp+16], 0
  002f6	89 95 a2 fb ff
	ff		 mov	 DWORD PTR _pResult$158274[ebp+10], edx
  002fc	66 89 85 a6 fb
	ff ff		 mov	 WORD PTR _pResult$158274[ebp+14], ax
  00303	e8 00 00 00 00	 call	 ?FriendMemoSendResult@@YAXPAUFHP_FRIEND_MEMO_SEND_RESULT@@@Z ; FriendMemoSendResult

; 2704 : }

  00308	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0030b	83 c4 04	 add	 esp, 4
  0030e	5f		 pop	 edi
  0030f	33 cd		 xor	 ecx, ebp
  00311	5b		 pop	 ebx
  00312	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00317	8b e5		 mov	 esp, ebp
  00319	5d		 pop	 ebp
  0031a	c3		 ret	 0
?FriendMemoSend@@YAXPAUPMSG_FRIEND_MEMO@@H@Z ENDP	; FriendMemoSend
_TEXT	ENDS
PUBLIC	?ExDataServerProtocolCore@@YAXEPAEH@Z		; ExDataServerProtocolCore
; Function compile flags: /Ogtp
;	COMDAT ?ExDataServerProtocolCore@@YAXEPAEH@Z
_TEXT	SEGMENT
_protoNum$ = 8						; size = 1
_aRecv$ = 12						; size = 4
_aLen$ = 16						; size = 4
?ExDataServerProtocolCore@@YAXEPAEH@Z PROC		; ExDataServerProtocolCore, COMDAT

; 37   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 38   : 	#ifdef TRACE_PROTOCOL
; 39   : 		LogAddHeadHex("EX_DATA_SERVER", aRecv, aLen);
; 40   : 	#endif
; 41   : 	
; 42   : 	switch ( protoNum )

  00003	0f b6 45 08	 movzx	 eax, BYTE PTR _protoNum$[ebp]
  00007	3d eb 00 00 00	 cmp	 eax, 235		; 000000ebH
  0000c	0f 87 f3 01 00
	00		 ja	 $LN38@ExDataServ@3
  00012	0f b6 80 00 00
	00 00		 movzx	 eax, BYTE PTR $LN42@ExDataServ@3[eax]
  00019	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN44@ExDataServ@3[eax*4]
$LN37@ExDataServ@3:

; 43   : 	{
; 44   : 		case 0x00:
; 45   : 			ExDataServerLoginResult((SDHP_RESULT *)aRecv);

  00020	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  00023	51		 push	 ecx
  00024	e8 00 00 00 00	 call	 ?ExDataServerLoginResult@@YAXPAUSDHP_RESULT@@@Z ; ExDataServerLoginResult

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  00029	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  0002c	5d		 pop	 ebp
  0002d	c3		 ret	 0
$LN36@ExDataServ@3:

; 46   : 			break;
; 47   : 
; 48   : 		case 0x02:
; 49   : 			GDCharCloseRecv((SDHP_USERCLOSE *)aRecv);

  0002e	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  00031	52		 push	 edx
  00032	e8 00 00 00 00	 call	 ?GDCharCloseRecv@@YAXPAUSDHP_USERCLOSE@@@Z ; GDCharCloseRecv

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  00037	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  0003a	5d		 pop	 ebp
  0003b	c3		 ret	 0
$LN35@ExDataServ@3:

; 50   : 			break;
; 51   : 
; 52   : 		case 0x30:
; 53   : 			GDGuildCreateRecv((SDHP_GUILDCREATE_RESULT *)aRecv);

  0003c	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0003f	50		 push	 eax
  00040	e8 00 00 00 00	 call	 ?GDGuildCreateRecv@@YAXPAUSDHP_GUILDCREATE_RESULT@@@Z ; GDGuildCreateRecv

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  00045	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  00048	5d		 pop	 ebp
  00049	c3		 ret	 0
$LN34@ExDataServ@3:

; 54   : 			break;
; 55   : 
; 56   : 		case 0x31:
; 57   : 			GDGuildDestroyRecv((SDHP_GUILDDESTROY_RESULT *)aRecv);

  0004a	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  0004d	51		 push	 ecx
  0004e	e8 00 00 00 00	 call	 ?GDGuildDestroyRecv@@YAXPAUSDHP_GUILDDESTROY_RESULT@@@Z ; GDGuildDestroyRecv

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  00053	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  00056	5d		 pop	 ebp
  00057	c3		 ret	 0
$LN33@ExDataServ@3:

; 58   : 			break;
; 59   : 
; 60   : 		case 0x32:
; 61   : 			GDGuildMemberAddResult((SDHP_GUILDMEMBERADD_RESULT *)aRecv);

  00058	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  0005b	52		 push	 edx
  0005c	e8 00 00 00 00	 call	 ?GDGuildMemberAddResult@@YAXPAUSDHP_GUILDMEMBERADD_RESULT@@@Z ; GDGuildMemberAddResult

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  00061	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  00064	5d		 pop	 ebp
  00065	c3		 ret	 0
$LN32@ExDataServ@3:

; 62   : 			break;
; 63   : 
; 64   : 		case 0x33:
; 65   : 			GDGuildMemberDelResult((SDHP_GUILDMEMBERDEL_RESULT *)aRecv);

  00066	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  00069	50		 push	 eax
  0006a	e8 00 00 00 00	 call	 ?GDGuildMemberDelResult@@YAXPAUSDHP_GUILDMEMBERDEL_RESULT@@@Z ; GDGuildMemberDelResult

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  0006f	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  00072	5d		 pop	 ebp
  00073	c3		 ret	 0
$LN31@ExDataServ@3:

; 66   : 			break;
; 67   : 
; 68   : 		case 0x35:
; 69   : 			DGGuildMemberInfo((SDHP_GUILDMEMBER_INFO *)aRecv);

  00074	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  00077	51		 push	 ecx
  00078	e8 00 00 00 00	 call	 ?DGGuildMemberInfo@@YAXPAUSDHP_GUILDMEMBER_INFO@@@Z ; DGGuildMemberInfo

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  0007d	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  00080	5d		 pop	 ebp
  00081	c3		 ret	 0
$LN30@ExDataServ@3:

; 70   : 			break;
; 71   : 
; 72   : 		case 0x36:
; 73   : 			DGGuildMasterListRecv(aRecv);

  00082	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  00085	52		 push	 edx
  00086	e8 00 00 00 00	 call	 ?DGGuildMasterListRecv@@YAXPAE@Z ; DGGuildMasterListRecv

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  0008b	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  0008e	5d		 pop	 ebp
  0008f	c3		 ret	 0
$LN29@ExDataServ@3:

; 74   : 			break;
; 75   : 
; 76   : 		case 0x37:
; 77   : 			GDGuildScoreUpdateRecv((SDHP_GUILDSCOREUPDATE *)aRecv);

  00090	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  00093	50		 push	 eax
  00094	e8 00 00 00 00	 call	 ?GDGuildScoreUpdateRecv@@YAXPAUSDHP_GUILDSCOREUPDATE@@@Z ; GDGuildScoreUpdateRecv

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  00099	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  0009c	5d		 pop	 ebp
  0009d	c3		 ret	 0
$LN28@ExDataServ@3:

; 78   : 			break;
; 79   : 
; 80   : 		case 0x38:
; 81   : 			DGGuildNoticeRecv((SDHP_GUILDNOTICE *)aRecv);

  0009e	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  000a1	51		 push	 ecx
  000a2	e8 00 00 00 00	 call	 ?DGGuildNoticeRecv@@YAXPAUSDHP_GUILDNOTICE@@@Z ; DGGuildNoticeRecv

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  000a7	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  000aa	5d		 pop	 ebp
  000ab	c3		 ret	 0
$LN27@ExDataServ@3:

; 82   : 			break;
; 83   : 
; 84   : 		case 0x40:
; 85   : 			DGGuildList((SDHP_GUILDCREATED *)aRecv);

  000ac	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  000af	52		 push	 edx
  000b0	e8 00 00 00 00	 call	 ?DGGuildList@@YAXPAUSDHP_GUILDCREATED@@@Z ; DGGuildList

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  000b5	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  000b8	5d		 pop	 ebp
  000b9	c3		 ret	 0
$LN26@ExDataServ@3:

; 86   : 			break;
; 87   : 
; 88   : 		case 0x41:
; 89   : 			DGGuildListState((SDHP_GUILDLISTSTATE *)aRecv);

  000ba	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  000bd	50		 push	 eax
  000be	e8 00 00 00 00	 call	 ?DGGuildListState@@YAXPAUSDHP_GUILDLISTSTATE@@@Z ; DGGuildListState

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  000c3	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  000c6	5d		 pop	 ebp
  000c7	c3		 ret	 0
$LN25@ExDataServ@3:

; 90   : 			break;
; 91   : 
; 92   : 		case 0x50:
; 93   : 			DGGuildServerGroupChattingRecv((EXSDHP_SERVERGROUP_GUILD_CHATTING_RECV *)aRecv);

  000c8	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  000cb	51		 push	 ecx
  000cc	e8 00 00 00 00	 call	 ?DGGuildServerGroupChattingRecv@@YAXPAUEXSDHP_SERVERGROUP_GUILD_CHATTING_RECV@@@Z ; DGGuildServerGroupChattingRecv

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  000d1	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  000d4	5d		 pop	 ebp
  000d5	c3		 ret	 0
$LN24@ExDataServ@3:

; 94   : 			break;
; 95   : 
; 96   : 		case 0x51:
; 97   : 			DGUnionServerGroupChattingRecv((EXSDHP_SERVERGROUP_UNION_CHATTING_RECV *)aRecv);

  000d6	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  000d9	52		 push	 edx
  000da	e8 00 00 00 00	 call	 ?DGUnionServerGroupChattingRecv@@YAXPAUEXSDHP_SERVERGROUP_UNION_CHATTING_RECV@@@Z ; DGUnionServerGroupChattingRecv

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  000df	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  000e2	5d		 pop	 ebp
  000e3	c3		 ret	 0
$LN23@ExDataServ@3:

; 98   : 			break;
; 99   : 		///////////////////////////////////////////
; 100  : 		case 0xE1:
; 101  : 			DGGuildAnsAssignStatus((EXSDHP_GUILD_ASSIGN_STATUS_RESULT *)aRecv);

  000e4	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  000e7	50		 push	 eax
  000e8	e8 00 00 00 00	 call	 ?DGGuildAnsAssignStatus@@YAXPAUEXSDHP_GUILD_ASSIGN_STATUS_RESULT@@@Z ; DGGuildAnsAssignStatus

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  000ed	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  000f0	5d		 pop	 ebp
  000f1	c3		 ret	 0
$LN22@ExDataServ@3:

; 102  : 			break;
; 103  : 
; 104  : 		case 0xE2:
; 105  : 			DGGuildAnsAssignType((EXSDHP_GUILD_ASSIGN_TYPE_RESULT *)aRecv);

  000f2	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  000f5	51		 push	 ecx
  000f6	e8 00 00 00 00	 call	 ?DGGuildAnsAssignType@@YAXPAUEXSDHP_GUILD_ASSIGN_TYPE_RESULT@@@Z ; DGGuildAnsAssignType

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  000fb	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  000fe	5d		 pop	 ebp
  000ff	c3		 ret	 0
$LN21@ExDataServ@3:

; 106  : 			break;
; 107  : 
; 108  : 		case 0xE5:
; 109  : 			DGRelationShipAnsJoin((EXSDHP_RELATIONSHIP_JOIN_RESULT *)aRecv);

  00100	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  00103	52		 push	 edx
  00104	e8 00 00 00 00	 call	 ?DGRelationShipAnsJoin@@YAXPAUEXSDHP_RELATIONSHIP_JOIN_RESULT@@@Z ; DGRelationShipAnsJoin

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  00109	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  0010c	5d		 pop	 ebp
  0010d	c3		 ret	 0
$LN20@ExDataServ@3:

; 110  : 			break;
; 111  : 
; 112  : 		case 0xE6:
; 113  : 			DGRelationShipAnsBreakOff((EXSDHP_RELATIONSHIP_BREAKOFF_RESULT *)aRecv);

  0010e	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  00111	50		 push	 eax
  00112	e8 00 00 00 00	 call	 ?DGRelationShipAnsBreakOff@@YAXPAUEXSDHP_RELATIONSHIP_BREAKOFF_RESULT@@@Z ; DGRelationShipAnsBreakOff

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  00117	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  0011a	5d		 pop	 ebp
  0011b	c3		 ret	 0
$LN19@ExDataServ@3:

; 114  : 			break;
; 115  : 
; 116  : 		case 0xE7:
; 117  : 			DGRelationShipListRecv((EXSDHP_UNION_RELATIONSHIP_LIST *)aRecv);

  0011c	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  0011f	51		 push	 ecx
  00120	e8 00 00 00 00	 call	 ?DGRelationShipListRecv@@YAXPAUEXSDHP_UNION_RELATIONSHIP_LIST@@@Z ; DGRelationShipListRecv

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  00125	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  00128	5d		 pop	 ebp
  00129	c3		 ret	 0
$LN18@ExDataServ@3:

; 118  : 			break;
; 119  : 
; 120  : 		case 0xE8:
; 121  : 			DGRelationShipNotificationRecv((EXSDHP_NOTIFICATION_RELATIONSHIP *)aRecv);

  0012a	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  0012d	52		 push	 edx
  0012e	e8 00 00 00 00	 call	 ?DGRelationShipNotificationRecv@@YAXPAUEXSDHP_NOTIFICATION_RELATIONSHIP@@@Z ; DGRelationShipNotificationRecv

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  00133	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  00136	5d		 pop	 ebp
  00137	c3		 ret	 0
$LN17@ExDataServ@3:

; 122  : 			break;
; 123  : 
; 124  : 		case 0xE9:
; 125  : 			DGUnionListRecv(aRecv);

  00138	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0013b	50		 push	 eax
  0013c	e8 00 00 00 00	 call	 ?DGUnionListRecv@@YAXPAE@Z ; DGUnionListRecv

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  00141	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  00144	5d		 pop	 ebp
  00145	c3		 ret	 0
$LN16@ExDataServ@3:

; 126  : 			break;
; 127  : 
; 128  : 		case 0xEB:
; 129  : 			{
; 130  : 				PMSG_DEFAULT2 * lpDef = (PMSG_DEFAULT2 *)aRecv;
; 131  : 
; 132  : 				switch ( lpDef->subcode )

  00146	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  00149	0f b6 41 03	 movzx	 eax, BYTE PTR [ecx+3]
  0014d	48		 dec	 eax
  0014e	0f 85 b1 00 00
	00		 jne	 $LN38@ExDataServ@3

; 133  : 				{
; 134  : 					case 0x01:
; 135  : 						DGRelationShipAnsKickOutUnionMember((EXSDHP_KICKOUT_UNIONMEMBER_RESULT *)aRecv);

  00154	51		 push	 ecx
  00155	e8 00 00 00 00	 call	 ?DGRelationShipAnsKickOutUnionMember@@YAXPAUEXSDHP_KICKOUT_UNIONMEMBER_RESULT@@@Z ; DGRelationShipAnsKickOutUnionMember

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  0015a	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  0015d	5d		 pop	 ebp
  0015e	c3		 ret	 0
$LN12@ExDataServ@3:

; 136  : 						break;
; 137  : 				}
; 138  : 			}
; 139  : 			break;
; 140  : 		//////////////////////////////////////////////////////////
; 141  : 		case 0x60:
; 142  : 			FriendListResult(aRecv);

  0015f	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  00162	51		 push	 ecx
  00163	e8 00 00 00 00	 call	 ?FriendListResult@@YAXPAE@Z ; FriendListResult

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  00168	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  0016b	5d		 pop	 ebp
  0016c	c3		 ret	 0
$LN11@ExDataServ@3:

; 143  : 			break;
; 144  : 
; 145  : 		case 0x61:
; 146  : 			WaitFriendListResult((FHP_WAITFRIENDLIST_COUNT *)aRecv);

  0016d	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  00170	52		 push	 edx
  00171	e8 00 00 00 00	 call	 ?WaitFriendListResult@@YAXPAUFHP_WAITFRIENDLIST_COUNT@@@Z ; WaitFriendListResult

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  00176	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  00179	5d		 pop	 ebp
  0017a	c3		 ret	 0
$LN10@ExDataServ@3:

; 147  : 			break;
; 148  : 
; 149  : 		case 0x62:
; 150  : 			FriendStateRecv((FHP_FRIEND_STATE *)aRecv);

  0017b	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0017e	50		 push	 eax
  0017f	e8 00 00 00 00	 call	 ?FriendStateRecv@@YAXPAUFHP_FRIEND_STATE@@@Z ; FriendStateRecv

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  00184	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  00187	5d		 pop	 ebp
  00188	c3		 ret	 0
$LN9@ExDataServ@3:

; 151  : 			break;
; 152  : 
; 153  : 		case 0x63:
; 154  : 			FriendAddResult((FHP_FRIEND_ADD_RESULT *)aRecv);

  00189	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  0018c	51		 push	 ecx
  0018d	e8 00 00 00 00	 call	 ?FriendAddResult@@YAXPAUFHP_FRIEND_ADD_RESULT@@@Z ; FriendAddResult

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  00192	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  00195	5d		 pop	 ebp
  00196	c3		 ret	 0
$LN8@ExDataServ@3:

; 155  : 			break;
; 156  : 
; 157  : 		case 0x64:
; 158  : 			WaitFriendAddResult((FHP_WAITFRIEND_ADD_RESULT *)aRecv);

  00197	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  0019a	52		 push	 edx
  0019b	e8 00 00 00 00	 call	 ?WaitFriendAddResult@@YAXPAUFHP_WAITFRIEND_ADD_RESULT@@@Z ; WaitFriendAddResult

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  001a0	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  001a3	5d		 pop	 ebp
  001a4	c3		 ret	 0
$LN7@ExDataServ@3:

; 159  : 			break;
; 160  : 
; 161  : 		case 0x65:
; 162  : 			FriendDelResult((FHP_FRIEND_DEL_RESULT *)aRecv);

  001a5	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  001a8	50		 push	 eax
  001a9	e8 00 00 00 00	 call	 ?FriendDelResult@@YAXPAUFHP_FRIEND_DEL_RESULT@@@Z ; FriendDelResult

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  001ae	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  001b1	5d		 pop	 ebp
  001b2	c3		 ret	 0
$LN6@ExDataServ@3:

; 163  : 			break;
; 164  : 
; 165  : 		case 0x66:
; 166  : 			FriendChatRoomCreateResult((FHP_FRIEND_CHATROOM_CREATE_RESULT *)aRecv);

  001b3	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  001b6	51		 push	 ecx
  001b7	e8 00 00 00 00	 call	 ?FriendChatRoomCreateResult@@YAXPAUFHP_FRIEND_CHATROOM_CREATE_RESULT@@@Z ; FriendChatRoomCreateResult

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  001bc	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  001bf	5d		 pop	 ebp
  001c0	c3		 ret	 0
$LN5@ExDataServ@3:

; 167  : 			break;
; 168  : 
; 169  : 		case 0x70:
; 170  : 			FriendMemoSendResult((FHP_FRIEND_MEMO_SEND_RESULT *)aRecv);

  001c1	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  001c4	52		 push	 edx
  001c5	e8 00 00 00 00	 call	 ?FriendMemoSendResult@@YAXPAUFHP_FRIEND_MEMO_SEND_RESULT@@@Z ; FriendMemoSendResult

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  001ca	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  001cd	5d		 pop	 ebp
  001ce	c3		 ret	 0
$LN4@ExDataServ@3:

; 171  : 			break;
; 172  : 
; 173  : 		case 0x71:
; 174  : 			FriendMemoList((FHP_FRIEND_MEMO_LIST *)aRecv);

  001cf	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  001d2	50		 push	 eax
  001d3	e8 00 00 00 00	 call	 ?FriendMemoList@@YAXPAUFHP_FRIEND_MEMO_LIST@@@Z ; FriendMemoList

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  001d8	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  001db	5d		 pop	 ebp
  001dc	c3		 ret	 0
$LN3@ExDataServ@3:

; 175  : 			break;
; 176  : 
; 177  : 		case 0x72:
; 178  : 			FriendMemoRead((FHP_FRIEND_MEMO_RECV *)aRecv);

  001dd	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  001e0	51		 push	 ecx
  001e1	e8 00 00 00 00	 call	 ?FriendMemoRead@@YAXPAUFHP_FRIEND_MEMO_RECV@@@Z ; FriendMemoRead

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  001e6	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  001e9	5d		 pop	 ebp
  001ea	c3		 ret	 0
$LN2@ExDataServ@3:

; 179  : 			break;
; 180  : 
; 181  : 		case 0x73:
; 182  : 			FriendMemoDelResult((FHP_FRIEND_MEMO_DEL_RESULT *)aRecv);

  001eb	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  001ee	52		 push	 edx
  001ef	e8 00 00 00 00	 call	 ?FriendMemoDelResult@@YAXPAUFHP_FRIEND_MEMO_DEL_RESULT@@@Z ; FriendMemoDelResult

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  001f4	83 c4 04	 add	 esp, 4

; 187  : 			break;
; 188  : 	}
; 189  : }

  001f7	5d		 pop	 ebp
  001f8	c3		 ret	 0
$LN1@ExDataServ@3:

; 183  : 			break;
; 184  : 
; 185  : 		case 0x74:
; 186  : 			FriendRoomInvitationRecv((FHP_FRIEND_INVITATION_RET *)aRecv);

  001f9	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  001fc	50		 push	 eax
  001fd	e8 00 00 00 00	 call	 ?FriendRoomInvitationRecv@@YAXPAUFHP_FRIEND_INVITATION_RET@@@Z ; FriendRoomInvitationRecv
  00202	83 c4 04	 add	 esp, 4
$LN38@ExDataServ@3:

; 187  : 			break;
; 188  : 	}
; 189  : }

  00205	5d		 pop	 ebp
  00206	c3		 ret	 0
  00207	90		 npad	 1
$LN44@ExDataServ@3:
  00208	00 00 00 00	 DD	 $LN37@ExDataServ@3
  0020c	00 00 00 00	 DD	 $LN36@ExDataServ@3
  00210	00 00 00 00	 DD	 $LN35@ExDataServ@3
  00214	00 00 00 00	 DD	 $LN34@ExDataServ@3
  00218	00 00 00 00	 DD	 $LN33@ExDataServ@3
  0021c	00 00 00 00	 DD	 $LN32@ExDataServ@3
  00220	00 00 00 00	 DD	 $LN31@ExDataServ@3
  00224	00 00 00 00	 DD	 $LN30@ExDataServ@3
  00228	00 00 00 00	 DD	 $LN29@ExDataServ@3
  0022c	00 00 00 00	 DD	 $LN28@ExDataServ@3
  00230	00 00 00 00	 DD	 $LN27@ExDataServ@3
  00234	00 00 00 00	 DD	 $LN26@ExDataServ@3
  00238	00 00 00 00	 DD	 $LN25@ExDataServ@3
  0023c	00 00 00 00	 DD	 $LN24@ExDataServ@3
  00240	00 00 00 00	 DD	 $LN12@ExDataServ@3
  00244	00 00 00 00	 DD	 $LN11@ExDataServ@3
  00248	00 00 00 00	 DD	 $LN10@ExDataServ@3
  0024c	00 00 00 00	 DD	 $LN9@ExDataServ@3
  00250	00 00 00 00	 DD	 $LN8@ExDataServ@3
  00254	00 00 00 00	 DD	 $LN7@ExDataServ@3
  00258	00 00 00 00	 DD	 $LN6@ExDataServ@3
  0025c	00 00 00 00	 DD	 $LN5@ExDataServ@3
  00260	00 00 00 00	 DD	 $LN4@ExDataServ@3
  00264	00 00 00 00	 DD	 $LN3@ExDataServ@3
  00268	00 00 00 00	 DD	 $LN2@ExDataServ@3
  0026c	00 00 00 00	 DD	 $LN1@ExDataServ@3
  00270	00 00 00 00	 DD	 $LN23@ExDataServ@3
  00274	00 00 00 00	 DD	 $LN22@ExDataServ@3
  00278	00 00 00 00	 DD	 $LN21@ExDataServ@3
  0027c	00 00 00 00	 DD	 $LN20@ExDataServ@3
  00280	00 00 00 00	 DD	 $LN19@ExDataServ@3
  00284	00 00 00 00	 DD	 $LN18@ExDataServ@3
  00288	00 00 00 00	 DD	 $LN17@ExDataServ@3
  0028c	00 00 00 00	 DD	 $LN16@ExDataServ@3
  00290	00 00 00 00	 DD	 $LN38@ExDataServ@3
$LN42@ExDataServ@3:
  00294	00		 DB	 0
  00295	22		 DB	 34			; 00000022H
  00296	01		 DB	 1
  00297	22		 DB	 34			; 00000022H
  00298	22		 DB	 34			; 00000022H
  00299	22		 DB	 34			; 00000022H
  0029a	22		 DB	 34			; 00000022H
  0029b	22		 DB	 34			; 00000022H
  0029c	22		 DB	 34			; 00000022H
  0029d	22		 DB	 34			; 00000022H
  0029e	22		 DB	 34			; 00000022H
  0029f	22		 DB	 34			; 00000022H
  002a0	22		 DB	 34			; 00000022H
  002a1	22		 DB	 34			; 00000022H
  002a2	22		 DB	 34			; 00000022H
  002a3	22		 DB	 34			; 00000022H
  002a4	22		 DB	 34			; 00000022H
  002a5	22		 DB	 34			; 00000022H
  002a6	22		 DB	 34			; 00000022H
  002a7	22		 DB	 34			; 00000022H
  002a8	22		 DB	 34			; 00000022H
  002a9	22		 DB	 34			; 00000022H
  002aa	22		 DB	 34			; 00000022H
  002ab	22		 DB	 34			; 00000022H
  002ac	22		 DB	 34			; 00000022H
  002ad	22		 DB	 34			; 00000022H
  002ae	22		 DB	 34			; 00000022H
  002af	22		 DB	 34			; 00000022H
  002b0	22		 DB	 34			; 00000022H
  002b1	22		 DB	 34			; 00000022H
  002b2	22		 DB	 34			; 00000022H
  002b3	22		 DB	 34			; 00000022H
  002b4	22		 DB	 34			; 00000022H
  002b5	22		 DB	 34			; 00000022H
  002b6	22		 DB	 34			; 00000022H
  002b7	22		 DB	 34			; 00000022H
  002b8	22		 DB	 34			; 00000022H
  002b9	22		 DB	 34			; 00000022H
  002ba	22		 DB	 34			; 00000022H
  002bb	22		 DB	 34			; 00000022H
  002bc	22		 DB	 34			; 00000022H
  002bd	22		 DB	 34			; 00000022H
  002be	22		 DB	 34			; 00000022H
  002bf	22		 DB	 34			; 00000022H
  002c0	22		 DB	 34			; 00000022H
  002c1	22		 DB	 34			; 00000022H
  002c2	22		 DB	 34			; 00000022H
  002c3	22		 DB	 34			; 00000022H
  002c4	02		 DB	 2
  002c5	03		 DB	 3
  002c6	04		 DB	 4
  002c7	05		 DB	 5
  002c8	22		 DB	 34			; 00000022H
  002c9	06		 DB	 6
  002ca	07		 DB	 7
  002cb	08		 DB	 8
  002cc	09		 DB	 9
  002cd	22		 DB	 34			; 00000022H
  002ce	22		 DB	 34			; 00000022H
  002cf	22		 DB	 34			; 00000022H
  002d0	22		 DB	 34			; 00000022H
  002d1	22		 DB	 34			; 00000022H
  002d2	22		 DB	 34			; 00000022H
  002d3	22		 DB	 34			; 00000022H
  002d4	0a		 DB	 10			; 0000000aH
  002d5	0b		 DB	 11			; 0000000bH
  002d6	22		 DB	 34			; 00000022H
  002d7	22		 DB	 34			; 00000022H
  002d8	22		 DB	 34			; 00000022H
  002d9	22		 DB	 34			; 00000022H
  002da	22		 DB	 34			; 00000022H
  002db	22		 DB	 34			; 00000022H
  002dc	22		 DB	 34			; 00000022H
  002dd	22		 DB	 34			; 00000022H
  002de	22		 DB	 34			; 00000022H
  002df	22		 DB	 34			; 00000022H
  002e0	22		 DB	 34			; 00000022H
  002e1	22		 DB	 34			; 00000022H
  002e2	22		 DB	 34			; 00000022H
  002e3	22		 DB	 34			; 00000022H
  002e4	0c		 DB	 12			; 0000000cH
  002e5	0d		 DB	 13			; 0000000dH
  002e6	22		 DB	 34			; 00000022H
  002e7	22		 DB	 34			; 00000022H
  002e8	22		 DB	 34			; 00000022H
  002e9	22		 DB	 34			; 00000022H
  002ea	22		 DB	 34			; 00000022H
  002eb	22		 DB	 34			; 00000022H
  002ec	22		 DB	 34			; 00000022H
  002ed	22		 DB	 34			; 00000022H
  002ee	22		 DB	 34			; 00000022H
  002ef	22		 DB	 34			; 00000022H
  002f0	22		 DB	 34			; 00000022H
  002f1	22		 DB	 34			; 00000022H
  002f2	22		 DB	 34			; 00000022H
  002f3	22		 DB	 34			; 00000022H
  002f4	0e		 DB	 14			; 0000000eH
  002f5	0f		 DB	 15			; 0000000fH
  002f6	10		 DB	 16			; 00000010H
  002f7	11		 DB	 17			; 00000011H
  002f8	12		 DB	 18			; 00000012H
  002f9	13		 DB	 19			; 00000013H
  002fa	14		 DB	 20			; 00000014H
  002fb	22		 DB	 34			; 00000022H
  002fc	22		 DB	 34			; 00000022H
  002fd	22		 DB	 34			; 00000022H
  002fe	22		 DB	 34			; 00000022H
  002ff	22		 DB	 34			; 00000022H
  00300	22		 DB	 34			; 00000022H
  00301	22		 DB	 34			; 00000022H
  00302	22		 DB	 34			; 00000022H
  00303	22		 DB	 34			; 00000022H
  00304	15		 DB	 21			; 00000015H
  00305	16		 DB	 22			; 00000016H
  00306	17		 DB	 23			; 00000017H
  00307	18		 DB	 24			; 00000018H
  00308	19		 DB	 25			; 00000019H
  00309	22		 DB	 34			; 00000022H
  0030a	22		 DB	 34			; 00000022H
  0030b	22		 DB	 34			; 00000022H
  0030c	22		 DB	 34			; 00000022H
  0030d	22		 DB	 34			; 00000022H
  0030e	22		 DB	 34			; 00000022H
  0030f	22		 DB	 34			; 00000022H
  00310	22		 DB	 34			; 00000022H
  00311	22		 DB	 34			; 00000022H
  00312	22		 DB	 34			; 00000022H
  00313	22		 DB	 34			; 00000022H
  00314	22		 DB	 34			; 00000022H
  00315	22		 DB	 34			; 00000022H
  00316	22		 DB	 34			; 00000022H
  00317	22		 DB	 34			; 00000022H
  00318	22		 DB	 34			; 00000022H
  00319	22		 DB	 34			; 00000022H
  0031a	22		 DB	 34			; 00000022H
  0031b	22		 DB	 34			; 00000022H
  0031c	22		 DB	 34			; 00000022H
  0031d	22		 DB	 34			; 00000022H
  0031e	22		 DB	 34			; 00000022H
  0031f	22		 DB	 34			; 00000022H
  00320	22		 DB	 34			; 00000022H
  00321	22		 DB	 34			; 00000022H
  00322	22		 DB	 34			; 00000022H
  00323	22		 DB	 34			; 00000022H
  00324	22		 DB	 34			; 00000022H
  00325	22		 DB	 34			; 00000022H
  00326	22		 DB	 34			; 00000022H
  00327	22		 DB	 34			; 00000022H
  00328	22		 DB	 34			; 00000022H
  00329	22		 DB	 34			; 00000022H
  0032a	22		 DB	 34			; 00000022H
  0032b	22		 DB	 34			; 00000022H
  0032c	22		 DB	 34			; 00000022H
  0032d	22		 DB	 34			; 00000022H
  0032e	22		 DB	 34			; 00000022H
  0032f	22		 DB	 34			; 00000022H
  00330	22		 DB	 34			; 00000022H
  00331	22		 DB	 34			; 00000022H
  00332	22		 DB	 34			; 00000022H
  00333	22		 DB	 34			; 00000022H
  00334	22		 DB	 34			; 00000022H
  00335	22		 DB	 34			; 00000022H
  00336	22		 DB	 34			; 00000022H
  00337	22		 DB	 34			; 00000022H
  00338	22		 DB	 34			; 00000022H
  00339	22		 DB	 34			; 00000022H
  0033a	22		 DB	 34			; 00000022H
  0033b	22		 DB	 34			; 00000022H
  0033c	22		 DB	 34			; 00000022H
  0033d	22		 DB	 34			; 00000022H
  0033e	22		 DB	 34			; 00000022H
  0033f	22		 DB	 34			; 00000022H
  00340	22		 DB	 34			; 00000022H
  00341	22		 DB	 34			; 00000022H
  00342	22		 DB	 34			; 00000022H
  00343	22		 DB	 34			; 00000022H
  00344	22		 DB	 34			; 00000022H
  00345	22		 DB	 34			; 00000022H
  00346	22		 DB	 34			; 00000022H
  00347	22		 DB	 34			; 00000022H
  00348	22		 DB	 34			; 00000022H
  00349	22		 DB	 34			; 00000022H
  0034a	22		 DB	 34			; 00000022H
  0034b	22		 DB	 34			; 00000022H
  0034c	22		 DB	 34			; 00000022H
  0034d	22		 DB	 34			; 00000022H
  0034e	22		 DB	 34			; 00000022H
  0034f	22		 DB	 34			; 00000022H
  00350	22		 DB	 34			; 00000022H
  00351	22		 DB	 34			; 00000022H
  00352	22		 DB	 34			; 00000022H
  00353	22		 DB	 34			; 00000022H
  00354	22		 DB	 34			; 00000022H
  00355	22		 DB	 34			; 00000022H
  00356	22		 DB	 34			; 00000022H
  00357	22		 DB	 34			; 00000022H
  00358	22		 DB	 34			; 00000022H
  00359	22		 DB	 34			; 00000022H
  0035a	22		 DB	 34			; 00000022H
  0035b	22		 DB	 34			; 00000022H
  0035c	22		 DB	 34			; 00000022H
  0035d	22		 DB	 34			; 00000022H
  0035e	22		 DB	 34			; 00000022H
  0035f	22		 DB	 34			; 00000022H
  00360	22		 DB	 34			; 00000022H
  00361	22		 DB	 34			; 00000022H
  00362	22		 DB	 34			; 00000022H
  00363	22		 DB	 34			; 00000022H
  00364	22		 DB	 34			; 00000022H
  00365	22		 DB	 34			; 00000022H
  00366	22		 DB	 34			; 00000022H
  00367	22		 DB	 34			; 00000022H
  00368	22		 DB	 34			; 00000022H
  00369	22		 DB	 34			; 00000022H
  0036a	22		 DB	 34			; 00000022H
  0036b	22		 DB	 34			; 00000022H
  0036c	22		 DB	 34			; 00000022H
  0036d	22		 DB	 34			; 00000022H
  0036e	22		 DB	 34			; 00000022H
  0036f	22		 DB	 34			; 00000022H
  00370	22		 DB	 34			; 00000022H
  00371	22		 DB	 34			; 00000022H
  00372	22		 DB	 34			; 00000022H
  00373	22		 DB	 34			; 00000022H
  00374	22		 DB	 34			; 00000022H
  00375	1a		 DB	 26			; 0000001aH
  00376	1b		 DB	 27			; 0000001bH
  00377	22		 DB	 34			; 00000022H
  00378	22		 DB	 34			; 00000022H
  00379	1c		 DB	 28			; 0000001cH
  0037a	1d		 DB	 29			; 0000001dH
  0037b	1e		 DB	 30			; 0000001eH
  0037c	1f		 DB	 31			; 0000001fH
  0037d	20		 DB	 32			; 00000020H
  0037e	22		 DB	 34			; 00000022H
  0037f	21		 DB	 33			; 00000021H
?ExDataServerProtocolCore@@YAXEPAEH@Z ENDP		; ExDataServerProtocolCore
_TEXT	ENDS
END
