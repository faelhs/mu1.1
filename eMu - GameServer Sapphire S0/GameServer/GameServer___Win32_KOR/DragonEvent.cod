; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	C:\Users\faelhs\mu-1.1\eMu - GameServer Sapphire S0\GameServer\DragonEvent.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??_7CDragonEvent@@6B@				; CDragonEvent::`vftable'
PUBLIC	??1CDragonEvent@@UAE@XZ				; CDragonEvent::~CDragonEvent
PUBLIC	??_R4CDragonEvent@@6B@				; CDragonEvent::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCDragonEvent@@@8			; CDragonEvent `RTTI Type Descriptor'
PUBLIC	??_R3CDragonEvent@@8				; CDragonEvent::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CDragonEvent@@8				; CDragonEvent::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CDragonEvent@@8			; CDragonEvent::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	??_ECDragonEvent@@UAEPAXI@Z:PROC		; CDragonEvent::`vector deleting destructor'
;	COMDAT ??_R1A@?0A@EA@CDragonEvent@@8
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\dragonevent.cpp
rdata$r	SEGMENT
??_R1A@?0A@EA@CDragonEvent@@8 DD FLAT:??_R0?AVCDragonEvent@@@8 ; CDragonEvent::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CDragonEvent@@8
rdata$r	ENDS
;	COMDAT ??_R2CDragonEvent@@8
rdata$r	SEGMENT
??_R2CDragonEvent@@8 DD FLAT:??_R1A@?0A@EA@CDragonEvent@@8 ; CDragonEvent::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CDragonEvent@@8
rdata$r	SEGMENT
??_R3CDragonEvent@@8 DD 00H				; CDragonEvent::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CDragonEvent@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCDragonEvent@@@8
_DATA	SEGMENT
??_R0?AVCDragonEvent@@@8 DD FLAT:??_7type_info@@6B@	; CDragonEvent `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCDragonEvent@@', 00H
_DATA	ENDS
;	COMDAT ??_R4CDragonEvent@@6B@
rdata$r	SEGMENT
??_R4CDragonEvent@@6B@ DD 00H				; CDragonEvent::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCDragonEvent@@@8
	DD	FLAT:??_R3CDragonEvent@@8
rdata$r	ENDS
;	COMDAT ??_7CDragonEvent@@6B@
CONST	SEGMENT
??_7CDragonEvent@@6B@ DD FLAT:??_R4CDragonEvent@@6B@	; CDragonEvent::`vftable'
	DD	FLAT:??_ECDragonEvent@@UAEPAXI@Z
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ??1CDragonEvent@@UAE@XZ
_TEXT	SEGMENT
??1CDragonEvent@@UAE@XZ PROC				; CDragonEvent::~CDragonEvent, COMDAT
; _this$ = ecx

; 20   : {

  00000	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET ??_7CDragonEvent@@6B@

; 21   : 	return;
; 22   : }

  00006	c3		 ret	 0
??1CDragonEvent@@UAE@XZ ENDP				; CDragonEvent::~CDragonEvent
_TEXT	ENDS
PUBLIC	?Init@CDragonEvent@@QAEXXZ			; CDragonEvent::Init
; Function compile flags: /Ogtp
;	COMDAT ?Init@CDragonEvent@@QAEXXZ
_TEXT	SEGMENT
?Init@CDragonEvent@@QAEXXZ PROC				; CDragonEvent::Init, COMDAT
; _this$ = ecx

; 27   : 	this->EventState=0;

  00000	33 c0		 xor	 eax, eax
  00002	88 41 04	 mov	 BYTE PTR [ecx+4], al

; 28   : 	this->EventStartTime =0;

  00005	89 41 08	 mov	 DWORD PTR [ecx+8], eax

; 29   : 	this->m_MapNumber =0;

  00008	88 41 0c	 mov	 BYTE PTR [ecx+12], al

; 30   : 	this->m_bMenualStart =0;

  0000b	89 41 10	 mov	 DWORD PTR [ecx+16], eax

; 31   : }

  0000e	c3		 ret	 0
?Init@CDragonEvent@@QAEXXZ ENDP				; CDragonEvent::Init
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?Start@CDragonEvent@@QAEXXZ			; CDragonEvent::Start
EXTRN	__imp__GetTickCount@0:PROC
EXTRN	?AllSendServerMsg@@YAXPAD@Z:PROC		; AllSendServerMsg
EXTRN	?Get@CMsg@@QAEPADH@Z:PROC			; CMsg::Get
EXTRN	?lMsg@@3VCMsg@@A:BYTE				; lMsg
EXTRN	_rand:PROC
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
; Function compile flags: /Ogtp
;	COMDAT ?Start@CDragonEvent@@QAEXXZ
_TEXT	SEGMENT
_map$ = -264						; size = 3
_szTemp$ = -260						; size = 256
__$ArrayPad$ = -4					; size = 4
?Start@CDragonEvent@@QAEXXZ PROC			; CDragonEvent::Start, COMDAT
; _this$ = ecx

; 34   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 08 01 00
	00		 sub	 esp, 264		; 00000108H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	8b d9		 mov	 ebx, ecx

; 35   : 	char szTemp[256];
; 36   : 	char map[3];
; 37   : 
; 38   : 	if ( this->EventState != 0 )

  00016	80 7b 04 00	 cmp	 BYTE PTR [ebx+4], 0
  0001a	0f 85 5b 01 00
	00		 jne	 $LN7@Start

; 39   : 	{
; 40   : 		return;
; 41   : 	}
; 42   : 
; 43   : 	this->Init();

  00020	56		 push	 esi
  00021	57		 push	 edi
  00022	e8 00 00 00 00	 call	 ?Init@CDragonEvent@@QAEXXZ ; CDragonEvent::Init

; 44   : 
; 45   : 	map[0]=MAP_INDEX_LORENCIA;

  00027	66 c7 85 f8 fe
	ff ff 00 02	 mov	 WORD PTR _map$[ebp], 512 ; 00000200H

; 46   : 	map[1]=MAP_INDEX_DEVIAS;
; 47   : 	map[2]=MAP_INDEX_NORIA;

  00030	c6 85 fa fe ff
	ff 03		 mov	 BYTE PTR _map$[ebp+2], 3

; 48   : 
; 49   : 	this->EventState = 1;

  00037	c6 43 04 01	 mov	 BYTE PTR [ebx+4], 1

; 50   : 	this->m_MapNumber  = map [ rand()%3 ];

  0003b	e8 00 00 00 00	 call	 _rand
  00040	99		 cdq
  00041	b9 03 00 00 00	 mov	 ecx, 3
  00046	f7 f9		 idiv	 ecx

; 51   : 
; 52   : 	strcpy(szTemp, "¡Ù ");

  00048	c7 85 fc fe ff
	ff a1 d9 20 00	 mov	 DWORD PTR _szTemp$[ebp], 2152865 ; 0020d9a1H
  00052	8a 94 15 f8 fe
	ff ff		 mov	 dl, BYTE PTR _map$[ebp+edx]

; 53   : 
; 54   : 	switch ( this->m_MapNumber  )

  00059	0f b6 c2	 movzx	 eax, dl
  0005c	83 e8 00	 sub	 eax, 0
  0005f	88 53 0c	 mov	 BYTE PTR [ebx+12], dl
  00062	74 66		 je	 SHORT $LN3@Start
  00064	83 e8 02	 sub	 eax, 2
  00067	74 32		 je	 SHORT $LN2@Start
  00069	48		 dec	 eax
  0006a	0f 85 98 00 00
	00		 jne	 $LN4@Start

; 63   : 
; 64   : 		case MAP_INDEX_NORIA:
; 65   : 			strcat(szTemp, lMsg.Get(MSGGET(7, 211)) );

  00070	68 d3 07 00 00	 push	 2003			; 000007d3H
  00075	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0007a	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0007f	8b d0		 mov	 edx, eax
$LL9@Start:
  00081	8a 08		 mov	 cl, BYTE PTR [eax]
  00083	40		 inc	 eax
  00084	84 c9		 test	 cl, cl
  00086	75 f9		 jne	 SHORT $LL9@Start
  00088	8d bd fc fe ff
	ff		 lea	 edi, DWORD PTR _szTemp$[ebp]
  0008e	2b c2		 sub	 eax, edx
  00090	4f		 dec	 edi
$LL10@Start:
  00091	8a 4f 01	 mov	 cl, BYTE PTR [edi+1]
  00094	47		 inc	 edi
  00095	84 c9		 test	 cl, cl
  00097	75 f8		 jne	 SHORT $LL10@Start

; 66   : 			break;

  00099	eb 5d		 jmp	 SHORT $LN18@Start
$LN2@Start:

; 58   : 			break;
; 59   : 
; 60   : 		case MAP_INDEX_DEVIAS:
; 61   : 			strcat(szTemp, lMsg.Get(MSGGET(7, 210)) );

  0009b	68 d2 07 00 00	 push	 2002			; 000007d2H
  000a0	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  000a5	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  000aa	8b d0		 mov	 edx, eax
  000ac	8d 64 24 00	 npad	 4
$LL11@Start:
  000b0	8a 08		 mov	 cl, BYTE PTR [eax]
  000b2	40		 inc	 eax
  000b3	84 c9		 test	 cl, cl
  000b5	75 f9		 jne	 SHORT $LL11@Start
  000b7	8d bd fc fe ff
	ff		 lea	 edi, DWORD PTR _szTemp$[ebp]
  000bd	2b c2		 sub	 eax, edx
  000bf	4f		 dec	 edi
$LL12@Start:
  000c0	8a 4f 01	 mov	 cl, BYTE PTR [edi+1]
  000c3	47		 inc	 edi
  000c4	84 c9		 test	 cl, cl
  000c6	75 f8		 jne	 SHORT $LL12@Start

; 62   : 			break;

  000c8	eb 2e		 jmp	 SHORT $LN18@Start
$LN3@Start:

; 55   : 	{
; 56   : 		case MAP_INDEX_LORENCIA:
; 57   : 			strcat(szTemp, lMsg.Get(MSGGET(7, 208)) );

  000ca	68 d0 07 00 00	 push	 2000			; 000007d0H
  000cf	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  000d4	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  000d9	8b d0		 mov	 edx, eax
  000db	eb 03 8d 49 00	 npad	 5
$LL13@Start:
  000e0	8a 08		 mov	 cl, BYTE PTR [eax]
  000e2	40		 inc	 eax
  000e3	84 c9		 test	 cl, cl
  000e5	75 f9		 jne	 SHORT $LL13@Start
  000e7	8d bd fc fe ff
	ff		 lea	 edi, DWORD PTR _szTemp$[ebp]
  000ed	2b c2		 sub	 eax, edx
  000ef	4f		 dec	 edi
$LL14@Start:
  000f0	8a 4f 01	 mov	 cl, BYTE PTR [edi+1]
  000f3	47		 inc	 edi
  000f4	84 c9		 test	 cl, cl
  000f6	75 f8		 jne	 SHORT $LL14@Start
$LN18@Start:
  000f8	8b c8		 mov	 ecx, eax
  000fa	c1 e9 02	 shr	 ecx, 2
  000fd	8b f2		 mov	 esi, edx
  000ff	f3 a5		 rep movsd
  00101	8b c8		 mov	 ecx, eax
  00103	83 e1 03	 and	 ecx, 3
  00106	f3 a4		 rep movsb
$LN4@Start:

; 67   : 
; 68   : 	}
; 69   : 	
; 70   : 	strcat(szTemp, lMsg.Get(MSGGET(4, 132)) );

  00108	68 84 04 00 00	 push	 1156			; 00000484H
  0010d	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00112	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  00117	8b c8		 mov	 ecx, eax
  00119	8d a4 24 00 00
	00 00		 npad	 7
$LL15@Start:
  00120	8a 10		 mov	 dl, BYTE PTR [eax]
  00122	40		 inc	 eax
  00123	84 d2		 test	 dl, dl
  00125	75 f9		 jne	 SHORT $LL15@Start
  00127	8d bd fc fe ff
	ff		 lea	 edi, DWORD PTR _szTemp$[ebp]
  0012d	2b c1		 sub	 eax, ecx
  0012f	8b f1		 mov	 esi, ecx
  00131	4f		 dec	 edi
$LL16@Start:
  00132	8a 4f 01	 mov	 cl, BYTE PTR [edi+1]
  00135	47		 inc	 edi
  00136	84 c9		 test	 cl, cl
  00138	75 f8		 jne	 SHORT $LL16@Start
  0013a	8b c8		 mov	 ecx, eax
  0013c	c1 e9 02	 shr	 ecx, 2
  0013f	f3 a5		 rep movsd
  00141	8b c8		 mov	 ecx, eax
  00143	83 e1 03	 and	 ecx, 3
  00146	f3 a4		 rep movsb

; 71   : 	strcat(szTemp, " ¡Ù");

  00148	8d bd fc fe ff
	ff		 lea	 edi, DWORD PTR _szTemp$[ebp]
  0014e	4f		 dec	 edi
  0014f	90		 npad	 1
$LL17@Start:
  00150	8a 47 01	 mov	 al, BYTE PTR [edi+1]
  00153	47		 inc	 edi
  00154	84 c0		 test	 al, al
  00156	75 f8		 jne	 SHORT $LL17@Start

; 72   : 
; 73   : 	AllSendServerMsg(lMsg.Get(MSGGET(4, 132)));

  00158	68 84 04 00 00	 push	 1156			; 00000484H
  0015d	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00162	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  00167	50		 push	 eax
  00168	e8 00 00 00 00	 call	 ?AllSendServerMsg@@YAXPAD@Z ; AllSendServerMsg
  0016d	83 c4 04	 add	 esp, 4

; 74   : 	this->EventStartTime  = GetTickCount();

  00170	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00176	5f		 pop	 edi
  00177	89 43 08	 mov	 DWORD PTR [ebx+8], eax
  0017a	5e		 pop	 esi
$LN7@Start:

; 75   : }

  0017b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0017e	33 cd		 xor	 ecx, ebp
  00180	5b		 pop	 ebx
  00181	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00186	8b e5		 mov	 esp, ebp
  00188	5d		 pop	 ebp
  00189	c3		 ret	 0
?Start@CDragonEvent@@QAEXXZ ENDP			; CDragonEvent::Start
_TEXT	ENDS
PUBLIC	??_C@_0M@JPEAEJLO@Event?51?5End?$AA@		; `string'
PUBLIC	?End@CDragonEvent@@QAEXXZ			; CDragonEvent::End
EXTRN	?LogAdd@@YAXW4eLogColor@@PADZZ:PROC		; LogAdd
EXTRN	?GCMapEventStateSend@@YAXHEE@Z:PROC		; GCMapEventStateSend
;	COMDAT ??_C@_0M@JPEAEJLO@Event?51?5End?$AA@
CONST	SEGMENT
??_C@_0M@JPEAEJLO@Event?51?5End?$AA@ DB 'Event 1 End', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?End@CDragonEvent@@QAEXXZ
_TEXT	SEGMENT
?End@CDragonEvent@@QAEXXZ PROC				; CDragonEvent::End, COMDAT
; _this$ = ecx

; 79   : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 80   : 	GCMapEventStateSend(this->m_MapNumber, 0, 1 );

  00003	0f b6 46 0c	 movzx	 eax, BYTE PTR [esi+12]
  00007	6a 01		 push	 1
  00009	6a 00		 push	 0
  0000b	50		 push	 eax
  0000c	e8 00 00 00 00	 call	 ?GCMapEventStateSend@@YAXHEE@Z ; GCMapEventStateSend

; 81   : 	LogAdd(LOG_BLACK, "Event 1 End");

  00011	68 00 00 00 00	 push	 OFFSET ??_C@_0M@JPEAEJLO@Event?51?5End?$AA@
  00016	6a 00		 push	 0
  00018	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  0001d	83 c4 14	 add	 esp, 20			; 00000014H

; 82   : 	this->EventState=0;

  00020	c6 46 04 00	 mov	 BYTE PTR [esi+4], 0
  00024	5e		 pop	 esi

; 83   : }

  00025	c3		 ret	 0
?End@CDragonEvent@@QAEXXZ ENDP				; CDragonEvent::End
_TEXT	ENDS
PUBLIC	?DragonActive@CDragonEvent@@QAEXXZ		; CDragonEvent::DragonActive
EXTRN	?GetBoxPosition@CMonsterSetBase@@QAEHHHHHHAAF0@Z:PROC ; CMonsterSetBase::GetBoxPosition
EXTRN	?gMSetBase@@3VCMonsterSetBase@@A:BYTE		; gMSetBase
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:BYTE			; gObj
; Function compile flags: /Ogtp
;	COMDAT ?DragonActive@CDragonEvent@@QAEXXZ
_TEXT	SEGMENT
?DragonActive@CDragonEvent@@QAEXXZ PROC			; CDragonEvent::DragonActive, COMDAT
; _this$ = ecx

; 87   : {

  00000	53		 push	 ebx
  00001	56		 push	 esi
  00002	57		 push	 edi
  00003	8b f9		 mov	 edi, ecx

; 88   : 	for ( int n = 0; n<OBJ_MAXMONSTER ; n++)

  00005	be 06 01 00 00	 mov	 esi, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+262
  0000a	bb 01 00 00 00	 mov	 ebx, 1
  0000f	90		 npad	 1
$LL17@DragonActi:

; 89   : 	{
; 90   : 		if ( gObj[n].Class == 44 )

  00010	66 83 7e 92 2c	 cmp	 WORD PTR [esi-110], 44	; 0000002cH
  00015	0f 85 2e 01 00
	00		 jne	 $LN16@DragonActi

; 91   : 		{
; 92   : 			gObj[n].Live = TRUE;

  0001b	88 9e 5c ff ff
	ff		 mov	 BYTE PTR [esi-164], bl

; 93   : 			gObj[n].MapNumber = this->m_MapNumber;

  00021	8a 47 0c	 mov	 al, BYTE PTR [edi+12]
  00024	88 46 03	 mov	 BYTE PTR [esi+3], al

; 94   : 
; 95   : 			switch ( this->m_MapNumber )

  00027	0f b6 47 0c	 movzx	 eax, BYTE PTR [edi+12]
  0002b	83 e8 00	 sub	 eax, 0
  0002e	0f 84 9b 00 00
	00		 je	 $LN11@DragonActi
  00034	83 e8 02	 sub	 eax, 2
  00037	74 55		 je	 SHORT $LN6@DragonActi
  00039	2b c3		 sub	 eax, ebx
  0003b	0f 85 02 01 00
	00		 jne	 $LN7@DragonActi

; 125  : 
; 126  : 				case MAP_INDEX_NORIA:
; 127  : 
; 128  : 					if ( (rand()%2) == 0 )

  00041	e8 00 00 00 00	 call	 _rand
  00046	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  0004b	79 05		 jns	 SHORT $LN22@DragonActi
  0004d	48		 dec	 eax
  0004e	83 c8 fe	 or	 eax, -2			; fffffffeH
  00051	40		 inc	 eax
$LN22@DragonActi:

; 129  : 					{
; 130  : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 198, 161, 223, 175, gObj[n].X, gObj[n].Y);

  00052	56		 push	 esi

; 125  : 
; 126  : 				case MAP_INDEX_NORIA:
; 127  : 
; 128  : 					if ( (rand()%2) == 0 )

  00053	75 1d		 jne	 SHORT $LN2@DragonActi

; 129  : 					{
; 130  : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 198, 161, 223, 175, gObj[n].X, gObj[n].Y);

  00055	8d 4e fe	 lea	 ecx, DWORD PTR [esi-2]
  00058	51		 push	 ecx
  00059	68 af 00 00 00	 push	 175			; 000000afH
  0005e	68 df 00 00 00	 push	 223			; 000000dfH
  00063	68 a1 00 00 00	 push	 161			; 000000a1H
  00068	68 c6 00 00 00	 push	 198			; 000000c6H

; 131  : 					}
; 132  : 					else

  0006d	e9 c2 00 00 00	 jmp	 $LN24@DragonActi
$LN2@DragonActi:

; 133  : 					{
; 134  : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 136, 50, 164, 59, gObj[n].X, gObj[n].Y);

  00072	0f b6 4f 0c	 movzx	 ecx, BYTE PTR [edi+12]
  00076	8d 46 fe	 lea	 eax, DWORD PTR [esi-2]
  00079	50		 push	 eax
  0007a	6a 3b		 push	 59			; 0000003bH
  0007c	68 a4 00 00 00	 push	 164			; 000000a4H
  00081	6a 32		 push	 50			; 00000032H
  00083	68 88 00 00 00	 push	 136			; 00000088H
  00088	51		 push	 ecx

; 135  : 					}
; 136  : 
; 137  : 					break;

  00089	e9 ab 00 00 00	 jmp	 $LN25@DragonActi
$LN6@DragonActi:

; 109  : 					}
; 110  : 
; 111  : 					break;
; 112  : 
; 113  : 				case MAP_INDEX_DEVIAS:
; 114  : 					
; 115  : 					if ( (rand()%2) == 0 )

  0008e	e8 00 00 00 00	 call	 _rand
  00093	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00098	79 05		 jns	 SHORT $LN23@DragonActi
  0009a	48		 dec	 eax
  0009b	83 c8 fe	 or	 eax, -2			; fffffffeH
  0009e	40		 inc	 eax
$LN23@DragonActi:

; 116  : 					{
; 117  : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 155, 16, 169, 55, gObj[n].X, gObj[n].Y);

  0009f	56		 push	 esi

; 109  : 					}
; 110  : 
; 111  : 					break;
; 112  : 
; 113  : 				case MAP_INDEX_DEVIAS:
; 114  : 					
; 115  : 					if ( (rand()%2) == 0 )

  000a0	75 19		 jne	 SHORT $LN5@DragonActi

; 116  : 					{
; 117  : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 155, 16, 169, 55, gObj[n].X, gObj[n].Y);

  000a2	0f b6 47 0c	 movzx	 eax, BYTE PTR [edi+12]
  000a6	8d 56 fe	 lea	 edx, DWORD PTR [esi-2]
  000a9	52		 push	 edx
  000aa	6a 37		 push	 55			; 00000037H
  000ac	68 a9 00 00 00	 push	 169			; 000000a9H
  000b1	6a 10		 push	 16			; 00000010H
  000b3	68 9b 00 00 00	 push	 155			; 0000009bH
  000b8	50		 push	 eax

; 118  : 					}
; 119  : 					else

  000b9	eb 7e		 jmp	 SHORT $LN25@DragonActi
$LN5@DragonActi:

; 120  : 					{
; 121  : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 193, 110, 232, 126, gObj[n].X, gObj[n].Y);

  000bb	8d 4e fe	 lea	 ecx, DWORD PTR [esi-2]
  000be	51		 push	 ecx
  000bf	6a 7e		 push	 126			; 0000007eH
  000c1	68 e8 00 00 00	 push	 232			; 000000e8H
  000c6	6a 6e		 push	 110			; 0000006eH
  000c8	68 c1 00 00 00	 push	 193			; 000000c1H

; 122  : 					}
; 123  : 
; 124  : 					break;

  000cd	eb 65		 jmp	 SHORT $LN24@DragonActi
$LN11@DragonActi:

; 96   : 			{
; 97   : 				case MAP_INDEX_LORENCIA:
; 98   : 					if ( (rand()%3) == 0 )

  000cf	e8 00 00 00 00	 call	 _rand
  000d4	99		 cdq
  000d5	b9 03 00 00 00	 mov	 ecx, 3
  000da	f7 f9		 idiv	 ecx
  000dc	85 d2		 test	 edx, edx
  000de	75 1a		 jne	 SHORT $LN10@DragonActi

; 99   : 					{
; 100  : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 135, 61, 146, 70, gObj[n].X, gObj[n].Y);

  000e0	0f b6 47 0c	 movzx	 eax, BYTE PTR [edi+12]
  000e4	56		 push	 esi
  000e5	8d 56 fe	 lea	 edx, DWORD PTR [esi-2]
  000e8	52		 push	 edx
  000e9	6a 46		 push	 70			; 00000046H
  000eb	68 92 00 00 00	 push	 146			; 00000092H
  000f0	6a 3d		 push	 61			; 0000003dH
  000f2	68 87 00 00 00	 push	 135			; 00000087H
  000f7	50		 push	 eax
  000f8	eb 3f		 jmp	 SHORT $LN25@DragonActi
$LN10@DragonActi:

; 101  : 					}
; 102  : 					else if ( (rand()%3) == 1 )

  000fa	e8 00 00 00 00	 call	 _rand
  000ff	99		 cdq
  00100	b9 03 00 00 00	 mov	 ecx, 3
  00105	f7 f9		 idiv	 ecx

; 103  : 					{
; 104  : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 120, 204, 126, 219, gObj[n].X, gObj[n].Y);

  00107	56		 push	 esi
  00108	3b d3		 cmp	 edx, ebx
  0010a	75 19		 jne	 SHORT $LN8@DragonActi
  0010c	0f b6 47 0c	 movzx	 eax, BYTE PTR [edi+12]
  00110	8d 56 fe	 lea	 edx, DWORD PTR [esi-2]
  00113	52		 push	 edx
  00114	68 db 00 00 00	 push	 219			; 000000dbH
  00119	6a 7e		 push	 126			; 0000007eH
  0011b	68 cc 00 00 00	 push	 204			; 000000ccH
  00120	6a 78		 push	 120			; 00000078H
  00122	50		 push	 eax

; 105  : 					}
; 106  : 					else

  00123	eb 14		 jmp	 SHORT $LN25@DragonActi
$LN8@DragonActi:

; 107  : 					{
; 108  : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 67, 116, 77, 131, gObj[n].X, gObj[n].Y);

  00125	8d 4e fe	 lea	 ecx, DWORD PTR [esi-2]
  00128	51		 push	 ecx
  00129	68 83 00 00 00	 push	 131			; 00000083H
  0012e	6a 4d		 push	 77			; 0000004dH
  00130	6a 74		 push	 116			; 00000074H
  00132	6a 43		 push	 67			; 00000043H
$LN24@DragonActi:
  00134	0f b6 57 0c	 movzx	 edx, BYTE PTR [edi+12]
  00138	52		 push	 edx
$LN25@DragonActi:
  00139	b9 00 00 00 00	 mov	 ecx, OFFSET ?gMSetBase@@3VCMonsterSetBase@@A ; gMSetBase
  0013e	e8 00 00 00 00	 call	 ?GetBoxPosition@CMonsterSetBase@@QAEHHHHHHAAF0@Z ; CMonsterSetBase::GetBoxPosition
$LN7@DragonActi:

; 138  : 			}
; 139  : 
; 140  : 			gObj[n].m_State = 1;

  00143	89 9e b6 00 00
	00		 mov	 DWORD PTR [esi+182], ebx
$LN16@DragonActi:

; 88   : 	for ( int n = 0; n<OBJ_MAXMONSTER ; n++)

  00149	81 c6 64 15 00
	00		 add	 esi, 5476		; 00001564H
  0014f	81 fe a6 a2 e4
	01		 cmp	 esi, OFFSET ?gObj@@3PAUOBJECTSTRUCT@@A+31761062
  00155	0f 8c b5 fe ff
	ff		 jl	 $LL17@DragonActi

; 141  : 		}
; 142  : 	}
; 143  : }

  0015b	5f		 pop	 edi
  0015c	5e		 pop	 esi
  0015d	5b		 pop	 ebx
  0015e	c3		 ret	 0
?DragonActive@CDragonEvent@@QAEXXZ ENDP			; CDragonEvent::DragonActive
_TEXT	ENDS
PUBLIC	??_C@_0O@KHDGKEEO@Event?5Start?51?$AA@		; `string'
PUBLIC	?Run@CDragonEvent@@QAEXXZ			; CDragonEvent::Run
;	COMDAT ??_C@_0O@KHDGKEEO@Event?5Start?51?$AA@
CONST	SEGMENT
??_C@_0O@KHDGKEEO@Event?5Start?51?$AA@ DB 'Event Start 1', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Run@CDragonEvent@@QAEXXZ
_TEXT	SEGMENT
?Run@CDragonEvent@@QAEXXZ PROC				; CDragonEvent::Run, COMDAT
; _this$ = ecx

; 147  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 148  : 	if ( this->m_bMenualStart != FALSE )

  00003	83 7e 10 00	 cmp	 DWORD PTR [esi+16], 0
  00007	75 4c		 jne	 SHORT $LN1@Run

; 149  : 	{
; 150  : 		return;
; 151  : 	}
; 152  : 
; 153  : 	if ( this->EventState == 0 )

  00009	8a 46 04	 mov	 al, BYTE PTR [esi+4]
  0000c	84 c0		 test	 al, al
  0000e	74 45		 je	 SHORT $LN1@Run

; 154  : 	{
; 155  : 		return;
; 156  : 	}
; 157  : 
; 158  : 	if ( this->EventState == 1 )

  00010	3c 01		 cmp	 al, 1
  00012	75 43		 jne	 SHORT $LN5@Run

; 159  : 	{
; 160  : 		if ( ( GetTickCount() - this->EventStartTime ) > 3000 )

  00014	57		 push	 edi
  00015	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetTickCount@0
  0001b	ff d7		 call	 edi
  0001d	2b 46 08	 sub	 eax, DWORD PTR [esi+8]
  00020	3d b8 0b 00 00	 cmp	 eax, 3000		; 00000bb8H
  00025	76 2d		 jbe	 SHORT $LN10@Run

; 161  : 		{
; 162  : 			this->EventState = 2;
; 163  : 			GCMapEventStateSend(this->m_MapNumber , 1, 1 );

  00027	0f b6 46 0c	 movzx	 eax, BYTE PTR [esi+12]
  0002b	6a 01		 push	 1
  0002d	6a 01		 push	 1
  0002f	50		 push	 eax
  00030	c6 46 04 02	 mov	 BYTE PTR [esi+4], 2
  00034	e8 00 00 00 00	 call	 ?GCMapEventStateSend@@YAXHEE@Z ; GCMapEventStateSend

; 164  : 			LogAdd(LOG_BLACK, "Event Start 1");

  00039	68 00 00 00 00	 push	 OFFSET ??_C@_0O@KHDGKEEO@Event?5Start?51?$AA@
  0003e	6a 00		 push	 0
  00040	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00045	83 c4 14	 add	 esp, 20			; 00000014H

; 165  : 			this->DragonActive();

  00048	8b ce		 mov	 ecx, esi
  0004a	e8 00 00 00 00	 call	 ?DragonActive@CDragonEvent@@QAEXXZ ; CDragonEvent::DragonActive

; 166  : 			this->EventStartTime = GetTickCount();

  0004f	ff d7		 call	 edi
  00051	89 46 08	 mov	 DWORD PTR [esi+8], eax
$LN10@Run:
  00054	5f		 pop	 edi
$LN1@Run:
  00055	5e		 pop	 esi

; 177  : 			}
; 178  : 		}
; 179  : 	}
; 180  : }

  00056	c3		 ret	 0
$LN5@Run:

; 167  : 			return;
; 168  : 		}
; 169  : 	}
; 170  : 	else
; 171  : 	{
; 172  : 		if ( this->EventState == 2 )

  00057	3c 02		 cmp	 al, 2
  00059	75 fa		 jne	 SHORT $LN1@Run

; 173  : 		{
; 174  : 			if ( (GetTickCount() - this->EventStartTime ) > 300000 )

  0005b	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00061	2b 46 08	 sub	 eax, DWORD PTR [esi+8]
  00064	3d e0 93 04 00	 cmp	 eax, 300000		; 000493e0H
  00069	76 ea		 jbe	 SHORT $LN1@Run

; 175  : 			{
; 176  : 				this->End();

  0006b	8b ce		 mov	 ecx, esi
  0006d	5e		 pop	 esi
  0006e	e9 00 00 00 00	 jmp	 ?End@CDragonEvent@@QAEXXZ ; CDragonEvent::End
?Run@CDragonEvent@@QAEXXZ ENDP				; CDragonEvent::Run
_TEXT	ENDS
PUBLIC	?SetMenualStart@CDragonEvent@@QAEXH@Z		; CDragonEvent::SetMenualStart
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\dragonevent.h
;	COMDAT ?SetMenualStart@CDragonEvent@@QAEXH@Z
_TEXT	SEGMENT
_bMenualStart$ = 8					; size = 4
?SetMenualStart@CDragonEvent@@QAEXH@Z PROC		; CDragonEvent::SetMenualStart, COMDAT
; _this$ = ecx

; 26   : 	void SetMenualStart(BOOL bMenualStart){this->m_bMenualStart = bMenualStart;}

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	8b 45 08	 mov	 eax, DWORD PTR _bMenualStart$[ebp]
  00006	89 41 10	 mov	 DWORD PTR [ecx+16], eax
  00009	5d		 pop	 ebp
  0000a	c2 04 00	 ret	 4
?SetMenualStart@CDragonEvent@@QAEXH@Z ENDP		; CDragonEvent::SetMenualStart
_TEXT	ENDS
PUBLIC	??0CDragonEvent@@QAE@XZ				; CDragonEvent::CDragonEvent
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\dragonevent.cpp
;	COMDAT ??0CDragonEvent@@QAE@XZ
_TEXT	SEGMENT
??0CDragonEvent@@QAE@XZ PROC				; CDragonEvent::CDragonEvent, COMDAT
; _this$ = ecx

; 15   : {

  00000	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET ??_7CDragonEvent@@6B@

; 16   : 	this->Init();

  00006	e8 00 00 00 00	 call	 ?Init@CDragonEvent@@QAEXXZ ; CDragonEvent::Init

; 17   : }

  0000b	8b c1		 mov	 eax, ecx
  0000d	c3		 ret	 0
??0CDragonEvent@@QAE@XZ ENDP				; CDragonEvent::CDragonEvent
_TEXT	ENDS
EXTRN	??3@YAXPAX@Z:PROC				; operator delete
; Function compile flags: /Ogtp
;	COMDAT ??_GCDragonEvent@@UAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8						; size = 4
??_GCDragonEvent@@UAEPAXI@Z PROC			; CDragonEvent::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx
  00006	e8 00 00 00 00	 call	 ??1CDragonEvent@@UAE@XZ	; CDragonEvent::~CDragonEvent
  0000b	f6 45 08 01	 test	 BYTE PTR ___flags$[ebp], 1
  0000f	74 09		 je	 SHORT $LN4@scalar
  00011	56		 push	 esi
  00012	e8 00 00 00 00	 call	 ??3@YAXPAX@Z		; operator delete
  00017	83 c4 04	 add	 esp, 4
$LN4@scalar:
  0001a	8b c6		 mov	 eax, esi
  0001c	5e		 pop	 esi
  0001d	5d		 pop	 ebp
  0001e	c2 04 00	 ret	 4
??_GCDragonEvent@@UAEPAXI@Z ENDP			; CDragonEvent::`scalar deleting destructor'
_TEXT	ENDS
PUBLIC	??_C@_0CN@HLGGPDEG@?$KB?$NL?$KB?$NM?$FLEvent?5Management?$FN?5?$FLStart?$FN?5D@ ; `string'
PUBLIC	?Start_Menual@CDragonEvent@@QAEXXZ		; CDragonEvent::Start_Menual
;	COMDAT ??_C@_0CN@HLGGPDEG@?$KB?$NL?$KB?$NM?$FLEvent?5Management?$FN?5?$FLStart?$FN?5D@
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\dragonevent.h
CONST	SEGMENT
??_C@_0CN@HLGGPDEG@?$KB?$NL?$KB?$NM?$FLEvent?5Management?$FN?5?$FLStart?$FN?5D@ DB 0a1H
	DB	0dbH, 0a1H, 0dcH, '[Event Management] [Start] Dragon Event!', 00H ; `string'
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\dragonevent.cpp
CONST	ENDS
;	COMDAT ?Start_Menual@CDragonEvent@@QAEXXZ
_TEXT	SEGMENT
?Start_Menual@CDragonEvent@@QAEXXZ PROC			; CDragonEvent::Start_Menual, COMDAT
; _this$ = ecx

; 183  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 184  : 	this->SetMenualStart(TRUE);
; 185  : 	LogAdd(LOG_BLACK, "¡Û¡Ü[Event Management] [Start] Dragon Event!");

  00003	68 00 00 00 00	 push	 OFFSET ??_C@_0CN@HLGGPDEG@?$KB?$NL?$KB?$NM?$FLEvent?5Management?$FN?5?$FLStart?$FN?5D@
  00008	6a 00		 push	 0
  0000a	c7 46 10 01 00
	00 00		 mov	 DWORD PTR [esi+16], 1
  00011	e8 00 00 00 00	 call	 ?LogAdd@@YAXW4eLogColor@@PADZZ ; LogAdd
  00016	83 c4 08	 add	 esp, 8

; 186  : 	this->EventState=0;

  00019	c6 46 04 00	 mov	 BYTE PTR [esi+4], 0

; 187  : 	this->Start();

  0001d	8b ce		 mov	 ecx, esi
  0001f	5e		 pop	 esi
  00020	e9 00 00 00 00	 jmp	 ?Start@CDragonEvent@@QAEXXZ ; CDragonEvent::Start
?Start_Menual@CDragonEvent@@QAEXXZ ENDP			; CDragonEvent::Start_Menual
_TEXT	ENDS
PUBLIC	?End_Menual@CDragonEvent@@QAEXXZ		; CDragonEvent::End_Menual
; Function compile flags: /Ogtp
;	COMDAT ?End_Menual@CDragonEvent@@QAEXXZ
_TEXT	SEGMENT
?End_Menual@CDragonEvent@@QAEXXZ PROC			; CDragonEvent::End_Menual, COMDAT
; _this$ = ecx

; 192  : 	this->SetMenualStart(FALSE);

  00000	c7 41 10 00 00
	00 00		 mov	 DWORD PTR [ecx+16], 0

; 193  : 	this->End();

  00007	e9 00 00 00 00	 jmp	 ?End@CDragonEvent@@QAEXXZ ; CDragonEvent::End
?End_Menual@CDragonEvent@@QAEXXZ ENDP			; CDragonEvent::End_Menual
_TEXT	ENDS
END
