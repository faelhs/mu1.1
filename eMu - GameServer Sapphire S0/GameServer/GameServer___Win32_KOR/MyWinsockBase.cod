; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	C:\Users\faelhs\mu-1.1\eMu - GameServer Sapphire S0\GameServer\MyWinsockBase.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??1MyWinsockBase@@QAE@XZ			; MyWinsockBase::~MyWinsockBase
EXTRN	__imp__WSACleanup@0:PROC
; Function compile flags: /Ogtp
; File c:\users\faelhs\mu-1.1\emu - gameserver sapphire s0\gameserver\mywinsockbase.cpp
;	COMDAT ??1MyWinsockBase@@QAE@XZ
_TEXT	SEGMENT
??1MyWinsockBase@@QAE@XZ PROC				; MyWinsockBase::~MyWinsockBase, COMDAT
; _this$ = ecx

; 22   : 	WSACleanup();

  00000	ff 25 00 00 00
	00		 jmp	 DWORD PTR __imp__WSACleanup@0
??1MyWinsockBase@@QAE@XZ ENDP				; MyWinsockBase::~MyWinsockBase
_TEXT	ENDS
PUBLIC	??_C@_0BJ@GGDDBEFH@WINSOCK?5?$LJ?v?$MA?$PM?$MA?L?5?$LD?$LH?$LN?$MA?$LE?O?$LE?Y?4?$AA@ ; `string'
PUBLIC	??_C@_0BE@DMEOAPJM@WINSOCK?5?C?J?$LB?b?H?$KN?5?$LP?$KB?$LH?$KP?$AA@ ; `string'
PUBLIC	??_C@_05NAOIJFC@Error?$AA@			; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?Startup@MyWinsockBase@@AAEHXZ			; MyWinsockBase::Startup
EXTRN	__imp__MessageBoxA@16:PROC
EXTRN	__imp__WSAStartup@8:PROC
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
;	COMDAT ??_C@_0BJ@GGDDBEFH@WINSOCK?5?$LJ?v?$MA?$PM?$MA?L?5?$LD?$LH?$LN?$MA?$LE?O?$LE?Y?4?$AA@
CONST	SEGMENT
??_C@_0BJ@GGDDBEFH@WINSOCK?5?$LJ?v?$MA?$PM?$MA?L?5?$LD?$LH?$LN?$MA?$LE?O?$LE?Y?4?$AA@ DB 'W'
	DB	'INSOCK ', 0b9H, 0f6H, 0c0H, 0fcH, 0c0H, 0ccH, ' ', 0b3H, 0b7H
	DB	0bdH, 0c0H, 0b4H, 0cfH, 0b4H, 0d9H, '.', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0BE@DMEOAPJM@WINSOCK?5?C?J?$LB?b?H?$KN?5?$LP?$KB?$LH?$KP?$AA@
CONST	SEGMENT
??_C@_0BE@DMEOAPJM@WINSOCK?5?C?J?$LB?b?H?$KN?5?$LP?$KB?$LH?$KP?$AA@ DB 'W'
	DB	'INSOCK ', 0c3H, 0caH, 0b1H, 0e2H, 0c8H, 0adH, ' ', 0bfH, 0a1H
	DB	0b7H, 0afH, 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_05NAOIJFC@Error?$AA@
CONST	SEGMENT
??_C@_05NAOIJFC@Error?$AA@ DB 'Error', 00H		; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Startup@MyWinsockBase@@AAEHXZ
_TEXT	SEGMENT
_wsaData$ = -404					; size = 400
__$ArrayPad$ = -4					; size = 4
?Startup@MyWinsockBase@@AAEHXZ PROC			; MyWinsockBase::Startup, COMDAT
; _this$ = ecx

; 26   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 94 01 00
	00		 sub	 esp, 404		; 00000194H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi

; 27   : 	WORD wVersionRequested;
; 28   : 	WSADATA wsaData;
; 29   : 	int err;
; 30   : 
; 31   : 	wVersionRequested = WINSOCK_VERSION;
; 32   : 	err=WSAStartup(wVersionRequested, &wsaData);

  00014	8d 85 6c fe ff
	ff		 lea	 eax, DWORD PTR _wsaData$[ebp]
  0001a	50		 push	 eax
  0001b	68 02 02 00 00	 push	 514			; 00000202H
  00020	8b f1		 mov	 esi, ecx
  00022	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSAStartup@8

; 33   : 	
; 34   : 	if ( err != 0 )

  00028	85 c0		 test	 eax, eax
  0002a	74 0e		 je	 SHORT $LN4@Startup

; 35   : 	{
; 36   : 		MessageBox(NULL, "WINSOCK 초기화 에러", "Error", MB_OK|MB_APPLMODAL);

  0002c	6a 00		 push	 0
  0002e	68 00 00 00 00	 push	 OFFSET ??_C@_05NAOIJFC@Error?$AA@
  00033	68 00 00 00 00	 push	 OFFSET ??_C@_0BE@DMEOAPJM@WINSOCK?5?C?J?$LB?b?H?$KN?5?$LP?$KB?$LH?$KP?$AA@

; 37   : 		return FALSE;

  00038	eb 50		 jmp	 SHORT $LN7@Startup
$LN4@Startup:

; 38   : 	}
; 39   : 
; 40   : 	if ( ((wsaData.wVersion &0xFF & 0xFF )   != (2 ) ) || ( ( ((DWORD)wsaData.wVersion >> (DWORD)8) &0xFF )  != (2)) )	// Lacking Some Code Here	It said SAR and is SHR

  0003a	8b 85 6c fe ff
	ff		 mov	 eax, DWORD PTR _wsaData$[ebp]
  00040	3c 02		 cmp	 al, 2
  00042	75 34		 jne	 SHORT $LN2@Startup
  00044	25 00 ff 00 00	 and	 eax, 65280		; 0000ff00H
  00049	3d 00 02 00 00	 cmp	 eax, 512		; 00000200H
  0004e	75 28		 jne	 SHORT $LN2@Startup

; 44   : 		return FALSE;
; 45   : 	}
; 46   : 	else
; 47   : 	{
; 48   : 		this->m_socket = INVALID_SOCKET;
; 49   : 		this->m_iMaxSockets = wsaData.iMaxSockets ;

  00050	0f b7 4d f2	 movzx	 ecx, WORD PTR _wsaData$[ebp+390]
  00054	c7 46 08 ff ff
	ff ff		 mov	 DWORD PTR [esi+8], -1
  0005b	89 0e		 mov	 DWORD PTR [esi], ecx

; 50   : 		this->m_Connect = FALSE;

  0005d	c7 46 14 00 00
	00 00		 mov	 DWORD PTR [esi+20], 0

; 51   : 		return TRUE;

  00064	b8 01 00 00 00	 mov	 eax, 1
  00069	5e		 pop	 esi

; 52   : 	}
; 53   : }

  0006a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0006d	33 cd		 xor	 ecx, ebp
  0006f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00074	8b e5		 mov	 esp, ebp
  00076	5d		 pop	 ebp
  00077	c3		 ret	 0
$LN2@Startup:

; 41   : 	{
; 42   : 		WSACleanup();

  00078	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSACleanup@0

; 43   : 		MessageBox(NULL, "WINSOCK 버전이 낮습니다.", "Error", MB_OK|MB_APPLMODAL);

  0007e	6a 00		 push	 0
  00080	68 00 00 00 00	 push	 OFFSET ??_C@_05NAOIJFC@Error?$AA@
  00085	68 00 00 00 00	 push	 OFFSET ??_C@_0BJ@GGDDBEFH@WINSOCK?5?$LJ?v?$MA?$PM?$MA?L?5?$LD?$LH?$LN?$MA?$LE?O?$LE?Y?4?$AA@
$LN7@Startup:
  0008a	6a 00		 push	 0
  0008c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__MessageBoxA@16

; 52   : 	}
; 53   : }

  00092	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00095	33 cd		 xor	 ecx, ebp
  00097	33 c0		 xor	 eax, eax
  00099	5e		 pop	 esi
  0009a	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0009f	8b e5		 mov	 esp, ebp
  000a1	5d		 pop	 ebp
  000a2	c3		 ret	 0
?Startup@MyWinsockBase@@AAEHXZ ENDP			; MyWinsockBase::Startup
_TEXT	ENDS
PUBLIC	?CreateSocket@MyWinsockBase@@QAEHPAUHWND__@@@Z	; MyWinsockBase::CreateSocket
EXTRN	__imp__socket@12:PROC
; Function compile flags: /Ogtp
;	COMDAT ?CreateSocket@MyWinsockBase@@QAEHPAUHWND__@@@Z
_TEXT	SEGMENT
_hWnd$ = 8						; size = 4
?CreateSocket@MyWinsockBase@@QAEHPAUHWND__@@@Z PROC	; MyWinsockBase::CreateSocket, COMDAT
; _this$ = ecx

; 58   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi

; 59   : 	int size;
; 60   : 	size=4;
; 61   : 
; 62   : 	this->m_socket=socket(AF_INET, SOCK_STREAM, IPPROTO_IP);

  00004	6a 00		 push	 0
  00006	6a 01		 push	 1
  00008	6a 02		 push	 2
  0000a	8b f1		 mov	 esi, ecx
  0000c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__socket@12
  00012	89 46 08	 mov	 DWORD PTR [esi+8], eax

; 63   : 	
; 64   : 	if (this->m_socket == INVALID_SOCKET )

  00015	83 f8 ff	 cmp	 eax, -1
  00018	75 07		 jne	 SHORT $LN1@CreateSock

; 65   : 	{
; 66   : 		return FALSE;

  0001a	33 c0		 xor	 eax, eax
  0001c	5e		 pop	 esi

; 71   : }

  0001d	5d		 pop	 ebp
  0001e	c2 04 00	 ret	 4
$LN1@CreateSock:

; 67   : 	}
; 68   : 
; 69   : 	this->m_hWnd =hWnd;

  00021	8b 45 08	 mov	 eax, DWORD PTR _hWnd$[ebp]
  00024	89 46 04	 mov	 DWORD PTR [esi+4], eax

; 70   : 	return TRUE;

  00027	b8 01 00 00 00	 mov	 eax, 1
  0002c	5e		 pop	 esi

; 71   : }

  0002d	5d		 pop	 ebp
  0002e	c2 04 00	 ret	 4
?CreateSocket@MyWinsockBase@@QAEHPAUHWND__@@@Z ENDP	; MyWinsockBase::CreateSocket
_TEXT	ENDS
PUBLIC	?Close@MyWinsockBase@@QAEHXZ			; MyWinsockBase::Close
EXTRN	__imp__closesocket@4:PROC
; Function compile flags: /Ogtp
;	COMDAT ?Close@MyWinsockBase@@QAEHXZ
_TEXT	SEGMENT
?Close@MyWinsockBase@@QAEHXZ PROC			; MyWinsockBase::Close, COMDAT
; _this$ = ecx

; 75   : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 76   : 	closesocket(this->m_socket );

  00003	8b 46 08	 mov	 eax, DWORD PTR [esi+8]
  00006	50		 push	 eax
  00007	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__closesocket@4

; 77   : 	this->m_socket=INVALID_SOCKET;

  0000d	c7 46 08 ff ff
	ff ff		 mov	 DWORD PTR [esi+8], -1

; 78   : 
; 79   : 	this->m_Connect=FALSE;

  00014	c7 46 14 00 00
	00 00		 mov	 DWORD PTR [esi+20], 0

; 80   : 
; 81   : 	return TRUE;

  0001b	b8 01 00 00 00	 mov	 eax, 1
  00020	5e		 pop	 esi

; 82   : }

  00021	c3		 ret	 0
?Close@MyWinsockBase@@QAEHXZ ENDP			; MyWinsockBase::Close
_TEXT	ENDS
PUBLIC	?Close@MyWinsockBase@@QAEHI@Z			; MyWinsockBase::Close
EXTRN	__imp__shutdown@8:PROC
; Function compile flags: /Ogtp
;	COMDAT ?Close@MyWinsockBase@@QAEHI@Z
_TEXT	SEGMENT
_socket$ = 8						; size = 4
?Close@MyWinsockBase@@QAEHI@Z PROC			; MyWinsockBase::Close, COMDAT
; _this$ = ecx

; 85   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	57		 push	 edi

; 86   : 	shutdown(socket, SD_RECEIVE);

  00005	8b 7d 08	 mov	 edi, DWORD PTR _socket$[ebp]
  00008	6a 00		 push	 0
  0000a	57		 push	 edi
  0000b	8b f1		 mov	 esi, ecx
  0000d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__shutdown@8

; 87   : 	closesocket(socket);

  00013	57		 push	 edi
  00014	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__closesocket@4
  0001a	5f		 pop	 edi

; 88   : 
; 89   : 	this->m_socket=INVALID_SOCKET;

  0001b	c7 46 08 ff ff
	ff ff		 mov	 DWORD PTR [esi+8], -1

; 90   : 	this->m_Connect =FALSE;

  00022	c7 46 14 00 00
	00 00		 mov	 DWORD PTR [esi+20], 0

; 91   : 	return TRUE;

  00029	b8 01 00 00 00	 mov	 eax, 1
  0002e	5e		 pop	 esi

; 92   : }

  0002f	5d		 pop	 ebp
  00030	c2 04 00	 ret	 4
?Close@MyWinsockBase@@QAEHI@Z ENDP			; MyWinsockBase::Close
_TEXT	ENDS
PUBLIC	?Close2@MyWinsockBase@@QAEHI@Z			; MyWinsockBase::Close2
; Function compile flags: /Ogtp
;	COMDAT ?Close2@MyWinsockBase@@QAEHI@Z
_TEXT	SEGMENT
_socket$ = 8						; size = 4
?Close2@MyWinsockBase@@QAEHI@Z PROC			; MyWinsockBase::Close2, COMDAT
; _this$ = ecx

; 95   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx

; 96   : 	shutdown(this->m_socket , SD_SEND);

  00006	8b 46 08	 mov	 eax, DWORD PTR [esi+8]
  00009	6a 01		 push	 1
  0000b	50		 push	 eax
  0000c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__shutdown@8

; 97   : 	closesocket(socket);

  00012	8b 4d 08	 mov	 ecx, DWORD PTR _socket$[ebp]
  00015	51		 push	 ecx
  00016	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__closesocket@4

; 98   : 
; 99   : 	this->m_socket=INVALID_SOCKET;

  0001c	c7 46 08 ff ff
	ff ff		 mov	 DWORD PTR [esi+8], -1

; 100  : 	this->m_Connect=0;

  00023	c7 46 14 00 00
	00 00		 mov	 DWORD PTR [esi+20], 0

; 101  : 	return 1;

  0002a	b8 01 00 00 00	 mov	 eax, 1
  0002f	5e		 pop	 esi

; 102  : }

  00030	5d		 pop	 ebp
  00031	c2 04 00	 ret	 4
?Close2@MyWinsockBase@@QAEHI@Z ENDP			; MyWinsockBase::Close2
_TEXT	ENDS
PUBLIC	?GetSocket@MyWinsockBase@@QAEIXZ		; MyWinsockBase::GetSocket
; Function compile flags: /Ogtp
;	COMDAT ?GetSocket@MyWinsockBase@@QAEIXZ
_TEXT	SEGMENT
?GetSocket@MyWinsockBase@@QAEIXZ PROC			; MyWinsockBase::GetSocket, COMDAT
; _this$ = ecx

; 107  : 	return this->m_socket;

  00000	8b 41 08	 mov	 eax, DWORD PTR [ecx+8]

; 108  : }

  00003	c3		 ret	 0
?GetSocket@MyWinsockBase@@QAEIXZ ENDP			; MyWinsockBase::GetSocket
_TEXT	ENDS
PUBLIC	?GetRecvBuffSize@MyWinsockBase@@QAEHXZ		; MyWinsockBase::GetRecvBuffSize
; Function compile flags: /Ogtp
;	COMDAT ?GetRecvBuffSize@MyWinsockBase@@QAEHXZ
_TEXT	SEGMENT
?GetRecvBuffSize@MyWinsockBase@@QAEHXZ PROC		; MyWinsockBase::GetRecvBuffSize, COMDAT
; _this$ = ecx

; 112  : 	return this->m_recvbufsize;

  00000	8b 41 10	 mov	 eax, DWORD PTR [ecx+16]

; 113  : }

  00003	c3		 ret	 0
?GetRecvBuffSize@MyWinsockBase@@QAEHXZ ENDP		; MyWinsockBase::GetRecvBuffSize
_TEXT	ENDS
PUBLIC	?GetSendBuffSize@MyWinsockBase@@QAEHXZ		; MyWinsockBase::GetSendBuffSize
; Function compile flags: /Ogtp
;	COMDAT ?GetSendBuffSize@MyWinsockBase@@QAEHXZ
_TEXT	SEGMENT
?GetSendBuffSize@MyWinsockBase@@QAEHXZ PROC		; MyWinsockBase::GetSendBuffSize, COMDAT
; _this$ = ecx

; 118  : 	return this->m_sendbufsize;

  00000	8b 41 0c	 mov	 eax, DWORD PTR [ecx+12]

; 119  : }

  00003	c3		 ret	 0
?GetSendBuffSize@MyWinsockBase@@QAEHXZ ENDP		; MyWinsockBase::GetSendBuffSize
_TEXT	ENDS
PUBLIC	?GetConnect@MyWinsockBase@@QAEHXZ		; MyWinsockBase::GetConnect
; Function compile flags: /Ogtp
;	COMDAT ?GetConnect@MyWinsockBase@@QAEHXZ
_TEXT	SEGMENT
?GetConnect@MyWinsockBase@@QAEHXZ PROC			; MyWinsockBase::GetConnect, COMDAT
; _this$ = ecx

; 124  : 	return this->m_Connect;

  00000	8b 41 14	 mov	 eax, DWORD PTR [ecx+20]

; 125  : }

  00003	c3		 ret	 0
?GetConnect@MyWinsockBase@@QAEHXZ ENDP			; MyWinsockBase::GetConnect
_TEXT	ENDS
PUBLIC	?SetConnect@MyWinsockBase@@QAEXH@Z		; MyWinsockBase::SetConnect
; Function compile flags: /Ogtp
;	COMDAT ?SetConnect@MyWinsockBase@@QAEXH@Z
_TEXT	SEGMENT
_connected$ = 8						; size = 4
?SetConnect@MyWinsockBase@@QAEXH@Z PROC			; MyWinsockBase::SetConnect, COMDAT
; _this$ = ecx

; 130  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 131  : 	this->m_Connect = connected;

  00003	8b 45 08	 mov	 eax, DWORD PTR _connected$[ebp]
  00006	89 41 14	 mov	 DWORD PTR [ecx+20], eax

; 132  : }

  00009	5d		 pop	 ebp
  0000a	c2 04 00	 ret	 4
?SetConnect@MyWinsockBase@@QAEXH@Z ENDP			; MyWinsockBase::SetConnect
_TEXT	ENDS
PUBLIC	??0MyWinsockBase@@QAE@XZ			; MyWinsockBase::MyWinsockBase
; Function compile flags: /Ogtp
;	COMDAT ??0MyWinsockBase@@QAE@XZ
_TEXT	SEGMENT
??0MyWinsockBase@@QAE@XZ PROC				; MyWinsockBase::MyWinsockBase, COMDAT
; _this$ = ecx

; 14   : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 15   : 	this->m_socket = INVALID_SOCKET;

  00003	c7 46 08 ff ff
	ff ff		 mov	 DWORD PTR [esi+8], -1

; 16   : 	this->Startup();

  0000a	e8 00 00 00 00	 call	 ?Startup@MyWinsockBase@@AAEHXZ ; MyWinsockBase::Startup

; 17   : }

  0000f	8b c6		 mov	 eax, esi
  00011	5e		 pop	 esi
  00012	c3		 ret	 0
??0MyWinsockBase@@QAE@XZ ENDP				; MyWinsockBase::MyWinsockBase
_TEXT	ENDS
END
